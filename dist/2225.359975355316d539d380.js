"use strict";(self.webpackChunkgear3engine_website=self.webpackChunkgear3engine_website||[]).push([[2225],{2225:(t,e,r)=>{var i=r(5307),n=r(9038),o=r(5662),s=function(t,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},s(t,e)};!function(t){function e(e,r){void 0===r&&(r=!0);var n=t.call(this,e[0]instanceof i.xE?e[0]:e[0].texture)||this;return n._textures=null,n._durations=null,n._autoUpdate=r,n._isConnectedToTicker=!1,n.animationSpeed=1,n.loop=!0,n.updateAnchor=!1,n.onComplete=null,n.onFrameChange=null,n.onLoop=null,n._currentTime=0,n._playing=!1,n._previousFrame=null,n.textures=e,n}(function(t,e){function r(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)})(e,t),e.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(o.vB.shared.remove(this.update,this),this._isConnectedToTicker=!1))},e.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(o.vB.shared.add(this.update,this,o.uF.HIGH),this._isConnectedToTicker=!0))},e.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){if(this._playing){var e=this.animationSpeed*t,r=this.currentFrame;if(null!==this._durations){var i=this._currentTime%1*this._durations[this.currentFrame];for(i+=e/60*1e3;i<0;)this._currentTime--,i+=this._durations[this.currentFrame];var n=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);i>=this._durations[this.currentFrame];)i-=this._durations[this.currentFrame]*n,this._currentTime+=n;this._currentTime+=i/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):r!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<r||this.animationSpeed<0&&this.currentFrame>r)&&this.onLoop(),this.updateTexture())}},e.prototype.updateTexture=function(){var t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},e.prototype.destroy=function(e){this.stop(),t.prototype.destroy.call(this,e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},e.fromFrames=function(t){for(var r=[],n=0;n<t.length;++n)r.push(i.xE.from(t[n]));return new e(r)},e.fromImages=function(t){for(var r=[],n=0;n<t.length;++n)r.push(i.xE.from(t[n]));return new e(r)},Object.defineProperty(e.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textures",{get:function(){return this._textures},set:function(t){if(t[0]instanceof i.xE)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentFrame",{get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(o.vB.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(o.vB.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0})}(n.j)}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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NkIsWUFBWSxFQUNaQyxjQUFjLElBRWxCckUsT0FBT2tFLGVBQWUzRCxFQUFlc0IsVUFBVyxlQUFnQixDQU81RHNDLElBQUssV0FDRCxJQUFJN0IsRUFBZU8sS0FBS0MsTUFBTWxDLEtBQUtZLGNBQWdCWixLQUFLRSxVQUFVaUMsT0FJbEUsT0FISVQsRUFBZSxJQUNmQSxHQUFnQjFCLEtBQUtFLFVBQVVpQyxRQUU1QlQsQ0FDWCxFQUNBOEIsWUFBWSxFQUNaQyxjQUFjLElBRWxCckUsT0FBT2tFLGVBQWUzRCxFQUFlc0IsVUFBVyxVQUFXLENBT3ZEc0MsSUFBSyxXQUNELE9BQU92RCxLQUFLYSxRQUNoQixFQUNBMkMsWUFBWSxFQUNaQyxjQUFjLElBRWxCckUsT0FBT2tFLGVBQWUzRCxFQUFlc0IsVUFBVyxhQUFjLENBTTFEc0MsSUFBSyxXQUNELE9BQU92RCxLQUFLSSxXQUNoQixFQUNBc0QsSUFBSyxTQUFVQyxHQUNQQSxJQUFVM0QsS0FBS0ksY0FDZkosS0FBS0ksWUFBY3VELEdBQ2QzRCxLQUFLSSxhQUFlSixLQUFLSyxzQkFDMUIsbUJBQXFCTCxLQUFLcUIsT0FBUXJCLE1BQ2xDQSxLQUFLSyxzQkFBdUIsR0FFdkJMLEtBQUtJLGNBQWdCSixLQUFLSyxzQkFBd0JMLEtBQUthLFdBQzVELGdCQUFrQmIsS0FBS3FCLE9BQVFyQixNQUMvQkEsS0FBS0ssc0JBQXVCLEdBR3hDLEVBQ0FtRCxZQUFZLEVBQ1pDLGNBQWMsR0FHdEIsQ0FuWW1DLENBbVlqQyxJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ2VhcjNlbmdpbmUtd2Vic2l0ZS8uL25vZGVfbW9kdWxlcy9AcGl4aS9zcHJpdGUtYW5pbWF0ZWQvbGliL3Nwcml0ZS1hbmltYXRlZC5lcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIEBwaXhpL3Nwcml0ZS1hbmltYXRlZCAtIHY1LjMuMTJcbiAqIENvbXBpbGVkIFdlZCwgMjMgTWFyIDIwMjIgMTg6MzQ6MjggVVRDXG4gKlxuICogQHBpeGkvc3ByaXRlLWFuaW1hdGVkIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2VcbiAqL1xuaW1wb3J0IHsgVGV4dHVyZSB9IGZyb20gJ0BwaXhpL2NvcmUnO1xuaW1wb3J0IHsgU3ByaXRlIH0gZnJvbSAnQHBpeGkvc3ByaXRlJztcbmltcG9ydCB7IFRpY2tlciwgVVBEQVRFX1BSSU9SSVRZIH0gZnJvbSAnQHBpeGkvdGlja2VyJztcblxuLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2VcclxudGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGVcclxuTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuXHJcblRISVMgQ09ERSBJUyBQUk9WSURFRCBPTiBBTiAqQVMgSVMqIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuS0lORCwgRUlUSEVSIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIFdJVEhPVVQgTElNSVRBVElPTiBBTlkgSU1QTElFRFxyXG5XQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgVElUTEUsIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLFxyXG5NRVJDSEFOVEFCTElUWSBPUiBOT04tSU5GUklOR0VNRU5ULlxyXG5cclxuU2VlIHRoZSBBcGFjaGUgVmVyc2lvbiAyLjAgTGljZW5zZSBmb3Igc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zXHJcbmFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIHsgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIHsgZFtwXSA9IGJbcF07IH0gfSB9O1xyXG4gICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbn07XHJcblxyXG5mdW5jdGlvbiBfX2V4dGVuZHMoZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59XG5cbi8qKlxuICogQW4gQW5pbWF0ZWRTcHJpdGUgaXMgYSBzaW1wbGUgd2F5IHRvIGRpc3BsYXkgYW4gYW5pbWF0aW9uIGRlcGljdGVkIGJ5IGEgbGlzdCBvZiB0ZXh0dXJlcy5cbiAqXG4gKiBgYGBqc1xuICogbGV0IGFsaWVuSW1hZ2VzID0gW1wiaW1hZ2Vfc2VxdWVuY2VfMDEucG5nXCIsXCJpbWFnZV9zZXF1ZW5jZV8wMi5wbmdcIixcImltYWdlX3NlcXVlbmNlXzAzLnBuZ1wiLFwiaW1hZ2Vfc2VxdWVuY2VfMDQucG5nXCJdO1xuICogbGV0IHRleHR1cmVBcnJheSA9IFtdO1xuICpcbiAqIGZvciAobGV0IGk9MDsgaSA8IDQ7IGkrKylcbiAqIHtcbiAqICAgICAgbGV0IHRleHR1cmUgPSBQSVhJLlRleHR1cmUuZnJvbShhbGllbkltYWdlc1tpXSk7XG4gKiAgICAgIHRleHR1cmVBcnJheS5wdXNoKHRleHR1cmUpO1xuICogfTtcbiAqXG4gKiBsZXQgYW5pbWF0ZWRTcHJpdGUgPSBuZXcgUElYSS5BbmltYXRlZFNwcml0ZSh0ZXh0dXJlQXJyYXkpO1xuICogYGBgXG4gKlxuICogVGhlIG1vcmUgZWZmaWNpZW50IGFuZCBzaW1wbGVyIHdheSB0byBjcmVhdGUgYW4gYW5pbWF0ZWQgc3ByaXRlIGlzIHVzaW5nIGEge0BsaW5rIFBJWEkuU3ByaXRlc2hlZXR9XG4gKiBjb250YWluaW5nIHRoZSBhbmltYXRpb24gZGVmaW5pdGlvbnM6XG4gKlxuICogYGBganNcbiAqIFBJWEkuTG9hZGVyLnNoYXJlZC5hZGQoXCJhc3NldHMvc3ByaXRlc2hlZXQuanNvblwiKS5sb2FkKHNldHVwKTtcbiAqXG4gKiBmdW5jdGlvbiBzZXR1cCgpIHtcbiAqICAgbGV0IHNoZWV0ID0gUElYSS5Mb2FkZXIuc2hhcmVkLnJlc291cmNlc1tcImFzc2V0cy9zcHJpdGVzaGVldC5qc29uXCJdLnNwcml0ZXNoZWV0O1xuICogICBhbmltYXRlZFNwcml0ZSA9IG5ldyBQSVhJLkFuaW1hdGVkU3ByaXRlKHNoZWV0LmFuaW1hdGlvbnNbXCJpbWFnZV9zZXF1ZW5jZVwiXSk7XG4gKiAgIC4uLlxuICogfVxuICogYGBgXG4gKlxuICogQGNsYXNzXG4gKiBAZXh0ZW5kcyBQSVhJLlNwcml0ZVxuICogQG1lbWJlcm9mIFBJWElcbiAqL1xudmFyIEFuaW1hdGVkU3ByaXRlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhBbmltYXRlZFNwcml0ZSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1BJWEkuVGV4dHVyZVtdfFBJWEkuQW5pbWF0ZWRTcHJpdGUuRnJhbWVPYmplY3RbXX0gdGV4dHVyZXMgLSBBbiBhcnJheSBvZiB7QGxpbmsgUElYSS5UZXh0dXJlfSBvciBmcmFtZVxuICAgICAqICBvYmplY3RzIHRoYXQgbWFrZSB1cCB0aGUgYW5pbWF0aW9uLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2F1dG9VcGRhdGU9dHJ1ZV0gLSBXaGV0aGVyIHRvIHVzZSBQSVhJLlRpY2tlci5zaGFyZWQgdG8gYXV0byB1cGRhdGUgYW5pbWF0aW9uIHRpbWUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gQW5pbWF0ZWRTcHJpdGUodGV4dHVyZXMsIGF1dG9VcGRhdGUpIHtcbiAgICAgICAgaWYgKGF1dG9VcGRhdGUgPT09IHZvaWQgMCkgeyBhdXRvVXBkYXRlID0gdHJ1ZTsgfVxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB0ZXh0dXJlc1swXSBpbnN0YW5jZW9mIFRleHR1cmUgPyB0ZXh0dXJlc1swXSA6IHRleHR1cmVzWzBdLnRleHR1cmUpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7UElYSS5UZXh0dXJlW119XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5fdGV4dHVyZXMgPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge251bWJlcltdfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuX2R1cmF0aW9ucyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBgdHJ1ZWAgdXNlcyBQSVhJLlRpY2tlci5zaGFyZWQgdG8gYXV0byB1cGRhdGUgYW5pbWF0aW9uIHRpbWUuXG4gICAgICAgICAqXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKiBAZGVmYXVsdCB0cnVlXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5fYXV0b1VwZGF0ZSA9IGF1dG9VcGRhdGU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBgdHJ1ZWAgaWYgdGhlIGluc3RhbmNlIGlzIGN1cnJlbnRseSBjb25uZWN0ZWQgdG8gUElYSS5UaWNrZXIuc2hhcmVkIHRvIGF1dG8gdXBkYXRlIGFuaW1hdGlvbiB0aW1lLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICogQGRlZmF1bHQgZmFsc2VcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLl9pc0Nvbm5lY3RlZFRvVGlja2VyID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgc3BlZWQgdGhhdCB0aGUgQW5pbWF0ZWRTcHJpdGUgd2lsbCBwbGF5IGF0LiBIaWdoZXIgaXMgZmFzdGVyLCBsb3dlciBpcyBzbG93ZXIuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQGRlZmF1bHQgMVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuYW5pbWF0aW9uU3BlZWQgPSAxO1xuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciBvciBub3QgdGhlIGFuaW1hdGUgc3ByaXRlIHJlcGVhdHMgYWZ0ZXIgcGxheWluZy5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7Ym9vbGVhbn1cbiAgICAgICAgICogQGRlZmF1bHQgdHJ1ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubG9vcCA9IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBVcGRhdGUgYW5jaG9yIHRvIFtUZXh0dXJlJ3MgZGVmYXVsdEFuY2hvcl17QGxpbmsgUElYSS5UZXh0dXJlI2RlZmF1bHRBbmNob3J9IHdoZW4gZnJhbWUgY2hhbmdlcy5cbiAgICAgICAgICpcbiAgICAgICAgICogVXNlZnVsIHdpdGggW3Nwcml0ZSBzaGVldCBhbmltYXRpb25zXXtAbGluayBQSVhJLlNwcml0ZXNoZWV0I2FuaW1hdGlvbnN9IGNyZWF0ZWQgd2l0aCB0b29scy5cbiAgICAgICAgICogQ2hhbmdpbmcgYW5jaG9yIGZvciBlYWNoIGZyYW1lIGFsbG93cyB0byBwaW4gc3ByaXRlIG9yaWdpbiB0byBjZXJ0YWluIG1vdmluZyBmZWF0dXJlXG4gICAgICAgICAqIG9mIHRoZSBmcmFtZSAoZS5nLiBsZWZ0IGZvb3QpLlxuICAgICAgICAgKlxuICAgICAgICAgKiBOb3RlOiBFbmFibGluZyB0aGlzIHdpbGwgb3ZlcnJpZGUgYW55IHByZXZpb3VzbHkgc2V0IGBhbmNob3JgIG9uIGVhY2ggZnJhbWUgY2hhbmdlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtib29sZWFufVxuICAgICAgICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudXBkYXRlQW5jaG9yID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBVc2VyLWFzc2lnbmVkIGZ1bmN0aW9uIHRvIGNhbGwgd2hlbiBhbiBBbmltYXRlZFNwcml0ZSBmaW5pc2hlcyBwbGF5aW5nLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZXhhbXBsZVxuICAgICAgICAgKiBhbmltYXRpb24ub25Db21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICogICAvLyBmaW5pc2hlZCFcbiAgICAgICAgICogfTtcbiAgICAgICAgICogQG1lbWJlciB7RnVuY3Rpb259XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vbkNvbXBsZXRlID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFVzZXItYXNzaWduZWQgZnVuY3Rpb24gdG8gY2FsbCB3aGVuIGFuIEFuaW1hdGVkU3ByaXRlIGNoYW5nZXMgd2hpY2ggdGV4dHVyZSBpcyBiZWluZyByZW5kZXJlZC5cbiAgICAgICAgICpcbiAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICogYW5pbWF0aW9uLm9uRnJhbWVDaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAqICAgLy8gdXBkYXRlZCFcbiAgICAgICAgICogfTtcbiAgICAgICAgICogQG1lbWJlciB7RnVuY3Rpb259XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vbkZyYW1lQ2hhbmdlID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFVzZXItYXNzaWduZWQgZnVuY3Rpb24gdG8gY2FsbCB3aGVuIGBsb29wYCBpcyB0cnVlLCBhbmQgYW4gQW5pbWF0ZWRTcHJpdGUgaXMgcGxheWVkIGFuZFxuICAgICAgICAgKiBsb29wcyBhcm91bmQgdG8gc3RhcnQgYWdhaW4uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBleGFtcGxlXG4gICAgICAgICAqIGFuaW1hdGlvbi5vbkxvb3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAqICAgLy8gbG9vcGVkIVxuICAgICAgICAgKiB9O1xuICAgICAgICAgKiBAbWVtYmVyIHtGdW5jdGlvbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9uTG9vcCA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFbGFwc2VkIHRpbWUgc2luY2UgYW5pbWF0aW9uIGhhcyBiZWVuIHN0YXJ0ZWQsIHVzZWQgaW50ZXJuYWxseSB0byBkaXNwbGF5IGN1cnJlbnQgdGV4dHVyZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuX2N1cnJlbnRUaW1lID0gMDtcbiAgICAgICAgX3RoaXMuX3BsYXlpbmcgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB0ZXh0dXJlIGluZGV4IHRoYXQgd2FzIGRpc3BsYXllZCBsYXN0IHRpbWVcbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuX3ByZXZpb3VzRnJhbWUgPSBudWxsO1xuICAgICAgICBfdGhpcy50ZXh0dXJlcyA9IHRleHR1cmVzO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0b3BzIHRoZSBBbmltYXRlZFNwcml0ZS5cbiAgICAgKlxuICAgICAqL1xuICAgIEFuaW1hdGVkU3ByaXRlLnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuX3BsYXlpbmcpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9wbGF5aW5nID0gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLl9hdXRvVXBkYXRlICYmIHRoaXMuX2lzQ29ubmVjdGVkVG9UaWNrZXIpIHtcbiAgICAgICAgICAgIFRpY2tlci5zaGFyZWQucmVtb3ZlKHRoaXMudXBkYXRlLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuX2lzQ29ubmVjdGVkVG9UaWNrZXIgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogUGxheXMgdGhlIEFuaW1hdGVkU3ByaXRlLlxuICAgICAqXG4gICAgICovXG4gICAgQW5pbWF0ZWRTcHJpdGUucHJvdG90eXBlLnBsYXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLl9wbGF5aW5nKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcGxheWluZyA9IHRydWU7XG4gICAgICAgIGlmICh0aGlzLl9hdXRvVXBkYXRlICYmICF0aGlzLl9pc0Nvbm5lY3RlZFRvVGlja2VyKSB7XG4gICAgICAgICAgICBUaWNrZXIuc2hhcmVkLmFkZCh0aGlzLnVwZGF0ZSwgdGhpcywgVVBEQVRFX1BSSU9SSVRZLkhJR0gpO1xuICAgICAgICAgICAgdGhpcy5faXNDb25uZWN0ZWRUb1RpY2tlciA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFN0b3BzIHRoZSBBbmltYXRlZFNwcml0ZSBhbmQgZ29lcyB0byBhIHNwZWNpZmljIGZyYW1lLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGZyYW1lTnVtYmVyIC0gRnJhbWUgaW5kZXggdG8gc3RvcCBhdC5cbiAgICAgKi9cbiAgICBBbmltYXRlZFNwcml0ZS5wcm90b3R5cGUuZ290b0FuZFN0b3AgPSBmdW5jdGlvbiAoZnJhbWVOdW1iZXIpIHtcbiAgICAgICAgdGhpcy5zdG9wKCk7XG4gICAgICAgIHZhciBwcmV2aW91c0ZyYW1lID0gdGhpcy5jdXJyZW50RnJhbWU7XG4gICAgICAgIHRoaXMuX2N1cnJlbnRUaW1lID0gZnJhbWVOdW1iZXI7XG4gICAgICAgIGlmIChwcmV2aW91c0ZyYW1lICE9PSB0aGlzLmN1cnJlbnRGcmFtZSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVUZXh0dXJlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdvZXMgdG8gYSBzcGVjaWZpYyBmcmFtZSBhbmQgYmVnaW5zIHBsYXlpbmcgdGhlIEFuaW1hdGVkU3ByaXRlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGZyYW1lTnVtYmVyIC0gRnJhbWUgaW5kZXggdG8gc3RhcnQgYXQuXG4gICAgICovXG4gICAgQW5pbWF0ZWRTcHJpdGUucHJvdG90eXBlLmdvdG9BbmRQbGF5ID0gZnVuY3Rpb24gKGZyYW1lTnVtYmVyKSB7XG4gICAgICAgIHZhciBwcmV2aW91c0ZyYW1lID0gdGhpcy5jdXJyZW50RnJhbWU7XG4gICAgICAgIHRoaXMuX2N1cnJlbnRUaW1lID0gZnJhbWVOdW1iZXI7XG4gICAgICAgIGlmIChwcmV2aW91c0ZyYW1lICE9PSB0aGlzLmN1cnJlbnRGcmFtZSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVUZXh0dXJlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wbGF5KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBvYmplY3QgdHJhbnNmb3JtIGZvciByZW5kZXJpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGVsdGFUaW1lIC0gVGltZSBzaW5jZSBsYXN0IHRpY2suXG4gICAgICovXG4gICAgQW5pbWF0ZWRTcHJpdGUucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChkZWx0YVRpbWUpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9wbGF5aW5nKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGVsYXBzZWQgPSB0aGlzLmFuaW1hdGlvblNwZWVkICogZGVsdGFUaW1lO1xuICAgICAgICB2YXIgcHJldmlvdXNGcmFtZSA9IHRoaXMuY3VycmVudEZyYW1lO1xuICAgICAgICBpZiAodGhpcy5fZHVyYXRpb25zICE9PSBudWxsKSB7XG4gICAgICAgICAgICB2YXIgbGFnID0gdGhpcy5fY3VycmVudFRpbWUgJSAxICogdGhpcy5fZHVyYXRpb25zW3RoaXMuY3VycmVudEZyYW1lXTtcbiAgICAgICAgICAgIGxhZyArPSBlbGFwc2VkIC8gNjAgKiAxMDAwO1xuICAgICAgICAgICAgd2hpbGUgKGxhZyA8IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jdXJyZW50VGltZS0tO1xuICAgICAgICAgICAgICAgIGxhZyArPSB0aGlzLl9kdXJhdGlvbnNbdGhpcy5jdXJyZW50RnJhbWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHNpZ24gPSBNYXRoLnNpZ24odGhpcy5hbmltYXRpb25TcGVlZCAqIGRlbHRhVGltZSk7XG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50VGltZSA9IE1hdGguZmxvb3IodGhpcy5fY3VycmVudFRpbWUpO1xuICAgICAgICAgICAgd2hpbGUgKGxhZyA+PSB0aGlzLl9kdXJhdGlvbnNbdGhpcy5jdXJyZW50RnJhbWVdKSB7XG4gICAgICAgICAgICAgICAgbGFnIC09IHRoaXMuX2R1cmF0aW9uc1t0aGlzLmN1cnJlbnRGcmFtZV0gKiBzaWduO1xuICAgICAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRUaW1lICs9IHNpZ247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50VGltZSArPSBsYWcgLyB0aGlzLl9kdXJhdGlvbnNbdGhpcy5jdXJyZW50RnJhbWVdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fY3VycmVudFRpbWUgKz0gZWxhcHNlZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fY3VycmVudFRpbWUgPCAwICYmICF0aGlzLmxvb3ApIHtcbiAgICAgICAgICAgIHRoaXMuZ290b0FuZFN0b3AoMCk7XG4gICAgICAgICAgICBpZiAodGhpcy5vbkNvbXBsZXRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkNvbXBsZXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5fY3VycmVudFRpbWUgPj0gdGhpcy5fdGV4dHVyZXMubGVuZ3RoICYmICF0aGlzLmxvb3ApIHtcbiAgICAgICAgICAgIHRoaXMuZ290b0FuZFN0b3AodGhpcy5fdGV4dHVyZXMubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICBpZiAodGhpcy5vbkNvbXBsZXRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkNvbXBsZXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocHJldmlvdXNGcmFtZSAhPT0gdGhpcy5jdXJyZW50RnJhbWUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmxvb3AgJiYgdGhpcy5vbkxvb3ApIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hbmltYXRpb25TcGVlZCA+IDAgJiYgdGhpcy5jdXJyZW50RnJhbWUgPCBwcmV2aW91c0ZyYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25Mb29wKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuYW5pbWF0aW9uU3BlZWQgPCAwICYmIHRoaXMuY3VycmVudEZyYW1lID4gcHJldmlvdXNGcmFtZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uTG9vcCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudXBkYXRlVGV4dHVyZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBkaXNwbGF5ZWQgdGV4dHVyZSB0byBtYXRjaCB0aGUgY3VycmVudCBmcmFtZSBpbmRleC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgQW5pbWF0ZWRTcHJpdGUucHJvdG90eXBlLnVwZGF0ZVRleHR1cmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjdXJyZW50RnJhbWUgPSB0aGlzLmN1cnJlbnRGcmFtZTtcbiAgICAgICAgaWYgKHRoaXMuX3ByZXZpb3VzRnJhbWUgPT09IGN1cnJlbnRGcmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3ByZXZpb3VzRnJhbWUgPSBjdXJyZW50RnJhbWU7XG4gICAgICAgIHRoaXMuX3RleHR1cmUgPSB0aGlzLl90ZXh0dXJlc1tjdXJyZW50RnJhbWVdO1xuICAgICAgICB0aGlzLl90ZXh0dXJlSUQgPSAtMTtcbiAgICAgICAgdGhpcy5fdGV4dHVyZVRyaW1tZWRJRCA9IC0xO1xuICAgICAgICB0aGlzLl9jYWNoZWRUaW50ID0gMHhGRkZGRkY7XG4gICAgICAgIHRoaXMudXZzID0gdGhpcy5fdGV4dHVyZS5fdXZzLnV2c0Zsb2F0MzI7XG4gICAgICAgIGlmICh0aGlzLnVwZGF0ZUFuY2hvcikge1xuICAgICAgICAgICAgdGhpcy5fYW5jaG9yLmNvcHlGcm9tKHRoaXMuX3RleHR1cmUuZGVmYXVsdEFuY2hvcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMub25GcmFtZUNoYW5nZSkge1xuICAgICAgICAgICAgdGhpcy5vbkZyYW1lQ2hhbmdlKHRoaXMuY3VycmVudEZyYW1lKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogU3RvcHMgdGhlIEFuaW1hdGVkU3ByaXRlIGFuZCBkZXN0cm95cyBpdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fGJvb2xlYW59IFtvcHRpb25zXSAtIE9wdGlvbnMgcGFyYW1ldGVyLiBBIGJvb2xlYW4gd2lsbCBhY3QgYXMgaWYgYWxsIG9wdGlvbnNcbiAgICAgKiAgaGF2ZSBiZWVuIHNldCB0byB0aGF0IHZhbHVlLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuY2hpbGRyZW49ZmFsc2VdIC0gSWYgc2V0IHRvIHRydWUsIGFsbCB0aGUgY2hpbGRyZW4gd2lsbCBoYXZlIHRoZWlyIGRlc3Ryb3lcbiAgICAgKiAgICAgIG1ldGhvZCBjYWxsZWQgYXMgd2VsbC4gJ29wdGlvbnMnIHdpbGwgYmUgcGFzc2VkIG9uIHRvIHRob3NlIGNhbGxzLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMudGV4dHVyZT1mYWxzZV0gLSBTaG91bGQgaXQgZGVzdHJveSB0aGUgY3VycmVudCB0ZXh0dXJlIG9mIHRoZSBzcHJpdGUgYXMgd2VsbC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmJhc2VUZXh0dXJlPWZhbHNlXSAtIFNob3VsZCBpdCBkZXN0cm95IHRoZSBiYXNlIHRleHR1cmUgb2YgdGhlIHNwcml0ZSBhcyB3ZWxsLlxuICAgICAqL1xuICAgIEFuaW1hdGVkU3ByaXRlLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5zdG9wKCk7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuZGVzdHJveS5jYWxsKHRoaXMsIG9wdGlvbnMpO1xuICAgICAgICB0aGlzLm9uQ29tcGxldGUgPSBudWxsO1xuICAgICAgICB0aGlzLm9uRnJhbWVDaGFuZ2UgPSBudWxsO1xuICAgICAgICB0aGlzLm9uTG9vcCA9IG51bGw7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBIHNob3J0IGhhbmQgd2F5IG9mIGNyZWF0aW5nIGFuIEFuaW1hdGVkU3ByaXRlIGZyb20gYW4gYXJyYXkgb2YgZnJhbWUgaWRzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nW119IGZyYW1lcyAtIFRoZSBhcnJheSBvZiBmcmFtZXMgaWRzIHRoZSBBbmltYXRlZFNwcml0ZSB3aWxsIHVzZSBhcyBpdHMgdGV4dHVyZSBmcmFtZXMuXG4gICAgICogQHJldHVybiB7UElYSS5BbmltYXRlZFNwcml0ZX0gVGhlIG5ldyBhbmltYXRlZCBzcHJpdGUgd2l0aCB0aGUgc3BlY2lmaWVkIGZyYW1lcy5cbiAgICAgKi9cbiAgICBBbmltYXRlZFNwcml0ZS5mcm9tRnJhbWVzID0gZnVuY3Rpb24gKGZyYW1lcykge1xuICAgICAgICB2YXIgdGV4dHVyZXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmcmFtZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHRleHR1cmVzLnB1c2goVGV4dHVyZS5mcm9tKGZyYW1lc1tpXSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgQW5pbWF0ZWRTcHJpdGUodGV4dHVyZXMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQSBzaG9ydCBoYW5kIHdheSBvZiBjcmVhdGluZyBhbiBBbmltYXRlZFNwcml0ZSBmcm9tIGFuIGFycmF5IG9mIGltYWdlIGlkcy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBpbWFnZXMgLSBUaGUgYXJyYXkgb2YgaW1hZ2UgdXJscyB0aGUgQW5pbWF0ZWRTcHJpdGUgd2lsbCB1c2UgYXMgaXRzIHRleHR1cmUgZnJhbWVzLlxuICAgICAqIEByZXR1cm4ge1BJWEkuQW5pbWF0ZWRTcHJpdGV9IFRoZSBuZXcgYW5pbWF0ZSBzcHJpdGUgd2l0aCB0aGUgc3BlY2lmaWVkIGltYWdlcyBhcyBmcmFtZXMuXG4gICAgICovXG4gICAgQW5pbWF0ZWRTcHJpdGUuZnJvbUltYWdlcyA9IGZ1bmN0aW9uIChpbWFnZXMpIHtcbiAgICAgICAgdmFyIHRleHR1cmVzID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW1hZ2VzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB0ZXh0dXJlcy5wdXNoKFRleHR1cmUuZnJvbShpbWFnZXNbaV0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IEFuaW1hdGVkU3ByaXRlKHRleHR1cmVzKTtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBbmltYXRlZFNwcml0ZS5wcm90b3R5cGUsIFwidG90YWxGcmFtZXNcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHRvdGFsIG51bWJlciBvZiBmcmFtZXMgaW4gdGhlIEFuaW1hdGVkU3ByaXRlLiBUaGlzIGlzIHRoZSBzYW1lIGFzIG51bWJlciBvZiB0ZXh0dXJlc1xuICAgICAgICAgKiBhc3NpZ25lZCB0byB0aGUgQW5pbWF0ZWRTcHJpdGUuXG4gICAgICAgICAqXG4gICAgICAgICAqIEByZWFkb25seVxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEBkZWZhdWx0IDBcbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RleHR1cmVzLmxlbmd0aDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBbmltYXRlZFNwcml0ZS5wcm90b3R5cGUsIFwidGV4dHVyZXNcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGFycmF5IG9mIHRleHR1cmVzIHVzZWQgZm9yIHRoaXMgQW5pbWF0ZWRTcHJpdGUuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuVGV4dHVyZVtdfFBJWEkuQW5pbWF0ZWRTcHJpdGUuRnJhbWVPYmplY3RbXX1cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RleHR1cmVzO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlWzBdIGluc3RhbmNlb2YgVGV4dHVyZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3RleHR1cmVzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgdGhpcy5fZHVyYXRpb25zID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX3RleHR1cmVzID0gW107XG4gICAgICAgICAgICAgICAgdGhpcy5fZHVyYXRpb25zID0gW107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YWx1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl90ZXh0dXJlcy5wdXNoKHZhbHVlW2ldLnRleHR1cmUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9kdXJhdGlvbnMucHVzaCh2YWx1ZVtpXS50aW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9wcmV2aW91c0ZyYW1lID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuZ290b0FuZFN0b3AoMCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVRleHR1cmUoKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBbmltYXRlZFNwcml0ZS5wcm90b3R5cGUsIFwiY3VycmVudEZyYW1lXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICogVGhlIEFuaW1hdGVkU3ByaXRlcyBjdXJyZW50IGZyYW1lIGluZGV4LlxuICAgICAgICAqXG4gICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAqIEByZWFkb25seVxuICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjdXJyZW50RnJhbWUgPSBNYXRoLmZsb29yKHRoaXMuX2N1cnJlbnRUaW1lKSAlIHRoaXMuX3RleHR1cmVzLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChjdXJyZW50RnJhbWUgPCAwKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudEZyYW1lICs9IHRoaXMuX3RleHR1cmVzLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjdXJyZW50RnJhbWU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQW5pbWF0ZWRTcHJpdGUucHJvdG90eXBlLCBcInBsYXlpbmdcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogSW5kaWNhdGVzIGlmIHRoZSBBbmltYXRlZFNwcml0ZSBpcyBjdXJyZW50bHkgcGxheWluZy5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7Ym9vbGVhbn1cbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9wbGF5aW5nO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFuaW1hdGVkU3ByaXRlLnByb3RvdHlwZSwgXCJhdXRvVXBkYXRlXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgdG8gdXNlIFBJWEkuVGlja2VyLnNoYXJlZCB0byBhdXRvIHVwZGF0ZSBhbmltYXRpb24gdGltZVxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYXV0b1VwZGF0ZTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gdGhpcy5fYXV0b1VwZGF0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2F1dG9VcGRhdGUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2F1dG9VcGRhdGUgJiYgdGhpcy5faXNDb25uZWN0ZWRUb1RpY2tlcikge1xuICAgICAgICAgICAgICAgICAgICBUaWNrZXIuc2hhcmVkLnJlbW92ZSh0aGlzLnVwZGF0ZSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2lzQ29ubmVjdGVkVG9UaWNrZXIgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5fYXV0b1VwZGF0ZSAmJiAhdGhpcy5faXNDb25uZWN0ZWRUb1RpY2tlciAmJiB0aGlzLl9wbGF5aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIFRpY2tlci5zaGFyZWQuYWRkKHRoaXMudXBkYXRlLCB0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faXNDb25uZWN0ZWRUb1RpY2tlciA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIEFuaW1hdGVkU3ByaXRlO1xufShTcHJpdGUpKTtcbi8qKlxuICogQG1lbWJlcm9mIFBJWEkuQW5pbWF0ZWRTcHJpdGVcbiAqIEB0eXBlZGVmIHtvYmplY3R9IEZyYW1lT2JqZWN0XG4gKiBAdHlwZSB7b2JqZWN0fVxuICogQHByb3BlcnR5IHtQSVhJLlRleHR1cmV9IHRleHR1cmUgLSBUaGUge0BsaW5rIFBJWEkuVGV4dHVyZX0gb2YgdGhlIGZyYW1lXG4gKiBAcHJvcGVydHkge251bWJlcn0gdGltZSAtIHRoZSBkdXJhdGlvbiBvZiB0aGUgZnJhbWUgaW4gbXNcbiAqL1xuXG5leHBvcnQgeyBBbmltYXRlZFNwcml0ZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3ByaXRlLWFuaW1hdGVkLmVzLmpzLm1hcFxuIl0sIm5hbWVzIjpbImV4dGVuZFN0YXRpY3MiLCJkIiwiYiIsIk9iamVjdCIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiQXJyYXkiLCJwIiwiaGFzT3duUHJvcGVydHkiLCJfc3VwZXIiLCJBbmltYXRlZFNwcml0ZSIsInRleHR1cmVzIiwiYXV0b1VwZGF0ZSIsIl90aGlzIiwiY2FsbCIsInRoaXMiLCJ0ZXh0dXJlIiwiX3RleHR1cmVzIiwiX2R1cmF0aW9ucyIsIl9hdXRvVXBkYXRlIiwiX2lzQ29ubmVjdGVkVG9UaWNrZXIiLCJhbmltYXRpb25TcGVlZCIsImxvb3AiLCJ1cGRhdGVBbmNob3IiLCJvbkNvbXBsZXRlIiwib25GcmFtZUNoYW5nZSIsIm9uTG9vcCIsIl9jdXJyZW50VGltZSIsIl9wbGF5aW5nIiwiX3ByZXZpb3VzRnJhbWUiLCJfXyIsImNvbnN0cnVjdG9yIiwicHJvdG90eXBlIiwiY3JlYXRlIiwiX19leHRlbmRzIiwic3RvcCIsInVwZGF0ZSIsInBsYXkiLCJnb3RvQW5kU3RvcCIsImZyYW1lTnVtYmVyIiwicHJldmlvdXNGcmFtZSIsImN1cnJlbnRGcmFtZSIsInVwZGF0ZVRleHR1cmUiLCJnb3RvQW5kUGxheSIsImRlbHRhVGltZSIsImVsYXBzZWQiLCJsYWciLCJzaWduIiwiTWF0aCIsImZsb29yIiwibGVuZ3RoIiwiX3RleHR1cmUiLCJfdGV4dHVyZUlEIiwiX3RleHR1cmVUcmltbWVkSUQiLCJfY2FjaGVkVGludCIsInV2cyIsIl91dnMiLCJ1dnNGbG9hdDMyIiwiX2FuY2hvciIsImNvcHlGcm9tIiwiZGVmYXVsdEFuY2hvciIsImRlc3Ryb3kiLCJvcHRpb25zIiwiZnJvbUZyYW1lcyIsImZyYW1lcyIsImkiLCJwdXNoIiwiZnJvbUltYWdlcyIsImltYWdlcyIsImRlZmluZVByb3BlcnR5IiwiZ2V0IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsInNldCIsInZhbHVlIiwidGltZSJdLCJzb3VyY2VSb290IjoiIn0=