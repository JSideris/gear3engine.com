/*! For license information please see 1234.488990c60d6bd1eb823c.js.LICENSE.txt */
"use strict";(self.webpackChunkgear3engine_website=self.webpackChunkgear3engine_website||[]).push([[1234],{1234:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});var r=i(5868),n=i(2514),s=i(3663),o=i(932),h=i(19),a=i(8950),u=function(t,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},u(t,e)},_=new o.Point,c=new Uint16Array([0,1,2,0,2,3]),l=function(t){function e(e){var i=t.call(this)||this;return i._anchor=new o.ObservablePoint(i._onAnchorUpdate,i,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),i._texture=null,i._width=0,i._height=0,i._tint=null,i._tintRGB=null,i.tint=16777215,i.blendMode=r.BLEND_MODES.NORMAL,i._cachedTint=16777215,i.uvs=null,i.texture=e||n.Texture.EMPTY,i.vertexData=new Float32Array(8),i.vertexTrimmedData=null,i._transformID=-1,i._textureID=-1,i._transformTrimmedID=-1,i._textureTrimmedID=-1,i.indices=c,i.pluginName="batch",i.isSprite=!0,i._roundPixels=h.settings.ROUND_PIXELS,i}return function(t,e){function i(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=a.sign(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=a.sign(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){var t=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==t._updateID){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var e=this.transform.worldTransform,i=e.a,r=e.b,n=e.c,s=e.d,o=e.tx,a=e.ty,u=this.vertexData,_=t.trim,c=t.orig,l=this._anchor,d=0,x=0,f=0,p=0;if(_?(d=(x=_.x-l._x*c.width)+_.width,f=(p=_.y-l._y*c.height)+_.height):(d=(x=-l._x*c.width)+c.width,f=(p=-l._y*c.height)+c.height),u[0]=i*x+n*p+o,u[1]=s*p+r*x+a,u[2]=i*d+n*p+o,u[3]=s*p+r*d+a,u[4]=i*d+n*f+o,u[5]=s*f+r*d+a,u[6]=i*x+n*f+o,u[7]=s*f+r*x+a,this._roundPixels)for(var g=h.settings.RESOLUTION,m=0;m<u.length;++m)u[m]=Math.round((u[m]*g|0)/g)}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,i=t.orig,r=this._anchor,n=this.transform.worldTransform,s=n.a,o=n.b,h=n.c,a=n.d,u=n.tx,_=n.ty,c=-r._x*i.width,l=c+i.width,d=-r._y*i.height,x=d+i.height;e[0]=s*c+h*d+u,e[1]=a*d+o*c+_,e[2]=s*l+h*d+u,e[3]=a*d+o*l+_,e[4]=s*l+h*x+u,e[5]=a*x+o*l+_,e[6]=s*c+h*x+u,e[7]=a*x+o*c+_},e.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._localBounds||(this._localBounds=new s.Bounds),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new o.Rectangle),e=this._localBoundsRect),this._localBounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,_);var e=this._texture.orig.width,i=this._texture.orig.height,r=-e*this.anchor.x,n=0;return _.x>=r&&_.x<r+e&&(n=-i*this.anchor.y,_.y>=n&&_.y<n+i)},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof e?e:e&&e.texture){var i="boolean"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!i)}this._texture=null},e.from=function(t,i){return new e(t instanceof n.Texture?t:n.Texture.from(t,i))},Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=a.sign(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=a.sign(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||n.Texture.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),e}(s.Container);e.Sprite=l}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFDQXdHLFlBQVksRUFDWkMsY0FBYyxJQUVYOUcsQ0FDWCxDQTlYMkIsQ0E4WHpCaEIsRUFBUW9JLFdBRVZ4SSxFQUFRb0IsT0FBU0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9nZWFyM2VuZ2luZS13ZWJzaXRlLy4uLy4uL0dBTUVTLVNJTVVMQVRPUlMtRlVOL2dlYXIzZW5naW5lL3BsdWdpbnMvZzNlLWNhbnZhcy0yZC9ub2RlX21vZHVsZXMvQHBpeGkvc3ByaXRlL2Rpc3QvY2pzL3Nwcml0ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIEBwaXhpL3Nwcml0ZSAtIHY2LjQuMlxuICogQ29tcGlsZWQgVGh1LCAwMiBKdW4gMjAyMiAxNTozOToyNiBVVENcbiAqXG4gKiBAcGl4aS9zcHJpdGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICogaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZVxuICovXG4ndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5cbnZhciBjb25zdGFudHMgPSByZXF1aXJlKCdAcGl4aS9jb25zdGFudHMnKTtcbnZhciBjb3JlID0gcmVxdWlyZSgnQHBpeGkvY29yZScpO1xudmFyIGRpc3BsYXkgPSByZXF1aXJlKCdAcGl4aS9kaXNwbGF5Jyk7XG52YXIgbWF0aCA9IHJlcXVpcmUoJ0BwaXhpL21hdGgnKTtcbnZhciBzZXR0aW5ncyA9IHJlcXVpcmUoJ0BwaXhpL3NldHRpbmdzJyk7XG52YXIgdXRpbHMgPSByZXF1aXJlKCdAcGl4aS91dGlscycpO1xuXG4vKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZVxyXG50aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZVxyXG5MaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG5cclxuVEhJUyBDT0RFIElTIFBST1ZJREVEIE9OIEFOICpBUyBJUyogQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG5LSU5ELCBFSVRIRVIgRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgV0lUSE9VVCBMSU1JVEFUSU9OIEFOWSBJTVBMSUVEXHJcbldBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBUSVRMRSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UsXHJcbk1FUkNIQU5UQUJMSVRZIE9SIE5PTi1JTkZSSU5HRU1FTlQuXHJcblxyXG5TZWUgdGhlIEFwYWNoZSBWZXJzaW9uIDIuMCBMaWNlbnNlIGZvciBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnNcclxuYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG4vKiBnbG9iYWwgUmVmbGVjdCwgUHJvbWlzZSAqL1xyXG5cclxudmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbihkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgeyBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgeyBkW3BdID0gYltwXTsgfSB9IH07XHJcbiAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn1cblxudmFyIHRlbXBQb2ludCA9IG5ldyBtYXRoLlBvaW50KCk7XG52YXIgaW5kaWNlcyA9IG5ldyBVaW50MTZBcnJheShbMCwgMSwgMiwgMCwgMiwgM10pO1xuLyoqXG4gKiBUaGUgU3ByaXRlIG9iamVjdCBpcyB0aGUgYmFzZSBmb3IgYWxsIHRleHR1cmVkIG9iamVjdHMgdGhhdCBhcmUgcmVuZGVyZWQgdG8gdGhlIHNjcmVlblxuICpcbiAqIEEgc3ByaXRlIGNhbiBiZSBjcmVhdGVkIGRpcmVjdGx5IGZyb20gYW4gaW1hZ2UgbGlrZSB0aGlzOlxuICpcbiAqIGBgYGpzXG4gKiBsZXQgc3ByaXRlID0gUElYSS5TcHJpdGUuZnJvbSgnYXNzZXRzL2ltYWdlLnBuZycpO1xuICogYGBgXG4gKlxuICogVGhlIG1vcmUgZWZmaWNpZW50IHdheSB0byBjcmVhdGUgc3ByaXRlcyBpcyB1c2luZyBhIHtAbGluayBQSVhJLlNwcml0ZXNoZWV0fSxcbiAqIGFzIHN3YXBwaW5nIGJhc2UgdGV4dHVyZXMgd2hlbiByZW5kZXJpbmcgdG8gdGhlIHNjcmVlbiBpcyBpbmVmZmljaWVudC5cbiAqXG4gKiBgYGBqc1xuICogUElYSS5Mb2FkZXIuc2hhcmVkLmFkZChcImFzc2V0cy9zcHJpdGVzaGVldC5qc29uXCIpLmxvYWQoc2V0dXApO1xuICpcbiAqIGZ1bmN0aW9uIHNldHVwKCkge1xuICogICBsZXQgc2hlZXQgPSBQSVhJLkxvYWRlci5zaGFyZWQucmVzb3VyY2VzW1wiYXNzZXRzL3Nwcml0ZXNoZWV0Lmpzb25cIl0uc3ByaXRlc2hlZXQ7XG4gKiAgIGxldCBzcHJpdGUgPSBuZXcgUElYSS5TcHJpdGUoc2hlZXQudGV4dHVyZXNbXCJpbWFnZS5wbmdcIl0pO1xuICogICAuLi5cbiAqIH1cbiAqIGBgYFxuICogQG1lbWJlcm9mIFBJWElcbiAqL1xudmFyIFNwcml0ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3ByaXRlLCBfc3VwZXIpO1xuICAgIC8qKiBAcGFyYW0gdGV4dHVyZSAtIFRoZSB0ZXh0dXJlIGZvciB0aGlzIHNwcml0ZS4gKi9cbiAgICBmdW5jdGlvbiBTcHJpdGUodGV4dHVyZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5fYW5jaG9yID0gbmV3IG1hdGguT2JzZXJ2YWJsZVBvaW50KF90aGlzLl9vbkFuY2hvclVwZGF0ZSwgX3RoaXMsICh0ZXh0dXJlID8gdGV4dHVyZS5kZWZhdWx0QW5jaG9yLnggOiAwKSwgKHRleHR1cmUgPyB0ZXh0dXJlLmRlZmF1bHRBbmNob3IueSA6IDApKTtcbiAgICAgICAgX3RoaXMuX3RleHR1cmUgPSBudWxsO1xuICAgICAgICBfdGhpcy5fd2lkdGggPSAwO1xuICAgICAgICBfdGhpcy5faGVpZ2h0ID0gMDtcbiAgICAgICAgX3RoaXMuX3RpbnQgPSBudWxsO1xuICAgICAgICBfdGhpcy5fdGludFJHQiA9IG51bGw7XG4gICAgICAgIF90aGlzLnRpbnQgPSAweEZGRkZGRjtcbiAgICAgICAgX3RoaXMuYmxlbmRNb2RlID0gY29uc3RhbnRzLkJMRU5EX01PREVTLk5PUk1BTDtcbiAgICAgICAgX3RoaXMuX2NhY2hlZFRpbnQgPSAweEZGRkZGRjtcbiAgICAgICAgX3RoaXMudXZzID0gbnVsbDtcbiAgICAgICAgLy8gY2FsbCB0ZXh0dXJlIHNldHRlclxuICAgICAgICBfdGhpcy50ZXh0dXJlID0gdGV4dHVyZSB8fCBjb3JlLlRleHR1cmUuRU1QVFk7XG4gICAgICAgIF90aGlzLnZlcnRleERhdGEgPSBuZXcgRmxvYXQzMkFycmF5KDgpO1xuICAgICAgICBfdGhpcy52ZXJ0ZXhUcmltbWVkRGF0YSA9IG51bGw7XG4gICAgICAgIF90aGlzLl90cmFuc2Zvcm1JRCA9IC0xO1xuICAgICAgICBfdGhpcy5fdGV4dHVyZUlEID0gLTE7XG4gICAgICAgIF90aGlzLl90cmFuc2Zvcm1UcmltbWVkSUQgPSAtMTtcbiAgICAgICAgX3RoaXMuX3RleHR1cmVUcmltbWVkSUQgPSAtMTtcbiAgICAgICAgLy8gQmF0Y2hhYmxlIHN0dWZmLi5cbiAgICAgICAgLy8gVE9ETyBjb3VsZCBtYWtlIHRoaXMgYSBtaXhpbj9cbiAgICAgICAgX3RoaXMuaW5kaWNlcyA9IGluZGljZXM7XG4gICAgICAgIF90aGlzLnBsdWdpbk5hbWUgPSAnYmF0Y2gnO1xuICAgICAgICAvKipcbiAgICAgICAgICogVXNlZCB0byBmYXN0IGNoZWNrIGlmIGEgc3ByaXRlIGlzLi4gYSBzcHJpdGUhXG4gICAgICAgICAqIEBtZW1iZXIge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5pc1Nwcml0ZSA9IHRydWU7XG4gICAgICAgIF90aGlzLl9yb3VuZFBpeGVscyA9IHNldHRpbmdzLnNldHRpbmdzLlJPVU5EX1BJWEVMUztcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKiogV2hlbiB0aGUgdGV4dHVyZSBpcyB1cGRhdGVkLCB0aGlzIGV2ZW50IHdpbGwgZmlyZSB0byB1cGRhdGUgdGhlIHNjYWxlIGFuZCBmcmFtZS4gKi9cbiAgICBTcHJpdGUucHJvdG90eXBlLl9vblRleHR1cmVVcGRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX3RleHR1cmVJRCA9IC0xO1xuICAgICAgICB0aGlzLl90ZXh0dXJlVHJpbW1lZElEID0gLTE7XG4gICAgICAgIHRoaXMuX2NhY2hlZFRpbnQgPSAweEZGRkZGRjtcbiAgICAgICAgLy8gc28gaWYgX3dpZHRoIGlzIDAgdGhlbiB3aWR0aCB3YXMgbm90IHNldC4uXG4gICAgICAgIGlmICh0aGlzLl93aWR0aCkge1xuICAgICAgICAgICAgdGhpcy5zY2FsZS54ID0gdXRpbHMuc2lnbih0aGlzLnNjYWxlLngpICogdGhpcy5fd2lkdGggLyB0aGlzLl90ZXh0dXJlLm9yaWcud2lkdGg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX2hlaWdodCkge1xuICAgICAgICAgICAgdGhpcy5zY2FsZS55ID0gdXRpbHMuc2lnbih0aGlzLnNjYWxlLnkpICogdGhpcy5faGVpZ2h0IC8gdGhpcy5fdGV4dHVyZS5vcmlnLmhlaWdodDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqIENhbGxlZCB3aGVuIHRoZSBhbmNob3IgcG9zaXRpb24gdXBkYXRlcy4gKi9cbiAgICBTcHJpdGUucHJvdG90eXBlLl9vbkFuY2hvclVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fdHJhbnNmb3JtSUQgPSAtMTtcbiAgICAgICAgdGhpcy5fdHJhbnNmb3JtVHJpbW1lZElEID0gLTE7XG4gICAgfTtcbiAgICAvKiogQ2FsY3VsYXRlcyB3b3JsZFRyYW5zZm9ybSAqIHZlcnRpY2VzLCBzdG9yZSBpdCBpbiB2ZXJ0ZXhEYXRhLiAqL1xuICAgIFNwcml0ZS5wcm90b3R5cGUuY2FsY3VsYXRlVmVydGljZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0ZXh0dXJlID0gdGhpcy5fdGV4dHVyZTtcbiAgICAgICAgaWYgKHRoaXMuX3RyYW5zZm9ybUlEID09PSB0aGlzLnRyYW5zZm9ybS5fd29ybGRJRCAmJiB0aGlzLl90ZXh0dXJlSUQgPT09IHRleHR1cmUuX3VwZGF0ZUlEKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gdXBkYXRlIHRleHR1cmUgVVYgaGVyZSwgYmVjYXVzZSBiYXNlIHRleHR1cmUgY2FuIGJlIGNoYW5nZWQgd2l0aG91dCBjYWxsaW5nIGBfb25UZXh0dXJlVXBkYXRlYFxuICAgICAgICBpZiAodGhpcy5fdGV4dHVyZUlEICE9PSB0ZXh0dXJlLl91cGRhdGVJRCkge1xuICAgICAgICAgICAgdGhpcy51dnMgPSB0aGlzLl90ZXh0dXJlLl91dnMudXZzRmxvYXQzMjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl90cmFuc2Zvcm1JRCA9IHRoaXMudHJhbnNmb3JtLl93b3JsZElEO1xuICAgICAgICB0aGlzLl90ZXh0dXJlSUQgPSB0ZXh0dXJlLl91cGRhdGVJRDtcbiAgICAgICAgLy8gc2V0IHRoZSB2ZXJ0ZXggZGF0YVxuICAgICAgICB2YXIgd3QgPSB0aGlzLnRyYW5zZm9ybS53b3JsZFRyYW5zZm9ybTtcbiAgICAgICAgdmFyIGEgPSB3dC5hO1xuICAgICAgICB2YXIgYiA9IHd0LmI7XG4gICAgICAgIHZhciBjID0gd3QuYztcbiAgICAgICAgdmFyIGQgPSB3dC5kO1xuICAgICAgICB2YXIgdHggPSB3dC50eDtcbiAgICAgICAgdmFyIHR5ID0gd3QudHk7XG4gICAgICAgIHZhciB2ZXJ0ZXhEYXRhID0gdGhpcy52ZXJ0ZXhEYXRhO1xuICAgICAgICB2YXIgdHJpbSA9IHRleHR1cmUudHJpbTtcbiAgICAgICAgdmFyIG9yaWcgPSB0ZXh0dXJlLm9yaWc7XG4gICAgICAgIHZhciBhbmNob3IgPSB0aGlzLl9hbmNob3I7XG4gICAgICAgIHZhciB3MCA9IDA7XG4gICAgICAgIHZhciB3MSA9IDA7XG4gICAgICAgIHZhciBoMCA9IDA7XG4gICAgICAgIHZhciBoMSA9IDA7XG4gICAgICAgIGlmICh0cmltKSB7XG4gICAgICAgICAgICAvLyBpZiB0aGUgc3ByaXRlIGlzIHRyaW1tZWQgYW5kIGlzIG5vdCBhIHRpbGluZ3Nwcml0ZSB0aGVuIHdlIG5lZWQgdG8gYWRkIHRoZSBleHRyYVxuICAgICAgICAgICAgLy8gc3BhY2UgYmVmb3JlIHRyYW5zZm9ybWluZyB0aGUgc3ByaXRlIGNvb3Jkcy5cbiAgICAgICAgICAgIHcxID0gdHJpbS54IC0gKGFuY2hvci5feCAqIG9yaWcud2lkdGgpO1xuICAgICAgICAgICAgdzAgPSB3MSArIHRyaW0ud2lkdGg7XG4gICAgICAgICAgICBoMSA9IHRyaW0ueSAtIChhbmNob3IuX3kgKiBvcmlnLmhlaWdodCk7XG4gICAgICAgICAgICBoMCA9IGgxICsgdHJpbS5oZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB3MSA9IC1hbmNob3IuX3ggKiBvcmlnLndpZHRoO1xuICAgICAgICAgICAgdzAgPSB3MSArIG9yaWcud2lkdGg7XG4gICAgICAgICAgICBoMSA9IC1hbmNob3IuX3kgKiBvcmlnLmhlaWdodDtcbiAgICAgICAgICAgIGgwID0gaDEgKyBvcmlnLmhlaWdodDtcbiAgICAgICAgfVxuICAgICAgICAvLyB4eVxuICAgICAgICB2ZXJ0ZXhEYXRhWzBdID0gKGEgKiB3MSkgKyAoYyAqIGgxKSArIHR4O1xuICAgICAgICB2ZXJ0ZXhEYXRhWzFdID0gKGQgKiBoMSkgKyAoYiAqIHcxKSArIHR5O1xuICAgICAgICAvLyB4eVxuICAgICAgICB2ZXJ0ZXhEYXRhWzJdID0gKGEgKiB3MCkgKyAoYyAqIGgxKSArIHR4O1xuICAgICAgICB2ZXJ0ZXhEYXRhWzNdID0gKGQgKiBoMSkgKyAoYiAqIHcwKSArIHR5O1xuICAgICAgICAvLyB4eVxuICAgICAgICB2ZXJ0ZXhEYXRhWzRdID0gKGEgKiB3MCkgKyAoYyAqIGgwKSArIHR4O1xuICAgICAgICB2ZXJ0ZXhEYXRhWzVdID0gKGQgKiBoMCkgKyAoYiAqIHcwKSArIHR5O1xuICAgICAgICAvLyB4eVxuICAgICAgICB2ZXJ0ZXhEYXRhWzZdID0gKGEgKiB3MSkgKyAoYyAqIGgwKSArIHR4O1xuICAgICAgICB2ZXJ0ZXhEYXRhWzddID0gKGQgKiBoMCkgKyAoYiAqIHcxKSArIHR5O1xuICAgICAgICBpZiAodGhpcy5fcm91bmRQaXhlbHMpIHtcbiAgICAgICAgICAgIHZhciByZXNvbHV0aW9uID0gc2V0dGluZ3Muc2V0dGluZ3MuUkVTT0xVVElPTjtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmVydGV4RGF0YS5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIHZlcnRleERhdGFbaV0gPSBNYXRoLnJvdW5kKCh2ZXJ0ZXhEYXRhW2ldICogcmVzb2x1dGlvbiB8IDApIC8gcmVzb2x1dGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZXMgd29ybGRUcmFuc2Zvcm0gKiB2ZXJ0aWNlcyBmb3IgYSBub24gdGV4dHVyZSB3aXRoIGEgdHJpbS4gc3RvcmUgaXQgaW4gdmVydGV4VHJpbW1lZERhdGEuXG4gICAgICpcbiAgICAgKiBUaGlzIGlzIHVzZWQgdG8gZW5zdXJlIHRoYXQgdGhlIHRydWUgd2lkdGggYW5kIGhlaWdodCBvZiBhIHRyaW1tZWQgdGV4dHVyZSBpcyByZXNwZWN0ZWQuXG4gICAgICovXG4gICAgU3ByaXRlLnByb3RvdHlwZS5jYWxjdWxhdGVUcmltbWVkVmVydGljZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy52ZXJ0ZXhUcmltbWVkRGF0YSkge1xuICAgICAgICAgICAgdGhpcy52ZXJ0ZXhUcmltbWVkRGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkoOCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5fdHJhbnNmb3JtVHJpbW1lZElEID09PSB0aGlzLnRyYW5zZm9ybS5fd29ybGRJRCAmJiB0aGlzLl90ZXh0dXJlVHJpbW1lZElEID09PSB0aGlzLl90ZXh0dXJlLl91cGRhdGVJRCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3RyYW5zZm9ybVRyaW1tZWRJRCA9IHRoaXMudHJhbnNmb3JtLl93b3JsZElEO1xuICAgICAgICB0aGlzLl90ZXh0dXJlVHJpbW1lZElEID0gdGhpcy5fdGV4dHVyZS5fdXBkYXRlSUQ7XG4gICAgICAgIC8vIGxldHMgZG8gc29tZSBzcGVjaWFsIHRyaW0gY29kZSFcbiAgICAgICAgdmFyIHRleHR1cmUgPSB0aGlzLl90ZXh0dXJlO1xuICAgICAgICB2YXIgdmVydGV4RGF0YSA9IHRoaXMudmVydGV4VHJpbW1lZERhdGE7XG4gICAgICAgIHZhciBvcmlnID0gdGV4dHVyZS5vcmlnO1xuICAgICAgICB2YXIgYW5jaG9yID0gdGhpcy5fYW5jaG9yO1xuICAgICAgICAvLyBsZXRzIGNhbGN1bGF0ZSB0aGUgbmV3IHVudHJpbW1lZCBib3VuZHMuLlxuICAgICAgICB2YXIgd3QgPSB0aGlzLnRyYW5zZm9ybS53b3JsZFRyYW5zZm9ybTtcbiAgICAgICAgdmFyIGEgPSB3dC5hO1xuICAgICAgICB2YXIgYiA9IHd0LmI7XG4gICAgICAgIHZhciBjID0gd3QuYztcbiAgICAgICAgdmFyIGQgPSB3dC5kO1xuICAgICAgICB2YXIgdHggPSB3dC50eDtcbiAgICAgICAgdmFyIHR5ID0gd3QudHk7XG4gICAgICAgIHZhciB3MSA9IC1hbmNob3IuX3ggKiBvcmlnLndpZHRoO1xuICAgICAgICB2YXIgdzAgPSB3MSArIG9yaWcud2lkdGg7XG4gICAgICAgIHZhciBoMSA9IC1hbmNob3IuX3kgKiBvcmlnLmhlaWdodDtcbiAgICAgICAgdmFyIGgwID0gaDEgKyBvcmlnLmhlaWdodDtcbiAgICAgICAgLy8geHlcbiAgICAgICAgdmVydGV4RGF0YVswXSA9IChhICogdzEpICsgKGMgKiBoMSkgKyB0eDtcbiAgICAgICAgdmVydGV4RGF0YVsxXSA9IChkICogaDEpICsgKGIgKiB3MSkgKyB0eTtcbiAgICAgICAgLy8geHlcbiAgICAgICAgdmVydGV4RGF0YVsyXSA9IChhICogdzApICsgKGMgKiBoMSkgKyB0eDtcbiAgICAgICAgdmVydGV4RGF0YVszXSA9IChkICogaDEpICsgKGIgKiB3MCkgKyB0eTtcbiAgICAgICAgLy8geHlcbiAgICAgICAgdmVydGV4RGF0YVs0XSA9IChhICogdzApICsgKGMgKiBoMCkgKyB0eDtcbiAgICAgICAgdmVydGV4RGF0YVs1XSA9IChkICogaDApICsgKGIgKiB3MCkgKyB0eTtcbiAgICAgICAgLy8geHlcbiAgICAgICAgdmVydGV4RGF0YVs2XSA9IChhICogdzEpICsgKGMgKiBoMCkgKyB0eDtcbiAgICAgICAgdmVydGV4RGF0YVs3XSA9IChkICogaDApICsgKGIgKiB3MSkgKyB0eTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqXG4gICAgICogUmVuZGVycyB0aGUgb2JqZWN0IHVzaW5nIHRoZSBXZWJHTCByZW5kZXJlclxuICAgICAqIEBwYXJhbSByZW5kZXJlciAtIFRoZSB3ZWJnbCByZW5kZXJlciB0byB1c2UuXG4gICAgICovXG4gICAgU3ByaXRlLnByb3RvdHlwZS5fcmVuZGVyID0gZnVuY3Rpb24gKHJlbmRlcmVyKSB7XG4gICAgICAgIHRoaXMuY2FsY3VsYXRlVmVydGljZXMoKTtcbiAgICAgICAgcmVuZGVyZXIuYmF0Y2guc2V0T2JqZWN0UmVuZGVyZXIocmVuZGVyZXIucGx1Z2luc1t0aGlzLnBsdWdpbk5hbWVdKTtcbiAgICAgICAgcmVuZGVyZXIucGx1Z2luc1t0aGlzLnBsdWdpbk5hbWVdLnJlbmRlcih0aGlzKTtcbiAgICB9O1xuICAgIC8qKiBVcGRhdGVzIHRoZSBib3VuZHMgb2YgdGhlIHNwcml0ZS4gKi9cbiAgICBTcHJpdGUucHJvdG90eXBlLl9jYWxjdWxhdGVCb3VuZHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0cmltID0gdGhpcy5fdGV4dHVyZS50cmltO1xuICAgICAgICB2YXIgb3JpZyA9IHRoaXMuX3RleHR1cmUub3JpZztcbiAgICAgICAgLy8gRmlyc3QgbGV0cyBjaGVjayB0byBzZWUgaWYgdGhlIGN1cnJlbnQgdGV4dHVyZSBoYXMgYSB0cmltLi5cbiAgICAgICAgaWYgKCF0cmltIHx8ICh0cmltLndpZHRoID09PSBvcmlnLndpZHRoICYmIHRyaW0uaGVpZ2h0ID09PSBvcmlnLmhlaWdodCkpIHtcbiAgICAgICAgICAgIC8vIG5vIHRyaW0hIGxldHMgdXNlIHRoZSB1c3VhbCBjYWxjdWxhdGlvbnMuLlxuICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVWZXJ0aWNlcygpO1xuICAgICAgICAgICAgdGhpcy5fYm91bmRzLmFkZFF1YWQodGhpcy52ZXJ0ZXhEYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGxldHMgY2FsY3VsYXRlIGEgc3BlY2lhbCB0cmltbWVkIGJvdW5kcy4uLlxuICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVUcmltbWVkVmVydGljZXMoKTtcbiAgICAgICAgICAgIHRoaXMuX2JvdW5kcy5hZGRRdWFkKHRoaXMudmVydGV4VHJpbW1lZERhdGEpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBsb2NhbCBib3VuZHMgb2YgdGhlIHNwcml0ZSBvYmplY3QuXG4gICAgICogQHBhcmFtIHJlY3QgLSBPcHRpb25hbCBvdXRwdXQgcmVjdGFuZ2xlLlxuICAgICAqIEByZXR1cm5zIFRoZSBib3VuZHMuXG4gICAgICovXG4gICAgU3ByaXRlLnByb3RvdHlwZS5nZXRMb2NhbEJvdW5kcyA9IGZ1bmN0aW9uIChyZWN0KSB7XG4gICAgICAgIC8vIHdlIGNhbiBkbyBhIGZhc3QgbG9jYWwgYm91bmRzIGlmIHRoZSBzcHJpdGUgaGFzIG5vIGNoaWxkcmVuIVxuICAgICAgICBpZiAodGhpcy5jaGlsZHJlbi5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fbG9jYWxCb3VuZHMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9sb2NhbEJvdW5kcyA9IG5ldyBkaXNwbGF5LkJvdW5kcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fbG9jYWxCb3VuZHMubWluWCA9IHRoaXMuX3RleHR1cmUub3JpZy53aWR0aCAqIC10aGlzLl9hbmNob3IuX3g7XG4gICAgICAgICAgICB0aGlzLl9sb2NhbEJvdW5kcy5taW5ZID0gdGhpcy5fdGV4dHVyZS5vcmlnLmhlaWdodCAqIC10aGlzLl9hbmNob3IuX3k7XG4gICAgICAgICAgICB0aGlzLl9sb2NhbEJvdW5kcy5tYXhYID0gdGhpcy5fdGV4dHVyZS5vcmlnLndpZHRoICogKDEgLSB0aGlzLl9hbmNob3IuX3gpO1xuICAgICAgICAgICAgdGhpcy5fbG9jYWxCb3VuZHMubWF4WSA9IHRoaXMuX3RleHR1cmUub3JpZy5oZWlnaHQgKiAoMSAtIHRoaXMuX2FuY2hvci5feSk7XG4gICAgICAgICAgICBpZiAoIXJlY3QpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2xvY2FsQm91bmRzUmVjdCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9sb2NhbEJvdW5kc1JlY3QgPSBuZXcgbWF0aC5SZWN0YW5nbGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVjdCA9IHRoaXMuX2xvY2FsQm91bmRzUmVjdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9sb2NhbEJvdW5kcy5nZXRSZWN0YW5nbGUocmVjdCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUuZ2V0TG9jYWxCb3VuZHMuY2FsbCh0aGlzLCByZWN0KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRlc3RzIGlmIGEgcG9pbnQgaXMgaW5zaWRlIHRoaXMgc3ByaXRlXG4gICAgICogQHBhcmFtIHBvaW50IC0gdGhlIHBvaW50IHRvIHRlc3RcbiAgICAgKiBAcmV0dXJucyBUaGUgcmVzdWx0IG9mIHRoZSB0ZXN0XG4gICAgICovXG4gICAgU3ByaXRlLnByb3RvdHlwZS5jb250YWluc1BvaW50ID0gZnVuY3Rpb24gKHBvaW50KSB7XG4gICAgICAgIHRoaXMud29ybGRUcmFuc2Zvcm0uYXBwbHlJbnZlcnNlKHBvaW50LCB0ZW1wUG9pbnQpO1xuICAgICAgICB2YXIgd2lkdGggPSB0aGlzLl90ZXh0dXJlLm9yaWcud2lkdGg7XG4gICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLl90ZXh0dXJlLm9yaWcuaGVpZ2h0O1xuICAgICAgICB2YXIgeDEgPSAtd2lkdGggKiB0aGlzLmFuY2hvci54O1xuICAgICAgICB2YXIgeTEgPSAwO1xuICAgICAgICBpZiAodGVtcFBvaW50LnggPj0geDEgJiYgdGVtcFBvaW50LnggPCB4MSArIHdpZHRoKSB7XG4gICAgICAgICAgICB5MSA9IC1oZWlnaHQgKiB0aGlzLmFuY2hvci55O1xuICAgICAgICAgICAgaWYgKHRlbXBQb2ludC55ID49IHkxICYmIHRlbXBQb2ludC55IDwgeTEgKyBoZWlnaHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEZXN0cm95cyB0aGlzIHNwcml0ZSBhbmQgb3B0aW9uYWxseSBpdHMgdGV4dHVyZSBhbmQgY2hpbGRyZW4uXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25zIHBhcmFtZXRlci4gQSBib29sZWFuIHdpbGwgYWN0IGFzIGlmIGFsbCBvcHRpb25zXG4gICAgICogIGhhdmUgYmVlbiBzZXQgdG8gdGhhdCB2YWx1ZVxuICAgICAqIEBwYXJhbSBbb3B0aW9ucy5jaGlsZHJlbj1mYWxzZV0gLSBpZiBzZXQgdG8gdHJ1ZSwgYWxsIHRoZSBjaGlsZHJlbiB3aWxsIGhhdmUgdGhlaXIgZGVzdHJveVxuICAgICAqICAgICAgbWV0aG9kIGNhbGxlZCBhcyB3ZWxsLiAnb3B0aW9ucycgd2lsbCBiZSBwYXNzZWQgb24gdG8gdGhvc2UgY2FsbHMuXG4gICAgICogQHBhcmFtIFtvcHRpb25zLnRleHR1cmU9ZmFsc2VdIC0gU2hvdWxkIGl0IGRlc3Ryb3kgdGhlIGN1cnJlbnQgdGV4dHVyZSBvZiB0aGUgc3ByaXRlIGFzIHdlbGxcbiAgICAgKiBAcGFyYW0gW29wdGlvbnMuYmFzZVRleHR1cmU9ZmFsc2VdIC0gU2hvdWxkIGl0IGRlc3Ryb3kgdGhlIGJhc2UgdGV4dHVyZSBvZiB0aGUgc3ByaXRlIGFzIHdlbGxcbiAgICAgKi9cbiAgICBTcHJpdGUucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRlc3Ryb3kuY2FsbCh0aGlzLCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5fdGV4dHVyZS5vZmYoJ3VwZGF0ZScsIHRoaXMuX29uVGV4dHVyZVVwZGF0ZSwgdGhpcyk7XG4gICAgICAgIHRoaXMuX2FuY2hvciA9IG51bGw7XG4gICAgICAgIHZhciBkZXN0cm95VGV4dHVyZSA9IHR5cGVvZiBvcHRpb25zID09PSAnYm9vbGVhbicgPyBvcHRpb25zIDogb3B0aW9ucyAmJiBvcHRpb25zLnRleHR1cmU7XG4gICAgICAgIGlmIChkZXN0cm95VGV4dHVyZSkge1xuICAgICAgICAgICAgdmFyIGRlc3Ryb3lCYXNlVGV4dHVyZSA9IHR5cGVvZiBvcHRpb25zID09PSAnYm9vbGVhbicgPyBvcHRpb25zIDogb3B0aW9ucyAmJiBvcHRpb25zLmJhc2VUZXh0dXJlO1xuICAgICAgICAgICAgdGhpcy5fdGV4dHVyZS5kZXN0cm95KCEhZGVzdHJveUJhc2VUZXh0dXJlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl90ZXh0dXJlID0gbnVsbDtcbiAgICB9O1xuICAgIC8vIHNvbWUgaGVscGVyIGZ1bmN0aW9ucy4uXG4gICAgLyoqXG4gICAgICogSGVscGVyIGZ1bmN0aW9uIHRoYXQgY3JlYXRlcyBhIG5ldyBzcHJpdGUgYmFzZWQgb24gdGhlIHNvdXJjZSB5b3UgcHJvdmlkZS5cbiAgICAgKiBUaGUgc291cmNlIGNhbiBiZSAtIGZyYW1lIGlkLCBpbWFnZSB1cmwsIHZpZGVvIHVybCwgY2FudmFzIGVsZW1lbnQsIHZpZGVvIGVsZW1lbnQsIGJhc2UgdGV4dHVyZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfFBJWEkuVGV4dHVyZXxIVE1MQ2FudmFzRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fSBzb3VyY2UgLSBTb3VyY2UgdG8gY3JlYXRlIHRleHR1cmUgZnJvbVxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc10gLSBTZWUge0BsaW5rIFBJWEkuQmFzZVRleHR1cmV9J3MgY29uc3RydWN0b3IgZm9yIG9wdGlvbnMuXG4gICAgICogQHJldHVybnMgVGhlIG5ld2x5IGNyZWF0ZWQgc3ByaXRlXG4gICAgICovXG4gICAgU3ByaXRlLmZyb20gPSBmdW5jdGlvbiAoc291cmNlLCBvcHRpb25zKSB7XG4gICAgICAgIHZhciB0ZXh0dXJlID0gKHNvdXJjZSBpbnN0YW5jZW9mIGNvcmUuVGV4dHVyZSlcbiAgICAgICAgICAgID8gc291cmNlXG4gICAgICAgICAgICA6IGNvcmUuVGV4dHVyZS5mcm9tKHNvdXJjZSwgb3B0aW9ucyk7XG4gICAgICAgIHJldHVybiBuZXcgU3ByaXRlKHRleHR1cmUpO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNwcml0ZS5wcm90b3R5cGUsIFwicm91bmRQaXhlbHNcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yb3VuZFBpeGVscztcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIHRydWUgUGl4aUpTIHdpbGwgTWF0aC5mbG9vcigpIHgveSB2YWx1ZXMgd2hlbiByZW5kZXJpbmcsIHN0b3BwaW5nIHBpeGVsIGludGVycG9sYXRpb24uXG4gICAgICAgICAqXG4gICAgICAgICAqIEFkdmFudGFnZXMgY2FuIGluY2x1ZGUgc2hhcnBlciBpbWFnZSBxdWFsaXR5IChsaWtlIHRleHQpIGFuZCBmYXN0ZXIgcmVuZGVyaW5nIG9uIGNhbnZhcy5cbiAgICAgICAgICogVGhlIG1haW4gZGlzYWR2YW50YWdlIGlzIG1vdmVtZW50IG9mIG9iamVjdHMgbWF5IGFwcGVhciBsZXNzIHNtb290aC5cbiAgICAgICAgICpcbiAgICAgICAgICogVG8gc2V0IHRoZSBnbG9iYWwgZGVmYXVsdCwgY2hhbmdlIHtAbGluayBQSVhJLnNldHRpbmdzLlJPVU5EX1BJWEVMU30uXG4gICAgICAgICAqIEBkZWZhdWx0IGZhbHNlXG4gICAgICAgICAqL1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX3JvdW5kUGl4ZWxzICE9PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3RyYW5zZm9ybUlEID0gLTE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9yb3VuZFBpeGVscyA9IHZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNwcml0ZS5wcm90b3R5cGUsIFwid2lkdGhcIiwge1xuICAgICAgICAvKiogVGhlIHdpZHRoIG9mIHRoZSBzcHJpdGUsIHNldHRpbmcgdGhpcyB3aWxsIGFjdHVhbGx5IG1vZGlmeSB0aGUgc2NhbGUgdG8gYWNoaWV2ZSB0aGUgdmFsdWUgc2V0LiAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBNYXRoLmFicyh0aGlzLnNjYWxlLngpICogdGhpcy5fdGV4dHVyZS5vcmlnLndpZHRoO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIHMgPSB1dGlscy5zaWduKHRoaXMuc2NhbGUueCkgfHwgMTtcbiAgICAgICAgICAgIHRoaXMuc2NhbGUueCA9IHMgKiB2YWx1ZSAvIHRoaXMuX3RleHR1cmUub3JpZy53aWR0aDtcbiAgICAgICAgICAgIHRoaXMuX3dpZHRoID0gdmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3ByaXRlLnByb3RvdHlwZSwgXCJoZWlnaHRcIiwge1xuICAgICAgICAvKiogVGhlIGhlaWdodCBvZiB0aGUgc3ByaXRlLCBzZXR0aW5nIHRoaXMgd2lsbCBhY3R1YWxseSBtb2RpZnkgdGhlIHNjYWxlIHRvIGFjaGlldmUgdGhlIHZhbHVlIHNldC4gKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5hYnModGhpcy5zY2FsZS55KSAqIHRoaXMuX3RleHR1cmUub3JpZy5oZWlnaHQ7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgcyA9IHV0aWxzLnNpZ24odGhpcy5zY2FsZS55KSB8fCAxO1xuICAgICAgICAgICAgdGhpcy5zY2FsZS55ID0gcyAqIHZhbHVlIC8gdGhpcy5fdGV4dHVyZS5vcmlnLmhlaWdodDtcbiAgICAgICAgICAgIHRoaXMuX2hlaWdodCA9IHZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNwcml0ZS5wcm90b3R5cGUsIFwiYW5jaG9yXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBhbmNob3Igc2V0cyB0aGUgb3JpZ2luIHBvaW50IG9mIHRoZSBzcHJpdGUuIFRoZSBkZWZhdWx0IHZhbHVlIGlzIHRha2VuIGZyb20gdGhlIHtAbGluayBQSVhJLlRleHR1cmV8VGV4dHVyZX1cbiAgICAgICAgICogYW5kIHBhc3NlZCB0byB0aGUgY29uc3RydWN0b3IuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZSBkZWZhdWx0IGlzIGAoMCwwKWAsIHRoaXMgbWVhbnMgdGhlIHNwcml0ZSdzIG9yaWdpbiBpcyB0aGUgdG9wIGxlZnQuXG4gICAgICAgICAqXG4gICAgICAgICAqIFNldHRpbmcgdGhlIGFuY2hvciB0byBgKDAuNSwwLjUpYCBtZWFucyB0aGUgc3ByaXRlJ3Mgb3JpZ2luIGlzIGNlbnRlcmVkLlxuICAgICAgICAgKlxuICAgICAgICAgKiBTZXR0aW5nIHRoZSBhbmNob3IgdG8gYCgxLDEpYCB3b3VsZCBtZWFuIHRoZSBzcHJpdGUncyBvcmlnaW4gcG9pbnQgd2lsbCBiZSB0aGUgYm90dG9tIHJpZ2h0IGNvcm5lci5cbiAgICAgICAgICpcbiAgICAgICAgICogSWYgeW91IHBhc3Mgb25seSBzaW5nbGUgcGFyYW1ldGVyLCBpdCB3aWxsIHNldCBib3RoIHggYW5kIHkgdG8gdGhlIHNhbWUgdmFsdWUgYXMgc2hvd24gaW4gdGhlIGV4YW1wbGUgYmVsb3cuXG4gICAgICAgICAqIEBleGFtcGxlXG4gICAgICAgICAqIGNvbnN0IHNwcml0ZSA9IG5ldyBQSVhJLlNwcml0ZSh0ZXh0dXJlKTtcbiAgICAgICAgICogc3ByaXRlLmFuY2hvci5zZXQoMC41KTsgLy8gVGhpcyB3aWxsIHNldCB0aGUgb3JpZ2luIHRvIGNlbnRlci4gKDAuNSkgaXMgc2FtZSBhcyAoMC41LCAwLjUpLlxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYW5jaG9yO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5fYW5jaG9yLmNvcHlGcm9tKHZhbHVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTcHJpdGUucHJvdG90eXBlLCBcInRpbnRcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHRpbnQgYXBwbGllZCB0byB0aGUgc3ByaXRlLiBUaGlzIGlzIGEgaGV4IHZhbHVlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBBIHZhbHVlIG9mIDB4RkZGRkZGIHdpbGwgcmVtb3ZlIGFueSB0aW50IGVmZmVjdC5cbiAgICAgICAgICogQGRlZmF1bHQgMHhGRkZGRkZcbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RpbnQ7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLl90aW50ID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLl90aW50UkdCID0gKHZhbHVlID4+IDE2KSArICh2YWx1ZSAmIDB4ZmYwMCkgKyAoKHZhbHVlICYgMHhmZikgPDwgMTYpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNwcml0ZS5wcm90b3R5cGUsIFwidGV4dHVyZVwiLCB7XG4gICAgICAgIC8qKiBUaGUgdGV4dHVyZSB0aGF0IHRoZSBzcHJpdGUgaXMgdXNpbmcuICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RleHR1cmU7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fdGV4dHVyZSA9PT0gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5fdGV4dHVyZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3RleHR1cmUub2ZmKCd1cGRhdGUnLCB0aGlzLl9vblRleHR1cmVVcGRhdGUsIHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fdGV4dHVyZSA9IHZhbHVlIHx8IGNvcmUuVGV4dHVyZS5FTVBUWTtcbiAgICAgICAgICAgIHRoaXMuX2NhY2hlZFRpbnQgPSAweEZGRkZGRjtcbiAgICAgICAgICAgIHRoaXMuX3RleHR1cmVJRCA9IC0xO1xuICAgICAgICAgICAgdGhpcy5fdGV4dHVyZVRyaW1tZWRJRCA9IC0xO1xuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgLy8gd2FpdCBmb3IgdGhlIHRleHR1cmUgdG8gbG9hZFxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5iYXNlVGV4dHVyZS52YWxpZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vblRleHR1cmVVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLm9uY2UoJ3VwZGF0ZScsIHRoaXMuX29uVGV4dHVyZVVwZGF0ZSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIFNwcml0ZTtcbn0oZGlzcGxheS5Db250YWluZXIpKTtcblxuZXhwb3J0cy5TcHJpdGUgPSBTcHJpdGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zcHJpdGUuanMubWFwXG4iXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJjb25zdGFudHMiLCJjb3JlIiwiZGlzcGxheSIsIm1hdGgiLCJzZXR0aW5ncyIsInV0aWxzIiwiZXh0ZW5kU3RhdGljcyIsImQiLCJiIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJBcnJheSIsInAiLCJoYXNPd25Qcm9wZXJ0eSIsInRlbXBQb2ludCIsIlBvaW50IiwiaW5kaWNlcyIsIlVpbnQxNkFycmF5IiwiU3ByaXRlIiwiX3N1cGVyIiwidGV4dHVyZSIsIl90aGlzIiwiY2FsbCIsInRoaXMiLCJfYW5jaG9yIiwiT2JzZXJ2YWJsZVBvaW50IiwiX29uQW5jaG9yVXBkYXRlIiwiZGVmYXVsdEFuY2hvciIsIngiLCJ5IiwiX3RleHR1cmUiLCJfd2lkdGgiLCJfaGVpZ2h0IiwiX3RpbnQiLCJfdGludFJHQiIsInRpbnQiLCJibGVuZE1vZGUiLCJCTEVORF9NT0RFUyIsIk5PUk1BTCIsIl9jYWNoZWRUaW50IiwidXZzIiwiVGV4dHVyZSIsIkVNUFRZIiwidmVydGV4RGF0YSIsIkZsb2F0MzJBcnJheSIsInZlcnRleFRyaW1tZWREYXRhIiwiX3RyYW5zZm9ybUlEIiwiX3RleHR1cmVJRCIsIl90cmFuc2Zvcm1UcmltbWVkSUQiLCJfdGV4dHVyZVRyaW1tZWRJRCIsInBsdWdpbk5hbWUiLCJpc1Nwcml0ZSIsIl9yb3VuZFBpeGVscyIsIlJPVU5EX1BJWEVMUyIsIl9fIiwiY29uc3RydWN0b3IiLCJwcm90b3R5cGUiLCJjcmVhdGUiLCJfX2V4dGVuZHMiLCJfb25UZXh0dXJlVXBkYXRlIiwic2NhbGUiLCJzaWduIiwib3JpZyIsIndpZHRoIiwiaGVpZ2h0IiwiY2FsY3VsYXRlVmVydGljZXMiLCJ0cmFuc2Zvcm0iLCJfd29ybGRJRCIsIl91cGRhdGVJRCIsIl91dnMiLCJ1dnNGbG9hdDMyIiwid3QiLCJ3b3JsZFRyYW5zZm9ybSIsImEiLCJjIiwidHgiLCJ0eSIsInRyaW0iLCJhbmNob3IiLCJ3MCIsIncxIiwiaDAiLCJoMSIsIl94IiwiX3kiLCJyZXNvbHV0aW9uIiwiUkVTT0xVVElPTiIsImkiLCJsZW5ndGgiLCJNYXRoIiwicm91bmQiLCJjYWxjdWxhdGVUcmltbWVkVmVydGljZXMiLCJfcmVuZGVyIiwicmVuZGVyZXIiLCJiYXRjaCIsInNldE9iamVjdFJlbmRlcmVyIiwicGx1Z2lucyIsInJlbmRlciIsIl9jYWxjdWxhdGVCb3VuZHMiLCJfYm91bmRzIiwiYWRkUXVhZCIsImdldExvY2FsQm91bmRzIiwicmVjdCIsImNoaWxkcmVuIiwiX2xvY2FsQm91bmRzIiwiQm91bmRzIiwibWluWCIsIm1pblkiLCJtYXhYIiwibWF4WSIsIl9sb2NhbEJvdW5kc1JlY3QiLCJSZWN0YW5nbGUiLCJnZXRSZWN0YW5nbGUiLCJjb250YWluc1BvaW50IiwicG9pbnQiLCJhcHBseUludmVyc2UiLCJ4MSIsInkxIiwiZGVzdHJveSIsIm9wdGlvbnMiLCJvZmYiLCJkZXN0cm95QmFzZVRleHR1cmUiLCJiYXNlVGV4dHVyZSIsImZyb20iLCJzb3VyY2UiLCJnZXQiLCJzZXQiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwiYWJzIiwicyIsImNvcHlGcm9tIiwidmFsaWQiLCJvbmNlIiwiQ29udGFpbmVyIl0sInNvdXJjZVJvb3QiOiIifQ==