/*! For license information please see 2514.aaa6ce34621657fb1435.js.LICENSE.txt */
"use strict";(self.webpackChunkgear3engine_website=self.webpackChunkgear3engine_website||[]).push([[2514],{2514:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=r(19),n=r(5868),o=r(8950),s=r(3553),a=r(1784),u=r(932);i.settings.PREFER_ENV=o.isMobile.any?n.ENV.WEBGL:n.ENV.WEBGL2,i.settings.STRICT_TEXTURE_CACHE=!1;var h=[];function l(e,t){if(!e)return null;var r="";if("string"==typeof e){var i=/\.(\w{3,4})(?:$|\?|#)/i.exec(e);i&&(r=i[1].toLowerCase())}for(var n=h.length-1;n>=0;--n){var o=h[n];if(o.test&&o.test(e,r))return new o(e,t)}throw new Error("Unrecognized source type to auto-detect Resource")}var d=function(e,t){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},d(e,t)};function f(e,t){function r(){this.constructor=e}d(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var c=function(){return c=Object.assign||function(e){for(var t,r=arguments,i=1,n=arguments.length;i<n;i++)for(var o in t=r[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},c.apply(this,arguments)},p=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this._width=e,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new s.Runner("setRealSize"),this.onUpdate=new s.Runner("update"),this.onError=new s.Runner("onError")}return e.prototype.bind=function(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},e.prototype.unbind=function(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)},e.prototype.resize=function(e,t){e===this._width&&t===this._height||(this._width=e,this._height=t,this.onResize.emit(e,t))},Object.defineProperty(e.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),e.prototype.update=function(){this.destroyed||this.onUpdate.emit()},e.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),e.prototype.style=function(e,t,r){return!1},e.prototype.dispose=function(){},e.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},e.test=function(e,t){return!1},e}(),m=function(e){function t(t,r){var i=this,n=r||{},o=n.width,s=n.height;if(!o||!s)throw new Error("BufferResource width or height invalid");return(i=e.call(this,o,s)||this).data=t,i}return f(t,e),t.prototype.upload=function(e,t,r){var i=e.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===n.ALPHA_MODES.UNPACK);var o=t.realWidth,s=t.realHeight;return r.width===o&&r.height===s?i.texSubImage2D(t.target,0,0,0,o,s,t.format,r.type,this.data):(r.width=o,r.height=s,i.texImage2D(t.target,0,r.internalFormat,o,s,0,t.format,r.type,this.data)),!0},t.prototype.dispose=function(){this.data=null},t.test=function(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array},t}(p),v={scaleMode:n.SCALE_MODES.NEAREST,format:n.FORMATS.RGBA,alphaMode:n.ALPHA_MODES.NPM},g=function(e){function t(t,r){void 0===t&&(t=null),void 0===r&&(r=null);var s=e.call(this)||this,a=(r=r||{}).alphaMode,u=r.mipmap,h=r.anisotropicLevel,d=r.scaleMode,f=r.width,c=r.height,m=r.wrapMode,v=r.format,g=r.type,_=r.target,y=r.resolution,E=r.resourceOptions;return!t||t instanceof p||((t=l(t,E)).internal=!0),s.resolution=y||i.settings.RESOLUTION,s.width=Math.round((f||0)*s.resolution)/s.resolution,s.height=Math.round((c||0)*s.resolution)/s.resolution,s._mipmap=void 0!==u?u:i.settings.MIPMAP_TEXTURES,s.anisotropicLevel=void 0!==h?h:i.settings.ANISOTROPIC_LEVEL,s._wrapMode=m||i.settings.WRAP_MODE,s._scaleMode=void 0!==d?d:i.settings.SCALE_MODE,s.format=v||n.FORMATS.RGBA,s.type=g||n.TYPES.UNSIGNED_BYTE,s.target=_||n.TARGETS.TEXTURE_2D,s.alphaMode=void 0!==a?a:n.ALPHA_MODES.UNPACK,s.uid=o.uid(),s.touched=0,s.isPowerOfTwo=!1,s._refreshPOT(),s._glTextures={},s.dirtyId=0,s.dirtyStyleId=0,s.cacheId=null,s.valid=f>0&&c>0,s.textureCacheIds=[],s.destroyed=!1,s.resource=null,s._batchEnabled=0,s._batchLocation=0,s.parentTextureArray=null,s.setResource(t),s}return f(t,e),Object.defineProperty(t.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mipmap",{get:function(){return this._mipmap},set:function(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),t.prototype.setStyle=function(e,t){var r;return void 0!==e&&e!==this.scaleMode&&(this.scaleMode=e,r=!0),void 0!==t&&t!==this.mipmap&&(this.mipmap=t,r=!0),r&&this.dirtyStyleId++,this},t.prototype.setSize=function(e,t,r){return r=r||this.resolution,this.setRealSize(e*r,t*r,r)},t.prototype.setRealSize=function(e,t,r){return this.resolution=r||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this},t.prototype._refreshPOT=function(){this.isPowerOfTwo=o.isPow2(this.realWidth)&&o.isPow2(this.realHeight)},t.prototype.setResolution=function(e){var t=this.resolution;return t===e||(this.resolution=e,this.valid&&(this.width=Math.round(this.width*t)/e,this.height=Math.round(this.height*t)/e,this.emit("update",this)),this._refreshPOT()),this},t.prototype.setResource=function(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this},t.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},t.prototype.onError=function(e){this.emit("error",this,e)},t.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete o.BaseTextureCache[this.cacheId],delete o.TextureCache[this.cacheId],this.cacheId=null),this.dispose(),t.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},t.prototype.dispose=function(){this.emit("dispose",this)},t.prototype.castToBaseTexture=function(){return this},t.from=function(e,r,n){void 0===n&&(n=i.settings.STRICT_TEXTURE_CACHE);var s="string"==typeof e,a=null;if(s)a=e;else{if(!e._pixiId){var u=r&&r.pixiIdPrefix||"pixiid";e._pixiId=u+"_"+o.uid()}a=e._pixiId}var h=o.BaseTextureCache[a];if(s&&n&&!h)throw new Error('The cacheId "'+a+'" does not exist in BaseTextureCache.');return h||((h=new t(e,r)).cacheId=a,t.addToCache(h,a)),h},t.fromBuffer=function(e,r,i,o){e=e||new Float32Array(r*i*4);var s=new m(e,{width:r,height:i}),a=e instanceof Float32Array?n.TYPES.FLOAT:n.TYPES.UNSIGNED_BYTE;return new t(s,Object.assign(v,o||{width:r,height:i,type:a}))},t.addToCache=function(e,t){t&&(-1===e.textureCacheIds.indexOf(t)&&e.textureCacheIds.push(t),o.BaseTextureCache[t]&&console.warn("BaseTexture added to the cache with an id ["+t+"] that already had an entry"),o.BaseTextureCache[t]=e)},t.removeFromCache=function(e){if("string"==typeof e){var t=o.BaseTextureCache[e];if(t){var r=t.textureCacheIds.indexOf(e);return r>-1&&t.textureCacheIds.splice(r,1),delete o.BaseTextureCache[e],t}}else if(e&&e.textureCacheIds){for(var i=0;i<e.textureCacheIds.length;++i)delete o.BaseTextureCache[e.textureCacheIds[i]];return e.textureCacheIds.length=0,e}return null},t._globalBatch=0,t}(o.EventEmitter),_=function(e){function t(t,r){var i=this,n=r||{},o=n.width,s=n.height;(i=e.call(this,o,s)||this).items=[],i.itemDirtyIds=[];for(var a=0;a<t;a++){var u=new g;i.items.push(u),i.itemDirtyIds.push(-2)}return i.length=t,i._load=null,i.baseTexture=null,i}return f(t,e),t.prototype.initFromArray=function(e,t){for(var r=0;r<this.length;r++)e[r]&&(e[r].castToBaseTexture?this.addBaseTextureAt(e[r].castToBaseTexture(),r):e[r]instanceof p?this.addResourceAt(e[r],r):this.addResourceAt(l(e[r],t),r))},t.prototype.dispose=function(){for(var e=0,t=this.length;e<t;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},t.prototype.addResourceAt=function(e,t){if(!this.items[t])throw new Error("Index "+t+" is out of bounds");return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[t].setResource(e),this},t.prototype.bind=function(t){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");e.prototype.bind.call(this,t);for(var r=0;r<this.length;r++)this.items[r].parentTextureArray=t,this.items[r].on("update",t.update,t)},t.prototype.unbind=function(t){e.prototype.unbind.call(this,t);for(var r=0;r<this.length;r++)this.items[r].parentTextureArray=null,this.items[r].off("update",t.update,t)},t.prototype.load=function(){var e=this;if(this._load)return this._load;var t=this.items.map((function(e){return e.resource})).filter((function(e){return e})).map((function(e){return e.load()}));return this._load=Promise.all(t).then((function(){var t=e.items[0],r=t.realWidth,i=t.realHeight;return e.resize(r,i),Promise.resolve(e)})),this._load},t}(p),y=function(e){function t(t,r){var i,n,o=this,s=r||{},a=s.width,u=s.height;return Array.isArray(t)?(i=t,n=t.length):n=t,o=e.call(this,n,{width:a,height:u})||this,i&&o.initFromArray(i,r),o}return f(t,e),t.prototype.addBaseTextureAt=function(e,t){if(!e.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(e.resource,t),this},t.prototype.bind=function(t){e.prototype.bind.call(this,t),t.target=n.TARGETS.TEXTURE_2D_ARRAY},t.prototype.upload=function(e,t,r){var i=this,n=i.length,o=i.itemDirtyIds,s=i.items,a=e.gl;r.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,r.internalFormat,this._width,this._height,n,0,t.format,r.type,null);for(var u=0;u<n;u++){var h=s[u];o[u]<h.dirtyId&&(o[u]=h.dirtyId,h.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,u,h.resource.width,h.resource.height,1,t.format,r.type,h.resource.source))}return!0},t}(_),E=function(e){function t(t){var r=this,i=t,n=i.naturalWidth||i.videoWidth||i.width,o=i.naturalHeight||i.videoHeight||i.height;return(r=e.call(this,n,o)||this).source=t,r.noSubImage=!1,r}return f(t,e),t.crossOrigin=function(e,t,r){void 0===r&&0!==t.indexOf("data:")?e.crossOrigin=o.determineCrossOrigin(t):!1!==r&&(e.crossOrigin="string"==typeof r?r:"anonymous")},t.prototype.upload=function(e,t,r,i){var o=e.gl,s=t.realWidth,a=t.realHeight;if((i=i||this.source)instanceof HTMLImageElement){if(!i.complete||0===i.naturalWidth)return!1}else if(i instanceof HTMLVideoElement&&i.readyState<=1)return!1;return o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===n.ALPHA_MODES.UNPACK),this.noSubImage||t.target!==o.TEXTURE_2D||r.width!==s||r.height!==a?(r.width=s,r.height=a,o.texImage2D(t.target,0,r.internalFormat,t.format,r.type,i)):o.texSubImage2D(o.TEXTURE_2D,0,0,0,t.format,r.type,i),!0},t.prototype.update=function(){if(!this.destroyed){var t=this.source,r=t.naturalWidth||t.videoWidth||t.width,i=t.naturalHeight||t.videoHeight||t.height;this.resize(r,i),e.prototype.update.call(this)}},t.prototype.dispose=function(){this.source=null},t}(p),T=function(e){function t(t){return e.call(this,t)||this}return f(t,e),t.test=function(e){var t=globalThis.OffscreenCanvas;return!!(t&&e instanceof t)||globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement},t}(E),x=function(e){function t(r,i){var o=this,s=i||{},a=s.width,u=s.height,h=s.autoLoad,l=s.linkBaseTexture;if(r&&r.length!==t.SIDES)throw new Error("Invalid length. Got "+r.length+", expected 6");o=e.call(this,6,{width:a,height:u})||this;for(var d=0;d<t.SIDES;d++)o.items[d].target=n.TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X+d;return o.linkBaseTexture=!1!==l,r&&o.initFromArray(r,i),!1!==h&&o.load(),o}return f(t,e),t.prototype.bind=function(t){e.prototype.bind.call(this,t),t.target=n.TARGETS.TEXTURE_CUBE_MAP},t.prototype.addBaseTextureAt=function(e,t,r){if(!this.items[t])throw new Error("Index "+t+" is out of bounds");if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0){if(!e.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(e.resource,t)}else e.target=n.TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X+t,e.parentTextureArray=this.baseTexture,this.items[t]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[t]=e,this},t.prototype.upload=function(e,r,i){for(var n=this.itemDirtyIds,o=0;o<t.SIDES;o++){var s=this.items[o];n[o]<s.dirtyId&&(s.valid&&s.resource?(s.resource.upload(e,s,i),n[o]=s.dirtyId):n[o]<-1&&(e.gl.texImage2D(s.target,0,i.internalFormat,r.realWidth,r.realHeight,0,r.format,i.type,null),n[o]=-1))}return!0},t.test=function(e){return Array.isArray(e)&&e.length===t.SIDES},t.SIDES=6,t}(_),b=function(e){function t(t,r){var n=this;if(r=r||{},!(t instanceof HTMLImageElement)){var o=new Image;E.crossOrigin(o,t,r.crossorigin),o.src=t,t=o}return n=e.call(this,t)||this,!t.complete&&n._width&&n._height&&(n._width=0,n._height=0),n.url=t.src,n._process=null,n.preserveBitmap=!1,n.createBitmap=(void 0!==r.createBitmap?r.createBitmap:i.settings.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,n.alphaMode="number"==typeof r.alphaMode?r.alphaMode:null,n.bitmap=null,n._load=null,!1!==r.autoLoad&&n.load(),n}return f(t,e),t.prototype.load=function(e){var t=this;return this._load||(void 0!==e&&(this.createBitmap=e),this._load=new Promise((function(e,r){var i=t.source;t.url=i.src;var n=function(){t.destroyed||(i.onload=null,i.onerror=null,t.resize(i.width,i.height),t._load=null,t.createBitmap?e(t.process()):e(t))};i.complete&&i.src?n():(i.onload=n,i.onerror=function(e){r(e),t.onError.emit(e)})}))),this._load},t.prototype.process=function(){var e=this,t=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!globalThis.createImageBitmap)return Promise.resolve(this);var r=globalThis.createImageBitmap,i=!t.crossOrigin||"anonymous"===t.crossOrigin;return this._process=fetch(t.src,{mode:i?"cors":"no-cors"}).then((function(e){return e.blob()})).then((function(i){return r(i,0,0,t.width,t.height,{premultiplyAlpha:e.alphaMode===n.ALPHA_MODES.UNPACK?"premultiply":"none"})})).then((function(t){return e.destroyed?Promise.reject():(e.bitmap=t,e.update(),e._process=null,Promise.resolve(e))})),this._process},t.prototype.upload=function(t,r,i){if("number"==typeof this.alphaMode&&(r.alphaMode=this.alphaMode),!this.createBitmap)return e.prototype.upload.call(this,t,r,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(e.prototype.upload.call(this,t,r,i,this.bitmap),!this.preserveBitmap){var n=!0,o=r._glTextures;for(var s in o){var a=o[s];if(a!==i&&a.dirtyId!==r.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},t.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,e.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},t.test=function(e){return"string"==typeof e||e instanceof HTMLImageElement},t}(E),S=function(e){function t(t,r){var i=this;return r=r||{},(i=e.call(this,document.createElement("canvas"))||this)._width=0,i._height=0,i.svg=t,i.scale=r.scale||1,i._overrideWidth=r.width,i._overrideHeight=r.height,i._resolve=null,i._crossorigin=r.crossorigin,i._load=null,!1!==r.autoLoad&&i.load(),i}return f(t,e),t.prototype.load=function(){var e=this;return this._load||(this._load=new Promise((function(r){if(e._resolve=function(){e.resize(e.source.width,e.source.height),r(e)},t.SVG_XML.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}))),this._load},t.prototype._loadSvg=function(){var e=this,t=new Image;E.crossOrigin(t,this.svg,this._crossorigin),t.src=this.svg,t.onerror=function(r){e._resolve&&(t.onerror=null,e.onError.emit(r))},t.onload=function(){if(e._resolve){var r=t.width,i=t.height;if(!r||!i)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var n=r*e.scale,s=i*e.scale;(e._overrideWidth||e._overrideHeight)&&(n=e._overrideWidth||e._overrideHeight/i*r,s=e._overrideHeight||e._overrideWidth/r*i),n=Math.round(n),s=Math.round(s);var a=e.source;a.width=n,a.height=s,a._pixiId="canvas_"+o.uid(),a.getContext("2d").drawImage(t,0,0,r,i,0,0,n,s),e._resolve(),e._resolve=null}}},t.getSize=function(e){var r=t.SVG_SIZE.exec(e),i={};return r&&(i[r[1]]=Math.round(parseFloat(r[3])),i[r[5]]=Math.round(parseFloat(r[7]))),i},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},t.test=function(e,r){return"svg"===r||"string"==typeof e&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(e)||"string"==typeof e&&t.SVG_XML.test(e)},t.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,t.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,t}(E),R=function(e){function t(r,i){var n=this;if(i=i||{},!(r instanceof HTMLVideoElement)){var o=document.createElement("video");o.setAttribute("preload","auto"),o.setAttribute("webkit-playsinline",""),o.setAttribute("playsinline",""),"string"==typeof r&&(r=[r]);var s=r[0].src||r[0];E.crossOrigin(o,s,i.crossorigin);for(var a=0;a<r.length;++a){var u=document.createElement("source"),h=r[a],l=h.src,d=h.mime,f=(l=l||r[a]).split("?").shift().toLowerCase(),c=f.slice(f.lastIndexOf(".")+1);d=d||t.MIME_TYPES[c]||"video/"+c,u.src=l,u.type=d,o.appendChild(u)}r=o}return(n=e.call(this,r)||this).noSubImage=!0,n._autoUpdate=!0,n._isConnectedToTicker=!1,n._updateFPS=i.updateFPS||0,n._msToNextUpdate=0,n.autoPlay=!1!==i.autoPlay,n._load=null,n._resolve=null,n._onCanPlay=n._onCanPlay.bind(n),n._onError=n._onError.bind(n),!1!==i.autoLoad&&n.load(),n}return f(t,e),t.prototype.update=function(t){if(!this.destroyed){var r=a.Ticker.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-r),(!this._updateFPS||this._msToNextUpdate<=0)&&(e.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},t.prototype.load=function(){var e=this;if(this._load)return this._load;var t=this.source;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart.bind(this)),t.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("error",this._onError,!0)),this._load=new Promise((function(r){e.valid?r(e):(e._resolve=r,t.load())})),this._load},t.prototype._onError=function(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e)},t.prototype._isSourcePlaying=function(){var e=this.source;return e.currentTime>0&&!1===e.paused&&!1===e.ended&&e.readyState>2},t.prototype._isSourceReady=function(){var e=this.source;return 3===e.readyState||4===e.readyState},t.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(a.Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0)},t.prototype._onPlayStop=function(){this._isConnectedToTicker&&(a.Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1)},t.prototype._onCanPlay=function(){var e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);var t=this.valid;this.resize(e.videoWidth,e.videoHeight),!t&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()},t.prototype.dispose=function(){this._isConnectedToTicker&&(a.Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1);var t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),e.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(a.Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(a.Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(e){e!==this._updateFPS&&(this._updateFPS=e)},enumerable:!1,configurable:!0}),t.test=function(e,r){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||t.TYPES.indexOf(r)>-1},t.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],t.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},t}(E),A=function(e){function t(t){return e.call(this,t)||this}return f(t,e),t.test=function(e){return!!globalThis.createImageBitmap&&e instanceof ImageBitmap},t}(E);h.push(b,A,T,R,S,m,x,y);var w={__proto__:null,Resource:p,BaseImageResource:E,INSTALLED:h,autoDetectResource:l,AbstractMultiResource:_,ArrayResource:y,BufferResource:m,CanvasResource:T,CubeResource:x,ImageResource:b,SVGResource:S,VideoResource:R,ImageBitmapResource:A},I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.upload=function(e,t,r){var i=e.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===n.ALPHA_MODES.UNPACK);var o=t.realWidth,s=t.realHeight;return r.width===o&&r.height===s?i.texSubImage2D(t.target,0,0,0,o,s,t.format,r.type,this.data):(r.width=o,r.height=s,i.texImage2D(t.target,0,r.internalFormat,o,s,0,t.format,r.type,this.data)),!0},t}(m),M=function(){function e(e,t){this.width=Math.round(e||100),this.height=Math.round(t||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new s.Runner("disposeFramebuffer"),this.multisample=n.MSAA_QUALITY.NONE}return Object.defineProperty(e.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),e.prototype.addColorTexture=function(e,t){return void 0===e&&(e=0),this.colorTextures[e]=t||new g(null,{scaleMode:n.SCALE_MODES.NEAREST,resolution:1,mipmap:n.MIPMAP_MODES.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},e.prototype.addDepthTexture=function(e){return this.depthTexture=e||new g(new I(null,{width:this.width,height:this.height}),{scaleMode:n.SCALE_MODES.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:n.MIPMAP_MODES.OFF,format:n.FORMATS.DEPTH_COMPONENT,type:n.TYPES.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},e.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},e.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},e.prototype.resize=function(e,t){if(e=Math.round(e),t=Math.round(t),e!==this.width||t!==this.height){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(var r=0;r<this.colorTextures.length;r++){var i=this.colorTextures[r],n=i.resolution;i.setSize(e/n,t/n)}this.depthTexture&&(n=this.depthTexture.resolution,this.depthTexture.setSize(e/n,t/n))}},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},e}(),C=function(e){function t(t){void 0===t&&(t={});var r=this;if("number"==typeof t){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];t={width:i,height:o,scaleMode:s,resolution:a}}return t.width=t.width||100,t.height=t.height||100,t.multisample=void 0!==t.multisample?t.multisample:n.MSAA_QUALITY.NONE,(r=e.call(this,null,t)||this).mipmap=n.MIPMAP_MODES.OFF,r.valid=!0,r.clearColor=[0,0,0,0],r.framebuffer=new M(r.realWidth,r.realHeight).addColorTexture(0,r),r.framebuffer.multisample=t.multisample,r.maskStack=[],r.filterStack=[{}],r}return f(t,e),t.prototype.resize=function(e,t){this.framebuffer.resize(e*this.resolution,t*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},t.prototype.dispose=function(){this.framebuffer.dispose(),e.prototype.dispose.call(this)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},t}(g),O=function(){function e(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return e.prototype.set=function(e,t,r){var i=t.width,n=t.height;if(r){var o=e.width/2/i,s=e.height/2/n,a=e.x/i+o,h=e.y/n+s;r=u.groupD8.add(r,u.groupD8.NW),this.x0=a+o*u.groupD8.uX(r),this.y0=h+s*u.groupD8.uY(r),r=u.groupD8.add(r,2),this.x1=a+o*u.groupD8.uX(r),this.y1=h+s*u.groupD8.uY(r),r=u.groupD8.add(r,2),this.x2=a+o*u.groupD8.uX(r),this.y2=h+s*u.groupD8.uY(r),r=u.groupD8.add(r,2),this.x3=a+o*u.groupD8.uX(r),this.y3=h+s*u.groupD8.uY(r)}else this.x0=e.x/i,this.y0=e.y/n,this.x1=(e.x+e.width)/i,this.y1=e.y/n,this.x2=(e.x+e.width)/i,this.y2=(e.y+e.height)/n,this.x3=e.x/i,this.y3=(e.y+e.height)/n;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},e.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},e}(),F=new O;function P(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}var N=function(e){function t(r,i,n,o,s,a){var h=e.call(this)||this;if(h.noFrame=!1,i||(h.noFrame=!0,i=new u.Rectangle(0,0,1,1)),r instanceof t&&(r=r.baseTexture),h.baseTexture=r,h._frame=i,h.trim=o,h.valid=!1,h._uvs=F,h.uvMatrix=null,h.orig=n||i,h._rotate=Number(s||0),!0===s)h._rotate=2;else if(h._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return h.defaultAnchor=a?new u.Point(a.x,a.y):new u.Point(0,0),h._updateID=0,h.textureCacheIds=[],r.valid?h.noFrame?r.valid&&h.onBaseTextureUpdated(r):h.frame=i:r.once("loaded",h.onBaseTextureUpdated,h),h.noFrame&&r.on("update",h.onBaseTextureUpdated,h),h}return f(t,e),t.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},t.prototype.onBaseTextureUpdated=function(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},t.prototype.destroy=function(e){if(this.baseTexture){if(e){var r=this.baseTexture.resource;r&&r.url&&o.TextureCache[r.url]&&t.removeFromCache(r.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,t.removeFromCache(this),this.textureCacheIds=null},t.prototype.clone=function(){var e=this._frame.clone(),r=this._frame===this.orig?e:this.orig.clone(),i=new t(this.baseTexture,!this.noFrame&&e,r,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(i._frame=e),i},t.prototype.updateUvs=function(){this._uvs===F&&(this._uvs=new O),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},t.from=function(e,r,n){void 0===r&&(r={}),void 0===n&&(n=i.settings.STRICT_TEXTURE_CACHE);var s="string"==typeof e,a=null;if(s)a=e;else if(e instanceof g){if(!e.cacheId){var u=r&&r.pixiIdPrefix||"pixiid";e.cacheId=u+"-"+o.uid(),g.addToCache(e,e.cacheId)}a=e.cacheId}else e._pixiId||(u=r&&r.pixiIdPrefix||"pixiid",e._pixiId=u+"_"+o.uid()),a=e._pixiId;var h=o.TextureCache[a];if(s&&n&&!h)throw new Error('The cacheId "'+a+'" does not exist in TextureCache.');return h||e instanceof g?!h&&e instanceof g&&(h=new t(e),t.addToCache(h,a)):(r.resolution||(r.resolution=o.getResolutionOfUrl(e)),(h=new t(new g(e,r))).baseTexture.cacheId=a,g.addToCache(h.baseTexture,a),t.addToCache(h,a)),h},t.fromURL=function(e,r){var i=Object.assign({autoLoad:!1},null==r?void 0:r.resourceOptions),n=t.from(e,Object.assign({resourceOptions:i},r),!1),o=n.baseTexture.resource;return n.baseTexture.valid?Promise.resolve(n):o.load().then((function(){return Promise.resolve(n)}))},t.fromBuffer=function(e,r,i,n){return new t(g.fromBuffer(e,r,i,n))},t.fromLoader=function(e,r,n,s){var a=new g(e,Object.assign({scaleMode:i.settings.SCALE_MODE,resolution:o.getResolutionOfUrl(r)},s)),u=a.resource;u instanceof b&&(u.url=r);var h=new t(a);return n||(n=r),g.addToCache(h.baseTexture,n),t.addToCache(h,n),n!==r&&(g.addToCache(h.baseTexture,r),t.addToCache(h,r)),h.baseTexture.valid?Promise.resolve(h):new Promise((function(e){h.baseTexture.once("loaded",(function(){return e(h)}))}))},t.addToCache=function(e,t){t&&(-1===e.textureCacheIds.indexOf(t)&&e.textureCacheIds.push(t),o.TextureCache[t]&&console.warn("Texture added to the cache with an id ["+t+"] that already had an entry"),o.TextureCache[t]=e)},t.removeFromCache=function(e){if("string"==typeof e){var t=o.TextureCache[e];if(t){var r=t.textureCacheIds.indexOf(e);return r>-1&&t.textureCacheIds.splice(r,1),delete o.TextureCache[e],t}}else if(e&&e.textureCacheIds){for(var i=0;i<e.textureCacheIds.length;++i)o.TextureCache[e.textureCacheIds[i]]===e&&delete o.TextureCache[e.textureCacheIds[i]];return e.textureCacheIds.length=0,e}return null},Object.defineProperty(t.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return this._frame},set:function(e){this._frame=e,this.noFrame=!1;var t=e.x,r=e.y,i=e.width,n=e.height,o=t+i>this.baseTexture.width,s=r+n>this.baseTexture.height;if(o||s){var a=o&&s?"and":"or",u="X: "+t+" + "+i+" = "+(t+i)+" > "+this.baseTexture.width,h="Y: "+r+" + "+n+" = "+(r+n)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+u+" "+a+" "+h)}this.valid=i&&n&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=e),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),t.prototype.castToBaseTexture=function(){return this.baseTexture},Object.defineProperty(t,"EMPTY",{get:function(){return t._EMPTY||(t._EMPTY=new t(new g),P(t._EMPTY),P(t._EMPTY.baseTexture)),t._EMPTY},enumerable:!1,configurable:!0}),Object.defineProperty(t,"WHITE",{get:function(){if(!t._WHITE){var e=document.createElement("canvas"),r=e.getContext("2d");e.width=16,e.height=16,r.fillStyle="white",r.fillRect(0,0,16,16),t._WHITE=new t(new g(new T(e))),P(t._WHITE),P(t._WHITE.baseTexture)}return t._WHITE},enumerable:!1,configurable:!0}),t}(o.EventEmitter),B=function(e){function t(t,r){var i=e.call(this,t,r)||this;return i.valid=!0,i.filterFrame=null,i.filterPoolKey=null,i.updateUvs(),i}return f(t,e),Object.defineProperty(t.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(e){this.framebuffer.multisample=e},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,t,r){void 0===r&&(r=!0);var i=this.baseTexture.resolution,n=Math.round(e*i)/i,o=Math.round(t*i)/i;this.valid=n>0&&o>0,this._frame.width=this.orig.width=n,this._frame.height=this.orig.height=o,r&&this.baseTexture.resize(n,o),this.updateUvs()},t.prototype.setResolution=function(e){var t=this.baseTexture;t.resolution!==e&&(t.setResolution(e),this.resize(t.width,t.height,!1))},t.create=function(e){for(var r=arguments,i=[],n=1;n<arguments.length;n++)i[n-1]=r[n];return"number"==typeof e&&(o.deprecation("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),e={width:e,height:i[0],scaleMode:i[1],resolution:i[2]}),new t(new C(e))},t}(N),D=function(){function e(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return e.prototype.createTexture=function(e,t,r){void 0===r&&(r=n.MSAA_QUALITY.NONE);var i=new C(Object.assign({width:e,height:t,resolution:1,multisample:r},this.textureOptions));return new B(i)},e.prototype.getOptimalTexture=function(e,t,r,i){var s;void 0===r&&(r=1),void 0===i&&(i=n.MSAA_QUALITY.NONE),e=Math.ceil(e*r-1e-6),t=Math.ceil(t*r-1e-6),this.enableFullScreen&&e===this._pixelsWidth&&t===this._pixelsHeight?s=i>1?-i:-1:(s=((65535&(e=o.nextPow2(e)))<<16|65535&(t=o.nextPow2(t)))>>>0,i>1&&(s+=4294967296*i)),this.texturePool[s]||(this.texturePool[s]=[]);var a=this.texturePool[s].pop();return a||(a=this.createTexture(e,t,i)),a.filterPoolKey=s,a.setResolution(r),a},e.prototype.getFilterTexture=function(e,t,r){var i=this.getOptimalTexture(e.width,e.height,t||e.resolution,r||n.MSAA_QUALITY.NONE);return i.filterFrame=e.filterFrame,i},e.prototype.returnTexture=function(e){var t=e.filterPoolKey;e.filterFrame=null,this.texturePool[t].push(e)},e.prototype.returnFilterTexture=function(e){this.returnTexture(e)},e.prototype.clear=function(e){if(e=!1!==e)for(var t in this.texturePool){var r=this.texturePool[t];if(r)for(var i=0;i<r.length;i++)r[i].destroy(!0)}this.texturePool={}},e.prototype.setScreenSize=function(e){if(e.width!==this._pixelsWidth||e.height!==this._pixelsHeight){for(var t in this.enableFullScreen=e.width>0&&e.height>0,this.texturePool)if(Number(t)<0){var r=this.texturePool[t];if(r)for(var i=0;i<r.length;i++)r[i].destroy(!0);this.texturePool[t]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}},e.SCREEN_KEY=-1,e}(),L=function(){function e(e,t,r,i,o,s,a){void 0===t&&(t=0),void 0===r&&(r=!1),void 0===i&&(i=n.TYPES.FLOAT),this.buffer=e,this.size=t,this.normalized=r,this.type=i,this.stride=o,this.start=s,this.instance=a}return e.prototype.destroy=function(){this.buffer=null},e.from=function(t,r,i,n,o){return new e(t,r,i,n,o)},e}(),U=0,G=function(){function e(e,t,r){void 0===t&&(t=!0),void 0===r&&(r=!1),this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=t,this.id=U++,this.disposeRunner=new s.Runner("disposeBuffer")}return e.prototype.update=function(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(e.prototype,"index",{get:function(){return this.type===n.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER},set:function(e){this.type=e?n.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER:n.BUFFER_TYPE.ARRAY_BUFFER},enumerable:!1,configurable:!0}),e.from=function(t){return t instanceof Array&&(t=new Float32Array(t)),new e(t)},e}(),k={Float32Array,Uint32Array,Int32Array,Uint8Array},V={5126:4,5123:2,5121:1},H=0,j={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},X=function(){function e(e,t){void 0===e&&(e=[]),void 0===t&&(t={}),this.buffers=e,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=H++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new s.Runner("disposeGeometry"),this.refCount=0}return e.prototype.addAttribute=function(e,t,r,i,n,o,s,a){if(void 0===r&&(r=0),void 0===i&&(i=!1),void 0===a&&(a=!1),!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof G||(t instanceof Array&&(t=new Float32Array(t)),t=new G(t));var u=e.split("|");if(u.length>1){for(var h=0;h<u.length;h++)this.addAttribute(u[h],t,r,i,n);return this}var l=this.buffers.indexOf(t);return-1===l&&(this.buffers.push(t),l=this.buffers.length-1),this.attributes[e]=new L(l,r,i,n,o,s,a),this.instanced=this.instanced||a,this},e.prototype.getAttribute=function(e){return this.attributes[e]},e.prototype.getBuffer=function(e){return this.buffers[this.getAttribute(e).buffer]},e.prototype.addIndex=function(e){return e instanceof G||(e instanceof Array&&(e=new Uint16Array(e)),e=new G(e)),e.type=n.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,-1===this.buffers.indexOf(e)&&this.buffers.push(e),this},e.prototype.getIndex=function(){return this.indexBuffer},e.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var e,t=[],r=[],i=new G;for(e in this.attributes){var n=this.attributes[e],s=this.buffers[n.buffer];t.push(s.data),r.push(n.size*V[n.type]/4),n.buffer=0}for(i.data=function(e,t){for(var r=0,i=0,n={},s=0;s<e.length;s++)i+=t[s],r+=e[s].length;var a=new ArrayBuffer(4*r),u=null,h=0;for(s=0;s<e.length;s++){var l=t[s],d=e[s],f=o.getBufferType(d);n[f]||(n[f]=new k[f](a)),u=n[f];for(var c=0;c<d.length;c++)u[(c/l|0)*i+h+c%l]=d[c];h+=l}return new Float32Array(a)}(t,r),e=0;e<this.buffers.length;e++)this.buffers[e]!==this.indexBuffer&&this.buffers[e].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},e.prototype.getSize=function(){for(var e in this.attributes){var t=this.attributes[e];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},e.prototype.clone=function(){for(var t=new e,r=0;r<this.buffers.length;r++)t.buffers[r]=new G(this.buffers[r].data.slice(0));for(var r in this.attributes){var i=this.attributes[r];t.attributes[r]=new L(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=n.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER),t},e.merge=function(t){for(var r,i=new e,s=[],a=[],u=[],h=0;h<t.length;h++){r=t[h];for(var l=0;l<r.buffers.length;l++)a[l]=a[l]||0,a[l]+=r.buffers[l].data.length,u[l]=0}for(h=0;h<r.buffers.length;h++)s[h]=new(j[o.getBufferType(r.buffers[h].data)])(a[h]),i.buffers[h]=new G(s[h]);for(h=0;h<t.length;h++)for(r=t[h],l=0;l<r.buffers.length;l++)s[l].set(r.buffers[l].data,u[l]),u[l]+=r.buffers[l].data.length;if(i.attributes=r.attributes,r.indexBuffer){i.indexBuffer=i.buffers[r.buffers.indexOf(r.indexBuffer)],i.indexBuffer.type=n.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER;var d=0,f=0,c=0,p=0;for(h=0;h<r.buffers.length;h++)if(r.buffers[h]!==r.indexBuffer){p=h;break}for(var h in r.attributes){var m=r.attributes[h];(0|m.buffer)===p&&(f+=m.size*V[m.type]/4)}for(h=0;h<t.length;h++){var v=t[h].indexBuffer.data;for(l=0;l<v.length;l++)i.indexBuffer.data[l+c]+=d;d+=t[h].buffers[p].data.length/f,c+=v.length}}return i},e}(),z=function(e){function t(){var t=e.call(this)||this;return t.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),t}return f(t,e),t}(X),Y=function(e){function t(){var t=e.call(this)||this;return t.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.vertexBuffer=new G(t.vertices),t.uvBuffer=new G(t.uvs),t.addAttribute("aVertexPosition",t.vertexBuffer).addAttribute("aTextureCoord",t.uvBuffer).addIndex([0,1,2,0,2,3]),t}return f(t,e),t.prototype.map=function(e,t){var r=0,i=0;return this.uvs[0]=r,this.uvs[1]=i,this.uvs[2]=r+t.width/e.width,this.uvs[3]=i,this.uvs[4]=r+t.width/e.width,this.uvs[5]=i+t.height/e.height,this.uvs[6]=r,this.uvs[7]=i+t.height/e.height,r=t.x,i=t.y,this.vertices[0]=r,this.vertices[1]=i,this.vertices[2]=r+t.width,this.vertices[3]=i,this.vertices[4]=r+t.width,this.vertices[5]=i+t.height,this.vertices[6]=r,this.vertices[7]=i+t.height,this.invalidate(),this},t.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},t}(X),W=0,K=function(){function e(e,t,r){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=W++,this.static=!!t,this.ubo=!!r,e instanceof G?(this.buffer=e,this.buffer.type=n.BUFFER_TYPE.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new G(new Float32Array(1)),this.buffer.type=n.BUFFER_TYPE.UNIFORM_BUFFER,this.autoManage=!0))}return e.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},e.prototype.add=function(t,r,i){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[t]=new e(r,i)},e.from=function(t,r,i){return new e(t,r,i)},e.uboFrom=function(t,r){return new e(t,null==r||r,!0)},e}(),Q=function(){function e(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=n.MSAA_QUALITY.NONE,this.sourceFrame=new u.Rectangle,this.destinationFrame=new u.Rectangle,this.bindingSourceFrame=new u.Rectangle,this.bindingDestinationFrame=new u.Rectangle,this.filters=[],this.transform=null}return e.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},e}(),q=[new u.Point,new u.Point,new u.Point,new u.Point],Z=new u.Matrix,$=function(){function e(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new D,this.texturePool.setScreenSize(e.view),this.statePool=[],this.quad=new z,this.quadUv=new Y,this.tempRect=new u.Rectangle,this.activeState={},this.globalUniforms=new K({outputFrame:new u.Rectangle,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return e.prototype.push=function(e,t){for(var r,i,n=this.renderer,o=this.defaultFilterStack,s=this.statePool.pop()||new Q,a=this.renderer.renderTexture,u=t[0].resolution,h=t[0].multisample,l=t[0].padding,d=t[0].autoFit,f=null===(r=t[0].legacy)||void 0===r||r,c=1;c<t.length;c++){var p=t[c];u=Math.min(u,p.resolution),h=Math.min(h,p.multisample),l=this.useMaxPadding?Math.max(l,p.padding):l+p.padding,d=d&&p.autoFit,f=f||null===(i=p.legacy)||void 0===i||i}1===o.length&&(this.defaultFilterStack[0].renderTexture=a.current),o.push(s),s.resolution=u,s.multisample=h,s.legacy=f,s.target=e,s.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),s.sourceFrame.pad(l);var m=this.tempRect.copyFrom(a.sourceFrame);n.projection.transform&&this.transformAABB(Z.copyFrom(n.projection.transform).invert(),m),d?(s.sourceFrame.fit(m),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(m)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,a.current?a.current.resolution:n.resolution,a.sourceFrame,a.destinationFrame,n.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,u,h),s.filters=t,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;var v=this.tempRect;v.x=0,v.y=0,v.width=s.sourceFrame.width,v.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(a.sourceFrame),s.bindingDestinationFrame.copyFrom(a.destinationFrame),s.transform=n.projection.transform,n.projection.transform=null,a.bind(s.renderTexture,s.sourceFrame,v),n.framebuffer.clear(0,0,0,0)},e.prototype.pop=function(){var e=this.defaultFilterStack,t=e.pop(),r=t.filters;this.activeState=t;var i=this.globalUniforms.uniforms;i.outputFrame=t.sourceFrame,i.resolution=t.resolution;var o=i.inputSize,s=i.inputPixel,a=i.inputClamp;if(o[0]=t.destinationFrame.width,o[1]=t.destinationFrame.height,o[2]=1/o[0],o[3]=1/o[1],s[0]=Math.round(o[0]*t.resolution),s[1]=Math.round(o[1]*t.resolution),s[2]=1/s[0],s[3]=1/s[1],a[0]=.5*s[2],a[1]=.5*s[3],a[2]=t.sourceFrame.width*o[2]-.5*s[2],a[3]=t.sourceFrame.height*o[3]-.5*s[3],t.legacy){var u=i.filterArea;u[0]=t.destinationFrame.width,u[1]=t.destinationFrame.height,u[2]=t.sourceFrame.x,u[3]=t.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();var h=e[e.length-1];if(this.renderer.framebuffer.blit(),1===r.length)r[0].apply(this,t.renderTexture,h.renderTexture,n.CLEAR_MODES.BLEND,t),this.returnFilterTexture(t.renderTexture);else{var l=t.renderTexture,d=this.getOptimalFilterTexture(l.width,l.height,t.resolution);d.filterFrame=l.filterFrame;var f=0;for(f=0;f<r.length-1;++f){1===f&&t.multisample>1&&((d=this.getOptimalFilterTexture(l.width,l.height,t.resolution)).filterFrame=l.filterFrame),r[f].apply(this,l,d,n.CLEAR_MODES.CLEAR,t);var c=l;l=d,d=c}r[f].apply(this,l,h.renderTexture,n.CLEAR_MODES.BLEND,t),f>1&&t.multisample>1&&this.returnFilterTexture(t.renderTexture),this.returnFilterTexture(l),this.returnFilterTexture(d)}t.clear(),this.statePool.push(t)},e.prototype.bindAndClear=function(e,t){void 0===t&&(t=n.CLEAR_MODES.CLEAR);var r=this.renderer,i=r.renderTexture,o=r.state;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e&&e.filterFrame){var s=this.tempRect;s.x=0,s.y=0,s.width=e.filterFrame.width,s.height=e.filterFrame.height,i.bind(e,e.filterFrame,s)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var a=1&o.stateId||this.forceClear;(t===n.CLEAR_MODES.CLEAR||t===n.CLEAR_MODES.BLIT&&a)&&this.renderer.framebuffer.clear(0,0,0,0)},e.prototype.applyFilter=function(e,t,r,i){var o=this.renderer;o.state.set(e.state),this.bindAndClear(r,i),e.uniforms.uSampler=t,e.uniforms.filterGlobals=this.globalUniforms,o.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(t._frame,t.filterFrame),o.geometry.bind(this.quadUv),o.geometry.draw(n.DRAW_MODES.TRIANGLES)):(o.geometry.bind(this.quad),o.geometry.draw(n.DRAW_MODES.TRIANGLE_STRIP))},e.prototype.calculateSpriteMatrix=function(e,t){var r=this.activeState,i=r.sourceFrame,n=r.destinationFrame,o=t._texture.orig,s=e.set(n.width,0,0,n.height,i.x,i.y),a=t.worldTransform.copyTo(u.Matrix.TEMP_MATRIX);return a.invert(),s.prepend(a),s.scale(1/o.width,1/o.height),s.translate(t.anchor.x,t.anchor.y),s},e.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},e.prototype.getOptimalFilterTexture=function(e,t,r,i){return void 0===r&&(r=1),void 0===i&&(i=n.MSAA_QUALITY.NONE),this.texturePool.getOptimalTexture(e,t,r,i)},e.prototype.getFilterTexture=function(e,t,r){if("number"==typeof e){var i=e;e=t,t=i}e=e||this.activeState.renderTexture;var o=this.texturePool.getOptimalTexture(e.width,e.height,t||e.resolution,r||n.MSAA_QUALITY.NONE);return o.filterFrame=e.filterFrame,o},e.prototype.returnFilterTexture=function(e){this.texturePool.returnTexture(e)},e.prototype.emptyPool=function(){this.texturePool.clear(!0)},e.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},e.prototype.transformAABB=function(e,t){var r=q[0],i=q[1],n=q[2],o=q[3];r.set(t.left,t.top),i.set(t.left,t.bottom),n.set(t.right,t.top),o.set(t.right,t.bottom),e.apply(r,r),e.apply(i,i),e.apply(n,n),e.apply(o,o);var s=Math.min(r.x,i.x,n.x,o.x),a=Math.min(r.y,i.y,n.y,o.y),u=Math.max(r.x,i.x,n.x,o.x),h=Math.max(r.y,i.y,n.y,o.y);t.x=s,t.y=a,t.width=u-s,t.height=h-a},e.prototype.roundFrame=function(e,t,r,i,n){if(!(e.width<=0||e.height<=0||r.width<=0||r.height<=0)){if(n){var o=n.a,s=n.b,a=n.c,u=n.d;if((Math.abs(s)>1e-4||Math.abs(a)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(u)>1e-4))return}(n=n?Z.copyFrom(n):Z.identity()).translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.transformAABB(n,e),e.ceil(t),this.transformAABB(n.invert(),e)}},e}(),J=function(){function e(e){this.renderer=e}return e.prototype.flush=function(){},e.prototype.destroy=function(){this.renderer=null},e.prototype.start=function(){},e.prototype.stop=function(){this.flush()},e.prototype.render=function(e){},e}(),ee=function(){function e(e){this.renderer=e,this.emptyRenderer=new J(e),this.currentRenderer=this.emptyRenderer}return e.prototype.setObjectRenderer=function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.copyBoundTextures=function(e,t){for(var r=this.renderer.texture.boundTextures,i=t-1;i>=0;--i)e[i]=r[i]||null,e[i]&&(e[i]._batchLocation=i)},e.prototype.boundArray=function(e,t,r,i){for(var n=e.elements,o=e.ids,s=e.count,a=0,u=0;u<s;u++){var h=n[u],l=h._batchLocation;if(l>=0&&l<i&&t[l]===h)o[u]=l;else for(;a<i;){var d=t[a];if(!d||d._batchEnabled!==r||d._batchLocation!==a){o[u]=a,h._batchLocation=a,t[a]=h;break}a++}}},e.prototype.destroy=function(){this.renderer=null},e}(),te=0,re=function(){function e(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),e.view.addEventListener("webglcontextlost",this.handleContextLost,!1),e.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(e.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),e.prototype.contextChange=function(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=te++,e.isContextLost()&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").restoreContext()},e.prototype.initFromContext=function(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=te++,this.renderer.runners.contextChange.emit(e)},e.prototype.initFromOptions=function(e){var t=this.createContext(this.renderer.view,e);this.initFromContext(t)},e.prototype.createContext=function(e,t){var r;if(i.settings.PREFER_ENV>=n.ENV.WEBGL2&&(r=e.getContext("webgl2",t)),r)this.webGLVersion=2;else if(this.webGLVersion=1,!(r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl},e.prototype.getExtensions=function(){var e=this.gl,t={anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,t,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),loseContext:e.getExtension("WEBGL_lose_context"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,t,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})},e.prototype.handleContextLost=function(e){e.preventDefault()},e.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},e.prototype.destroy=function(){var e=this.renderer.view;this.renderer=null,e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},e.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},e.prototype.validateContext=function(e){var t=e.getContextAttributes(),r="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;r&&(this.webGLVersion=2),t&&!t.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var i=r||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=i,i||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},e}(),ie=function(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=n.MSAA_QUALITY.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0},ne=new u.Rectangle,oe=function(){function e(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new M(10,10),this.msaaSamples=null}return e.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new u.Rectangle,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var t=this.renderer.context.extensions.drawBuffers,r=this.renderer.context.extensions.depthTexture;i.settings.PREFER_ENV===n.ENV.WEBGL_LEGACY&&(t=null,r=null),t?e.drawBuffers=function(e){return t.drawBuffersWEBGL(e)}:(this.hasMRT=!1,e.drawBuffers=function(){}),r||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)},e.prototype.bind=function(e,t,r){void 0===r&&(r=0);var i=this.gl;if(e){var n=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,i.bindFramebuffer(i.FRAMEBUFFER,n.framebuffer)),n.mipLevel!==r&&(e.dirtyId++,e.dirtyFormat++,n.mipLevel=r),n.dirtyId!==e.dirtyId&&(n.dirtyId=e.dirtyId,n.dirtyFormat!==e.dirtyFormat?(n.dirtyFormat=e.dirtyFormat,n.dirtySize=e.dirtySize,this.updateFramebuffer(e,r)):n.dirtySize!==e.dirtySize&&(n.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(var o=0;o<e.colorTextures.length;o++){var s=e.colorTextures[o];this.renderer.texture.unbind(s.parentTextureArray||s)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),t){var a=t.width>>r,u=t.height>>r,h=a/t.width;this.setViewport(t.x*h,t.y*h,a,u)}else a=e.width>>r,u=e.height>>r,this.setViewport(0,0,a,u)}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},e.prototype.setViewport=function(e,t,r,i){var n=this.viewport;e=Math.round(e),t=Math.round(t),r=Math.round(r),i=Math.round(i),n.width===r&&n.height===i&&n.x===e&&n.y===t||(n.x=e,n.y=t,n.width=r,n.height=i,this.gl.viewport(e,t,r,i))},Object.defineProperty(e.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),e.prototype.clear=function(e,t,r,i,o){void 0===o&&(o=n.BUFFER_BITS.COLOR|n.BUFFER_BITS.DEPTH);var s=this.gl;s.clearColor(e,t,r,i),s.clear(o)},e.prototype.initFramebuffer=function(e){var t=this.gl,r=new ie(t.createFramebuffer());return r.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=r,this.managedFramebuffers.push(e),e.disposeRunner.add(this),r},e.prototype.resizeFramebuffer=function(e){var t=this.gl,r=e.glFramebuffers[this.CONTEXT_UID];r.msaaBuffer&&(t.bindRenderbuffer(t.RENDERBUFFER,r.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,r.multisample,t.RGBA8,e.width,e.height)),r.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,r.stencil),r.msaaBuffer?t.renderbufferStorageMultisample(t.RENDERBUFFER,r.multisample,t.DEPTH24_STENCIL8,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,e.width,e.height));var i=e.colorTextures,n=i.length;t.drawBuffers||(n=Math.min(n,1));for(var o=0;o<n;o++){var s=i[o],a=s.parentTextureArray||s;this.renderer.texture.bind(a,0)}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)},e.prototype.updateFramebuffer=function(e,t){var r=this.gl,i=e.glFramebuffers[this.CONTEXT_UID],n=e.colorTextures,o=n.length;r.drawBuffers||(o=Math.min(o,1)),i.multisample>1&&this.canMultisampleFramebuffer(e)?(i.msaaBuffer=i.msaaBuffer||r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,i.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,r.RGBA8,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,i.msaaBuffer)):i.msaaBuffer&&(r.deleteRenderbuffer(i.msaaBuffer),i.msaaBuffer=null,i.blitFramebuffer&&(i.blitFramebuffer.dispose(),i.blitFramebuffer=null));for(var s=[],a=0;a<o;a++){var u=n[a],h=u.parentTextureArray||u;this.renderer.texture.bind(h,0),0===a&&i.msaaBuffer||(r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+a,u.target,h._glTextures[this.CONTEXT_UID].texture,t),s.push(r.COLOR_ATTACHMENT0+a))}if(s.length>1&&r.drawBuffers(s),e.depthTexture&&this.writeDepthTexture){var l=e.depthTexture;this.renderer.texture.bind(l,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,l._glTextures[this.CONTEXT_UID].texture,t)}!e.stencil&&!e.depth||e.depthTexture&&this.writeDepthTexture?i.stencil&&(r.deleteRenderbuffer(i.stencil),i.stencil=null):(i.stencil=i.stencil||r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,i.stencil),i.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,r.DEPTH24_STENCIL8,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,i.stencil))},e.prototype.canMultisampleFramebuffer=function(e){return 1!==this.renderer.context.webGLVersion&&e.colorTextures.length<=1&&!e.depthTexture},e.prototype.detectSamples=function(e){var t=this.msaaSamples,r=n.MSAA_QUALITY.NONE;if(e<=1||null===t)return r;for(var i=0;i<t.length;i++)if(t[i]<=e){r=t[i];break}return 1===r&&(r=n.MSAA_QUALITY.NONE),r},e.prototype.blit=function(e,t,r){var i=this,n=i.current,o=i.renderer,s=i.gl,a=i.CONTEXT_UID;if(2===o.context.webGLVersion&&n){var u=n.glFramebuffers[a];if(u){if(!e){if(!u.msaaBuffer)return;var h=n.colorTextures[0];if(!h)return;u.blitFramebuffer||(u.blitFramebuffer=new M(n.width,n.height),u.blitFramebuffer.addColorTexture(0,h)),(e=u.blitFramebuffer).colorTextures[0]!==h&&(e.colorTextures[0]=h,e.dirtyId++,e.dirtyFormat++),e.width===n.width&&e.height===n.height||(e.width=n.width,e.height=n.height,e.dirtyId++,e.dirtySize++)}t||((t=ne).width=n.width,t.height=n.height),r||(r=t);var l=t.width===r.width&&t.height===r.height;this.bind(e),s.bindFramebuffer(s.READ_FRAMEBUFFER,u.framebuffer),s.blitFramebuffer(t.left,t.top,t.right,t.bottom,r.left,r.top,r.right,r.bottom,s.COLOR_BUFFER_BIT,l?s.NEAREST:s.LINEAR)}}},e.prototype.disposeFramebuffer=function(e,t){var r=e.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(r){delete e.glFramebuffers[this.CONTEXT_UID];var n=this.managedFramebuffers.indexOf(e);n>=0&&this.managedFramebuffers.splice(n,1),e.disposeRunner.remove(this),t||(i.deleteFramebuffer(r.framebuffer),r.msaaBuffer&&i.deleteRenderbuffer(r.msaaBuffer),r.stencil&&i.deleteRenderbuffer(r.stencil)),r.blitFramebuffer&&r.blitFramebuffer.dispose()}},e.prototype.disposeAll=function(e){var t=this.managedFramebuffers;this.managedFramebuffers=[];for(var r=0;r<t.length;r++)this.disposeFramebuffer(t[r],e)},e.prototype.forceStencil=function(){var e=this.current;if(e){var t=e.glFramebuffers[this.CONTEXT_UID];if(t&&!t.stencil){e.stencil=!0;var r=e.width,i=e.height,n=this.gl,o=n.createRenderbuffer();n.bindRenderbuffer(n.RENDERBUFFER,o),t.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,t.multisample,n.DEPTH24_STENCIL8,r,i):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,r,i),t.stencil=o,n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,o)}}},e.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new u.Rectangle},e.prototype.destroy=function(){this.renderer=null},e}(),se={5126:4,5123:2,5121:1},ae=function(){function e(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return e.prototype.contextChange=function(){this.disposeAll(!0);var e=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==t.webGLVersion){var r=this.renderer.context.extensions.vertexArrayObject;i.settings.PREFER_ENV===n.ENV.WEBGL_LEGACY&&(r=null),r?(e.createVertexArray=function(){return r.createVertexArrayOES()},e.bindVertexArray=function(e){return r.bindVertexArrayOES(e)},e.deleteVertexArray=function(e){return r.deleteVertexArrayOES(e)}):(this.hasVao=!1,e.createVertexArray=function(){return null},e.bindVertexArray=function(){return null},e.deleteVertexArray=function(){return null})}if(2!==t.webGLVersion){var o=e.getExtension("ANGLE_instanced_arrays");o?(e.vertexAttribDivisor=function(e,t){return o.vertexAttribDivisorANGLE(e,t)},e.drawElementsInstanced=function(e,t,r,i,n){return o.drawElementsInstancedANGLE(e,t,r,i,n)},e.drawArraysInstanced=function(e,t,r,i){return o.drawArraysInstancedANGLE(e,t,r,i)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===t.webGLVersion||!!t.extensions.uint32ElementIndex},e.prototype.bind=function(e,t){t=t||this.renderer.shader.shader;var r=this.gl,i=e.glVertexArrayObjects[this.CONTEXT_UID],n=!1;i||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=i={},n=!0);var o=i[t.program.id]||this.initGeometryVao(e,t,n);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?r.bindVertexArray(o):this.activateVao(e,t.program)),this.updateBuffers()},e.prototype.reset=function(){this.unbind()},e.prototype.updateBuffers=function(){for(var e=this._activeGeometry,t=this.renderer.buffer,r=0;r<e.buffers.length;r++){var i=e.buffers[r];t.update(i)}},e.prototype.checkCompatibility=function(e,t){var r=e.attributes,i=t.attributeData;for(var n in i)if(!r[n])throw new Error('shader and geometry incompatible, geometry missing the "'+n+'" attribute')},e.prototype.getSignature=function(e,t){var r=e.attributes,i=t.attributeData,n=["g",e.id];for(var o in r)i[o]&&n.push(o,i[o].location);return n.join("-")},e.prototype.initGeometryVao=function(e,t,r){void 0===r&&(r=!0);var i=this.gl,n=this.CONTEXT_UID,o=this.renderer.buffer,s=t.program;s.glPrograms[n]||this.renderer.shader.generateProgram(t),this.checkCompatibility(e,s);var a=this.getSignature(e,s),u=e.glVertexArrayObjects[this.CONTEXT_UID],h=u[a];if(h)return u[s.id]=h,h;var l=e.buffers,d=e.attributes,f={},c={};for(var p in l)f[p]=0,c[p]=0;for(var p in d)!d[p].size&&s.attributeData[p]?d[p].size=s.attributeData[p].size:d[p].size||console.warn("PIXI Geometry attribute '"+p+"' size cannot be determined (likely the bound shader does not have the attribute)"),f[d[p].buffer]+=d[p].size*se[d[p].type];for(var p in d){var m=d[p],v=m.size;void 0===m.stride&&(f[m.buffer]===v*se[m.type]?m.stride=0:m.stride=f[m.buffer]),void 0===m.start&&(m.start=c[m.buffer],c[m.buffer]+=v*se[m.type])}h=i.createVertexArray(),i.bindVertexArray(h);for(var g=0;g<l.length;g++){var _=l[g];o.bind(_),r&&_._glBuffers[n].refCount++}return this.activateVao(e,s),this._activeVao=h,u[s.id]=h,u[a]=h,h},e.prototype.disposeGeometry=function(e,t){var r;if(this.managedGeometries[e.id]){delete this.managedGeometries[e.id];var i=e.glVertexArrayObjects[this.CONTEXT_UID],n=this.gl,o=e.buffers,s=null===(r=this.renderer)||void 0===r?void 0:r.buffer;if(e.disposeRunner.remove(this),i){if(s)for(var a=0;a<o.length;a++){var u=o[a]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,0!==u.refCount||t||s.dispose(o[a],t))}if(!t)for(var h in i)if("g"===h[0]){var l=i[h];this._activeVao===l&&this.unbind(),n.deleteVertexArray(l)}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}},e.prototype.disposeAll=function(e){for(var t=Object.keys(this.managedGeometries),r=0;r<t.length;r++)this.disposeGeometry(this.managedGeometries[t[r]],e)},e.prototype.activateVao=function(e,t){var r=this.gl,i=this.CONTEXT_UID,n=this.renderer.buffer,o=e.buffers,s=e.attributes;e.indexBuffer&&n.bind(e.indexBuffer);var a=null;for(var u in s){var h=s[u],l=o[h.buffer],d=l._glBuffers[i];if(t.attributeData[u]){a!==d&&(n.bind(l),a=d);var f=t.attributeData[u].location;if(r.enableVertexAttribArray(f),r.vertexAttribPointer(f,h.size,h.type||r.FLOAT,h.normalized,h.stride,h.start),h.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");r.vertexAttribDivisor(f,1)}}}},e.prototype.draw=function(e,t,r,i){var n=this.gl,o=this._activeGeometry;if(o.indexBuffer){var s=o.indexBuffer.data.BYTES_PER_ELEMENT,a=2===s?n.UNSIGNED_SHORT:n.UNSIGNED_INT;2===s||4===s&&this.canUseUInt32ElementIndex?o.instanced?n.drawElementsInstanced(e,t||o.indexBuffer.data.length,a,(r||0)*s,i||1):n.drawElements(e,t||o.indexBuffer.data.length,a,(r||0)*s):console.warn("unsupported index buffer type: uint32")}else o.instanced?n.drawArraysInstanced(e,r,t||o.getSize(),i||1):n.drawArrays(e,r,t||o.getSize());return this},e.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},e.prototype.destroy=function(){this.renderer=null},e}(),ue=function(){function e(e){void 0===e&&(e=null),this.type=n.MASK_TYPES.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=i.settings.FILTER_MULTISAMPLE,this.enabled=!0,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._target=null}return Object.defineProperty(e.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null},enumerable:!1,configurable:!0}),e.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=n.MASK_TYPES.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},e.prototype.copyCountersOrReset=function(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},e}();function he(e,t,r){var i=e.createShader(t);return e.shaderSource(i,r),e.compileShader(i),i}function le(e,t){var r=e.getShaderSource(t).split("\n").map((function(e,t){return t+": "+e})),i=e.getShaderInfoLog(t),n=i.split("\n"),o={},s=n.map((function(e){return parseFloat(e.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))})).filter((function(e){return!(!e||o[e]||(o[e]=!0,0))})),a=[""];s.forEach((function(e){r[e-1]="%c"+r[e-1]+"%c",a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")}));var u=r.join("\n");a[0]=u,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,a),console.groupEnd()}function de(e){for(var t=new Array(e),r=0;r<t.length;r++)t[r]=!1;return t}function fe(e,t){switch(e){case"float":case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return de(2*t);case"bvec3":return de(3*t);case"bvec4":return de(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var ce,pe={},me=pe;function ve(){if(me===pe||me&&me.isContextLost()){var e=document.createElement("canvas"),t=void 0;i.settings.PREFER_ENV>=n.ENV.WEBGL2&&(t=e.getContext("webgl2",{})),t||((t=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}))?t.getExtension("WEBGL_draw_buffers"):t=null),me=t}return me}function ge(e,t,r){if("precision"!==e.substring(0,9)){var i=t;return t===n.PRECISION.HIGH&&r!==n.PRECISION.HIGH&&(i=n.PRECISION.MEDIUM),"precision "+i+" float;\n"+e}return r!==n.PRECISION.HIGH&&"precision highp"===e.substring(0,15)?e.replace("precision highp","precision mediump"):e}var _e={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function ye(e){return _e[e]}var Ee=null,Te={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function xe(e,t){if(!Ee){var r=Object.keys(Te);Ee={};for(var i=0;i<r.length;++i){var n=r[i];Ee[e[n]]=Te[n]}}return Ee[t]}var be,Se=[{test:function(e){return"float"===e.type&&1===e.size},code:function(e){return'\n            if(uv["'+e+'"] !== ud["'+e+'"].value)\n            {\n                ud["'+e+'"].value = uv["'+e+'"]\n                gl.uniform1f(ud["'+e+'"].location, uv["'+e+'"])\n            }\n            '}},{test:function(e){return("sampler2D"===e.type||"samplerCube"===e.type||"sampler2DArray"===e.type)&&1===e.size&&!e.isArray},code:function(e){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+e+'"], t);\n\n            if(ud["'+e+'"].value !== t)\n            {\n                ud["'+e+'"].value = t;\n                gl.uniform1i(ud["'+e+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(e,t){return"mat3"===e.type&&1===e.size&&void 0!==t.a},code:function(e){return'\n            gl.uniformMatrix3fv(ud["'+e+'"].location, false, uv["'+e+'"].toArray(true));\n            '},codeUbo:function(e){return"\n                var "+e+"_matrix = uv."+e+".toArray(true);\n\n                data[offset] = "+e+"_matrix[0];\n                data[offset+1] = "+e+"_matrix[1];\n                data[offset+2] = "+e+"_matrix[2];\n        \n                data[offset + 4] = "+e+"_matrix[3];\n                data[offset + 5] = "+e+"_matrix[4];\n                data[offset + 6] = "+e+"_matrix[5];\n        \n                data[offset + 8] = "+e+"_matrix[6];\n                data[offset + 9] = "+e+"_matrix[7];\n                data[offset + 10] = "+e+"_matrix[8];\n            "}},{test:function(e,t){return"vec2"===e.type&&1===e.size&&void 0!==t.x},code:function(e){return'\n                cv = ud["'+e+'"].value;\n                v = uv["'+e+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+e+'"].location, v.x, v.y);\n                }'},codeUbo:function(e){return"\n                v = uv."+e+";\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            "}},{test:function(e){return"vec2"===e.type&&1===e.size},code:function(e){return'\n                cv = ud["'+e+'"].value;\n                v = uv["'+e+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+e+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(e,t){return"vec4"===e.type&&1===e.size&&void 0!==t.width},code:function(e){return'\n                cv = ud["'+e+'"].value;\n                v = uv["'+e+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+e+'"].location, v.x, v.y, v.width, v.height)\n                }'},codeUbo:function(e){return"\n                    v = uv."+e+";\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                "}},{test:function(e){return"vec4"===e.type&&1===e.size},code:function(e){return'\n                cv = ud["'+e+'"].value;\n                v = uv["'+e+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+e+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],Re={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},Ae={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"},we=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function Ie(e){for(var t="",r=0;r<e;++r)r>0&&(t+="\nelse "),r<e-1&&(t+="if(test == "+r+".0){}");return t}function Me(e,t){if(0===e)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var r=t.createShader(t.FRAGMENT_SHADER);;){var i=we.replace(/%forloop%/gi,Ie(e));if(t.shaderSource(r,i),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS))break;e=e/2|0}return e}var Ce=0,Oe={},Fe=function(){function e(t,r,o){void 0===o&&(o="pixi-shader"),this.id=Ce++,this.vertexSrc=t||e.defaultVertexSrc,this.fragmentSrc=r||e.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(o=o.replace(/\s+/g,"-"),Oe[o]?(Oe[o]++,o+="-"+Oe[o]):Oe[o]=1,this.vertexSrc="#define SHADER_NAME "+o+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+o+"\n"+this.fragmentSrc,this.vertexSrc=ge(this.vertexSrc,i.settings.PRECISION_VERTEX,n.PRECISION.HIGH),this.fragmentSrc=ge(this.fragmentSrc,i.settings.PRECISION_FRAGMENT,function(){if(!ce){ce=n.PRECISION.MEDIUM;var e=ve();if(e&&e.getShaderPrecisionFormat){var t=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);ce=t.precision?n.PRECISION.HIGH:n.PRECISION.MEDIUM}}return ce}())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(e,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),e.from=function(t,r,i){var n=t+r,s=o.ProgramCache[n];return s||(o.ProgramCache[n]=s=new e(t,r,i)),s},e}(),Pe=function(){function e(e,t){this.uniformBindCount=0,this.program=e,this.uniformGroup=t?t instanceof K?t:new K(t):new K({})}return e.prototype.checkUniformExists=function(e,t){if(t.uniforms[e])return!0;for(var r in t.uniforms){var i=t.uniforms[r];if(i.group&&this.checkUniformExists(e,i))return!0}return!1},e.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(e.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),e.from=function(t,r,i){return new e(Fe.from(t,r),i)},e}(),Ne=function(){function e(){this.data=0,this.blendMode=n.BLEND_MODES.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(e.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(e){!!(1&this.data)!==e&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(e){!!(2&this.data)!==e&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(e){!!(4&this.data)!==e&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(e){!!(8&this.data)!==e&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(e){!!(32&this.data)!==e&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(e){!!(16&this.data)!==e&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this._blendMode},set:function(e){this.blend=e!==n.BLEND_MODES.NONE,this._blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(e){this.offsets=!!e,this._polygonOffset=e},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},e.for2d=function(){var t=new e;return t.depthTest=!1,t.blend=!0,t},e}(),Be=function(e){function t(r,n,o){var s=this,a=Fe.from(r||t.defaultVertexSrc,n||t.defaultFragmentSrc);return(s=e.call(this,a,o)||this).padding=0,s.resolution=i.settings.FILTER_RESOLUTION,s.multisample=i.settings.FILTER_MULTISAMPLE,s.enabled=!0,s.autoFit=!0,s.state=new Ne,s}return f(t,e),t.prototype.apply=function(e,t,r,i,n){e.applyFilter(this,t,r,i)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resolution",{get:function(){return this._resolution},set:function(e){this._resolution=e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),t}(Pe),De=new u.Matrix,Le=function(){function e(e,t){this._texture=e,this.mapCoord=new u.Matrix,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===t?.5:t,this.isSimple=!1}return Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture=e,this._textureID=-1},enumerable:!1,configurable:!0}),e.prototype.multiplyUvs=function(e,t){void 0===t&&(t=e);for(var r=this.mapCoord,i=0;i<e.length;i+=2){var n=e[i],o=e[i+1];t[i]=n*r.a+o*r.c+r.tx,t[i+1]=n*r.b+o*r.d+r.ty}return t},e.prototype.update=function(e){var t=this._texture;if(!t||!t.valid)return!1;if(!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;var r=t._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var i=t.orig,n=t.trim;n&&(De.set(i.width/n.width,0,0,i.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(De));var o=t.baseTexture,s=this.uClampFrame,a=this.clampMargin/o.resolution,u=this.clampOffset;return s[0]=(t._frame.x+a+u)/o.width,s[1]=(t._frame.y+a+u)/o.height,s[2]=(t._frame.x+t._frame.width-a+u)/o.width,s[3]=(t._frame.y+t._frame.height-a+u)/o.height,this.uClampOffset[0]=u/o.realWidth,this.uClampOffset[1]=u/o.realHeight,this.isSimple=t._frame.width===o.width&&t._frame.height===o.height&&0===t.rotate,!0},e}(),Ue=function(e){function t(t,r,i){var n=this,o=null;return"string"!=typeof t&&void 0===r&&void 0===i&&(o=t,t=void 0,r=void 0,i=void 0),(n=e.call(this,t||"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",r||"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",i)||this).maskSprite=o,n.maskMatrix=new u.Matrix,n}return f(t,e),Object.defineProperty(t.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),t.prototype.apply=function(e,t,r,i){var n=this._maskSprite,o=n._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new Le(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,n).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,t,r,i))},t}(Be),Ge=function(){function e(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return e.prototype.setMaskStack=function(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)},e.prototype.push=function(e,t){var r=t;if(!r.isMaskData){var i=this.maskDataPool.pop()||new ue;i.pooled=!0,i.maskObject=t,r=i}var o=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null;if(r.copyCountersOrReset(o),r.autoDetect&&this.detect(r),r._target=e,r.type!==n.MASK_TYPES.SPRITE&&this.maskStack.push(r),r.enabled)switch(r.type){case n.MASK_TYPES.SCISSOR:this.renderer.scissor.push(r);break;case n.MASK_TYPES.STENCIL:this.renderer.stencil.push(r);break;case n.MASK_TYPES.SPRITE:r.copyCountersOrReset(null),this.pushSpriteMask(r)}r.type===n.MASK_TYPES.SPRITE&&this.maskStack.push(r)},e.prototype.pop=function(e){var t=this.maskStack.pop();if(t&&t._target===e){if(t.enabled)switch(t.type){case n.MASK_TYPES.SCISSOR:this.renderer.scissor.pop();break;case n.MASK_TYPES.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case n.MASK_TYPES.SPRITE:this.popSpriteMask(t)}if(t.reset(),t.pooled&&this.maskDataPool.push(t),0!==this.maskStack.length){var r=this.maskStack[this.maskStack.length-1];r.type===n.MASK_TYPES.SPRITE&&r._filters&&(r._filters[0].maskSprite=r.maskObject)}}},e.prototype.detect=function(e){e.maskObject.isSprite?e.type=n.MASK_TYPES.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=n.MASK_TYPES.SCISSOR:e.type=n.MASK_TYPES.STENCIL},e.prototype.pushSpriteMask=function(e){var t,r,i=e.maskObject,n=e._target,o=e._filters;o||(o=this.alphaMaskPool[this.alphaMaskIndex])||(o=this.alphaMaskPool[this.alphaMaskIndex]=[new Ue]);var s,a,u=this.renderer,h=u.renderTexture;if(h.current){var l=h.current;s=e.resolution||l.resolution,a=null!==(t=e.multisample)&&void 0!==t?t:l.multisample}else s=e.resolution||u.resolution,a=null!==(r=e.multisample)&&void 0!==r?r:u.multisample;o[0].resolution=s,o[0].multisample=a,o[0].maskSprite=i;var d=n.filterArea;n.filterArea=i.getBounds(!0),u.filter.push(n,o),n.filterArea=d,e._filters||this.alphaMaskIndex++},e.prototype.popSpriteMask=function(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},e.prototype.destroy=function(){this.renderer=null},e}(),ke=function(){function e(e){this.renderer=e,this.maskStack=[],this.glConst=0}return e.prototype.getStackLength=function(){return this.maskStack.length},e.prototype.setMaskStack=function(e){var t=this.renderer.gl,r=this.getStackLength();this.maskStack=e;var i=this.getStackLength();i!==r&&(0===i?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))},e.prototype._useCurrent=function(){},e.prototype.destroy=function(){this.renderer=null,this.maskStack=null},e}(),Ve=new u.Matrix,He=function(e){function t(t){var r=e.call(this,t)||this;return r.glConst=WebGLRenderingContext.SCISSOR_TEST,r}return f(t,e),t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0},t.prototype.calcScissorRect=function(e){if(!e._scissorRectLocal){var t=e._scissorRect,r=e.maskObject,i=this.renderer,n=i.renderTexture;r.renderable=!0;var o=r.getBounds();this.roundFrameToPixels(o,n.current?n.current.resolution:i.resolution,n.sourceFrame,n.destinationFrame,i.projection.transform),r.renderable=!1,t&&o.fit(t),e._scissorRectLocal=o}},t.isMatrixRotated=function(e){if(!e)return!1;var t=e.a,r=e.b,i=e.c,n=e.d;return(Math.abs(r)>1e-4||Math.abs(i)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(n)>1e-4)},t.prototype.testScissor=function(e){var r=e.maskObject;if(!r.isFastRect||!r.isFastRect())return!1;if(t.isMatrixRotated(r.worldTransform))return!1;if(t.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);var i=e._scissorRectLocal;return i.width>0&&i.height>0},t.prototype.roundFrameToPixels=function(e,r,i,n,o){t.isMatrixRotated(o)||((o=o?Ve.copyFrom(o):Ve.identity()).translate(-i.x,-i.y).scale(n.width/i.width,n.height/i.height).translate(n.x,n.y),this.renderer.filter.transformAABB(o,e),e.fit(n),e.x=Math.round(e.x*r),e.y=Math.round(e.y*r),e.width=Math.round(e.width*r),e.height=Math.round(e.height*r))},t.prototype.push=function(e){e._scissorRectLocal||this.calcScissorRect(e);var t=this.renderer.gl;e._scissorRect||t.enable(t.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()},t.prototype.pop=function(){var e=this.renderer.gl;this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)},t.prototype._useCurrent=function(){var e,t=this.maskStack[this.maskStack.length-1]._scissorRect;e=this.renderer.renderTexture.current?t.y:this.renderer.height-t.height-t.y,this.renderer.gl.scissor(t.x,e,t.width,t.height)},t}(ke),je=function(e){function t(t){var r=e.call(this,t)||this;return r.glConst=WebGLRenderingContext.STENCIL_TEST,r}return f(t,e),t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0},t.prototype.push=function(e){var t=e.maskObject,r=this.renderer.gl,i=e._stencilCounter;0===i&&(this.renderer.framebuffer.forceStencil(),r.clearStencil(0),r.clear(r.STENCIL_BUFFER_BIT),r.enable(r.STENCIL_TEST)),e._stencilCounter++,r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.EQUAL,i,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.INCR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent()},t.prototype.pop=function(e){var t=this.renderer.gl;0===this.getStackLength()?t.disable(t.STENCIL_TEST):(t.colorMask(!1,!1,!1,!1),t.stencilOp(t.KEEP,t.KEEP,t.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent())},t.prototype._useCurrent=function(){var e=this.renderer.gl;e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},t}(ke),Xe=function(){function e(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new u.Matrix,this.transform=null}return e.prototype.update=function(e,t,r,i){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,i),this.transform&&this.projectionMatrix.append(this.transform);var n=this.renderer;n.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,n.globalUniforms.update(),n.shader.shader&&n.shader.syncUniformGroup(n.shader.shader.uniforms.globals)},e.prototype.calculateProjection=function(e,t,r,i){var n=this.projectionMatrix,o=i?-1:1;n.identity(),n.a=1/t.width*2,n.d=o*(1/t.height*2),n.tx=-1-t.x*n.a,n.ty=-o-t.y*n.d},e.prototype.setTransform=function(e){},e.prototype.destroy=function(){this.renderer=null},e}(),ze=new u.Rectangle,Ye=new u.Rectangle,We=function(){function e(e){this.renderer=e,this.clearColor=e._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new u.Rectangle,this.destinationFrame=new u.Rectangle,this.viewportFrame=new u.Rectangle}return e.prototype.bind=function(e,t,r){void 0===e&&(e=null);var i,n,o,s=this.renderer;this.current=e,e?(o=(i=e.baseTexture).resolution,t||(ze.width=e.frame.width,ze.height=e.frame.height,t=ze),r||(Ye.x=e.frame.x,Ye.y=e.frame.y,Ye.width=t.width,Ye.height=t.height,r=Ye),n=i.framebuffer):(o=s.resolution,t||(ze.width=s.screen.width,ze.height=s.screen.height,t=ze),r||((r=ze).width=t.width,r.height=t.height));var a=this.viewportFrame;a.x=r.x*o,a.y=r.y*o,a.width=r.width*o,a.height=r.height*o,e||(a.y=s.view.height-(a.y+a.height)),a.ceil(),this.renderer.framebuffer.bind(n,a),this.renderer.projection.update(r,t,o,!n),e?this.renderer.mask.setMaskStack(i.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(r)},e.prototype.clear=function(e,t){e=this.current?e||this.current.baseTexture.clearColor:e||this.clearColor;var r=this.destinationFrame,i=this.current?this.current.baseTexture:this.renderer.screen,n=r.width!==i.width||r.height!==i.height;if(n){var o=this.viewportFrame,s=o.x,a=o.y,u=o.width,h=o.height;s=Math.round(s),a=Math.round(a),u=Math.round(u),h=Math.round(h),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(s,a,u,h)}this.renderer.framebuffer.clear(e[0],e[1],e[2],e[3],t),n&&this.renderer.scissor.pop()},e.prototype.resize=function(){this.bind(null)},e.prototype.reset=function(){this.bind(null)},e.prototype.destroy=function(){this.renderer=null},e}();function Ke(e,t,r,i,n){r.buffer.update(n)}var Qe={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},qe={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};function Ze(e){for(var t=e.map((function(e){return{data:e,offset:0,dataLen:0,dirty:0}})),r=0,i=0,n=0,o=0;o<t.length;o++){var s=t[o];if(r=qe[s.data.type],s.data.size>1&&(r=Math.max(r,16)*s.data.size),s.dataLen=r,i%r!=0&&i<16){var a=i%r%16;i+=a,n+=a}i+r>16?(n=16*Math.ceil(n/16),s.offset=n,n+=r,i=r):(s.offset=n,i+=r,n+=r)}return{uboElements:t,size:n=16*Math.ceil(n/16)}}function $e(e,t){var r=[];for(var i in e)t[i]&&r.push(t[i]);return r.sort((function(e,t){return e.index-t.index})),r}function Je(e,t){if(!e.autoManage)return{size:0,syncFunc:Ke};for(var r=Ze($e(e.uniforms,t)),i=r.uboElements,n=r.size,o=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "],s=0;s<i.length;s++){for(var a=i[s],u=e.uniforms[a.data.name],h=a.data.name,l=!1,d=0;d<Se.length;d++){var f=Se[d];if(f.codeUbo&&f.test(a.data,u)){o.push("offset = "+a.offset/4+";",Se[d].codeUbo(a.data.name,u)),l=!0;break}}if(!l)if(a.data.size>1){var c=ye(a.data.type),p=Math.max(qe[a.data.type]/16,1),m=c/p,v=(4-m%4)%4;o.push("\n                cv = ud."+h+".value;\n                v = uv."+h+";\n                offset = "+a.offset/4+";\n\n                t = 0;\n\n                for(var i=0; i < "+a.data.size*p+"; i++)\n                {\n                    for(var j = 0; j < "+m+"; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += "+v+";\n                }\n\n                ")}else{var g=Qe[a.data.type];o.push("\n                cv = ud."+h+".value;\n                v = uv."+h+";\n                offset = "+a.offset/4+";\n                "+g+";\n                ")}}return o.push("\n       renderer.buffer.update(buffer);\n    "),{size:n,syncFunc:new Function("ud","uv","renderer","syncData","buffer",o.join("\n"))}}var et=function(){function e(e,t){this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return e.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},e}();function tt(e,t){var r=he(e,e.VERTEX_SHADER,t.vertexSrc),i=he(e,e.FRAGMENT_SHADER,t.fragmentSrc),n=e.createProgram();if(e.attachShader(n,r),e.attachShader(n,i),e.linkProgram(n),e.getProgramParameter(n,e.LINK_STATUS)||function(e,t,r,i){e.getProgramParameter(t,e.LINK_STATUS)||(e.getShaderParameter(r,e.COMPILE_STATUS)||le(e,r),e.getShaderParameter(i,e.COMPILE_STATUS)||le(e,i),console.error("PixiJS Error: Could not initialize shader."),""!==e.getProgramInfoLog(t)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(t)))}(e,n,r,i),t.attributeData=function(e,t){for(var r={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),n=0;n<i;n++){var o=t.getActiveAttrib(e,n);if(0!==o.name.indexOf("gl_")){var s=xe(t,o.type),a={type:s,name:o.name,size:ye(s),location:t.getAttribLocation(e,o.name)};r[o.name]=a}}return r}(n,e),t.uniformData=function(e,t){for(var r={},i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),n=0;n<i;n++){var o=t.getActiveUniform(e,n),s=o.name.replace(/\[.*?\]$/,""),a=!!o.name.match(/\[.*?\]$/),u=xe(t,o.type);r[s]={name:s,index:n,type:u,size:o.size,isArray:a,value:fe(u,o.size)}}return r}(n,e),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){var o=Object.keys(t.attributeData);o.sort((function(e,t){return e>t?1:-1}));for(var s=0;s<o.length;s++)t.attributeData[o[s]].location=s,e.bindAttribLocation(n,s,o[s]);e.linkProgram(n)}e.deleteShader(r),e.deleteShader(i);var a={};for(var s in t.uniformData){var u=t.uniformData[s];a[s]={location:e.getUniformLocation(n,s),value:fe(u.type,u.size)}}return new et(n,a)}var rt=0,it={textureCount:0,uboCount:0},nt=function(){function e(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=rt++}return e.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof be)return be;try{var e=new Function("param1","param2","param3","return param1[param2] === param3;");be=!0===e({a:"b"},"a","b")}catch(e){be=!1}return be}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},e.prototype.contextChange=function(e){this.gl=e,this.reset()},e.prototype.bind=function(e,t){e.uniforms.globals=this.renderer.globalUniforms;var r=e.program,i=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==r&&(this.program=r,this.gl.useProgram(i.program)),t||(it.textureCount=0,it.uboCount=0,this.syncUniformGroup(e.uniformGroup,it)),i},e.prototype.setUniforms=function(e){var t=this.shader.program,r=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(r.uniformData,e,this.renderer)},e.prototype.syncUniformGroup=function(e,t){var r=this.getGlProgram();e.static&&e.dirtyId===r.uniformDirtyGroups[e.id]||(r.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,r,t))},e.prototype.syncUniforms=function(e,t,r){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(t.uniformData,e.uniforms,this.renderer,r)},e.prototype.createSyncGroups=function(e){var t=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[t]||(this.cache[t]=function(e,t){var r,i=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(var n in e.uniforms){var o=t[n];if(o){for(var s=e.uniforms[n],a=!1,u=0;u<Se.length;u++)if(Se[u].test(o,s)){i.push(Se[u].code(n,s)),a=!0;break}if(!a){var h=(1===o.size?Re:Ae)[o.type].replace("location",'ud["'+n+'"].location');i.push('\n            cu = ud["'+n+'"];\n            cv = cu.value;\n            v = uv["'+n+'"];\n            '+h+";")}}else(null===(r=e.uniforms[n])||void 0===r?void 0:r.group)&&(e.uniforms[n].ubo?i.push("\n                        renderer.shader.syncUniformBufferGroup(uv."+n+", '"+n+"');\n                    "):i.push("\n                        renderer.shader.syncUniformGroup(uv."+n+", syncData);\n                    "))}return new Function("ud","uv","renderer","syncData",i.join("\n"))}(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[t],e.syncUniforms[this.shader.program.id]},e.prototype.syncUniformBufferGroup=function(e,t){var r=this.getGlProgram();if(!e.static||0!==e.dirtyId||!r.uniformGroups[e.id]){e.dirtyId=0;var i=r.uniformGroups[e.id]||this.createSyncBufferGroup(e,r,t);e.buffer.update(),i(r.uniformData,e.uniforms,this.renderer,it,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,r.uniformBufferBindings[t])},e.prototype.createSyncBufferGroup=function(e,t,r){var i=this.renderer.gl;this.renderer.buffer.bind(e.buffer);var n=this.gl.getUniformBlockIndex(t.program,r);t.uniformBufferBindings[r]=this.shader.uniformBindCount,i.uniformBlockBinding(t.program,n,this.shader.uniformBindCount),this.shader.uniformBindCount++;var o=this.getSignature(e,this.shader.program.uniformData,"ubo"),s=this._uboCache[o];if(s||(s=this._uboCache[o]=Je(e,this.shader.program.uniformData)),e.autoManage){var a=new Float32Array(s.size/4);e.buffer.update(a)}return t.uniformGroups[e.id]=s.syncFunc,t.uniformGroups[e.id]},e.prototype.getSignature=function(e,t,r){var i=e.uniforms,n=[r+"-"];for(var o in i)n.push(o),t[o]&&n.push(t[o].type);return n.join("-")},e.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},e.prototype.generateProgram=function(e){var t=this.gl,r=e.program,i=tt(t,r);return r.glPrograms[this.renderer.CONTEXT_UID]=i,i},e.prototype.reset=function(){this.program=null,this.shader=null},e.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},e}(),ot=function(){function e(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=n.BLEND_MODES.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new Ne,this.defaultState.blend=!0}return e.prototype.contextChange=function(e){this.gl=e,this.blendModes=function(e,t){return void 0===t&&(t=[]),t[n.BLEND_MODES.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.ADD]=[e.ONE,e.ONE],t[n.BLEND_MODES.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.NONE]=[0,0],t[n.BLEND_MODES.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],t[n.BLEND_MODES.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.SRC_IN]=[e.DST_ALPHA,e.ZERO],t[n.BLEND_MODES.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],t[n.BLEND_MODES.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],t[n.BLEND_MODES.DST_IN]=[e.ZERO,e.SRC_ALPHA],t[n.BLEND_MODES.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],t[n.BLEND_MODES.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],t}(e),this.set(this.defaultState),this.reset()},e.prototype.set=function(e){if(e=e||this.defaultState,this.stateId!==e.data){for(var t=this.stateId^e.data,r=0;t;)1&t&&this.map[r].call(this,!!(e.data&1<<r)),t>>=1,r++;this.stateId=e.data}for(r=0;r<this.checks.length;r++)this.checks[r](this,e)},e.prototype.forceState=function(e){e=e||this.defaultState;for(var t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data},e.prototype.setBlend=function(t){this.updateCheck(e.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},e.prototype.setOffset=function(t){this.updateCheck(e.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},e.prototype.setDepthTest=function(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)},e.prototype.setDepthMask=function(e){this.gl.depthMask(e)},e.prototype.setCullFace=function(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)},e.prototype.setFrontFace=function(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])},e.prototype.setBlendMode=function(e){if(e!==this.blendMode){this.blendMode=e;var t=this.blendModes[e],r=this.gl;2===t.length?r.blendFunc(t[0],t[1]):r.blendFuncSeparate(t[0],t[1],t[2],t[3]),6===t.length?(this._blendEq=!0,r.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}},e.prototype.setPolygonOffset=function(e,t){this.gl.polygonOffset(e,t)},e.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},e.prototype.updateCheck=function(e,t){var r=this.checks.indexOf(e);t&&-1===r?this.checks.push(e):t||-1===r||this.checks.splice(r,1)},e.checkBlendMode=function(e,t){e.setBlendMode(t.blendMode)},e.checkPolygonOffset=function(e,t){e.setPolygonOffset(1,t.polygonOffset)},e.prototype.destroy=function(){this.gl=null},e}(),st=function(){function e(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=i.settings.GC_MAX_IDLE,this.checkCountMax=i.settings.GC_MAX_CHECK_COUNT,this.mode=i.settings.GC_MODE}return e.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==n.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},e.prototype.run=function(){for(var e=this.renderer.texture,t=e.managedTextures,r=!1,i=0;i<t.length;i++){var n=t[i];!n.framebuffer&&this.count-n.touched>this.maxIdle&&(e.destroyTexture(n,!0),t[i]=null,r=!0)}if(r){var o=0;for(i=0;i<t.length;i++)null!==t[i]&&(t[o++]=t[i]);t.length=o}},e.prototype.unload=function(e){var t=this.renderer.texture,r=e._texture;r&&!r.framebuffer&&t.destroyTexture(r);for(var i=e.children.length-1;i>=0;i--)this.unload(e.children[i])},e.prototype.destroy=function(){this.renderer=null},e}(),at=function(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=n.TYPES.UNSIGNED_BYTE,this.internalFormat=n.FORMATS.RGBA,this.samplerType=0},ut=function(){function e(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new g,this.hasIntegerTextures=!1}return e.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=function(e){var t,r,i,o,s,a,u,h,l,d,f,c,p,m,v,g,_,y,E,T,x,b,S;return"WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext?((t={})[n.TYPES.UNSIGNED_BYTE]=((r={})[n.FORMATS.RGBA]=e.RGBA8,r[n.FORMATS.RGB]=e.RGB8,r[n.FORMATS.RG]=e.RG8,r[n.FORMATS.RED]=e.R8,r[n.FORMATS.RGBA_INTEGER]=e.RGBA8UI,r[n.FORMATS.RGB_INTEGER]=e.RGB8UI,r[n.FORMATS.RG_INTEGER]=e.RG8UI,r[n.FORMATS.RED_INTEGER]=e.R8UI,r[n.FORMATS.ALPHA]=e.ALPHA,r[n.FORMATS.LUMINANCE]=e.LUMINANCE,r[n.FORMATS.LUMINANCE_ALPHA]=e.LUMINANCE_ALPHA,r),t[n.TYPES.BYTE]=((i={})[n.FORMATS.RGBA]=e.RGBA8_SNORM,i[n.FORMATS.RGB]=e.RGB8_SNORM,i[n.FORMATS.RG]=e.RG8_SNORM,i[n.FORMATS.RED]=e.R8_SNORM,i[n.FORMATS.RGBA_INTEGER]=e.RGBA8I,i[n.FORMATS.RGB_INTEGER]=e.RGB8I,i[n.FORMATS.RG_INTEGER]=e.RG8I,i[n.FORMATS.RED_INTEGER]=e.R8I,i),t[n.TYPES.UNSIGNED_SHORT]=((o={})[n.FORMATS.RGBA_INTEGER]=e.RGBA16UI,o[n.FORMATS.RGB_INTEGER]=e.RGB16UI,o[n.FORMATS.RG_INTEGER]=e.RG16UI,o[n.FORMATS.RED_INTEGER]=e.R16UI,o[n.FORMATS.DEPTH_COMPONENT]=e.DEPTH_COMPONENT16,o),t[n.TYPES.SHORT]=((s={})[n.FORMATS.RGBA_INTEGER]=e.RGBA16I,s[n.FORMATS.RGB_INTEGER]=e.RGB16I,s[n.FORMATS.RG_INTEGER]=e.RG16I,s[n.FORMATS.RED_INTEGER]=e.R16I,s),t[n.TYPES.UNSIGNED_INT]=((a={})[n.FORMATS.RGBA_INTEGER]=e.RGBA32UI,a[n.FORMATS.RGB_INTEGER]=e.RGB32UI,a[n.FORMATS.RG_INTEGER]=e.RG32UI,a[n.FORMATS.RED_INTEGER]=e.R32UI,a[n.FORMATS.DEPTH_COMPONENT]=e.DEPTH_COMPONENT24,a),t[n.TYPES.INT]=((u={})[n.FORMATS.RGBA_INTEGER]=e.RGBA32I,u[n.FORMATS.RGB_INTEGER]=e.RGB32I,u[n.FORMATS.RG_INTEGER]=e.RG32I,u[n.FORMATS.RED_INTEGER]=e.R32I,u),t[n.TYPES.FLOAT]=((h={})[n.FORMATS.RGBA]=e.RGBA32F,h[n.FORMATS.RGB]=e.RGB32F,h[n.FORMATS.RG]=e.RG32F,h[n.FORMATS.RED]=e.R32F,h[n.FORMATS.DEPTH_COMPONENT]=e.DEPTH_COMPONENT32F,h),t[n.TYPES.HALF_FLOAT]=((l={})[n.FORMATS.RGBA]=e.RGBA16F,l[n.FORMATS.RGB]=e.RGB16F,l[n.FORMATS.RG]=e.RG16F,l[n.FORMATS.RED]=e.R16F,l),t[n.TYPES.UNSIGNED_SHORT_5_6_5]=((d={})[n.FORMATS.RGB]=e.RGB565,d),t[n.TYPES.UNSIGNED_SHORT_4_4_4_4]=((f={})[n.FORMATS.RGBA]=e.RGBA4,f),t[n.TYPES.UNSIGNED_SHORT_5_5_5_1]=((c={})[n.FORMATS.RGBA]=e.RGB5_A1,c),t[n.TYPES.UNSIGNED_INT_2_10_10_10_REV]=((p={})[n.FORMATS.RGBA]=e.RGB10_A2,p[n.FORMATS.RGBA_INTEGER]=e.RGB10_A2UI,p),t[n.TYPES.UNSIGNED_INT_10F_11F_11F_REV]=((m={})[n.FORMATS.RGB]=e.R11F_G11F_B10F,m),t[n.TYPES.UNSIGNED_INT_5_9_9_9_REV]=((v={})[n.FORMATS.RGB]=e.RGB9_E5,v),t[n.TYPES.UNSIGNED_INT_24_8]=((g={})[n.FORMATS.DEPTH_STENCIL]=e.DEPTH24_STENCIL8,g),t[n.TYPES.FLOAT_32_UNSIGNED_INT_24_8_REV]=((_={})[n.FORMATS.DEPTH_STENCIL]=e.DEPTH32F_STENCIL8,_),S=t):((y={})[n.TYPES.UNSIGNED_BYTE]=((E={})[n.FORMATS.RGBA]=e.RGBA,E[n.FORMATS.RGB]=e.RGB,E[n.FORMATS.ALPHA]=e.ALPHA,E[n.FORMATS.LUMINANCE]=e.LUMINANCE,E[n.FORMATS.LUMINANCE_ALPHA]=e.LUMINANCE_ALPHA,E),y[n.TYPES.UNSIGNED_SHORT_5_6_5]=((T={})[n.FORMATS.RGB]=e.RGB,T),y[n.TYPES.UNSIGNED_SHORT_4_4_4_4]=((x={})[n.FORMATS.RGBA]=e.RGBA,x),y[n.TYPES.UNSIGNED_SHORT_5_5_5_1]=((b={})[n.FORMATS.RGBA]=e.RGBA,b),S=y),S}(e);var t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(var r=0;r<t;r++)this.boundTextures[r]=null;this.emptyTextures={};var i=new at(e.createTexture());for(e.bindTexture(e.TEXTURE_2D,i.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=i,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new at(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture),r=0;r<6;r++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);for(e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR),r=0;r<this.boundTextures.length;r++)this.bind(null,r)},e.prototype.bind=function(e,t){void 0===t&&(t=0);var r=this.gl;if((e=null==e?void 0:e.castToBaseTexture())&&e.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;var i=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[t]!==e&&(this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),r.bindTexture(e.target,i.texture)),i.dirtyId!==e.dirtyId&&(this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),this.updateTexture(e)),this.boundTextures[t]=e}else this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[r.TEXTURE_2D].texture),this.boundTextures[t]=null},e.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture},e.prototype.unbind=function(e){var t=this.gl,r=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var i=0;i<r.length;i++)r[i]===this.unknownTexture&&this.bind(null,i)}for(i=0;i<r.length;i++)r[i]===e&&(this.currentLocation!==i&&(t.activeTexture(t.TEXTURE0+i),this.currentLocation=i),t.bindTexture(e.target,this.emptyTextures[e.target].texture),r[i]=null)},e.prototype.ensureSamplerType=function(e){var t=this,r=t.boundTextures,i=t.hasIntegerTextures,o=t.CONTEXT_UID;if(i)for(var s=e-1;s>=0;--s){var a=r[s];a&&a._glTextures[o].samplerType!==n.SAMPLER_TYPES.FLOAT&&this.renderer.texture.unbind(a)}},e.prototype.initTexture=function(e){var t=new at(this.gl.createTexture());return t.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),t},e.prototype.initTextureType=function(e,t){var r,i;t.internalFormat=null!==(i=null===(r=this.internalFormats[e.type])||void 0===r?void 0:r[e.format])&&void 0!==i?i:e.format,2===this.webGLVersion&&e.type===n.TYPES.HALF_FLOAT?t.type=this.gl.HALF_FLOAT:t.type=e.type},e.prototype.updateTexture=function(e){var t=e._glTextures[this.CONTEXT_UID];if(t){var r=this.renderer;if(this.initTextureType(e,t),e.resource&&e.resource.upload(r,e,t))t.samplerType!==n.SAMPLER_TYPES.FLOAT&&(this.hasIntegerTextures=!0);else{var i=e.realWidth,o=e.realHeight,s=r.gl;(t.width!==i||t.height!==o||t.dirtyId<0)&&(t.width=i,t.height=o,s.texImage2D(e.target,0,t.internalFormat,i,o,0,e.format,t.type,null))}e.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(e),t.dirtyId=e.dirtyId}},e.prototype.destroyTexture=function(e,t){var r=this.gl;if((e=e.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(e),r.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!t)){var i=this.managedTextures.indexOf(e);-1!==i&&o.removeItems(this.managedTextures,i,1)}},e.prototype.updateTextureStyle=function(e){var t=e._glTextures[this.CONTEXT_UID];t&&(e.mipmap!==n.MIPMAP_MODES.POW2&&2===this.webGLVersion||e.isPowerOfTwo?t.mipmap=e.mipmap>=1:t.mipmap=!1,2===this.webGLVersion||e.isPowerOfTwo?t.wrapMode=e.wrapMode:t.wrapMode=n.WRAP_MODES.CLAMP,e.resource&&e.resource.style(this.renderer,e,t)||this.setStyle(e,t),t.dirtyStyleId=e.dirtyStyleId)},e.prototype.setStyle=function(e,t){var r=this.gl;if(t.mipmap&&e.mipmap!==n.MIPMAP_MODES.ON_MANUAL&&r.generateMipmap(e.target),r.texParameteri(e.target,r.TEXTURE_WRAP_S,t.wrapMode),r.texParameteri(e.target,r.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===n.SCALE_MODES.LINEAR?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST);var i=this.renderer.context.extensions.anisotropicFiltering;if(i&&e.anisotropicLevel>0&&e.scaleMode===n.SCALE_MODES.LINEAR){var o=Math.min(e.anisotropicLevel,r.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));r.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY_EXT,o)}}else r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===n.SCALE_MODES.LINEAR?r.LINEAR:r.NEAREST);r.texParameteri(e.target,r.TEXTURE_MAG_FILTER,e.scaleMode===n.SCALE_MODES.LINEAR?r.LINEAR:r.NEAREST)},e.prototype.destroy=function(){this.renderer=null},e}(),ht={__proto__:null,FilterSystem:$,BatchSystem:ee,ContextSystem:re,FramebufferSystem:oe,GeometrySystem:ae,MaskSystem:Ge,ScissorSystem:He,StencilSystem:je,ProjectionSystem:Xe,RenderTextureSystem:We,ShaderSystem:nt,StateSystem:ot,TextureGCSystem:st,TextureSystem:ut},lt=new u.Matrix,dt=function(e){function t(t,r){void 0===t&&(t=n.RENDERER_TYPE.UNKNOWN);var s=e.call(this)||this;return r=Object.assign({},i.settings.RENDER_OPTIONS,r),s.options=r,s.type=t,s.screen=new u.Rectangle(0,0,r.width,r.height),s.view=r.view||document.createElement("canvas"),s.resolution=r.resolution||i.settings.RESOLUTION,s.useContextAlpha=r.useContextAlpha,s.autoDensity=!!r.autoDensity,s.preserveDrawingBuffer=r.preserveDrawingBuffer,s.clearBeforeRender=r.clearBeforeRender,s._backgroundColor=0,s._backgroundColorRgba=[0,0,0,1],s._backgroundColorString="#000000",s.backgroundColor=r.backgroundColor||s._backgroundColor,s.backgroundAlpha=r.backgroundAlpha,void 0!==r.transparent&&(o.deprecation("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),s.useContextAlpha=r.transparent,s.backgroundAlpha=r.transparent?0:1),s._lastObjectRendered=null,s.plugins={},s}return f(t,e),t.prototype.initPlugins=function(e){for(var t in e)this.plugins[t]=new e[t](this)},Object.defineProperty(t.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,t){this.view.width=Math.round(e*this.resolution),this.view.height=Math.round(t*this.resolution);var r=this.view.width/this.resolution,i=this.view.height/this.resolution;this.screen.width=r,this.screen.height=i,this.autoDensity&&(this.view.style.width=r+"px",this.view.style.height=i+"px"),this.emit("resize",r,i)},t.prototype.generateTexture=function(e,t,r,i){void 0===t&&(t={}),"number"==typeof t&&(o.deprecation("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),t={scaleMode:t,resolution:r,region:i});var n=t.region,s=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&(r[i[n]]=e[i[n]])}return r}(t,["region"]);0===(i=n||e.getLocalBounds(null,!0)).width&&(i.width=1),0===i.height&&(i.height=1);var a=B.create(c({width:i.width,height:i.height},s));return lt.tx=-i.x,lt.ty=-i.y,this.render(e,{renderTexture:a,clear:!1,transform:lt,skipUpdateTransform:!!e.parent}),a},t.prototype.destroy=function(e){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var r=this;r.plugins=null,r.type=n.RENDERER_TYPE.UNKNOWN,r.view=null,r.screen=null,r._tempDisplayObjectParent=null,r.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=o.hex2string(e),o.hex2rgb(e,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(e){this._backgroundColorRgba[3]=e},enumerable:!1,configurable:!0}),t}(o.EventEmitter),ft=function(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},ct=function(){function e(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}return e.prototype.destroy=function(){this.renderer=null},e.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},e.prototype.bind=function(e){var t=this.gl,r=this.CONTEXT_UID,i=e._glBuffers[r]||this.createGLBuffer(e);t.bindBuffer(e.type,i.buffer)},e.prototype.bindBufferBase=function(e,t){var r=this.gl,i=this.CONTEXT_UID;if(this.boundBufferBases[t]!==e){var n=e._glBuffers[i]||this.createGLBuffer(e);this.boundBufferBases[t]=e,r.bindBufferBase(r.UNIFORM_BUFFER,t,n.buffer)}},e.prototype.bindBufferRange=function(e,t,r){var i=this.gl,n=this.CONTEXT_UID;r=r||0;var o=e._glBuffers[n]||this.createGLBuffer(e);i.bindBufferRange(i.UNIFORM_BUFFER,t||0,o.buffer,256*r,256)},e.prototype.update=function(e){var t=this.gl,r=this.CONTEXT_UID,i=e._glBuffers[r];if(e._updateID!==i.updateID)if(i.updateID=e._updateID,t.bindBuffer(e.type,i.buffer),i.byteLength>=e.data.byteLength)t.bufferSubData(e.type,0,e.data);else{var n=e.static?t.STATIC_DRAW:t.DYNAMIC_DRAW;i.byteLength=e.data.byteLength,t.bufferData(e.type,e.data,n)}},e.prototype.dispose=function(e,t){if(this.managedBuffers[e.id]){delete this.managedBuffers[e.id];var r=e._glBuffers[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this),r&&(t||i.deleteBuffer(r.buffer),delete e._glBuffers[this.CONTEXT_UID])}},e.prototype.disposeAll=function(e){for(var t=Object.keys(this.managedBuffers),r=0;r<t.length;r++)this.dispose(this.managedBuffers[t[r]],e)},e.prototype.createGLBuffer=function(e){var t=this.CONTEXT_UID,r=this.gl;return e._glBuffers[t]=new ft(r.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[t]},e}(),pt=function(e){function t(r){var i=e.call(this,n.RENDERER_TYPE.WEBGL,r)||this;return r=i.options,i.gl=null,i.CONTEXT_UID=0,i.runners={destroy:new s.Runner("destroy"),contextChange:new s.Runner("contextChange"),reset:new s.Runner("reset"),update:new s.Runner("update"),postrender:new s.Runner("postrender"),prerender:new s.Runner("prerender"),resize:new s.Runner("resize")},i.runners.contextChange.add(i),i.globalUniforms=new K({projectionMatrix:new u.Matrix},!0),i.addSystem(Ge,"mask").addSystem(re,"context").addSystem(ot,"state").addSystem(nt,"shader").addSystem(ut,"texture").addSystem(ct,"buffer").addSystem(ae,"geometry").addSystem(oe,"framebuffer").addSystem(He,"scissor").addSystem(je,"stencil").addSystem(Xe,"projection").addSystem(st,"textureGC").addSystem($,"filter").addSystem(We,"renderTexture").addSystem(ee,"batch"),i.initPlugins(t.__plugins),i.multisample=void 0,r.context?i.context.initFromContext(r.context):i.context.initFromOptions({alpha:!!i.useContextAlpha,antialias:r.antialias,premultipliedAlpha:i.useContextAlpha&&"notMultiplied"!==i.useContextAlpha,stencil:!0,preserveDrawingBuffer:r.preserveDrawingBuffer,powerPreference:i.options.powerPreference}),i.renderingToScreen=!0,o.sayHello(2===i.context.webGLVersion?"WebGL 2":"WebGL 1"),i.resize(i.options.width,i.options.height),i}return f(t,e),t.create=function(e){if(o.isWebGLSupported())return new t(e);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},t.prototype.contextChange=function(){var e,t=this.gl;if(1===this.context.webGLVersion){var r=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,r)}else r=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,r);e>=n.MSAA_QUALITY.HIGH?this.multisample=n.MSAA_QUALITY.HIGH:e>=n.MSAA_QUALITY.MEDIUM?this.multisample=n.MSAA_QUALITY.MEDIUM:e>=n.MSAA_QUALITY.LOW?this.multisample=n.MSAA_QUALITY.LOW:this.multisample=n.MSAA_QUALITY.NONE},t.prototype.addSystem=function(e,t){var r=new e(this);if(this[t])throw new Error('Whoops! The name "'+t+'" is already in use');for(var i in this[t]=r,this.runners)this.runners[i].add(r);return this},t.prototype.render=function(e,t){var r,i,n,s;if(t&&(t instanceof B?(o.deprecation("6.0.0","Renderer#render arguments changed, use options instead."),r=t,i=arguments[2],n=arguments[3],s=arguments[4]):(r=t.renderTexture,i=t.clear,n=t.transform,s=t.skipUpdateTransform)),this.renderingToScreen=!r,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=n,!this.context.isLost){if(r||(this._lastObjectRendered=e),!s){var a=e.enableTempParent();e.updateTransform(),e.disableTempParent(a)}this.renderTexture.bind(r),this.batch.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this.renderTexture.clear(),e.render(this),this.batch.currentRenderer.flush(),r&&r.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},t.prototype.generateTexture=function(t,r,i,n){void 0===r&&(r={});var o=e.prototype.generateTexture.call(this,t,r,i,n);return this.framebuffer.blit(),o},t.prototype.resize=function(t,r){e.prototype.resize.call(this,t,r),this.runners.resize.emit(this.screen.height,this.screen.width)},t.prototype.reset=function(){return this.runners.reset.emit(),this},t.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},t.prototype.destroy=function(t){for(var r in this.runners.destroy.emit(),this.runners)this.runners[r].destroy();e.prototype.destroy.call(this,t),this.gl=null},Object.defineProperty(t.prototype,"extract",{get:function(){return o.deprecation("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),t.registerPlugin=function(e,r){t.__plugins=t.__plugins||{},t.__plugins[e]=r},t}(dt),mt=function(){function e(e){o.deprecation("6.1.0","System class is deprecated, implemement ISystem interface instead."),this.renderer=e}return e.prototype.destroy=function(){this.renderer=null},e}(),vt=function(){this.texArray=null,this.blend=0,this.type=n.DRAW_MODES.TRIANGLES,this.start=0,this.size=0,this.data=null},gt=function(){function e(){this.elements=[],this.ids=[],this.count=0}return e.prototype.clear=function(){for(var e=0;e<this.count;e++)this.elements[e]=null;this.count=0},e}(),_t=function(){function e(e){"number"==typeof e?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(e.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),e.prototype.view=function(e){return this[e+"View"]},e.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},e.sizeOf=function(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(e+" isn't a valid view type")}},e}(),yt=function(e){function t(t){var r=e.call(this,t)||this;return r.shaderGenerator=null,r.geometryClass=null,r.vertexSize=null,r.state=Ne.for2d(),r.size=4*i.settings.SPRITE_BATCH_SIZE,r._vertexCount=0,r._indexCount=0,r._bufferedElements=[],r._bufferedTextures=[],r._bufferSize=0,r._shader=null,r._packedGeometries=[],r._packedGeometryPoolSize=2,r._flushId=0,r._aBuffers={},r._iBuffers={},r.MAX_TEXTURES=1,r.renderer.on("prerender",r.onPrerender,r),t.runners.contextChange.add(r),r._dcIndex=0,r._aIndex=0,r._iIndex=0,r._attributeBuffer=null,r._indexBuffer=null,r._tempBoundTextures=[],r}return f(t,e),t.prototype.contextChange=function(){var e=this.renderer.gl;i.settings.PREFER_ENV===n.ENV.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),i.settings.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=Me(this.MAX_TEXTURES,e)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()},t.prototype.initFlushBuffers=function(){for(var e=t._drawCallPool,r=t._textureArrayPool,i=this.size/4,n=Math.floor(i/this.MAX_TEXTURES)+1;e.length<i;)e.push(new vt);for(;r.length<n;)r.push(new gt);for(var o=0;o<this.MAX_TEXTURES;o++)this._tempBoundTextures[o]=null},t.prototype.onPrerender=function(){this._flushId=0},t.prototype.render=function(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)},t.prototype.buildTexturesAndDrawCalls=function(){var e=this._bufferedTextures,r=this.MAX_TEXTURES,i=t._textureArrayPool,n=this.renderer.batch,o=this._tempBoundTextures,s=this.renderer.textureGC.count,a=++g._globalBatch,u=0,h=i[0],l=0;n.copyBoundTextures(o,r);for(var d=0;d<this._bufferSize;++d){var f=e[d];e[d]=null,f._batchEnabled!==a&&(h.count>=r&&(n.boundArray(h,o,a,r),this.buildDrawCalls(h,l,d),l=d,h=i[++u],++a),f._batchEnabled=a,f.touched=s,h.elements[h.count++]=f)}for(h.count>0&&(n.boundArray(h,o,a,r),this.buildDrawCalls(h,l,this._bufferSize),++u,++a),d=0;d<o.length;d++)o[d]=null;g._globalBatch=a},t.prototype.buildDrawCalls=function(e,r,i){var n=this,s=n._bufferedElements,a=n._attributeBuffer,u=n._indexBuffer,h=n.vertexSize,l=t._drawCallPool,d=this._dcIndex,f=this._aIndex,c=this._iIndex,p=l[d];p.start=this._iIndex,p.texArray=e;for(var m=r;m<i;++m){var v=s[m],g=v._texture.baseTexture,_=o.premultiplyBlendMode[g.alphaMode?1:0][v.blendMode];s[m]=null,r<m&&p.blend!==_&&(p.size=c-p.start,r=m,(p=l[++d]).texArray=e,p.start=c),this.packInterleavedGeometry(v,a,u,f,c),f+=v.vertexData.length/2*h,c+=v.indices.length,p.blend=_}r<i&&(p.size=c-p.start,++d),this._dcIndex=d,this._aIndex=f,this._iIndex=c},t.prototype.bindAndClearTexArray=function(e){for(var t=this.renderer.texture,r=0;r<e.count;r++)t.bind(e.elements[r],e.ids[r]),e.elements[r]=null;e.count=0},t.prototype.updateGeometry=function(){var e=this,t=e._packedGeometries,r=e._attributeBuffer,n=e._indexBuffer;i.settings.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(r.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(r.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},t.prototype.drawBatches=function(){for(var e=this._dcIndex,r=this.renderer,i=r.gl,n=r.state,o=t._drawCallPool,s=null,a=0;a<e;a++){var u=o[a],h=u.texArray,l=u.type,d=u.size,f=u.start,c=u.blend;s!==h&&(s=h,this.bindAndClearTexArray(h)),this.state.blendMode=c,n.set(this.state),i.drawElements(l,d,i.UNSIGNED_SHORT,2*f)}},t.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},t.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),i.settings.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},t.prototype.stop=function(){this.flush()},t.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),e.prototype.destroy.call(this)},t.prototype.getAttributeBuffer=function(e){var t=o.nextPow2(Math.ceil(e/8)),r=o.log2(t),i=8*t;this._aBuffers.length<=r&&(this._iBuffers.length=r+1);var n=this._aBuffers[i];return n||(this._aBuffers[i]=n=new _t(i*this.vertexSize*4)),n},t.prototype.getIndexBuffer=function(e){var t=o.nextPow2(Math.ceil(e/12)),r=o.log2(t),i=12*t;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);var n=this._iBuffers[r];return n||(this._iBuffers[r]=n=new Uint16Array(i)),n},t.prototype.packInterleavedGeometry=function(e,t,r,i,n){for(var s=t.uint32View,a=t.float32View,u=i/this.vertexSize,h=e.uvs,l=e.indices,d=e.vertexData,f=e._texture.baseTexture._batchLocation,c=Math.min(e.worldAlpha,1),p=c<1&&e._texture.baseTexture.alphaMode?o.premultiplyTint(e._tintRGB,c):e._tintRGB+(255*c<<24),m=0;m<d.length;m+=2)a[i++]=d[m],a[i++]=d[m+1],a[i++]=h[m],a[i++]=h[m+1],s[i++]=p,a[i++]=f;for(m=0;m<l.length;m++)r[n++]=u+l[m]},t._drawCallPool=[],t._textureArrayPool=[],t}(J),Et=function(){function e(e,t){if(this.vertexSrc=e,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},t.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(t.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return e.prototype.generateShader=function(e){if(!this.programCache[e]){for(var t=new Int32Array(e),r=0;r<e;r++)t[r]=r;this.defaultGroupCache[e]=K.from({uSamplers:t},!0);var i=this.fragTemplate;i=(i=i.replace(/%count%/gi,""+e)).replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new Fe(this.vertexSrc,i)}var n={tint:new Float32Array([1,1,1,1]),translationMatrix:new u.Matrix,default:this.defaultGroupCache[e]};return new Pe(this.programCache[e],n)},e.prototype.generateSampleSrc=function(e){var t="";t+="\n",t+="\n";for(var r=0;r<e;r++)r>0&&(t+="\nelse "),r<e-1&&(t+="if(vTextureId < "+r+".5)"),t+="\n{",t+="\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord);",t+="\n}";return(t+="\n")+"\n"},e}(),Tt=function(e){function t(t){void 0===t&&(t=!1);var r=e.call(this)||this;return r._buffer=new G(null,t,!1),r._indexBuffer=new G(null,t,!0),r.addAttribute("aVertexPosition",r._buffer,2,!1,n.TYPES.FLOAT).addAttribute("aTextureCoord",r._buffer,2,!1,n.TYPES.FLOAT).addAttribute("aColor",r._buffer,4,!0,n.TYPES.UNSIGNED_BYTE).addAttribute("aTextureId",r._buffer,1,!0,n.TYPES.FLOAT).addIndex(r._indexBuffer),r}return f(t,e),t}(X),xt="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",bt="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",St=function(){function e(){}return e.create=function(e){var t=Object.assign({vertex:xt,fragment:bt,geometryClass:Tt,vertexSize:6},e),r=t.vertex,i=t.fragment,n=t.vertexSize,o=t.geometryClass;return function(e){function t(t){var s=e.call(this,t)||this;return s.shaderGenerator=new Et(r,i),s.geometryClass=o,s.vertexSize=n,s}return f(t,e),t}(yt)},Object.defineProperty(e,"defaultVertexSrc",{get:function(){return xt},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentTemplate",{get:function(){return bt},enumerable:!1,configurable:!0}),e}(),Rt=St.create(),At={},wt=function(e){Object.defineProperty(At,e,{get:function(){return o.deprecation("6.0.0","PIXI.systems."+e+" has moved to PIXI."+e),w[e]}})};for(var It in w)wt(It);var Mt={},Ct=function(e){Object.defineProperty(Mt,e,{get:function(){return o.deprecation("6.0.0","PIXI.resources."+e+" has moved to PIXI."+e),ht[e]}})};for(var It in ht)Ct(It);t.AbstractBatchRenderer=yt,t.AbstractMultiResource=_,t.AbstractRenderer=dt,t.ArrayResource=y,t.Attribute=L,t.BaseImageResource=E,t.BaseRenderTexture=C,t.BaseTexture=g,t.BatchDrawCall=vt,t.BatchGeometry=Tt,t.BatchPluginFactory=St,t.BatchRenderer=Rt,t.BatchShaderGenerator=Et,t.BatchSystem=ee,t.BatchTextureArray=gt,t.Buffer=G,t.BufferResource=m,t.CanvasResource=T,t.ContextSystem=re,t.CubeResource=x,t.Filter=Be,t.FilterState=Q,t.FilterSystem=$,t.Framebuffer=M,t.FramebufferSystem=oe,t.GLFramebuffer=ie,t.GLProgram=et,t.GLTexture=at,t.Geometry=X,t.GeometrySystem=ae,t.IGLUniformData=function(){},t.INSTALLED=h,t.ImageBitmapResource=A,t.ImageResource=b,t.MaskData=ue,t.MaskSystem=Ge,t.ObjectRenderer=J,t.Program=Fe,t.ProjectionSystem=Xe,t.Quad=z,t.QuadUv=Y,t.RenderTexture=B,t.RenderTexturePool=D,t.RenderTextureSystem=We,t.Renderer=pt,t.Resource=p,t.SVGResource=S,t.ScissorSystem=He,t.Shader=Pe,t.ShaderSystem=nt,t.SpriteMaskFilter=Ue,t.State=Ne,t.StateSystem=ot,t.StencilSystem=je,t.System=mt,t.Texture=N,t.TextureGCSystem=st,t.TextureMatrix=Le,t.TextureSystem=ut,t.TextureUvs=O,t.UniformGroup=K,t.VideoResource=R,t.ViewableBuffer=_t,t.autoDetectRenderer=function(e){return pt.create(e)},t.autoDetectResource=l,t.checkMaxIfStatementsInShader=Me,t.createUBOElements=Ze,t.defaultFilterVertex="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",t.defaultVertex="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",t.generateProgram=tt,t.generateUniformBufferSync=Je,t.getTestContext=ve,t.getUBOData=$e,t.resources=At,t.systems=Mt,t.uniformParsers=Se}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVF1aEIsYUFBZUEsRUFDdkJ2aEIsRUFBUXVTLGNBQWdCQSxFQUN4QnZTLEVBQVE0N0MsZUFBaUJBLEdBQ3pCNTdDLEVBQVFvaUQsbUJBaDFCUixTQUE0QmxoRCxHQUN4QixPQUFPZzVDLEdBQVN6M0MsT0FBT3ZCLEVBQzNCLEVBKzBCQWxCLEVBQVFnQixtQkFBcUJBLEVBQzdCaEIsRUFBUXU3Qiw2QkFBK0JBLEdBQ3ZDdjdCLEVBQVFxa0Msa0JBQW9CQSxHQUM1QnJrQyxFQUFRcWlELG9CQTkwQm1CLCtqQkErMEIzQnJpRCxFQUFReWhELGNBajFCYSxzUkFrMUJyQnpoRCxFQUFRa3pCLGdCQUFrQkEsR0FDMUJsekIsRUFBUStrQywwQkFBNEJBLEdBQ3BDL2tDLEVBQVE2MkIsZUFBaUJBLEdBQ3pCNzJCLEVBQVE0a0MsV0FBYUEsR0FDckI1a0MsRUFBUWtNLFVBQVlBLEdBQ3BCbE0sRUFBUWlpRCxRQUFVQSxHQUNsQmppRCxFQUFRNDZCLGVBQWlCQSIsInNvdXJjZXMiOlsid2VicGFjazovL2dlYXIzZW5naW5lLXdlYnNpdGUvLi4vLi4vR0FNRVMtU0lNVUxBVE9SUy1GVU4vZ2VhcjNlbmdpbmUvcGx1Z2lucy9nM2UtY2FudmFzLTJkL25vZGVfbW9kdWxlcy9AcGl4aS9jb3JlL2Rpc3QvY2pzL2NvcmUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBAcGl4aS9jb3JlIC0gdjYuNC4yXG4gKiBDb21waWxlZCBUaHUsIDAyIEp1biAyMDIyIDE1OjM5OjI2IFVUQ1xuICpcbiAqIEBwaXhpL2NvcmUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICogaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZVxuICovXG4ndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5cbnZhciBzZXR0aW5ncyA9IHJlcXVpcmUoJ0BwaXhpL3NldHRpbmdzJyk7XG52YXIgY29uc3RhbnRzID0gcmVxdWlyZSgnQHBpeGkvY29uc3RhbnRzJyk7XG52YXIgdXRpbHMgPSByZXF1aXJlKCdAcGl4aS91dGlscycpO1xudmFyIHJ1bm5lciA9IHJlcXVpcmUoJ0BwaXhpL3J1bm5lcicpO1xudmFyIHRpY2tlciA9IHJlcXVpcmUoJ0BwaXhpL3RpY2tlcicpO1xudmFyIG1hdGggPSByZXF1aXJlKCdAcGl4aS9tYXRoJyk7XG5cbi8qKlxuICogVGhlIG1heGltdW0gc3VwcG9ydCBmb3IgdXNpbmcgV2ViR0wuIElmIGEgZGV2aWNlIGRvZXMgbm90XG4gKiBzdXBwb3J0IFdlYkdMIHZlcnNpb24sIGZvciBpbnN0YW5jZSBXZWJHTCAyLCBpdCB3aWxsIHN0aWxsXG4gKiBhdHRlbXB0IHRvIGZhbGxiYWNrIHN1cHBvcnQgdG8gV2ViR0wgMS4gSWYgeW91IHdhbnQgdG9cbiAqIGV4cGxpY2l0bHkgcmVtb3ZlIGZlYXR1cmUgc3VwcG9ydCB0byB0YXJnZXQgYSBtb3JlIHN0YWJsZVxuICogYmFzZWxpbmUsIHByZWZlciBhIGxvd2VyIGVudmlyb25tZW50LlxuICpcbiAqIER1ZSB0byB7QGxpbmsgaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9OTM0ODIzfGJ1ZyBpbiBjaHJvbWl1bX1cbiAqIHdlIGRpc2FibGUgd2ViZ2wyIGJ5IGRlZmF1bHQgZm9yIGFsbCBub24tYXBwbGUgbW9iaWxlIGRldmljZXMuXG4gKiBAc3RhdGljXG4gKiBAbmFtZSBQUkVGRVJfRU5WXG4gKiBAbWVtYmVyb2YgUElYSS5zZXR0aW5nc1xuICogQHR5cGUge251bWJlcn1cbiAqIEBkZWZhdWx0IFBJWEkuRU5WLldFQkdMMlxuICovXG5zZXR0aW5ncy5zZXR0aW5ncy5QUkVGRVJfRU5WID0gdXRpbHMuaXNNb2JpbGUuYW55ID8gY29uc3RhbnRzLkVOVi5XRUJHTCA6IGNvbnN0YW50cy5FTlYuV0VCR0wyO1xuLyoqXG4gKiBJZiBzZXQgdG8gYHRydWVgLCAqb25seSogVGV4dHVyZXMgYW5kIEJhc2VUZXh0dXJlIG9iamVjdHMgc3RvcmVkXG4gKiBpbiB0aGUgY2FjaGVzICh7QGxpbmsgUElYSS51dGlscy5UZXh0dXJlQ2FjaGUgVGV4dHVyZUNhY2hlfSBhbmRcbiAqIHtAbGluayBQSVhJLnV0aWxzLkJhc2VUZXh0dXJlQ2FjaGUgQmFzZVRleHR1cmVDYWNoZX0pIGNhbiBiZVxuICogdXNlZCB3aGVuIGNhbGxpbmcge0BsaW5rIFBJWEkuVGV4dHVyZS5mcm9tIFRleHR1cmUuZnJvbX0gb3JcbiAqIHtAbGluayBQSVhJLkJhc2VUZXh0dXJlLmZyb20gQmFzZVRleHR1cmUuZnJvbX0uXG4gKiBPdGhlcndpc2UsIHRoZXNlIGBmcm9tYCBjYWxscyB0aHJvdyBhbiBleGNlcHRpb24uIFVzaW5nIHRoaXMgcHJvcGVydHlcbiAqIGNhbiBiZSB1c2VmdWwgaWYgeW91IHdhbnQgdG8gZW5mb3JjZSBwcmVsb2FkaW5nIGFsbCBhc3NldHMgd2l0aFxuICoge0BsaW5rIFBJWEkuTG9hZGVyIExvYWRlcn0uXG4gKiBAc3RhdGljXG4gKiBAbmFtZSBTVFJJQ1RfVEVYVFVSRV9DQUNIRVxuICogQG1lbWJlcm9mIFBJWEkuc2V0dGluZ3NcbiAqIEB0eXBlIHtib29sZWFufVxuICogQGRlZmF1bHQgZmFsc2VcbiAqL1xuc2V0dGluZ3Muc2V0dGluZ3MuU1RSSUNUX1RFWFRVUkVfQ0FDSEUgPSBmYWxzZTtcblxuLyoqXG4gKiBDb2xsZWN0aW9uIG9mIGluc3RhbGxlZCByZXNvdXJjZSB0eXBlcywgY2xhc3MgbXVzdCBleHRlbmQge0BsaW5rIFBJWEkuUmVzb3VyY2V9LlxuICogQGV4YW1wbGVcbiAqIGNsYXNzIEN1c3RvbVJlc291cmNlIGV4dGVuZHMgUElYSS5SZXNvdXJjZSB7XG4gKiAgIC8vIE1VU1QgaGF2ZSBzb3VyY2UsIG9wdGlvbnMgY29uc3RydWN0b3Igc2lnbmF0dXJlXG4gKiAgIC8vIGZvciBhdXRvLWRldGVjdGVkIHJlc291cmNlcyB0byBiZSBjcmVhdGVkLlxuICogICBjb25zdHJ1Y3Rvcihzb3VyY2UsIG9wdGlvbnMpIHtcbiAqICAgICBzdXBlcigpO1xuICogICB9XG4gKiAgIHVwbG9hZChyZW5kZXJlciwgYmFzZVRleHR1cmUsIGdsVGV4dHVyZSkge1xuICogICAgIC8vIHVwbG9hZCB3aXRoIEdMXG4gKiAgICAgcmV0dXJuIHRydWU7XG4gKiAgIH1cbiAqICAgLy8gdXNlZCB0byBhdXRvLWRldGVjdCByZXNvdXJjZVxuICogICBzdGF0aWMgdGVzdChzb3VyY2UsIGV4dGVuc2lvbikge1xuICogICAgIHJldHVybiBleHRlbnNpb24gPT09ICd4eXonfHwgc291cmNlIGluc3RhbmNlb2YgU29tZUNsYXNzO1xuICogICB9XG4gKiB9XG4gKiAvLyBJbnN0YWxsIHRoZSBuZXcgcmVzb3VyY2UgdHlwZVxuICogUElYSS5JTlNUQUxMRUQucHVzaChDdXN0b21SZXNvdXJjZSk7XG4gKiBAbWVtYmVyb2YgUElYSVxuICogQHR5cGUge0FycmF5PFBJWEkuSVJlc291cmNlUGx1Z2luPn1cbiAqIEBzdGF0aWNcbiAqIEByZWFkb25seVxuICovXG52YXIgSU5TVEFMTEVEID0gW107XG4vKipcbiAqIENyZWF0ZSBhIHJlc291cmNlIGVsZW1lbnQgZnJvbSBhIHNpbmdsZSBzb3VyY2UgZWxlbWVudC4gVGhpc1xuICogYXV0by1kZXRlY3RzIHdoaWNoIHR5cGUgb2YgcmVzb3VyY2UgdG8gY3JlYXRlLiBBbGwgcmVzb3VyY2VzIHRoYXRcbiAqIGFyZSBhdXRvLWRldGVjdGFibGUgbXVzdCBoYXZlIGEgc3RhdGljIGB0ZXN0YCBtZXRob2QgYW5kIGEgY29uc3RydWN0b3JcbiAqIHdpdGggdGhlIGFyZ3VtZW50cyBgKHNvdXJjZSwgb3B0aW9ucz8pYC4gQ3VycmVudGx5LCB0aGUgc3VwcG9ydGVkXG4gKiByZXNvdXJjZXMgZm9yIGF1dG8tZGV0ZWN0aW9uIGluY2x1ZGU6XG4gKiAgLSB7QGxpbmsgUElYSS5JbWFnZVJlc291cmNlfVxuICogIC0ge0BsaW5rIFBJWEkuQ2FudmFzUmVzb3VyY2V9XG4gKiAgLSB7QGxpbmsgUElYSS5WaWRlb1Jlc291cmNlfVxuICogIC0ge0BsaW5rIFBJWEkuU1ZHUmVzb3VyY2V9XG4gKiAgLSB7QGxpbmsgUElYSS5CdWZmZXJSZXNvdXJjZX1cbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKiBAZnVuY3Rpb24gYXV0b0RldGVjdFJlc291cmNlXG4gKiBAcGFyYW0ge3N0cmluZ3wqfSBzb3VyY2UgLSBSZXNvdXJjZSBzb3VyY2UsIHRoaXMgY2FuIGJlIHRoZSBVUkwgdG8gdGhlIHJlc291cmNlLFxuICogICAgICAgIGEgdHlwZWQtYXJyYXkgKGZvciBCdWZmZXJSZXNvdXJjZSksIEhUTUxWaWRlb0VsZW1lbnQsIFNWRyBkYXRhLXVyaVxuICogICAgICAgIG9yIGFueSBvdGhlciByZXNvdXJjZSB0aGF0IGNhbiBiZSBhdXRvLWRldGVjdGVkLiBJZiBub3QgcmVzb3VyY2UgaXNcbiAqICAgICAgICBkZXRlY3RlZCwgaXQncyBhc3N1bWVkIHRvIGJlIGFuIEltYWdlUmVzb3VyY2UuXG4gKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdIC0gUGFzcy10aHJvdWdoIG9wdGlvbnMgdG8gdXNlIGZvciBSZXNvdXJjZVxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLndpZHRoXSAtIFdpZHRoIG9mIEJ1ZmZlclJlc291cmNlIG9yIFNWRyByYXN0ZXJpemF0aW9uXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMuaGVpZ2h0XSAtIEhlaWdodCBvZiBCdWZmZXJSZXNvdXJjZSBvciBTVkcgcmFzdGVyaXphdGlvblxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5hdXRvTG9hZD10cnVlXSAtIEltYWdlLCBTVkcgYW5kIFZpZGVvIGZsYWcgdG8gc3RhcnQgbG9hZGluZ1xuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLnNjYWxlPTFdIC0gU1ZHIHNvdXJjZSBzY2FsZS4gT3ZlcnJpZGRlbiBieSB3aWR0aCwgaGVpZ2h0XG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmNyZWF0ZUJpdG1hcD1QSVhJLnNldHRpbmdzLkNSRUFURV9JTUFHRV9CSVRNQVBdIC0gSW1hZ2Ugb3B0aW9uIHRvIGNyZWF0ZSBCaXRtYXAgb2JqZWN0XG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmNyb3Nzb3JpZ2luPXRydWVdIC0gSW1hZ2UgYW5kIFZpZGVvIG9wdGlvbiB0byBzZXQgY3Jvc3NPcmlnaW5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuYXV0b1BsYXk9dHJ1ZV0gLSBWaWRlbyBvcHRpb24gdG8gc3RhcnQgcGxheWluZyB2aWRlbyBpbW1lZGlhdGVseVxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLnVwZGF0ZUZQUz0wXSAtIFZpZGVvIG9wdGlvbiB0byB1cGRhdGUgaG93IG1hbnkgdGltZXMgYSBzZWNvbmQgdGhlXG4gKiAgICAgICAgdGV4dHVyZSBzaG91bGQgYmUgdXBkYXRlZCBmcm9tIHRoZSB2aWRlby4gTGVhdmUgYXQgMCB0byB1cGRhdGUgYXQgZXZlcnkgcmVuZGVyXG4gKiBAcmV0dXJucyB7UElYSS5SZXNvdXJjZX0gVGhlIGNyZWF0ZWQgcmVzb3VyY2UuXG4gKi9cbmZ1bmN0aW9uIGF1dG9EZXRlY3RSZXNvdXJjZShzb3VyY2UsIG9wdGlvbnMpIHtcbiAgICBpZiAoIXNvdXJjZSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgdmFyIGV4dGVuc2lvbiA9ICcnO1xuICAgIGlmICh0eXBlb2Ygc291cmNlID09PSAnc3RyaW5nJykge1xuICAgICAgICAvLyBzZWFyY2ggZm9yIGZpbGUgZXh0ZW5zaW9uOiBwZXJpb2QsIDMtNCBjaGFycywgdGhlbiA/LCAjIG9yIEVPTFxuICAgICAgICB2YXIgcmVzdWx0ID0gKC9cXC4oXFx3ezMsNH0pKD86JHxcXD98IykvaSkuZXhlYyhzb3VyY2UpO1xuICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICBleHRlbnNpb24gPSByZXN1bHRbMV0udG9Mb3dlckNhc2UoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3IgKHZhciBpID0gSU5TVEFMTEVELmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBSZXNvdXJjZVBsdWdpbiA9IElOU1RBTExFRFtpXTtcbiAgICAgICAgaWYgKFJlc291cmNlUGx1Z2luLnRlc3QgJiYgUmVzb3VyY2VQbHVnaW4udGVzdChzb3VyY2UsIGV4dGVuc2lvbikpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVzb3VyY2VQbHVnaW4oc291cmNlLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1VucmVjb2duaXplZCBzb3VyY2UgdHlwZSB0byBhdXRvLWRldGVjdCBSZXNvdXJjZScpO1xufVxuXG4vKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZVxyXG50aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZVxyXG5MaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG5cclxuVEhJUyBDT0RFIElTIFBST1ZJREVEIE9OIEFOICpBUyBJUyogQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG5LSU5ELCBFSVRIRVIgRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgV0lUSE9VVCBMSU1JVEFUSU9OIEFOWSBJTVBMSUVEXHJcbldBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBUSVRMRSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UsXHJcbk1FUkNIQU5UQUJMSVRZIE9SIE5PTi1JTkZSSU5HRU1FTlQuXHJcblxyXG5TZWUgdGhlIEFwYWNoZSBWZXJzaW9uIDIuMCBMaWNlbnNlIGZvciBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnNcclxuYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG4vKiBnbG9iYWwgUmVmbGVjdCwgUHJvbWlzZSAqL1xyXG5cclxudmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbihkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgeyBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgeyBkW3BdID0gYltwXTsgfSB9IH07XHJcbiAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn1cclxuXHJcbnZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcbiAgICAgICAgdmFyIGFyZ3VtZW50cyQxID0gYXJndW1lbnRzO1xuXHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHMkMVtpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHsgdFtwXSA9IHNbcF07IH0gfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB7IHRbcF0gPSBzW3BdOyB9IH1cclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICB7IGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIHsgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDApXHJcbiAgICAgICAgICAgIHsgdFtwW2ldXSA9IHNbcFtpXV07IH0gfSB9XHJcbiAgICByZXR1cm4gdDtcclxufVxuXG4vKipcbiAqIEJhc2UgcmVzb3VyY2UgY2xhc3MgZm9yIHRleHR1cmVzIHRoYXQgbWFuYWdlcyB2YWxpZGF0aW9uIGFuZCB1cGxvYWRpbmcsIGRlcGVuZGluZyBvbiBpdHMgdHlwZS5cbiAqXG4gKiBVcGxvYWRpbmcgb2YgYSBiYXNlIHRleHR1cmUgdG8gdGhlIEdQVSBpcyByZXF1aXJlZC5cbiAqIEBtZW1iZXJvZiBQSVhJXG4gKi9cbnZhciBSZXNvdXJjZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gd2lkdGggLSBXaWR0aCBvZiB0aGUgcmVzb3VyY2VcbiAgICAgKiBAcGFyYW0gaGVpZ2h0IC0gSGVpZ2h0IG9mIHRoZSByZXNvdXJjZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFJlc291cmNlKHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgICAgaWYgKHdpZHRoID09PSB2b2lkIDApIHsgd2lkdGggPSAwOyB9XG4gICAgICAgIGlmIChoZWlnaHQgPT09IHZvaWQgMCkgeyBoZWlnaHQgPSAwOyB9XG4gICAgICAgIHRoaXMuX3dpZHRoID0gd2lkdGg7XG4gICAgICAgIHRoaXMuX2hlaWdodCA9IGhlaWdodDtcbiAgICAgICAgdGhpcy5kZXN0cm95ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pbnRlcm5hbCA9IGZhbHNlO1xuICAgICAgICB0aGlzLm9uUmVzaXplID0gbmV3IHJ1bm5lci5SdW5uZXIoJ3NldFJlYWxTaXplJyk7XG4gICAgICAgIHRoaXMub25VcGRhdGUgPSBuZXcgcnVubmVyLlJ1bm5lcigndXBkYXRlJyk7XG4gICAgICAgIHRoaXMub25FcnJvciA9IG5ldyBydW5uZXIuUnVubmVyKCdvbkVycm9yJyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJpbmQgdG8gYSBwYXJlbnQgQmFzZVRleHR1cmVcbiAgICAgKiBAcGFyYW0gYmFzZVRleHR1cmUgLSBQYXJlbnQgdGV4dHVyZVxuICAgICAqL1xuICAgIFJlc291cmNlLnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24gKGJhc2VUZXh0dXJlKSB7XG4gICAgICAgIHRoaXMub25SZXNpemUuYWRkKGJhc2VUZXh0dXJlKTtcbiAgICAgICAgdGhpcy5vblVwZGF0ZS5hZGQoYmFzZVRleHR1cmUpO1xuICAgICAgICB0aGlzLm9uRXJyb3IuYWRkKGJhc2VUZXh0dXJlKTtcbiAgICAgICAgLy8gQ2FsbCBhIHJlc2l6ZSBpbW1lZGlhdGUgaWYgd2UgYWxyZWFkeVxuICAgICAgICAvLyBoYXZlIHRoZSB3aWR0aCBhbmQgaGVpZ2h0IG9mIHRoZSByZXNvdXJjZVxuICAgICAgICBpZiAodGhpcy5fd2lkdGggfHwgdGhpcy5faGVpZ2h0KSB7XG4gICAgICAgICAgICB0aGlzLm9uUmVzaXplLmVtaXQodGhpcy5fd2lkdGgsIHRoaXMuX2hlaWdodCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFVuYmluZCB0byBhIHBhcmVudCBCYXNlVGV4dHVyZVxuICAgICAqIEBwYXJhbSBiYXNlVGV4dHVyZSAtIFBhcmVudCB0ZXh0dXJlXG4gICAgICovXG4gICAgUmVzb3VyY2UucHJvdG90eXBlLnVuYmluZCA9IGZ1bmN0aW9uIChiYXNlVGV4dHVyZSkge1xuICAgICAgICB0aGlzLm9uUmVzaXplLnJlbW92ZShiYXNlVGV4dHVyZSk7XG4gICAgICAgIHRoaXMub25VcGRhdGUucmVtb3ZlKGJhc2VUZXh0dXJlKTtcbiAgICAgICAgdGhpcy5vbkVycm9yLnJlbW92ZShiYXNlVGV4dHVyZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyIGEgcmVzaXplIGV2ZW50XG4gICAgICogQHBhcmFtIHdpZHRoIC0gWCBkaW1lbnNpb25cbiAgICAgKiBAcGFyYW0gaGVpZ2h0IC0gWSBkaW1lbnNpb25cbiAgICAgKi9cbiAgICBSZXNvdXJjZS5wcm90b3R5cGUucmVzaXplID0gZnVuY3Rpb24gKHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgICAgaWYgKHdpZHRoICE9PSB0aGlzLl93aWR0aCB8fCBoZWlnaHQgIT09IHRoaXMuX2hlaWdodCkge1xuICAgICAgICAgICAgdGhpcy5fd2lkdGggPSB3aWR0aDtcbiAgICAgICAgICAgIHRoaXMuX2hlaWdodCA9IGhlaWdodDtcbiAgICAgICAgICAgIHRoaXMub25SZXNpemUuZW1pdCh3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlc291cmNlLnByb3RvdHlwZSwgXCJ2YWxpZFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBIYXMgYmVlbiB2YWxpZGF0ZWRcbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAhIXRoaXMuX3dpZHRoICYmICEhdGhpcy5faGVpZ2h0O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgLyoqIEhhcyBiZWVuIHVwZGF0ZWQgdHJpZ2dlciBldmVudC4gKi9cbiAgICBSZXNvdXJjZS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuZGVzdHJveWVkKSB7XG4gICAgICAgICAgICB0aGlzLm9uVXBkYXRlLmVtaXQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogVGhpcyBjYW4gYmUgb3ZlcnJpZGRlbiB0byBzdGFydCBwcmVsb2FkaW5nIGEgcmVzb3VyY2VcbiAgICAgKiBvciBkbyBhbnkgb3RoZXIgcHJlcGFyZSBzdGVwLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAcmV0dXJucyBIYW5kbGUgdGhlIHZhbGlkYXRlIGV2ZW50XG4gICAgICovXG4gICAgUmVzb3VyY2UucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcyk7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVzb3VyY2UucHJvdG90eXBlLCBcIndpZHRoXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB3aWR0aCBvZiB0aGUgcmVzb3VyY2UuXG4gICAgICAgICAqIEByZWFkb25seVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fd2lkdGg7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVzb3VyY2UucHJvdG90eXBlLCBcImhlaWdodFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgaGVpZ2h0IG9mIHRoZSByZXNvdXJjZS5cbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9oZWlnaHQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHN0eWxlLCBvcHRpb25hbCB0byBvdmVycmlkZVxuICAgICAqIEBwYXJhbSBfcmVuZGVyZXIgLSB5ZWFoLCByZW5kZXJlciFcbiAgICAgKiBAcGFyYW0gX2Jhc2VUZXh0dXJlIC0gdGhlIHRleHR1cmVcbiAgICAgKiBAcGFyYW0gX2dsVGV4dHVyZSAtIHRleHR1cmUgaW5zdGFuY2UgZm9yIHRoaXMgd2ViZ2wgY29udGV4dFxuICAgICAqIEByZXR1cm5zIC0gYHRydWVgIGlzIHN1Y2Nlc3NcbiAgICAgKi9cbiAgICBSZXNvdXJjZS5wcm90b3R5cGUuc3R5bGUgPSBmdW5jdGlvbiAoX3JlbmRlcmVyLCBfYmFzZVRleHR1cmUsIF9nbFRleHR1cmUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgLyoqIENsZWFuIHVwIGFueXRoaW5nLCB0aGlzIGhhcHBlbnMgd2hlbiBkZXN0cm95aW5nIGlzIHJlYWR5LiAqL1xuICAgIFJlc291cmNlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBvdmVycmlkZVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2FsbCB3aGVuIGRlc3Ryb3lpbmcgcmVzb3VyY2UsIHVuYmluZCBhbnkgQmFzZVRleHR1cmUgb2JqZWN0XG4gICAgICogYmVmb3JlIGNhbGxpbmcgdGhpcyBtZXRob2QsIGFzIHJlZmVyZW5jZSBjb3VudHMgYXJlIG1haW50YWluZWRcbiAgICAgKiBpbnRlcm5hbGx5LlxuICAgICAqL1xuICAgIFJlc291cmNlLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuZGVzdHJveWVkKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3llZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIHRoaXMub25FcnJvci5yZW1vdmVBbGwoKTtcbiAgICAgICAgICAgIHRoaXMub25FcnJvciA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLm9uUmVzaXplLnJlbW92ZUFsbCgpO1xuICAgICAgICAgICAgdGhpcy5vblJlc2l6ZSA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLm9uVXBkYXRlLnJlbW92ZUFsbCgpO1xuICAgICAgICAgICAgdGhpcy5vblVwZGF0ZSA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFic3RyYWN0LCB1c2VkIHRvIGF1dG8tZGV0ZWN0IHJlc291cmNlIHR5cGUuXG4gICAgICogQHBhcmFtIHsqfSBfc291cmNlIC0gVGhlIHNvdXJjZSBvYmplY3RcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gX2V4dGVuc2lvbiAtIFRoZSBleHRlbnNpb24gb2Ygc291cmNlLCBpZiBzZXRcbiAgICAgKi9cbiAgICBSZXNvdXJjZS50ZXN0ID0gZnVuY3Rpb24gKF9zb3VyY2UsIF9leHRlbnNpb24pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgcmV0dXJuIFJlc291cmNlO1xufSgpKTtcblxuLyoqXG4gKiBAaW50ZXJmYWNlIFNoYXJlZEFycmF5QnVmZmVyXG4gKi9cbi8qKlxuICogQnVmZmVyIHJlc291cmNlIHdpdGggZGF0YSBvZiB0eXBlZCBhcnJheS5cbiAqIEBtZW1iZXJvZiBQSVhJXG4gKi9cbnZhciBCdWZmZXJSZXNvdXJjZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQnVmZmVyUmVzb3VyY2UsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHNvdXJjZSAtIFNvdXJjZSBidWZmZXJcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbnNcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb3B0aW9ucy53aWR0aCAtIFdpZHRoIG9mIHRoZSB0ZXh0dXJlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG9wdGlvbnMuaGVpZ2h0IC0gSGVpZ2h0IG9mIHRoZSB0ZXh0dXJlXG4gICAgICovXG4gICAgZnVuY3Rpb24gQnVmZmVyUmVzb3VyY2Uoc291cmNlLCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBfYSA9IG9wdGlvbnMgfHwge30sIHdpZHRoID0gX2Eud2lkdGgsIGhlaWdodCA9IF9hLmhlaWdodDtcbiAgICAgICAgaWYgKCF3aWR0aCB8fCAhaGVpZ2h0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0J1ZmZlclJlc291cmNlIHdpZHRoIG9yIGhlaWdodCBpbnZhbGlkJyk7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB3aWR0aCwgaGVpZ2h0KSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5kYXRhID0gc291cmNlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwbG9hZCB0aGUgdGV4dHVyZSB0byB0aGUgR1BVLlxuICAgICAqIEBwYXJhbSByZW5kZXJlciAtIFVwbG9hZCB0byB0aGUgcmVuZGVyZXJcbiAgICAgKiBAcGFyYW0gYmFzZVRleHR1cmUgLSBSZWZlcmVuY2UgdG8gcGFyZW50IHRleHR1cmVcbiAgICAgKiBAcGFyYW0gZ2xUZXh0dXJlIC0gZ2xUZXh0dXJlXG4gICAgICogQHJldHVybnMgLSB0cnVlIGlzIHN1Y2Nlc3NcbiAgICAgKi9cbiAgICBCdWZmZXJSZXNvdXJjZS5wcm90b3R5cGUudXBsb2FkID0gZnVuY3Rpb24gKHJlbmRlcmVyLCBiYXNlVGV4dHVyZSwgZ2xUZXh0dXJlKSB7XG4gICAgICAgIHZhciBnbCA9IHJlbmRlcmVyLmdsO1xuICAgICAgICBnbC5waXhlbFN0b3JlaShnbC5VTlBBQ0tfUFJFTVVMVElQTFlfQUxQSEFfV0VCR0wsIGJhc2VUZXh0dXJlLmFscGhhTW9kZSA9PT0gY29uc3RhbnRzLkFMUEhBX01PREVTLlVOUEFDSyk7XG4gICAgICAgIHZhciB3aWR0aCA9IGJhc2VUZXh0dXJlLnJlYWxXaWR0aDtcbiAgICAgICAgdmFyIGhlaWdodCA9IGJhc2VUZXh0dXJlLnJlYWxIZWlnaHQ7XG4gICAgICAgIGlmIChnbFRleHR1cmUud2lkdGggPT09IHdpZHRoICYmIGdsVGV4dHVyZS5oZWlnaHQgPT09IGhlaWdodCkge1xuICAgICAgICAgICAgZ2wudGV4U3ViSW1hZ2UyRChiYXNlVGV4dHVyZS50YXJnZXQsIDAsIDAsIDAsIHdpZHRoLCBoZWlnaHQsIGJhc2VUZXh0dXJlLmZvcm1hdCwgZ2xUZXh0dXJlLnR5cGUsIHRoaXMuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBnbFRleHR1cmUud2lkdGggPSB3aWR0aDtcbiAgICAgICAgICAgIGdsVGV4dHVyZS5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgICAgICBnbC50ZXhJbWFnZTJEKGJhc2VUZXh0dXJlLnRhcmdldCwgMCwgZ2xUZXh0dXJlLmludGVybmFsRm9ybWF0LCB3aWR0aCwgaGVpZ2h0LCAwLCBiYXNlVGV4dHVyZS5mb3JtYXQsIGdsVGV4dHVyZS50eXBlLCB0aGlzLmRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG4gICAgLyoqIERlc3Ryb3kgYW5kIGRvbid0IHVzZSBhZnRlciB0aGlzLiAqL1xuICAgIEJ1ZmZlclJlc291cmNlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmRhdGEgPSBudWxsO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVXNlZCB0byBhdXRvLWRldGVjdCB0aGUgdHlwZSBvZiByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0geyp9IHNvdXJjZSAtIFRoZSBzb3VyY2Ugb2JqZWN0XG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IGB0cnVlYCBpZiA8Y2FudmFzPlxuICAgICAqL1xuICAgIEJ1ZmZlclJlc291cmNlLnRlc3QgPSBmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXlcbiAgICAgICAgICAgIHx8IHNvdXJjZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXlcbiAgICAgICAgICAgIHx8IHNvdXJjZSBpbnN0YW5jZW9mIFVpbnQzMkFycmF5O1xuICAgIH07XG4gICAgcmV0dXJuIEJ1ZmZlclJlc291cmNlO1xufShSZXNvdXJjZSkpO1xuXG52YXIgZGVmYXVsdEJ1ZmZlck9wdGlvbnMgPSB7XG4gICAgc2NhbGVNb2RlOiBjb25zdGFudHMuU0NBTEVfTU9ERVMuTkVBUkVTVCxcbiAgICBmb3JtYXQ6IGNvbnN0YW50cy5GT1JNQVRTLlJHQkEsXG4gICAgYWxwaGFNb2RlOiBjb25zdGFudHMuQUxQSEFfTU9ERVMuTlBNLFxufTtcbi8qKlxuICogQSBUZXh0dXJlIHN0b3JlcyB0aGUgaW5mb3JtYXRpb24gdGhhdCByZXByZXNlbnRzIGFuIGltYWdlLlxuICogQWxsIHRleHR1cmVzIGhhdmUgYSBiYXNlIHRleHR1cmUsIHdoaWNoIGNvbnRhaW5zIGluZm9ybWF0aW9uIGFib3V0IHRoZSBzb3VyY2UuXG4gKiBUaGVyZWZvcmUgeW91IGNhbiBoYXZlIG1hbnkgdGV4dHVyZXMgYWxsIHVzaW5nIGEgc2luZ2xlIEJhc2VUZXh0dXJlXG4gKiBAbWVtYmVyb2YgUElYSVxuICogQHR5cGVQYXJhbSBSIC0gVGhlIEJhc2VUZXh0dXJlJ3MgUmVzb3VyY2UgdHlwZS5cbiAqIEB0eXBlUGFyYW0gUk8gLSBUaGUgb3B0aW9ucyBmb3IgY29uc3RydWN0aW5nIHJlc291cmNlLlxuICovXG52YXIgQmFzZVRleHR1cmUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEJhc2VUZXh0dXJlLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7UElYSS5SZXNvdXJjZXxzdHJpbmd8SFRNTEltYWdlRWxlbWVudHxIVE1MQ2FudmFzRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fSBbcmVzb3VyY2U9bnVsbF0gLVxuICAgICAqICAgICAgICBUaGUgY3VycmVudCByZXNvdXJjZSB0byB1c2UsIGZvciB0aGluZ3MgdGhhdCBhcmVuJ3QgUmVzb3VyY2Ugb2JqZWN0cywgd2lsbCBiZSBjb252ZXJ0ZWRcbiAgICAgKiAgICAgICAgaW50byBhIFJlc291cmNlLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQ29sbGVjdGlvbiBvZiBvcHRpb25zXG4gICAgICogQHBhcmFtIHtQSVhJLk1JUE1BUF9NT0RFU30gW29wdGlvbnMubWlwbWFwPVBJWEkuc2V0dGluZ3MuTUlQTUFQX1RFWFRVUkVTXSAtIElmIG1pcG1hcHBpbmcgaXMgZW5hYmxlZCBmb3IgdGV4dHVyZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5hbmlzb3Ryb3BpY0xldmVsPVBJWEkuc2V0dGluZ3MuQU5JU09UUk9QSUNfTEVWRUxdIC0gQW5pc290cm9waWMgZmlsdGVyaW5nIGxldmVsIG9mIHRleHR1cmVcbiAgICAgKiBAcGFyYW0ge1BJWEkuV1JBUF9NT0RFU30gW29wdGlvbnMud3JhcE1vZGU9UElYSS5zZXR0aW5ncy5XUkFQX01PREVdIC0gV3JhcCBtb2RlIGZvciB0ZXh0dXJlc1xuICAgICAqIEBwYXJhbSB7UElYSS5TQ0FMRV9NT0RFU30gW29wdGlvbnMuc2NhbGVNb2RlPVBJWEkuc2V0dGluZ3MuU0NBTEVfTU9ERV0gLSBEZWZhdWx0IHNjYWxlIG1vZGUsIGxpbmVhciwgbmVhcmVzdFxuICAgICAqIEBwYXJhbSB7UElYSS5GT1JNQVRTfSBbb3B0aW9ucy5mb3JtYXQ9UElYSS5GT1JNQVRTLlJHQkFdIC0gR0wgZm9ybWF0IHR5cGVcbiAgICAgKiBAcGFyYW0ge1BJWEkuVFlQRVN9IFtvcHRpb25zLnR5cGU9UElYSS5UWVBFUy5VTlNJR05FRF9CWVRFXSAtIEdMIGRhdGEgdHlwZVxuICAgICAqIEBwYXJhbSB7UElYSS5UQVJHRVRTfSBbb3B0aW9ucy50YXJnZXQ9UElYSS5UQVJHRVRTLlRFWFRVUkVfMkRdIC0gR0wgdGV4dHVyZSB0YXJnZXRcbiAgICAgKiBAcGFyYW0ge1BJWEkuQUxQSEFfTU9ERVN9IFtvcHRpb25zLmFscGhhTW9kZT1QSVhJLkFMUEhBX01PREVTLlVOUEFDS10gLSBQcmUgbXVsdGlwbHkgdGhlIGltYWdlIGFscGhhXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLndpZHRoPTBdIC0gV2lkdGggb2YgdGhlIHRleHR1cmVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMuaGVpZ2h0PTBdIC0gSGVpZ2h0IG9mIHRoZSB0ZXh0dXJlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLnJlc29sdXRpb249UElYSS5zZXR0aW5ncy5SRVNPTFVUSU9OXSAtIFJlc29sdXRpb24gb2YgdGhlIGJhc2UgdGV4dHVyZVxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9ucy5yZXNvdXJjZU9wdGlvbnNdIC0gT3B0aW9uYWwgcmVzb3VyY2Ugb3B0aW9ucyxcbiAgICAgKiAgICAgICAgc2VlIHtAbGluayBQSVhJLmF1dG9EZXRlY3RSZXNvdXJjZSBhdXRvRGV0ZWN0UmVzb3VyY2V9XG4gICAgICovXG4gICAgZnVuY3Rpb24gQmFzZVRleHR1cmUocmVzb3VyY2UsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHJlc291cmNlID09PSB2b2lkIDApIHsgcmVzb3VyY2UgPSBudWxsOyB9XG4gICAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsgb3B0aW9ucyA9IG51bGw7IH1cbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgIHZhciBhbHBoYU1vZGUgPSBvcHRpb25zLmFscGhhTW9kZSwgbWlwbWFwID0gb3B0aW9ucy5taXBtYXAsIGFuaXNvdHJvcGljTGV2ZWwgPSBvcHRpb25zLmFuaXNvdHJvcGljTGV2ZWwsIHNjYWxlTW9kZSA9IG9wdGlvbnMuc2NhbGVNb2RlLCB3aWR0aCA9IG9wdGlvbnMud2lkdGgsIGhlaWdodCA9IG9wdGlvbnMuaGVpZ2h0LCB3cmFwTW9kZSA9IG9wdGlvbnMud3JhcE1vZGUsIGZvcm1hdCA9IG9wdGlvbnMuZm9ybWF0LCB0eXBlID0gb3B0aW9ucy50eXBlLCB0YXJnZXQgPSBvcHRpb25zLnRhcmdldCwgcmVzb2x1dGlvbiA9IG9wdGlvbnMucmVzb2x1dGlvbiwgcmVzb3VyY2VPcHRpb25zID0gb3B0aW9ucy5yZXNvdXJjZU9wdGlvbnM7XG4gICAgICAgIC8vIENvbnZlcnQgdGhlIHJlc291cmNlIHRvIGEgUmVzb3VyY2Ugb2JqZWN0XG4gICAgICAgIGlmIChyZXNvdXJjZSAmJiAhKHJlc291cmNlIGluc3RhbmNlb2YgUmVzb3VyY2UpKSB7XG4gICAgICAgICAgICByZXNvdXJjZSA9IGF1dG9EZXRlY3RSZXNvdXJjZShyZXNvdXJjZSwgcmVzb3VyY2VPcHRpb25zKTtcbiAgICAgICAgICAgIHJlc291cmNlLmludGVybmFsID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBfdGhpcy5yZXNvbHV0aW9uID0gcmVzb2x1dGlvbiB8fCBzZXR0aW5ncy5zZXR0aW5ncy5SRVNPTFVUSU9OO1xuICAgICAgICBfdGhpcy53aWR0aCA9IE1hdGgucm91bmQoKHdpZHRoIHx8IDApICogX3RoaXMucmVzb2x1dGlvbikgLyBfdGhpcy5yZXNvbHV0aW9uO1xuICAgICAgICBfdGhpcy5oZWlnaHQgPSBNYXRoLnJvdW5kKChoZWlnaHQgfHwgMCkgKiBfdGhpcy5yZXNvbHV0aW9uKSAvIF90aGlzLnJlc29sdXRpb247XG4gICAgICAgIF90aGlzLl9taXBtYXAgPSBtaXBtYXAgIT09IHVuZGVmaW5lZCA/IG1pcG1hcCA6IHNldHRpbmdzLnNldHRpbmdzLk1JUE1BUF9URVhUVVJFUztcbiAgICAgICAgX3RoaXMuYW5pc290cm9waWNMZXZlbCA9IGFuaXNvdHJvcGljTGV2ZWwgIT09IHVuZGVmaW5lZCA/IGFuaXNvdHJvcGljTGV2ZWwgOiBzZXR0aW5ncy5zZXR0aW5ncy5BTklTT1RST1BJQ19MRVZFTDtcbiAgICAgICAgX3RoaXMuX3dyYXBNb2RlID0gd3JhcE1vZGUgfHwgc2V0dGluZ3Muc2V0dGluZ3MuV1JBUF9NT0RFO1xuICAgICAgICBfdGhpcy5fc2NhbGVNb2RlID0gc2NhbGVNb2RlICE9PSB1bmRlZmluZWQgPyBzY2FsZU1vZGUgOiBzZXR0aW5ncy5zZXR0aW5ncy5TQ0FMRV9NT0RFO1xuICAgICAgICBfdGhpcy5mb3JtYXQgPSBmb3JtYXQgfHwgY29uc3RhbnRzLkZPUk1BVFMuUkdCQTtcbiAgICAgICAgX3RoaXMudHlwZSA9IHR5cGUgfHwgY29uc3RhbnRzLlRZUEVTLlVOU0lHTkVEX0JZVEU7XG4gICAgICAgIF90aGlzLnRhcmdldCA9IHRhcmdldCB8fCBjb25zdGFudHMuVEFSR0VUUy5URVhUVVJFXzJEO1xuICAgICAgICBfdGhpcy5hbHBoYU1vZGUgPSBhbHBoYU1vZGUgIT09IHVuZGVmaW5lZCA/IGFscGhhTW9kZSA6IGNvbnN0YW50cy5BTFBIQV9NT0RFUy5VTlBBQ0s7XG4gICAgICAgIF90aGlzLnVpZCA9IHV0aWxzLnVpZCgpO1xuICAgICAgICBfdGhpcy50b3VjaGVkID0gMDtcbiAgICAgICAgX3RoaXMuaXNQb3dlck9mVHdvID0gZmFsc2U7XG4gICAgICAgIF90aGlzLl9yZWZyZXNoUE9UKCk7XG4gICAgICAgIF90aGlzLl9nbFRleHR1cmVzID0ge307XG4gICAgICAgIF90aGlzLmRpcnR5SWQgPSAwO1xuICAgICAgICBfdGhpcy5kaXJ0eVN0eWxlSWQgPSAwO1xuICAgICAgICBfdGhpcy5jYWNoZUlkID0gbnVsbDtcbiAgICAgICAgX3RoaXMudmFsaWQgPSB3aWR0aCA+IDAgJiYgaGVpZ2h0ID4gMDtcbiAgICAgICAgX3RoaXMudGV4dHVyZUNhY2hlSWRzID0gW107XG4gICAgICAgIF90aGlzLmRlc3Ryb3llZCA9IGZhbHNlO1xuICAgICAgICBfdGhpcy5yZXNvdXJjZSA9IG51bGw7XG4gICAgICAgIF90aGlzLl9iYXRjaEVuYWJsZWQgPSAwO1xuICAgICAgICBfdGhpcy5fYmF0Y2hMb2NhdGlvbiA9IDA7XG4gICAgICAgIF90aGlzLnBhcmVudFRleHR1cmVBcnJheSA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlZCB3aGVuIGEgbm90LWltbWVkaWF0ZWx5LWF2YWlsYWJsZSBzb3VyY2UgZmluaXNoZXMgbG9hZGluZy5cbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAZXZlbnQgUElYSS5CYXNlVGV4dHVyZSNsb2FkZWRcbiAgICAgICAgICogQHBhcmFtIHtQSVhJLkJhc2VUZXh0dXJlfSBiYXNlVGV4dHVyZSAtIFJlc291cmNlIGxvYWRlZC5cbiAgICAgICAgICovXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlZCB3aGVuIGEgbm90LWltbWVkaWF0ZWx5LWF2YWlsYWJsZSBzb3VyY2UgZmFpbHMgdG8gbG9hZC5cbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAZXZlbnQgUElYSS5CYXNlVGV4dHVyZSNlcnJvclxuICAgICAgICAgKiBAcGFyYW0ge1BJWEkuQmFzZVRleHR1cmV9IGJhc2VUZXh0dXJlIC0gUmVzb3VyY2UgZXJyb3JlZC5cbiAgICAgICAgICogQHBhcmFtIHtFcnJvckV2ZW50fSBldmVudCAtIExvYWQgZXJyb3IgZXZlbnQuXG4gICAgICAgICAqL1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZWQgd2hlbiBCYXNlVGV4dHVyZSBpcyB1cGRhdGVkLlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEBldmVudCBQSVhJLkJhc2VUZXh0dXJlI2xvYWRlZFxuICAgICAgICAgKiBAcGFyYW0ge1BJWEkuQmFzZVRleHR1cmV9IGJhc2VUZXh0dXJlIC0gUmVzb3VyY2UgbG9hZGVkLlxuICAgICAgICAgKi9cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVkIHdoZW4gQmFzZVRleHR1cmUgaXMgdXBkYXRlZC5cbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAZXZlbnQgUElYSS5CYXNlVGV4dHVyZSN1cGRhdGVcbiAgICAgICAgICogQHBhcmFtIHtQSVhJLkJhc2VUZXh0dXJlfSBiYXNlVGV4dHVyZSAtIEluc3RhbmNlIG9mIHRleHR1cmUgYmVpbmcgdXBkYXRlZC5cbiAgICAgICAgICovXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlZCB3aGVuIEJhc2VUZXh0dXJlIGlzIGRlc3Ryb3llZC5cbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAZXZlbnQgUElYSS5CYXNlVGV4dHVyZSNkaXNwb3NlXG4gICAgICAgICAqIEBwYXJhbSB7UElYSS5CYXNlVGV4dHVyZX0gYmFzZVRleHR1cmUgLSBJbnN0YW5jZSBvZiB0ZXh0dXJlIGJlaW5nIGRlc3Ryb3llZC5cbiAgICAgICAgICovXG4gICAgICAgIC8vIFNldCB0aGUgcmVzb3VyY2VcbiAgICAgICAgX3RoaXMuc2V0UmVzb3VyY2UocmVzb3VyY2UpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCYXNlVGV4dHVyZS5wcm90b3R5cGUsIFwicmVhbFdpZHRoXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFBpeGVsIHdpZHRoIG9mIHRoZSBzb3VyY2Ugb2YgdGhpcyB0ZXh0dXJlXG4gICAgICAgICAqIEByZWFkb25seVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCh0aGlzLndpZHRoICogdGhpcy5yZXNvbHV0aW9uKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCYXNlVGV4dHVyZS5wcm90b3R5cGUsIFwicmVhbEhlaWdodFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQaXhlbCBoZWlnaHQgb2YgdGhlIHNvdXJjZSBvZiB0aGlzIHRleHR1cmVcbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBNYXRoLnJvdW5kKHRoaXMuaGVpZ2h0ICogdGhpcy5yZXNvbHV0aW9uKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCYXNlVGV4dHVyZS5wcm90b3R5cGUsIFwibWlwbWFwXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1pcG1hcCBtb2RlIG9mIHRoZSB0ZXh0dXJlLCBhZmZlY3RzIGRvd25zY2FsZWQgaW1hZ2VzXG4gICAgICAgICAqIEBkZWZhdWx0IFBJWEkuc2V0dGluZ3MuTUlQTUFQX1RFWFRVUkVTXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9taXBtYXA7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fbWlwbWFwICE9PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX21pcG1hcCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIHRoaXMuZGlydHlTdHlsZUlkKys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQmFzZVRleHR1cmUucHJvdG90eXBlLCBcInNjYWxlTW9kZVwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgc2NhbGUgbW9kZSB0byBhcHBseSB3aGVuIHNjYWxpbmcgdGhpcyB0ZXh0dXJlXG4gICAgICAgICAqIEBkZWZhdWx0IFBJWEkuc2V0dGluZ3MuU0NBTEVfTU9ERVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2NhbGVNb2RlO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX3NjYWxlTW9kZSAhPT0gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9zY2FsZU1vZGUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmRpcnR5U3R5bGVJZCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJhc2VUZXh0dXJlLnByb3RvdHlwZSwgXCJ3cmFwTW9kZVwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBIb3cgdGhlIHRleHR1cmUgd3JhcHNcbiAgICAgICAgICogQGRlZmF1bHQgUElYSS5zZXR0aW5ncy5XUkFQX01PREVcbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3dyYXBNb2RlO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX3dyYXBNb2RlICE9PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3dyYXBNb2RlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXJ0eVN0eWxlSWQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIC8qKlxuICAgICAqIENoYW5nZXMgc3R5bGUgb3B0aW9ucyBvZiBCYXNlVGV4dHVyZVxuICAgICAqIEBwYXJhbSBzY2FsZU1vZGUgLSBQaXhpIHNjYWxlbW9kZVxuICAgICAqIEBwYXJhbSBtaXBtYXAgLSBlbmFibGUgbWlwbWFwc1xuICAgICAqIEByZXR1cm5zIC0gdGhpc1xuICAgICAqL1xuICAgIEJhc2VUZXh0dXJlLnByb3RvdHlwZS5zZXRTdHlsZSA9IGZ1bmN0aW9uIChzY2FsZU1vZGUsIG1pcG1hcCkge1xuICAgICAgICB2YXIgZGlydHk7XG4gICAgICAgIGlmIChzY2FsZU1vZGUgIT09IHVuZGVmaW5lZCAmJiBzY2FsZU1vZGUgIT09IHRoaXMuc2NhbGVNb2RlKSB7XG4gICAgICAgICAgICB0aGlzLnNjYWxlTW9kZSA9IHNjYWxlTW9kZTtcbiAgICAgICAgICAgIGRpcnR5ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWlwbWFwICE9PSB1bmRlZmluZWQgJiYgbWlwbWFwICE9PSB0aGlzLm1pcG1hcCkge1xuICAgICAgICAgICAgdGhpcy5taXBtYXAgPSBtaXBtYXA7XG4gICAgICAgICAgICBkaXJ0eSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRpcnR5KSB7XG4gICAgICAgICAgICB0aGlzLmRpcnR5U3R5bGVJZCsrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2hhbmdlcyB3L2gvcmVzb2x1dGlvbi4gVGV4dHVyZSBiZWNvbWVzIHZhbGlkIGlmIHdpZHRoIGFuZCBoZWlnaHQgYXJlIGdyZWF0ZXIgdGhhbiB6ZXJvLlxuICAgICAqIEBwYXJhbSBkZXNpcmVkV2lkdGggLSBEZXNpcmVkIHZpc3VhbCB3aWR0aFxuICAgICAqIEBwYXJhbSBkZXNpcmVkSGVpZ2h0IC0gRGVzaXJlZCB2aXN1YWwgaGVpZ2h0XG4gICAgICogQHBhcmFtIHJlc29sdXRpb24gLSBPcHRpb25hbGx5IHNldCByZXNvbHV0aW9uXG4gICAgICogQHJldHVybnMgLSB0aGlzXG4gICAgICovXG4gICAgQmFzZVRleHR1cmUucHJvdG90eXBlLnNldFNpemUgPSBmdW5jdGlvbiAoZGVzaXJlZFdpZHRoLCBkZXNpcmVkSGVpZ2h0LCByZXNvbHV0aW9uKSB7XG4gICAgICAgIHJlc29sdXRpb24gPSByZXNvbHV0aW9uIHx8IHRoaXMucmVzb2x1dGlvbjtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0UmVhbFNpemUoZGVzaXJlZFdpZHRoICogcmVzb2x1dGlvbiwgZGVzaXJlZEhlaWdodCAqIHJlc29sdXRpb24sIHJlc29sdXRpb24pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0cyByZWFsIHNpemUgb2YgYmFzZVRleHR1cmUsIHByZXNlcnZlcyBjdXJyZW50IHJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHJlYWxXaWR0aCAtIEZ1bGwgcmVuZGVyZWQgd2lkdGhcbiAgICAgKiBAcGFyYW0gcmVhbEhlaWdodCAtIEZ1bGwgcmVuZGVyZWQgaGVpZ2h0XG4gICAgICogQHBhcmFtIHJlc29sdXRpb24gLSBPcHRpb25hbGx5IHNldCByZXNvbHV0aW9uXG4gICAgICogQHJldHVybnMgLSB0aGlzXG4gICAgICovXG4gICAgQmFzZVRleHR1cmUucHJvdG90eXBlLnNldFJlYWxTaXplID0gZnVuY3Rpb24gKHJlYWxXaWR0aCwgcmVhbEhlaWdodCwgcmVzb2x1dGlvbikge1xuICAgICAgICB0aGlzLnJlc29sdXRpb24gPSByZXNvbHV0aW9uIHx8IHRoaXMucmVzb2x1dGlvbjtcbiAgICAgICAgdGhpcy53aWR0aCA9IE1hdGgucm91bmQocmVhbFdpZHRoKSAvIHRoaXMucmVzb2x1dGlvbjtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBNYXRoLnJvdW5kKHJlYWxIZWlnaHQpIC8gdGhpcy5yZXNvbHV0aW9uO1xuICAgICAgICB0aGlzLl9yZWZyZXNoUE9UKCk7XG4gICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVmcmVzaCBjaGVjayBmb3IgaXNQb3dlck9mVHdvIHRleHR1cmUgYmFzZWQgb24gc2l6ZVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgQmFzZVRleHR1cmUucHJvdG90eXBlLl9yZWZyZXNoUE9UID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmlzUG93ZXJPZlR3byA9IHV0aWxzLmlzUG93Mih0aGlzLnJlYWxXaWR0aCkgJiYgdXRpbHMuaXNQb3cyKHRoaXMucmVhbEhlaWdodCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDaGFuZ2VzIHJlc29sdXRpb25cbiAgICAgKiBAcGFyYW0gcmVzb2x1dGlvbiAtIHJlc1xuICAgICAqIEByZXR1cm5zIC0gdGhpc1xuICAgICAqL1xuICAgIEJhc2VUZXh0dXJlLnByb3RvdHlwZS5zZXRSZXNvbHV0aW9uID0gZnVuY3Rpb24gKHJlc29sdXRpb24pIHtcbiAgICAgICAgdmFyIG9sZFJlc29sdXRpb24gPSB0aGlzLnJlc29sdXRpb247XG4gICAgICAgIGlmIChvbGRSZXNvbHV0aW9uID09PSByZXNvbHV0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlc29sdXRpb24gPSByZXNvbHV0aW9uO1xuICAgICAgICBpZiAodGhpcy52YWxpZCkge1xuICAgICAgICAgICAgdGhpcy53aWR0aCA9IE1hdGgucm91bmQodGhpcy53aWR0aCAqIG9sZFJlc29sdXRpb24pIC8gcmVzb2x1dGlvbjtcbiAgICAgICAgICAgIHRoaXMuaGVpZ2h0ID0gTWF0aC5yb3VuZCh0aGlzLmhlaWdodCAqIG9sZFJlc29sdXRpb24pIC8gcmVzb2x1dGlvbjtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgndXBkYXRlJywgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcmVmcmVzaFBPVCgpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHJlc291cmNlIGlmIGl0IHdhc24ndCBzZXQuIFRocm93cyBlcnJvciBpZiByZXNvdXJjZSBhbHJlYWR5IHByZXNlbnRcbiAgICAgKiBAcGFyYW0gcmVzb3VyY2UgLSB0aGF0IGlzIG1hbmFnaW5nIHRoaXMgQmFzZVRleHR1cmVcbiAgICAgKiBAcmV0dXJucyAtIHRoaXNcbiAgICAgKi9cbiAgICBCYXNlVGV4dHVyZS5wcm90b3R5cGUuc2V0UmVzb3VyY2UgPSBmdW5jdGlvbiAocmVzb3VyY2UpIHtcbiAgICAgICAgaWYgKHRoaXMucmVzb3VyY2UgPT09IHJlc291cmNlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5yZXNvdXJjZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXNvdXJjZSBjYW4gYmUgc2V0IG9ubHkgb25jZScpO1xuICAgICAgICB9XG4gICAgICAgIHJlc291cmNlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucmVzb3VyY2UgPSByZXNvdXJjZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKiogSW52YWxpZGF0ZXMgdGhlIG9iamVjdC4gVGV4dHVyZSBiZWNvbWVzIHZhbGlkIGlmIHdpZHRoIGFuZCBoZWlnaHQgYXJlIGdyZWF0ZXIgdGhhbiB6ZXJvLiAqL1xuICAgIEJhc2VUZXh0dXJlLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy52YWxpZCkge1xuICAgICAgICAgICAgaWYgKHRoaXMud2lkdGggPiAwICYmIHRoaXMuaGVpZ2h0ID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMudmFsaWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnbG9hZGVkJywgdGhpcyk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCd1cGRhdGUnLCB0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZGlydHlJZCsrO1xuICAgICAgICAgICAgdGhpcy5kaXJ0eVN0eWxlSWQrKztcbiAgICAgICAgICAgIHRoaXMuZW1pdCgndXBkYXRlJywgdGhpcyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZSBlcnJvcnMgd2l0aCByZXNvdXJjZXMuXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0gZXZlbnQgLSBFcnJvciBldmVudCBlbWl0dGVkLlxuICAgICAqL1xuICAgIEJhc2VUZXh0dXJlLnByb3RvdHlwZS5vbkVycm9yID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCB0aGlzLCBldmVudCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEZXN0cm95cyB0aGlzIGJhc2UgdGV4dHVyZS5cbiAgICAgKiBUaGUgbWV0aG9kIHN0b3BzIGlmIHJlc291cmNlIGRvZXNuJ3Qgd2FudCB0aGlzIHRleHR1cmUgdG8gYmUgZGVzdHJveWVkLlxuICAgICAqIFJlbW92ZXMgdGV4dHVyZSBmcm9tIGFsbCBjYWNoZXMuXG4gICAgICovXG4gICAgQmFzZVRleHR1cmUucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIHJlbW92ZSBhbmQgZGVzdHJveSB0aGUgcmVzb3VyY2VcbiAgICAgICAgaWYgKHRoaXMucmVzb3VyY2UpIHtcbiAgICAgICAgICAgIHRoaXMucmVzb3VyY2UudW5iaW5kKHRoaXMpO1xuICAgICAgICAgICAgLy8gb25seSBkZXN0cm95IHJlc291cmNlZCBjcmVhdGVkIGludGVybmFsbHlcbiAgICAgICAgICAgIGlmICh0aGlzLnJlc291cmNlLmludGVybmFsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXNvdXJjZS5kZXN0cm95KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlc291cmNlID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5jYWNoZUlkKSB7XG4gICAgICAgICAgICBkZWxldGUgdXRpbHMuQmFzZVRleHR1cmVDYWNoZVt0aGlzLmNhY2hlSWRdO1xuICAgICAgICAgICAgZGVsZXRlIHV0aWxzLlRleHR1cmVDYWNoZVt0aGlzLmNhY2hlSWRdO1xuICAgICAgICAgICAgdGhpcy5jYWNoZUlkID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICAvLyBmaW5hbGx5IGxldCB0aGUgV2ViR0wgcmVuZGVyZXIga25vdy4uXG4gICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgICAgICBCYXNlVGV4dHVyZS5yZW1vdmVGcm9tQ2FjaGUodGhpcyk7XG4gICAgICAgIHRoaXMudGV4dHVyZUNhY2hlSWRzID0gbnVsbDtcbiAgICAgICAgdGhpcy5kZXN0cm95ZWQgPSB0cnVlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRnJlZXMgdGhlIHRleHR1cmUgZnJvbSBXZWJHTCBtZW1vcnkgd2l0aG91dCBkZXN0cm95aW5nIHRoaXMgdGV4dHVyZSBvYmplY3QuXG4gICAgICogVGhpcyBtZWFucyB5b3UgY2FuIHN0aWxsIHVzZSB0aGUgdGV4dHVyZSBsYXRlciB3aGljaCB3aWxsIHVwbG9hZCBpdCB0byBHUFVcbiAgICAgKiBtZW1vcnkgYWdhaW4uXG4gICAgICogQGZpcmVzIFBJWEkuQmFzZVRleHR1cmUjZGlzcG9zZVxuICAgICAqL1xuICAgIEJhc2VUZXh0dXJlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmVtaXQoJ2Rpc3Bvc2UnLCB0aGlzKTtcbiAgICB9O1xuICAgIC8qKiBVdGlsaXR5IGZ1bmN0aW9uIGZvciBCYXNlVGV4dHVyZXxUZXh0dXJlIGNhc3QuICovXG4gICAgQmFzZVRleHR1cmUucHJvdG90eXBlLmNhc3RUb0Jhc2VUZXh0dXJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhlbHBlciBmdW5jdGlvbiB0aGF0IGNyZWF0ZXMgYSBiYXNlIHRleHR1cmUgYmFzZWQgb24gdGhlIHNvdXJjZSB5b3UgcHJvdmlkZS5cbiAgICAgKiBUaGUgc291cmNlIGNhbiBiZSAtIGltYWdlIHVybCwgaW1hZ2UgZWxlbWVudCwgY2FudmFzIGVsZW1lbnQuIElmIHRoZVxuICAgICAqIHNvdXJjZSBpcyBhbiBpbWFnZSB1cmwgb3IgYW4gaW1hZ2UgZWxlbWVudCBhbmQgbm90IGluIHRoZSBiYXNlIHRleHR1cmVcbiAgICAgKiBjYWNoZSwgaXQgd2lsbCBiZSBjcmVhdGVkIGFuZCBsb2FkZWQuXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfHN0cmluZ1tdfEhUTUxJbWFnZUVsZW1lbnR8SFRNTENhbnZhc0VsZW1lbnR8U1ZHRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fSBzb3VyY2UgLSBUaGVcbiAgICAgKiAgICAgICAgc291cmNlIHRvIGNyZWF0ZSBiYXNlIHRleHR1cmUgZnJvbS5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIFNlZSB7QGxpbmsgUElYSS5CYXNlVGV4dHVyZX0ncyBjb25zdHJ1Y3RvciBmb3Igb3B0aW9ucy5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMucGl4aUlkUHJlZml4PXBpeGlpZF0gLSBJZiBhIHNvdXJjZSBoYXMgbm8gaWQsIHRoaXMgaXMgdGhlIHByZWZpeCBvZiB0aGUgZ2VuZXJhdGVkIGlkXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbc3RyaWN0XSAtIEVuZm9yY2Ugc3RyaWN0LW1vZGUsIHNlZSB7QGxpbmsgUElYSS5zZXR0aW5ncy5TVFJJQ1RfVEVYVFVSRV9DQUNIRX0uXG4gICAgICogQHJldHVybnMge1BJWEkuQmFzZVRleHR1cmV9IFRoZSBuZXcgYmFzZSB0ZXh0dXJlLlxuICAgICAqL1xuICAgIEJhc2VUZXh0dXJlLmZyb20gPSBmdW5jdGlvbiAoc291cmNlLCBvcHRpb25zLCBzdHJpY3QpIHtcbiAgICAgICAgaWYgKHN0cmljdCA9PT0gdm9pZCAwKSB7IHN0cmljdCA9IHNldHRpbmdzLnNldHRpbmdzLlNUUklDVF9URVhUVVJFX0NBQ0hFOyB9XG4gICAgICAgIHZhciBpc0ZyYW1lID0gdHlwZW9mIHNvdXJjZSA9PT0gJ3N0cmluZyc7XG4gICAgICAgIHZhciBjYWNoZUlkID0gbnVsbDtcbiAgICAgICAgaWYgKGlzRnJhbWUpIHtcbiAgICAgICAgICAgIGNhY2hlSWQgPSBzb3VyY2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoIXNvdXJjZS5fcGl4aUlkKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByZWZpeCA9IChvcHRpb25zICYmIG9wdGlvbnMucGl4aUlkUHJlZml4KSB8fCAncGl4aWlkJztcbiAgICAgICAgICAgICAgICBzb3VyY2UuX3BpeGlJZCA9IHByZWZpeCArIFwiX1wiICsgdXRpbHMudWlkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYWNoZUlkID0gc291cmNlLl9waXhpSWQ7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGJhc2VUZXh0dXJlID0gdXRpbHMuQmFzZVRleHR1cmVDYWNoZVtjYWNoZUlkXTtcbiAgICAgICAgLy8gU3RyaWN0LW1vZGUgcmVqZWN0cyBpbnZhbGlkIGNhY2hlSWRzXG4gICAgICAgIGlmIChpc0ZyYW1lICYmIHN0cmljdCAmJiAhYmFzZVRleHR1cmUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZSBjYWNoZUlkIFxcXCJcIiArIGNhY2hlSWQgKyBcIlxcXCIgZG9lcyBub3QgZXhpc3QgaW4gQmFzZVRleHR1cmVDYWNoZS5cIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFiYXNlVGV4dHVyZSkge1xuICAgICAgICAgICAgYmFzZVRleHR1cmUgPSBuZXcgQmFzZVRleHR1cmUoc291cmNlLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGJhc2VUZXh0dXJlLmNhY2hlSWQgPSBjYWNoZUlkO1xuICAgICAgICAgICAgQmFzZVRleHR1cmUuYWRkVG9DYWNoZShiYXNlVGV4dHVyZSwgY2FjaGVJZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJhc2VUZXh0dXJlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IEJhc2VUZXh0dXJlIHdpdGggYSBCdWZmZXJSZXNvdXJjZSBmcm9tIGEgRmxvYXQzMkFycmF5LlxuICAgICAqIFJHQkEgdmFsdWVzIGFyZSBmbG9hdHMgZnJvbSAwIHRvIDEuXG4gICAgICogQHBhcmFtIHtGbG9hdDMyQXJyYXl8VWludDhBcnJheX0gYnVmZmVyIC0gVGhlIG9wdGlvbmFsIGFycmF5IHRvIHVzZSwgaWYgbm8gZGF0YVxuICAgICAqICAgICAgICBpcyBwcm92aWRlZCwgYSBuZXcgRmxvYXQzMkFycmF5IGlzIGNyZWF0ZWQuXG4gICAgICogQHBhcmFtIHdpZHRoIC0gV2lkdGggb2YgdGhlIHJlc291cmNlXG4gICAgICogQHBhcmFtIGhlaWdodCAtIEhlaWdodCBvZiB0aGUgcmVzb3VyY2VcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIFNlZSB7QGxpbmsgUElYSS5CYXNlVGV4dHVyZX0ncyBjb25zdHJ1Y3RvciBmb3Igb3B0aW9ucy5cbiAgICAgKiBAcmV0dXJucyAtIFRoZSByZXN1bHRpbmcgbmV3IEJhc2VUZXh0dXJlXG4gICAgICovXG4gICAgQmFzZVRleHR1cmUuZnJvbUJ1ZmZlciA9IGZ1bmN0aW9uIChidWZmZXIsIHdpZHRoLCBoZWlnaHQsIG9wdGlvbnMpIHtcbiAgICAgICAgYnVmZmVyID0gYnVmZmVyIHx8IG5ldyBGbG9hdDMyQXJyYXkod2lkdGggKiBoZWlnaHQgKiA0KTtcbiAgICAgICAgdmFyIHJlc291cmNlID0gbmV3IEJ1ZmZlclJlc291cmNlKGJ1ZmZlciwgeyB3aWR0aDogd2lkdGgsIGhlaWdodDogaGVpZ2h0IH0pO1xuICAgICAgICB2YXIgdHlwZSA9IGJ1ZmZlciBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheSA/IGNvbnN0YW50cy5UWVBFUy5GTE9BVCA6IGNvbnN0YW50cy5UWVBFUy5VTlNJR05FRF9CWVRFO1xuICAgICAgICByZXR1cm4gbmV3IEJhc2VUZXh0dXJlKHJlc291cmNlLCBPYmplY3QuYXNzaWduKGRlZmF1bHRCdWZmZXJPcHRpb25zLCBvcHRpb25zIHx8IHsgd2lkdGg6IHdpZHRoLCBoZWlnaHQ6IGhlaWdodCwgdHlwZTogdHlwZSB9KSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBZGRzIGEgQmFzZVRleHR1cmUgdG8gdGhlIGdsb2JhbCBCYXNlVGV4dHVyZUNhY2hlLiBUaGlzIGNhY2hlIGlzIHNoYXJlZCBhY3Jvc3MgdGhlIHdob2xlIFBJWEkgb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7UElYSS5CYXNlVGV4dHVyZX0gYmFzZVRleHR1cmUgLSBUaGUgQmFzZVRleHR1cmUgdG8gYWRkIHRvIHRoZSBjYWNoZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgLSBUaGUgaWQgdGhhdCB0aGUgQmFzZVRleHR1cmUgd2lsbCBiZSBzdG9yZWQgYWdhaW5zdC5cbiAgICAgKi9cbiAgICBCYXNlVGV4dHVyZS5hZGRUb0NhY2hlID0gZnVuY3Rpb24gKGJhc2VUZXh0dXJlLCBpZCkge1xuICAgICAgICBpZiAoaWQpIHtcbiAgICAgICAgICAgIGlmIChiYXNlVGV4dHVyZS50ZXh0dXJlQ2FjaGVJZHMuaW5kZXhPZihpZCkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgYmFzZVRleHR1cmUudGV4dHVyZUNhY2hlSWRzLnB1c2goaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHV0aWxzLkJhc2VUZXh0dXJlQ2FjaGVbaWRdKSB7XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJCYXNlVGV4dHVyZSBhZGRlZCB0byB0aGUgY2FjaGUgd2l0aCBhbiBpZCBbXCIgKyBpZCArIFwiXSB0aGF0IGFscmVhZHkgaGFkIGFuIGVudHJ5XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdXRpbHMuQmFzZVRleHR1cmVDYWNoZVtpZF0gPSBiYXNlVGV4dHVyZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGEgQmFzZVRleHR1cmUgZnJvbSB0aGUgZ2xvYmFsIEJhc2VUZXh0dXJlQ2FjaGUuXG4gICAgICogQHBhcmFtIHtzdHJpbmd8UElYSS5CYXNlVGV4dHVyZX0gYmFzZVRleHR1cmUgLSBpZCBvZiBhIEJhc2VUZXh0dXJlIHRvIGJlIHJlbW92ZWQsIG9yIGEgQmFzZVRleHR1cmUgaW5zdGFuY2UgaXRzZWxmLlxuICAgICAqIEByZXR1cm5zIHtQSVhJLkJhc2VUZXh0dXJlfG51bGx9IFRoZSBCYXNlVGV4dHVyZSB0aGF0IHdhcyByZW1vdmVkLlxuICAgICAqL1xuICAgIEJhc2VUZXh0dXJlLnJlbW92ZUZyb21DYWNoZSA9IGZ1bmN0aW9uIChiYXNlVGV4dHVyZSkge1xuICAgICAgICBpZiAodHlwZW9mIGJhc2VUZXh0dXJlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdmFyIGJhc2VUZXh0dXJlRnJvbUNhY2hlID0gdXRpbHMuQmFzZVRleHR1cmVDYWNoZVtiYXNlVGV4dHVyZV07XG4gICAgICAgICAgICBpZiAoYmFzZVRleHR1cmVGcm9tQ2FjaGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBiYXNlVGV4dHVyZUZyb21DYWNoZS50ZXh0dXJlQ2FjaGVJZHMuaW5kZXhPZihiYXNlVGV4dHVyZSk7XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgYmFzZVRleHR1cmVGcm9tQ2FjaGUudGV4dHVyZUNhY2hlSWRzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRlbGV0ZSB1dGlscy5CYXNlVGV4dHVyZUNhY2hlW2Jhc2VUZXh0dXJlXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYmFzZVRleHR1cmVGcm9tQ2FjaGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYmFzZVRleHR1cmUgJiYgYmFzZVRleHR1cmUudGV4dHVyZUNhY2hlSWRzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJhc2VUZXh0dXJlLnRleHR1cmVDYWNoZUlkcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB1dGlscy5CYXNlVGV4dHVyZUNhY2hlW2Jhc2VUZXh0dXJlLnRleHR1cmVDYWNoZUlkc1tpXV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBiYXNlVGV4dHVyZS50ZXh0dXJlQ2FjaGVJZHMubGVuZ3RoID0gMDtcbiAgICAgICAgICAgIHJldHVybiBiYXNlVGV4dHVyZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuICAgIC8qKiBHbG9iYWwgbnVtYmVyIG9mIHRoZSB0ZXh0dXJlIGJhdGNoLCB1c2VkIGJ5IG11bHRpLXRleHR1cmUgcmVuZGVyZXJzLiAqL1xuICAgIEJhc2VUZXh0dXJlLl9nbG9iYWxCYXRjaCA9IDA7XG4gICAgcmV0dXJuIEJhc2VUZXh0dXJlO1xufSh1dGlscy5FdmVudEVtaXR0ZXIpKTtcblxuLyoqXG4gKiBSZXNvdXJjZSB0aGF0IGNhbiBtYW5hZ2Ugc2V2ZXJhbCByZXNvdXJjZSAoaXRlbXMpIGluc2lkZS5cbiAqIEFsbCByZXNvdXJjZXMgbmVlZCB0byBoYXZlIHRoZSBzYW1lIHBpeGVsIHNpemUuXG4gKiBQYXJlbnQgY2xhc3MgZm9yIEN1YmVSZXNvdXJjZSBhbmQgQXJyYXlSZXNvdXJjZVxuICogQG1lbWJlcm9mIFBJWElcbiAqL1xudmFyIEFic3RyYWN0TXVsdGlSZXNvdXJjZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQWJzdHJhY3RNdWx0aVJlc291cmNlLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBsZW5ndGhcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbnMgdG8gZm9yIFJlc291cmNlIGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLndpZHRoXSAtIFdpZHRoIG9mIHRoZSByZXNvdXJjZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5oZWlnaHRdIC0gSGVpZ2h0IG9mIHRoZSByZXNvdXJjZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEFic3RyYWN0TXVsdGlSZXNvdXJjZShsZW5ndGgsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIF9hID0gb3B0aW9ucyB8fCB7fSwgd2lkdGggPSBfYS53aWR0aCwgaGVpZ2h0ID0gX2EuaGVpZ2h0O1xuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHdpZHRoLCBoZWlnaHQpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLml0ZW1zID0gW107XG4gICAgICAgIF90aGlzLml0ZW1EaXJ0eUlkcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgcGFydFRleHR1cmUgPSBuZXcgQmFzZVRleHR1cmUoKTtcbiAgICAgICAgICAgIF90aGlzLml0ZW1zLnB1c2gocGFydFRleHR1cmUpO1xuICAgICAgICAgICAgLy8gLTIgLSBmaXJzdCBydW4gb2YgdGV4dHVyZSBhcnJheSB1cGxvYWRcbiAgICAgICAgICAgIC8vIC0xIC0gdGV4dHVyZSBpdGVtIHdhcyBhbGxvY2F0ZWRcbiAgICAgICAgICAgIC8vID49MCAtIHRleHR1cmUgaXRlbSB1cGxvYWRlZCAsIGluIHN5bmMgd2l0aCBpdGVtc1tpXS5kaXJ0eUlkXG4gICAgICAgICAgICBfdGhpcy5pdGVtRGlydHlJZHMucHVzaCgtMik7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMubGVuZ3RoID0gbGVuZ3RoO1xuICAgICAgICBfdGhpcy5fbG9hZCA9IG51bGw7XG4gICAgICAgIF90aGlzLmJhc2VUZXh0dXJlID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVc2VkIGZyb20gQXJyYXlSZXNvdXJjZSBhbmQgQ3ViZVJlc291cmNlIGNvbnN0cnVjdG9ycy5cbiAgICAgKiBAcGFyYW0gcmVzb3VyY2VzIC0gQ2FuIGJlIHJlc291cmNlcywgaW1hZ2UgZWxlbWVudHMsIGNhbnZhcywgZXRjLiAsXG4gICAgICogIGxlbmd0aCBzaG91bGQgYmUgc2FtZSBhcyBjb25zdHJ1Y3RvciBsZW5ndGhcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIERldGVjdCBvcHRpb25zIGZvciByZXNvdXJjZXNcbiAgICAgKi9cbiAgICBBYnN0cmFjdE11bHRpUmVzb3VyY2UucHJvdG90eXBlLmluaXRGcm9tQXJyYXkgPSBmdW5jdGlvbiAocmVzb3VyY2VzLCBvcHRpb25zKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKCFyZXNvdXJjZXNbaV0pIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXNvdXJjZXNbaV0uY2FzdFRvQmFzZVRleHR1cmUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEJhc2VUZXh0dXJlQXQocmVzb3VyY2VzW2ldLmNhc3RUb0Jhc2VUZXh0dXJlKCksIGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocmVzb3VyY2VzW2ldIGluc3RhbmNlb2YgUmVzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZFJlc291cmNlQXQocmVzb3VyY2VzW2ldLCBpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkUmVzb3VyY2VBdChhdXRvRGV0ZWN0UmVzb3VyY2UocmVzb3VyY2VzW2ldLCBvcHRpb25zKSwgaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKiBEZXN0cm95IHRoaXMgQmFzZUltYWdlUmVzb3VyY2UuICovXG4gICAgQWJzdHJhY3RNdWx0aVJlc291cmNlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdGhpcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgdGhpcy5pdGVtc1tpXS5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pdGVtcyA9IG51bGw7XG4gICAgICAgIHRoaXMuaXRlbURpcnR5SWRzID0gbnVsbDtcbiAgICAgICAgdGhpcy5fbG9hZCA9IG51bGw7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgYSByZXNvdXJjZSBieSBJRFxuICAgICAqIEBwYXJhbSByZXNvdXJjZVxuICAgICAqIEBwYXJhbSBpbmRleCAtIFplcm8tYmFzZWQgaW5kZXggb2YgcmVzb3VyY2UgdG8gc2V0XG4gICAgICogQHJldHVybnMgLSBJbnN0YW5jZSBmb3IgY2hhaW5pbmdcbiAgICAgKi9cbiAgICBBYnN0cmFjdE11bHRpUmVzb3VyY2UucHJvdG90eXBlLmFkZFJlc291cmNlQXQgPSBmdW5jdGlvbiAocmVzb3VyY2UsIGluZGV4KSB7XG4gICAgICAgIGlmICghdGhpcy5pdGVtc1tpbmRleF0pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkluZGV4IFwiICsgaW5kZXggKyBcIiBpcyBvdXQgb2YgYm91bmRzXCIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEluaGVyaXQgdGhlIGZpcnN0IHJlc291cmNlIGRpbWVuc2lvbnNcbiAgICAgICAgaWYgKHJlc291cmNlLnZhbGlkICYmICF0aGlzLnZhbGlkKSB7XG4gICAgICAgICAgICB0aGlzLnJlc2l6ZShyZXNvdXJjZS53aWR0aCwgcmVzb3VyY2UuaGVpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLml0ZW1zW2luZGV4XS5zZXRSZXNvdXJjZShyZXNvdXJjZSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBwYXJlbnQgYmFzZSB0ZXh0dXJlLlxuICAgICAqIEBwYXJhbSBiYXNlVGV4dHVyZVxuICAgICAqL1xuICAgIEFic3RyYWN0TXVsdGlSZXNvdXJjZS5wcm90b3R5cGUuYmluZCA9IGZ1bmN0aW9uIChiYXNlVGV4dHVyZSkge1xuICAgICAgICBpZiAodGhpcy5iYXNlVGV4dHVyZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdPbmx5IG9uZSBiYXNlIHRleHR1cmUgcGVyIFRleHR1cmVBcnJheSBpcyBhbGxvd2VkJyk7XG4gICAgICAgIH1cbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5iaW5kLmNhbGwodGhpcywgYmFzZVRleHR1cmUpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuaXRlbXNbaV0ucGFyZW50VGV4dHVyZUFycmF5ID0gYmFzZVRleHR1cmU7XG4gICAgICAgICAgICB0aGlzLml0ZW1zW2ldLm9uKCd1cGRhdGUnLCBiYXNlVGV4dHVyZS51cGRhdGUsIGJhc2VUZXh0dXJlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogVW5zZXQgdGhlIHBhcmVudCBiYXNlIHRleHR1cmUuXG4gICAgICogQHBhcmFtIGJhc2VUZXh0dXJlXG4gICAgICovXG4gICAgQWJzdHJhY3RNdWx0aVJlc291cmNlLnByb3RvdHlwZS51bmJpbmQgPSBmdW5jdGlvbiAoYmFzZVRleHR1cmUpIHtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS51bmJpbmQuY2FsbCh0aGlzLCBiYXNlVGV4dHVyZSk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5pdGVtc1tpXS5wYXJlbnRUZXh0dXJlQXJyYXkgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5pdGVtc1tpXS5vZmYoJ3VwZGF0ZScsIGJhc2VUZXh0dXJlLnVwZGF0ZSwgYmFzZVRleHR1cmUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBMb2FkIGFsbCB0aGUgcmVzb3VyY2VzIHNpbXVsdGFuZW91c2x5XG4gICAgICogQHJldHVybnMgLSBXaGVuIGxvYWQgaXMgcmVzb2x2ZWRcbiAgICAgKi9cbiAgICBBYnN0cmFjdE11bHRpUmVzb3VyY2UucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICh0aGlzLl9sb2FkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbG9hZDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmVzb3VyY2VzID0gdGhpcy5pdGVtcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsgcmV0dXJuIGl0ZW0ucmVzb3VyY2U7IH0pLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgeyByZXR1cm4gaXRlbTsgfSk7XG4gICAgICAgIC8vIFRPRE86IGFsc28gaW1wbGVtZW50IGxvYWQgcGFydC1ieS1wYXJ0IHN0cmF0ZWd5XG4gICAgICAgIHZhciBwcm9taXNlcyA9IHJlc291cmNlcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsgcmV0dXJuIGl0ZW0ubG9hZCgpOyB9KTtcbiAgICAgICAgdGhpcy5fbG9hZCA9IFByb21pc2UuYWxsKHByb21pc2VzKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF9hID0gX3RoaXMuaXRlbXNbMF0sIHJlYWxXaWR0aCA9IF9hLnJlYWxXaWR0aCwgcmVhbEhlaWdodCA9IF9hLnJlYWxIZWlnaHQ7XG4gICAgICAgICAgICBfdGhpcy5yZXNpemUocmVhbFdpZHRoLCByZWFsSGVpZ2h0KTtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoX3RoaXMpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xvYWQ7XG4gICAgfTtcbiAgICByZXR1cm4gQWJzdHJhY3RNdWx0aVJlc291cmNlO1xufShSZXNvdXJjZSkpO1xuXG4vKipcbiAqIEEgcmVzb3VyY2UgdGhhdCBjb250YWlucyBhIG51bWJlciBvZiBzb3VyY2VzLlxuICogQG1lbWJlcm9mIFBJWElcbiAqL1xudmFyIEFycmF5UmVzb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEFycmF5UmVzb3VyY2UsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHNvdXJjZSAtIE51bWJlciBvZiBpdGVtcyBpbiBhcnJheSBvciB0aGUgY29sbGVjdGlvblxuICAgICAqICAgICAgICBvZiBpbWFnZSBVUkxzIHRvIHVzZS4gQ2FuIGFsc28gYmUgcmVzb3VyY2VzLCBpbWFnZSBlbGVtZW50cywgY2FudmFzLCBldGMuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25zIHRvIGFwcGx5IHRvIHtAbGluayBQSVhJLmF1dG9EZXRlY3RSZXNvdXJjZX1cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMud2lkdGhdIC0gV2lkdGggb2YgdGhlIHJlc291cmNlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLmhlaWdodF0gLSBIZWlnaHQgb2YgdGhlIHJlc291cmNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gQXJyYXlSZXNvdXJjZShzb3VyY2UsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIF9hID0gb3B0aW9ucyB8fCB7fSwgd2lkdGggPSBfYS53aWR0aCwgaGVpZ2h0ID0gX2EuaGVpZ2h0O1xuICAgICAgICB2YXIgdXJscztcbiAgICAgICAgdmFyIGxlbmd0aDtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc291cmNlKSkge1xuICAgICAgICAgICAgdXJscyA9IHNvdXJjZTtcbiAgICAgICAgICAgIGxlbmd0aCA9IHNvdXJjZS5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZW5ndGggPSBzb3VyY2U7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBsZW5ndGgsIHsgd2lkdGg6IHdpZHRoLCBoZWlnaHQ6IGhlaWdodCB9KSB8fCB0aGlzO1xuICAgICAgICBpZiAodXJscykge1xuICAgICAgICAgICAgX3RoaXMuaW5pdEZyb21BcnJheSh1cmxzLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBhIGJhc2VUZXh0dXJlIGJ5IElELFxuICAgICAqIEFycmF5UmVzb3VyY2UganVzdCB0YWtlcyByZXNvdXJjZSBmcm9tIGl0LCBub3RoaW5nIG1vcmVcbiAgICAgKiBAcGFyYW0gYmFzZVRleHR1cmVcbiAgICAgKiBAcGFyYW0gaW5kZXggLSBaZXJvLWJhc2VkIGluZGV4IG9mIHJlc291cmNlIHRvIHNldFxuICAgICAqIEByZXR1cm5zIC0gSW5zdGFuY2UgZm9yIGNoYWluaW5nXG4gICAgICovXG4gICAgQXJyYXlSZXNvdXJjZS5wcm90b3R5cGUuYWRkQmFzZVRleHR1cmVBdCA9IGZ1bmN0aW9uIChiYXNlVGV4dHVyZSwgaW5kZXgpIHtcbiAgICAgICAgaWYgKGJhc2VUZXh0dXJlLnJlc291cmNlKSB7XG4gICAgICAgICAgICB0aGlzLmFkZFJlc291cmNlQXQoYmFzZVRleHR1cmUucmVzb3VyY2UsIGluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQXJyYXlSZXNvdXJjZSBkb2VzIG5vdCBzdXBwb3J0IFJlbmRlclRleHR1cmUnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFkZCBiaW5kaW5nXG4gICAgICogQHBhcmFtIGJhc2VUZXh0dXJlXG4gICAgICovXG4gICAgQXJyYXlSZXNvdXJjZS5wcm90b3R5cGUuYmluZCA9IGZ1bmN0aW9uIChiYXNlVGV4dHVyZSkge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLCBiYXNlVGV4dHVyZSk7XG4gICAgICAgIGJhc2VUZXh0dXJlLnRhcmdldCA9IGNvbnN0YW50cy5UQVJHRVRTLlRFWFRVUkVfMkRfQVJSQVk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBVcGxvYWQgdGhlIHJlc291cmNlcyB0byB0aGUgR1BVLlxuICAgICAqIEBwYXJhbSByZW5kZXJlclxuICAgICAqIEBwYXJhbSB0ZXh0dXJlXG4gICAgICogQHBhcmFtIGdsVGV4dHVyZVxuICAgICAqIEByZXR1cm5zIC0gd2hldGhlciB0ZXh0dXJlIHdhcyB1cGxvYWRlZFxuICAgICAqL1xuICAgIEFycmF5UmVzb3VyY2UucHJvdG90eXBlLnVwbG9hZCA9IGZ1bmN0aW9uIChyZW5kZXJlciwgdGV4dHVyZSwgZ2xUZXh0dXJlKSB7XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIGxlbmd0aCA9IF9hLmxlbmd0aCwgaXRlbURpcnR5SWRzID0gX2EuaXRlbURpcnR5SWRzLCBpdGVtcyA9IF9hLml0ZW1zO1xuICAgICAgICB2YXIgZ2wgPSByZW5kZXJlci5nbDtcbiAgICAgICAgaWYgKGdsVGV4dHVyZS5kaXJ0eUlkIDwgMCkge1xuICAgICAgICAgICAgZ2wudGV4SW1hZ2UzRChnbC5URVhUVVJFXzJEX0FSUkFZLCAwLCBnbFRleHR1cmUuaW50ZXJuYWxGb3JtYXQsIHRoaXMuX3dpZHRoLCB0aGlzLl9oZWlnaHQsIGxlbmd0aCwgMCwgdGV4dHVyZS5mb3JtYXQsIGdsVGV4dHVyZS50eXBlLCBudWxsKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgaXRlbSA9IGl0ZW1zW2ldO1xuICAgICAgICAgICAgaWYgKGl0ZW1EaXJ0eUlkc1tpXSA8IGl0ZW0uZGlydHlJZCkge1xuICAgICAgICAgICAgICAgIGl0ZW1EaXJ0eUlkc1tpXSA9IGl0ZW0uZGlydHlJZDtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS52YWxpZCkge1xuICAgICAgICAgICAgICAgICAgICBnbC50ZXhTdWJJbWFnZTNEKGdsLlRFWFRVUkVfMkRfQVJSQVksIDAsIDAsIC8vIHhvZmZzZXRcbiAgICAgICAgICAgICAgICAgICAgMCwgLy8geW9mZnNldFxuICAgICAgICAgICAgICAgICAgICBpLCAvLyB6b2Zmc2V0XG4gICAgICAgICAgICAgICAgICAgIGl0ZW0ucmVzb3VyY2Uud2lkdGgsIGl0ZW0ucmVzb3VyY2UuaGVpZ2h0LCAxLCB0ZXh0dXJlLmZvcm1hdCwgZ2xUZXh0dXJlLnR5cGUsIGl0ZW0ucmVzb3VyY2Uuc291cmNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgICByZXR1cm4gQXJyYXlSZXNvdXJjZTtcbn0oQWJzdHJhY3RNdWx0aVJlc291cmNlKSk7XG5cbi8qKlxuICogQmFzZSBmb3IgYWxsIHRoZSBpbWFnZS9jYW52YXMgcmVzb3VyY2VzLlxuICogQG1lbWJlcm9mIFBJWElcbiAqL1xudmFyIEJhc2VJbWFnZVJlc291cmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhCYXNlSW1hZ2VSZXNvdXJjZSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0hUTUxJbWFnZUVsZW1lbnR8SFRNTENhbnZhc0VsZW1lbnR8SFRNTFZpZGVvRWxlbWVudHxTVkdFbGVtZW50fSBzb3VyY2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBCYXNlSW1hZ2VSZXNvdXJjZShzb3VyY2UpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIHNvdXJjZUFueSA9IHNvdXJjZTtcbiAgICAgICAgdmFyIHdpZHRoID0gc291cmNlQW55Lm5hdHVyYWxXaWR0aCB8fCBzb3VyY2VBbnkudmlkZW9XaWR0aCB8fCBzb3VyY2VBbnkud2lkdGg7XG4gICAgICAgIHZhciBoZWlnaHQgPSBzb3VyY2VBbnkubmF0dXJhbEhlaWdodCB8fCBzb3VyY2VBbnkudmlkZW9IZWlnaHQgfHwgc291cmNlQW55LmhlaWdodDtcbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB3aWR0aCwgaGVpZ2h0KSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICAgIF90aGlzLm5vU3ViSW1hZ2UgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgY3Jvc3Mgb3JpZ2luIGJhc2VkIGRldGVjdGluZyB0aGUgdXJsIGFuZCB0aGUgY3Jvc3NvcmlnaW5cbiAgICAgKiBAcGFyYW0gZWxlbWVudCAtIEVsZW1lbnQgdG8gYXBwbHkgY3Jvc3NPcmlnaW5cbiAgICAgKiBAcGFyYW0gdXJsIC0gVVJMIHRvIGNoZWNrXG4gICAgICogQHBhcmFtIGNyb3Nzb3JpZ2luIC0gQ3Jvc3Mgb3JpZ2luIHZhbHVlIHRvIHVzZVxuICAgICAqL1xuICAgIEJhc2VJbWFnZVJlc291cmNlLmNyb3NzT3JpZ2luID0gZnVuY3Rpb24gKGVsZW1lbnQsIHVybCwgY3Jvc3NvcmlnaW4pIHtcbiAgICAgICAgaWYgKGNyb3Nzb3JpZ2luID09PSB1bmRlZmluZWQgJiYgdXJsLmluZGV4T2YoJ2RhdGE6JykgIT09IDApIHtcbiAgICAgICAgICAgIGVsZW1lbnQuY3Jvc3NPcmlnaW4gPSB1dGlscy5kZXRlcm1pbmVDcm9zc09yaWdpbih1cmwpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGNyb3Nzb3JpZ2luICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgZWxlbWVudC5jcm9zc09yaWdpbiA9IHR5cGVvZiBjcm9zc29yaWdpbiA9PT0gJ3N0cmluZycgPyBjcm9zc29yaWdpbiA6ICdhbm9ueW1vdXMnO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBVcGxvYWQgdGhlIHRleHR1cmUgdG8gdGhlIEdQVS5cbiAgICAgKiBAcGFyYW0gcmVuZGVyZXIgLSBVcGxvYWQgdG8gdGhlIHJlbmRlcmVyXG4gICAgICogQHBhcmFtIGJhc2VUZXh0dXJlIC0gUmVmZXJlbmNlIHRvIHBhcmVudCB0ZXh0dXJlXG4gICAgICogQHBhcmFtIGdsVGV4dHVyZVxuICAgICAqIEBwYXJhbSB7SFRNTEltYWdlRWxlbWVudHxIVE1MQ2FudmFzRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fFNWR0VsZW1lbnR9IFtzb3VyY2VdIC0gKG9wdGlvbmFsKVxuICAgICAqIEByZXR1cm5zIC0gdHJ1ZSBpcyBzdWNjZXNzXG4gICAgICovXG4gICAgQmFzZUltYWdlUmVzb3VyY2UucHJvdG90eXBlLnVwbG9hZCA9IGZ1bmN0aW9uIChyZW5kZXJlciwgYmFzZVRleHR1cmUsIGdsVGV4dHVyZSwgc291cmNlKSB7XG4gICAgICAgIHZhciBnbCA9IHJlbmRlcmVyLmdsO1xuICAgICAgICB2YXIgd2lkdGggPSBiYXNlVGV4dHVyZS5yZWFsV2lkdGg7XG4gICAgICAgIHZhciBoZWlnaHQgPSBiYXNlVGV4dHVyZS5yZWFsSGVpZ2h0O1xuICAgICAgICBzb3VyY2UgPSBzb3VyY2UgfHwgdGhpcy5zb3VyY2U7XG4gICAgICAgIGlmIChzb3VyY2UgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50KSB7XG4gICAgICAgICAgICBpZiAoIXNvdXJjZS5jb21wbGV0ZSB8fCBzb3VyY2UubmF0dXJhbFdpZHRoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNvdXJjZSBpbnN0YW5jZW9mIEhUTUxWaWRlb0VsZW1lbnQpIHtcbiAgICAgICAgICAgIGlmIChzb3VyY2UucmVhZHlTdGF0ZSA8PSAxKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGdsLnBpeGVsU3RvcmVpKGdsLlVOUEFDS19QUkVNVUxUSVBMWV9BTFBIQV9XRUJHTCwgYmFzZVRleHR1cmUuYWxwaGFNb2RlID09PSBjb25zdGFudHMuQUxQSEFfTU9ERVMuVU5QQUNLKTtcbiAgICAgICAgaWYgKCF0aGlzLm5vU3ViSW1hZ2VcbiAgICAgICAgICAgICYmIGJhc2VUZXh0dXJlLnRhcmdldCA9PT0gZ2wuVEVYVFVSRV8yRFxuICAgICAgICAgICAgJiYgZ2xUZXh0dXJlLndpZHRoID09PSB3aWR0aFxuICAgICAgICAgICAgJiYgZ2xUZXh0dXJlLmhlaWdodCA9PT0gaGVpZ2h0KSB7XG4gICAgICAgICAgICBnbC50ZXhTdWJJbWFnZTJEKGdsLlRFWFRVUkVfMkQsIDAsIDAsIDAsIGJhc2VUZXh0dXJlLmZvcm1hdCwgZ2xUZXh0dXJlLnR5cGUsIHNvdXJjZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBnbFRleHR1cmUud2lkdGggPSB3aWR0aDtcbiAgICAgICAgICAgIGdsVGV4dHVyZS5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgICAgICBnbC50ZXhJbWFnZTJEKGJhc2VUZXh0dXJlLnRhcmdldCwgMCwgZ2xUZXh0dXJlLmludGVybmFsRm9ybWF0LCBiYXNlVGV4dHVyZS5mb3JtYXQsIGdsVGV4dHVyZS50eXBlLCBzb3VyY2UpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIHNvdXJjZSB3aWR0aC9oZWlnaHQgd2FzIGNoYW5nZWQsIHJlc2l6ZSBjYW4gY2F1c2UgZXh0cmEgYmFzZVRleHR1cmUgdXBkYXRlLlxuICAgICAqIFRyaWdnZXJzIG9uZSB1cGRhdGUgaW4gYW55IGNhc2UuXG4gICAgICovXG4gICAgQmFzZUltYWdlUmVzb3VyY2UucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuZGVzdHJveWVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHNvdXJjZSA9IHRoaXMuc291cmNlO1xuICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UubmF0dXJhbFdpZHRoIHx8IHNvdXJjZS52aWRlb1dpZHRoIHx8IHNvdXJjZS53aWR0aDtcbiAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5uYXR1cmFsSGVpZ2h0IHx8IHNvdXJjZS52aWRlb0hlaWdodCB8fCBzb3VyY2UuaGVpZ2h0O1xuICAgICAgICB0aGlzLnJlc2l6ZSh3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS51cGRhdGUuY2FsbCh0aGlzKTtcbiAgICB9O1xuICAgIC8qKiBEZXN0cm95IHRoaXMge0BsaW5rIEJhc2VJbWFnZVJlc291cmNlfSAqL1xuICAgIEJhc2VJbWFnZVJlc291cmNlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnNvdXJjZSA9IG51bGw7XG4gICAgfTtcbiAgICByZXR1cm4gQmFzZUltYWdlUmVzb3VyY2U7XG59KFJlc291cmNlKSk7XG5cbi8qKlxuICogQGludGVyZmFjZSBPZmZzY3JlZW5DYW52YXNcbiAqL1xuLyoqXG4gKiBSZXNvdXJjZSB0eXBlIGZvciBIVE1MQ2FudmFzRWxlbWVudC5cbiAqIEBtZW1iZXJvZiBQSVhJXG4gKi9cbnZhciBDYW52YXNSZXNvdXJjZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ2FudmFzUmVzb3VyY2UsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHNvdXJjZSAtIENhbnZhcyBlbGVtZW50IHRvIHVzZVxuICAgICAqL1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlbGVzcy1jb25zdHJ1Y3RvclxuICAgIGZ1bmN0aW9uIENhbnZhc1Jlc291cmNlKHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVc2VkIHRvIGF1dG8tZGV0ZWN0IHRoZSB0eXBlIG9mIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSB7Kn0gc291cmNlIC0gVGhlIHNvdXJjZSBvYmplY3RcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gYHRydWVgIGlmIHNvdXJjZSBpcyBIVE1MQ2FudmFzRWxlbWVudCBvciBPZmZzY3JlZW5DYW52YXNcbiAgICAgKi9cbiAgICBDYW52YXNSZXNvdXJjZS50ZXN0ID0gZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgICAgICB2YXIgT2Zmc2NyZWVuQ2FudmFzID0gZ2xvYmFsVGhpcy5PZmZzY3JlZW5DYW52YXM7XG4gICAgICAgIC8vIENoZWNrIGZvciBicm93c2VycyB0aGF0IGRvbid0IHlldCBzdXBwb3J0IE9mZnNjcmVlbkNhbnZhc1xuICAgICAgICBpZiAoT2Zmc2NyZWVuQ2FudmFzICYmIHNvdXJjZSBpbnN0YW5jZW9mIE9mZnNjcmVlbkNhbnZhcykge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGdsb2JhbFRoaXMuSFRNTENhbnZhc0VsZW1lbnQgJiYgc291cmNlIGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQ7XG4gICAgfTtcbiAgICByZXR1cm4gQ2FudmFzUmVzb3VyY2U7XG59KEJhc2VJbWFnZVJlc291cmNlKSk7XG5cbi8qKlxuICogUmVzb3VyY2UgZm9yIGEgQ3ViZVRleHR1cmUgd2hpY2ggY29udGFpbnMgc2l4IHJlc291cmNlcy5cbiAqIEBtZW1iZXJvZiBQSVhJXG4gKi9cbnZhciBDdWJlUmVzb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEN1YmVSZXNvdXJjZSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0FycmF5PHN0cmluZ3xQSVhJLlJlc291cmNlPn0gW3NvdXJjZV0gLSBDb2xsZWN0aW9uIG9mIFVSTHMgb3IgcmVzb3VyY2VzXG4gICAgICogICAgICAgIHRvIHVzZSBhcyB0aGUgc2lkZXMgb2YgdGhlIGN1YmUuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBJbWFnZVJlc291cmNlIG9wdGlvbnNcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMud2lkdGhdIC0gV2lkdGggb2YgcmVzb3VyY2VcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMuaGVpZ2h0XSAtIEhlaWdodCBvZiByZXNvdXJjZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5hdXRvTG9hZD10cnVlXSAtIFdoZXRoZXIgdG8gYXV0by1sb2FkIHJlc291cmNlc1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5saW5rQmFzZVRleHR1cmU9dHJ1ZV0gLSBJbiBjYXNlIEJhc2VUZXh0dXJlcyBhcmUgc3VwcGxpZWQsXG4gICAgICogICB3aGV0aGVyIHRvIGNvcHkgdGhlbSBvciB1c2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBDdWJlUmVzb3VyY2Uoc291cmNlLCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBfYSA9IG9wdGlvbnMgfHwge30sIHdpZHRoID0gX2Eud2lkdGgsIGhlaWdodCA9IF9hLmhlaWdodCwgYXV0b0xvYWQgPSBfYS5hdXRvTG9hZCwgbGlua0Jhc2VUZXh0dXJlID0gX2EubGlua0Jhc2VUZXh0dXJlO1xuICAgICAgICBpZiAoc291cmNlICYmIHNvdXJjZS5sZW5ndGggIT09IEN1YmVSZXNvdXJjZS5TSURFUykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBsZW5ndGguIEdvdCBcIiArIHNvdXJjZS5sZW5ndGggKyBcIiwgZXhwZWN0ZWQgNlwiKTtcbiAgICAgICAgfVxuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIDYsIHsgd2lkdGg6IHdpZHRoLCBoZWlnaHQ6IGhlaWdodCB9KSB8fCB0aGlzO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IEN1YmVSZXNvdXJjZS5TSURFUzsgaSsrKSB7XG4gICAgICAgICAgICBfdGhpcy5pdGVtc1tpXS50YXJnZXQgPSBjb25zdGFudHMuVEFSR0VUUy5URVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1ggKyBpO1xuICAgICAgICB9XG4gICAgICAgIF90aGlzLmxpbmtCYXNlVGV4dHVyZSA9IGxpbmtCYXNlVGV4dHVyZSAhPT0gZmFsc2U7XG4gICAgICAgIGlmIChzb3VyY2UpIHtcbiAgICAgICAgICAgIF90aGlzLmluaXRGcm9tQXJyYXkoc291cmNlLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXV0b0xvYWQgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICBfdGhpcy5sb2FkKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGQgYmluZGluZy5cbiAgICAgKiBAcGFyYW0gYmFzZVRleHR1cmUgLSBwYXJlbnQgYmFzZSB0ZXh0dXJlXG4gICAgICovXG4gICAgQ3ViZVJlc291cmNlLnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24gKGJhc2VUZXh0dXJlKSB7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuYmluZC5jYWxsKHRoaXMsIGJhc2VUZXh0dXJlKTtcbiAgICAgICAgYmFzZVRleHR1cmUudGFyZ2V0ID0gY29uc3RhbnRzLlRBUkdFVFMuVEVYVFVSRV9DVUJFX01BUDtcbiAgICB9O1xuICAgIEN1YmVSZXNvdXJjZS5wcm90b3R5cGUuYWRkQmFzZVRleHR1cmVBdCA9IGZ1bmN0aW9uIChiYXNlVGV4dHVyZSwgaW5kZXgsIGxpbmtCYXNlVGV4dHVyZSkge1xuICAgICAgICBpZiAoIXRoaXMuaXRlbXNbaW5kZXhdKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbmRleCBcIiArIGluZGV4ICsgXCIgaXMgb3V0IG9mIGJvdW5kc1wiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMubGlua0Jhc2VUZXh0dXJlXG4gICAgICAgICAgICB8fCBiYXNlVGV4dHVyZS5wYXJlbnRUZXh0dXJlQXJyYXlcbiAgICAgICAgICAgIHx8IE9iamVjdC5rZXlzKGJhc2VUZXh0dXJlLl9nbFRleHR1cmVzKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAvLyBjb3B5IG1vZGVcbiAgICAgICAgICAgIGlmIChiYXNlVGV4dHVyZS5yZXNvdXJjZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkUmVzb3VyY2VBdChiYXNlVGV4dHVyZS5yZXNvdXJjZSwgaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ3ViZVJlc291cmNlIGRvZXMgbm90IHN1cHBvcnQgY29weWluZyBvZiByZW5kZXJUZXh0dXJlLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGxpbmsgbW9kZSwgdGhlIGRpZmZpY3VsdCBvbmUhXG4gICAgICAgICAgICBiYXNlVGV4dHVyZS50YXJnZXQgPSBjb25zdGFudHMuVEFSR0VUUy5URVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1ggKyBpbmRleDtcbiAgICAgICAgICAgIGJhc2VUZXh0dXJlLnBhcmVudFRleHR1cmVBcnJheSA9IHRoaXMuYmFzZVRleHR1cmU7XG4gICAgICAgICAgICB0aGlzLml0ZW1zW2luZGV4XSA9IGJhc2VUZXh0dXJlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChiYXNlVGV4dHVyZS52YWxpZCAmJiAhdGhpcy52YWxpZCkge1xuICAgICAgICAgICAgdGhpcy5yZXNpemUoYmFzZVRleHR1cmUucmVhbFdpZHRoLCBiYXNlVGV4dHVyZS5yZWFsSGVpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLml0ZW1zW2luZGV4XSA9IGJhc2VUZXh0dXJlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFVwbG9hZCB0aGUgcmVzb3VyY2VcbiAgICAgKiBAcGFyYW0gcmVuZGVyZXJcbiAgICAgKiBAcGFyYW0gX2Jhc2VUZXh0dXJlXG4gICAgICogQHBhcmFtIGdsVGV4dHVyZVxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlIGlzIHN1Y2Nlc3NcbiAgICAgKi9cbiAgICBDdWJlUmVzb3VyY2UucHJvdG90eXBlLnVwbG9hZCA9IGZ1bmN0aW9uIChyZW5kZXJlciwgX2Jhc2VUZXh0dXJlLCBnbFRleHR1cmUpIHtcbiAgICAgICAgdmFyIGRpcnR5ID0gdGhpcy5pdGVtRGlydHlJZHM7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgQ3ViZVJlc291cmNlLlNJREVTOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBzaWRlID0gdGhpcy5pdGVtc1tpXTtcbiAgICAgICAgICAgIGlmIChkaXJ0eVtpXSA8IHNpZGUuZGlydHlJZCkge1xuICAgICAgICAgICAgICAgIGlmIChzaWRlLnZhbGlkICYmIHNpZGUucmVzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgc2lkZS5yZXNvdXJjZS51cGxvYWQocmVuZGVyZXIsIHNpZGUsIGdsVGV4dHVyZSk7XG4gICAgICAgICAgICAgICAgICAgIGRpcnR5W2ldID0gc2lkZS5kaXJ0eUlkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChkaXJ0eVtpXSA8IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVpdGhlciBpdGVtIGlzIG5vdCB2YWxpZCB5ZXQsIGVpdGhlciBpdHMgYSByZW5kZXJUZXh0dXJlXG4gICAgICAgICAgICAgICAgICAgIC8vIGFsbG9jYXRlIHRoZSBtZW1vcnlcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyZXIuZ2wudGV4SW1hZ2UyRChzaWRlLnRhcmdldCwgMCwgZ2xUZXh0dXJlLmludGVybmFsRm9ybWF0LCBfYmFzZVRleHR1cmUucmVhbFdpZHRoLCBfYmFzZVRleHR1cmUucmVhbEhlaWdodCwgMCwgX2Jhc2VUZXh0dXJlLmZvcm1hdCwgZ2xUZXh0dXJlLnR5cGUsIG51bGwpO1xuICAgICAgICAgICAgICAgICAgICBkaXJ0eVtpXSA9IC0xO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFVzZWQgdG8gYXV0by1kZXRlY3QgdGhlIHR5cGUgb2YgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHsqfSBzb3VyY2UgLSBUaGUgc291cmNlIG9iamVjdFxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBgdHJ1ZWAgaWYgc291cmNlIGlzIGFuIGFycmF5IG9mIDYgZWxlbWVudHNcbiAgICAgKi9cbiAgICBDdWJlUmVzb3VyY2UudGVzdCA9IGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoc291cmNlKSAmJiBzb3VyY2UubGVuZ3RoID09PSBDdWJlUmVzb3VyY2UuU0lERVM7XG4gICAgfTtcbiAgICAvKiogTnVtYmVyIG9mIHRleHR1cmUgc2lkZXMgdG8gc3RvcmUgZm9yIEN1YmVSZXNvdXJjZXMuICovXG4gICAgQ3ViZVJlc291cmNlLlNJREVTID0gNjtcbiAgICByZXR1cm4gQ3ViZVJlc291cmNlO1xufShBYnN0cmFjdE11bHRpUmVzb3VyY2UpKTtcblxuLyoqXG4gKiBSZXNvdXJjZSB0eXBlIGZvciBIVE1MSW1hZ2VFbGVtZW50LlxuICogQG1lbWJlcm9mIFBJWElcbiAqL1xudmFyIEltYWdlUmVzb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEltYWdlUmVzb3VyY2UsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHNvdXJjZSAtIGltYWdlIHNvdXJjZSBvciBVUkxcbiAgICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuYXV0b0xvYWQ9dHJ1ZV0gLSBzdGFydCBsb2FkaW5nIHByb2Nlc3NcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmNyZWF0ZUJpdG1hcD1QSVhJLnNldHRpbmdzLkNSRUFURV9JTUFHRV9CSVRNQVBdIC0gd2hldGhlciBpdHMgcmVxdWlyZWQgdG8gY3JlYXRlXG4gICAgICogICAgICAgIGEgYml0bWFwIGJlZm9yZSB1cGxvYWRcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmNyb3Nzb3JpZ2luPXRydWVdIC0gTG9hZCBpbWFnZSB1c2luZyBjcm9zcyBvcmlnaW5cbiAgICAgKiBAcGFyYW0ge1BJWEkuQUxQSEFfTU9ERVN9IFtvcHRpb25zLmFscGhhTW9kZT1QSVhJLkFMUEhBX01PREVTLlVOUEFDS10gLSBQcmVtdWx0aXBseSBpbWFnZSBhbHBoYSBpbiBiaXRtYXBcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBJbWFnZVJlc291cmNlKHNvdXJjZSwgb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgaWYgKCEoc291cmNlIGluc3RhbmNlb2YgSFRNTEltYWdlRWxlbWVudCkpIHtcbiAgICAgICAgICAgIHZhciBpbWFnZUVsZW1lbnQgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgICAgIEJhc2VJbWFnZVJlc291cmNlLmNyb3NzT3JpZ2luKGltYWdlRWxlbWVudCwgc291cmNlLCBvcHRpb25zLmNyb3Nzb3JpZ2luKTtcbiAgICAgICAgICAgIGltYWdlRWxlbWVudC5zcmMgPSBzb3VyY2U7XG4gICAgICAgICAgICBzb3VyY2UgPSBpbWFnZUVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBzb3VyY2UpIHx8IHRoaXM7XG4gICAgICAgIC8vIEZpcmVGb3ggNjgsIGFuZCBwb3NzaWJseSBvdGhlciB2ZXJzaW9ucywgc2VlbXMgbGlrZSBzZXR0aW5nIHRoZSBIVE1MSW1hZ2VFbGVtZW50I3dpZHRoIGFuZCAjaGVpZ2h0XG4gICAgICAgIC8vIHRvIG5vbi16ZXJvIHZhbHVlcyBiZWZvcmUgaXRzIGxvYWRpbmcgY29tcGxldGVzIGlmIGltYWdlcyBhcmUgaW4gYSBjYWNoZS5cbiAgICAgICAgLy8gQmVjYXVzZSBvZiB0aGlzLCBuZWVkIHRvIHNldCB0aGUgYF93aWR0aGAgYW5kIHRoZSBgX2hlaWdodGAgdG8gemVybyB0byBhdm9pZCB1cGxvYWRpbmcgaW5jb21wbGV0ZSBpbWFnZXMuXG4gICAgICAgIC8vIFBsZWFzZSByZWZlciB0byB0aGUgaXNzdWUgIzU5NjggKGh0dHBzOi8vZ2l0aHViLmNvbS9waXhpanMvcGl4aS5qcy9pc3N1ZXMvNTk2OCkuXG4gICAgICAgIGlmICghc291cmNlLmNvbXBsZXRlICYmICEhX3RoaXMuX3dpZHRoICYmICEhX3RoaXMuX2hlaWdodCkge1xuICAgICAgICAgICAgX3RoaXMuX3dpZHRoID0gMDtcbiAgICAgICAgICAgIF90aGlzLl9oZWlnaHQgPSAwO1xuICAgICAgICB9XG4gICAgICAgIF90aGlzLnVybCA9IHNvdXJjZS5zcmM7XG4gICAgICAgIF90aGlzLl9wcm9jZXNzID0gbnVsbDtcbiAgICAgICAgX3RoaXMucHJlc2VydmVCaXRtYXAgPSBmYWxzZTtcbiAgICAgICAgX3RoaXMuY3JlYXRlQml0bWFwID0gKG9wdGlvbnMuY3JlYXRlQml0bWFwICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8gb3B0aW9ucy5jcmVhdGVCaXRtYXAgOiBzZXR0aW5ncy5zZXR0aW5ncy5DUkVBVEVfSU1BR0VfQklUTUFQKSAmJiAhIWdsb2JhbFRoaXMuY3JlYXRlSW1hZ2VCaXRtYXA7XG4gICAgICAgIF90aGlzLmFscGhhTW9kZSA9IHR5cGVvZiBvcHRpb25zLmFscGhhTW9kZSA9PT0gJ251bWJlcicgPyBvcHRpb25zLmFscGhhTW9kZSA6IG51bGw7XG4gICAgICAgIF90aGlzLmJpdG1hcCA9IG51bGw7XG4gICAgICAgIF90aGlzLl9sb2FkID0gbnVsbDtcbiAgICAgICAgaWYgKG9wdGlvbnMuYXV0b0xvYWQgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICBfdGhpcy5sb2FkKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgcHJvbWlzZSB3aGVuIGltYWdlIHdpbGwgYmUgbG9hZGVkIGFuZCBwcm9jZXNzZWQuXG4gICAgICogQHBhcmFtIGNyZWF0ZUJpdG1hcCAtIHdoZXRoZXIgcHJvY2VzcyBpbWFnZSBpbnRvIGJpdG1hcFxuICAgICAqL1xuICAgIEltYWdlUmVzb3VyY2UucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiAoY3JlYXRlQml0bWFwKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICh0aGlzLl9sb2FkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbG9hZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3JlYXRlQml0bWFwICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlQml0bWFwID0gY3JlYXRlQml0bWFwO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2xvYWQgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICB2YXIgc291cmNlID0gX3RoaXMuc291cmNlO1xuICAgICAgICAgICAgX3RoaXMudXJsID0gc291cmNlLnNyYztcbiAgICAgICAgICAgIHZhciBjb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLmRlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNvdXJjZS5vbmxvYWQgPSBudWxsO1xuICAgICAgICAgICAgICAgIHNvdXJjZS5vbmVycm9yID0gbnVsbDtcbiAgICAgICAgICAgICAgICBfdGhpcy5yZXNpemUoc291cmNlLndpZHRoLCBzb3VyY2UuaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICBfdGhpcy5fbG9hZCA9IG51bGw7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLmNyZWF0ZUJpdG1hcCkge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKF90aGlzLnByb2Nlc3MoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKF90aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKHNvdXJjZS5jb21wbGV0ZSAmJiBzb3VyY2Uuc3JjKSB7XG4gICAgICAgICAgICAgICAgY29tcGxldGVkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzb3VyY2Uub25sb2FkID0gY29tcGxldGVkO1xuICAgICAgICAgICAgICAgIHNvdXJjZS5vbmVycm9yID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEF2b2lkcyBQcm9taXNlIGZyZWV6aW5nIHdoZW4gcmVzb3VyY2UgYnJva2VuXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLm9uRXJyb3IuZW1pdChldmVudCk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9sb2FkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHdoZW4gd2UgbmVlZCB0byBjb252ZXJ0IGltYWdlIGludG8gQml0bWFwSW1hZ2UuXG4gICAgICogQ2FuIGJlIGNhbGxlZCBtdWx0aXBsZSB0aW1lcywgcmVhbCBwcm9taXNlIGlzIGNhY2hlZCBpbnNpZGUuXG4gICAgICogQHJldHVybnMgLSBDYWNoZWQgcHJvbWlzZSB0byBmaWxsIHRoYXQgYml0bWFwXG4gICAgICovXG4gICAgSW1hZ2VSZXNvdXJjZS5wcm90b3R5cGUucHJvY2VzcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIHNvdXJjZSA9IHRoaXMuc291cmNlO1xuICAgICAgICBpZiAodGhpcy5fcHJvY2VzcyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Byb2Nlc3M7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuYml0bWFwICE9PSBudWxsIHx8ICFnbG9iYWxUaGlzLmNyZWF0ZUltYWdlQml0bWFwKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjcmVhdGVJbWFnZUJpdG1hcCA9IGdsb2JhbFRoaXMuY3JlYXRlSW1hZ2VCaXRtYXA7XG4gICAgICAgIHZhciBjb3JzID0gIXNvdXJjZS5jcm9zc09yaWdpbiB8fCBzb3VyY2UuY3Jvc3NPcmlnaW4gPT09ICdhbm9ueW1vdXMnO1xuICAgICAgICB0aGlzLl9wcm9jZXNzID0gZmV0Y2goc291cmNlLnNyYywge1xuICAgICAgICAgICAgbW9kZTogY29ycyA/ICdjb3JzJyA6ICduby1jb3JzJ1xuICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIuYmxvYigpOyB9KVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGJsb2IpIHsgcmV0dXJuIGNyZWF0ZUltYWdlQml0bWFwKGJsb2IsIDAsIDAsIHNvdXJjZS53aWR0aCwgc291cmNlLmhlaWdodCwge1xuICAgICAgICAgICAgcHJlbXVsdGlwbHlBbHBoYTogX3RoaXMuYWxwaGFNb2RlID09PSBjb25zdGFudHMuQUxQSEFfTU9ERVMuVU5QQUNLID8gJ3ByZW11bHRpcGx5JyA6ICdub25lJyxcbiAgICAgICAgfSk7IH0pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoYml0bWFwKSB7XG4gICAgICAgICAgICBpZiAoX3RoaXMuZGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfdGhpcy5iaXRtYXAgPSBiaXRtYXA7XG4gICAgICAgICAgICBfdGhpcy51cGRhdGUoKTtcbiAgICAgICAgICAgIF90aGlzLl9wcm9jZXNzID0gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoX3RoaXMpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Byb2Nlc3M7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBVcGxvYWQgdGhlIGltYWdlIHJlc291cmNlIHRvIEdQVS5cbiAgICAgKiBAcGFyYW0gcmVuZGVyZXIgLSBSZW5kZXJlciB0byB1cGxvYWQgdG9cbiAgICAgKiBAcGFyYW0gYmFzZVRleHR1cmUgLSBCYXNlVGV4dHVyZSBmb3IgdGhpcyByZXNvdXJjZVxuICAgICAqIEBwYXJhbSBnbFRleHR1cmUgLSBHTFRleHR1cmUgdG8gdXNlXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IHRydWUgaXMgc3VjY2Vzc1xuICAgICAqL1xuICAgIEltYWdlUmVzb3VyY2UucHJvdG90eXBlLnVwbG9hZCA9IGZ1bmN0aW9uIChyZW5kZXJlciwgYmFzZVRleHR1cmUsIGdsVGV4dHVyZSkge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMuYWxwaGFNb2RlID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgLy8gYml0bWFwIHN0b3JlcyB1bnBhY2sgcHJlbXVsdGlwbHkgZmxhZywgd2UgZG9udCBoYXZlIHRvIG5vdGlmeSB0ZXhJbWFnZTJEIGFib3V0IGl0XG4gICAgICAgICAgICBiYXNlVGV4dHVyZS5hbHBoYU1vZGUgPSB0aGlzLmFscGhhTW9kZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuY3JlYXRlQml0bWFwKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS51cGxvYWQuY2FsbCh0aGlzLCByZW5kZXJlciwgYmFzZVRleHR1cmUsIGdsVGV4dHVyZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmJpdG1hcCkge1xuICAgICAgICAgICAgLy8geWVhaCwgaWdub3JlIHRoZSBvdXRwdXRcbiAgICAgICAgICAgIHRoaXMucHJvY2VzcygpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmJpdG1hcCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLnVwbG9hZC5jYWxsKHRoaXMsIHJlbmRlcmVyLCBiYXNlVGV4dHVyZSwgZ2xUZXh0dXJlLCB0aGlzLmJpdG1hcCk7XG4gICAgICAgIGlmICghdGhpcy5wcmVzZXJ2ZUJpdG1hcCkge1xuICAgICAgICAgICAgLy8gY2hlY2tzIGlmIHRoZXJlIGFyZSBvdGhlciByZW5kZXJlcnMgdGhhdCBwb3NzaWJseSBuZWVkIHRoaXMgYml0bWFwXG4gICAgICAgICAgICB2YXIgZmxhZyA9IHRydWU7XG4gICAgICAgICAgICB2YXIgZ2xUZXh0dXJlcyA9IGJhc2VUZXh0dXJlLl9nbFRleHR1cmVzO1xuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIGdsVGV4dHVyZXMpIHtcbiAgICAgICAgICAgICAgICB2YXIgb3RoZXJUZXggPSBnbFRleHR1cmVzW2tleV07XG4gICAgICAgICAgICAgICAgaWYgKG90aGVyVGV4ICE9PSBnbFRleHR1cmUgJiYgb3RoZXJUZXguZGlydHlJZCAhPT0gYmFzZVRleHR1cmUuZGlydHlJZCkge1xuICAgICAgICAgICAgICAgICAgICBmbGFnID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChmbGFnKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYml0bWFwLmNsb3NlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYml0bWFwLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuYml0bWFwID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIC8qKiBEZXN0cm95cyB0aGlzIHJlc291cmNlLiAqL1xuICAgIEltYWdlUmVzb3VyY2UucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc291cmNlLm9ubG9hZCA9IG51bGw7XG4gICAgICAgIHRoaXMuc291cmNlLm9uZXJyb3IgPSBudWxsO1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKTtcbiAgICAgICAgaWYgKHRoaXMuYml0bWFwKSB7XG4gICAgICAgICAgICB0aGlzLmJpdG1hcC5jbG9zZSgpO1xuICAgICAgICAgICAgdGhpcy5iaXRtYXAgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3Byb2Nlc3MgPSBudWxsO1xuICAgICAgICB0aGlzLl9sb2FkID0gbnVsbDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFVzZWQgdG8gYXV0by1kZXRlY3QgdGhlIHR5cGUgb2YgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHsqfSBzb3VyY2UgLSBUaGUgc291cmNlIG9iamVjdFxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBgdHJ1ZWAgaWYgc291cmNlIGlzIHN0cmluZyBvciBIVE1MSW1hZ2VFbGVtZW50XG4gICAgICovXG4gICAgSW1hZ2VSZXNvdXJjZS50ZXN0ID0gZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHNvdXJjZSA9PT0gJ3N0cmluZycgfHwgc291cmNlIGluc3RhbmNlb2YgSFRNTEltYWdlRWxlbWVudDtcbiAgICB9O1xuICAgIHJldHVybiBJbWFnZVJlc291cmNlO1xufShCYXNlSW1hZ2VSZXNvdXJjZSkpO1xuXG4vKipcbiAqIFJlc291cmNlIHR5cGUgZm9yIFNWRyBlbGVtZW50cyBhbmQgZ3JhcGhpY3MuXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG52YXIgU1ZHUmVzb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFNWR1Jlc291cmNlLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBzb3VyY2VCYXNlNjQgLSBCYXNlNjQgZW5jb2RlZCBTVkcgZWxlbWVudCBvciBVUkwgZm9yIFNWRyBmaWxlLlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc10gLSBPcHRpb25zIHRvIHVzZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5zY2FsZT0xXSAtIFNjYWxlIHRvIGFwcGx5IHRvIFNWRy4gT3ZlcnJpZGRlbiBieS4uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy53aWR0aF0gLSBSYXN0ZXJpemUgU1ZHIHRoaXMgd2lkZS4gQXNwZWN0IHJhdGlvIHByZXNlcnZlZCBpZiBoZWlnaHQgbm90IHNwZWNpZmllZC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMuaGVpZ2h0XSAtIFJhc3Rlcml6ZSBTVkcgdGhpcyBoaWdoLiBBc3BlY3QgcmF0aW8gcHJlc2VydmVkIGlmIHdpZHRoIG5vdCBzcGVjaWZpZWQuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5hdXRvTG9hZD10cnVlXSAtIFN0YXJ0IGxvYWRpbmcgcmlnaHQgYXdheS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBTVkdSZXNvdXJjZShzb3VyY2VCYXNlNjQsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJykpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLl93aWR0aCA9IDA7XG4gICAgICAgIF90aGlzLl9oZWlnaHQgPSAwO1xuICAgICAgICBfdGhpcy5zdmcgPSBzb3VyY2VCYXNlNjQ7XG4gICAgICAgIF90aGlzLnNjYWxlID0gb3B0aW9ucy5zY2FsZSB8fCAxO1xuICAgICAgICBfdGhpcy5fb3ZlcnJpZGVXaWR0aCA9IG9wdGlvbnMud2lkdGg7XG4gICAgICAgIF90aGlzLl9vdmVycmlkZUhlaWdodCA9IG9wdGlvbnMuaGVpZ2h0O1xuICAgICAgICBfdGhpcy5fcmVzb2x2ZSA9IG51bGw7XG4gICAgICAgIF90aGlzLl9jcm9zc29yaWdpbiA9IG9wdGlvbnMuY3Jvc3NvcmlnaW47XG4gICAgICAgIF90aGlzLl9sb2FkID0gbnVsbDtcbiAgICAgICAgaWYgKG9wdGlvbnMuYXV0b0xvYWQgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICBfdGhpcy5sb2FkKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBTVkdSZXNvdXJjZS5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKHRoaXMuX2xvYWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9sb2FkO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2xvYWQgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICAgICAgLy8gU2F2ZSB0aGlzIHVudGlsIGFmdGVyIGxvYWQgaXMgZmluaXNoZWRcbiAgICAgICAgICAgIF90aGlzLl9yZXNvbHZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF90aGlzLnJlc2l6ZShfdGhpcy5zb3VyY2Uud2lkdGgsIF90aGlzLnNvdXJjZS5oZWlnaHQpO1xuICAgICAgICAgICAgICAgIHJlc29sdmUoX3RoaXMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8vIENvbnZlcnQgU1ZHIGlubGluZSBzdHJpbmcgdG8gZGF0YS11cmlcbiAgICAgICAgICAgIGlmIChTVkdSZXNvdXJjZS5TVkdfWE1MLnRlc3QoX3RoaXMuc3ZnLnRyaW0oKSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWJ0b2EpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdZb3VyIGJyb3dzZXIgZG9lc25cXCd0IHN1cHBvcnQgYmFzZTY0IGNvbnZlcnNpb25zLicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfdGhpcy5zdmcgPSBcImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsXCIgKyBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChfdGhpcy5zdmcpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfdGhpcy5fbG9hZFN2ZygpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xvYWQ7XG4gICAgfTtcbiAgICAvKiogTG9hZHMgYW4gU1ZHIGltYWdlIGZyb20gYGltYWdlVXJsYCBvciBgZGF0YSBVUkxgLiAqL1xuICAgIFNWR1Jlc291cmNlLnByb3RvdHlwZS5fbG9hZFN2ZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIHRlbXBJbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgICAgICBCYXNlSW1hZ2VSZXNvdXJjZS5jcm9zc09yaWdpbih0ZW1wSW1hZ2UsIHRoaXMuc3ZnLCB0aGlzLl9jcm9zc29yaWdpbik7XG4gICAgICAgIHRlbXBJbWFnZS5zcmMgPSB0aGlzLnN2ZztcbiAgICAgICAgdGVtcEltYWdlLm9uZXJyb3IgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGlmICghX3RoaXMuX3Jlc29sdmUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0ZW1wSW1hZ2Uub25lcnJvciA9IG51bGw7XG4gICAgICAgICAgICBfdGhpcy5vbkVycm9yLmVtaXQoZXZlbnQpO1xuICAgICAgICB9O1xuICAgICAgICB0ZW1wSW1hZ2Uub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCFfdGhpcy5fcmVzb2x2ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBzdmdXaWR0aCA9IHRlbXBJbWFnZS53aWR0aDtcbiAgICAgICAgICAgIHZhciBzdmdIZWlnaHQgPSB0ZW1wSW1hZ2UuaGVpZ2h0O1xuICAgICAgICAgICAgaWYgKCFzdmdXaWR0aCB8fCAhc3ZnSGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgU1ZHIGltYWdlIG11c3QgaGF2ZSB3aWR0aCBhbmQgaGVpZ2h0IGRlZmluZWQgKGluIHBpeGVscyksIGNhbnZhcyBBUEkgbmVlZHMgdGhlbS4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFNldCByZW5kZXIgc2l6ZVxuICAgICAgICAgICAgdmFyIHdpZHRoID0gc3ZnV2lkdGggKiBfdGhpcy5zY2FsZTtcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSBzdmdIZWlnaHQgKiBfdGhpcy5zY2FsZTtcbiAgICAgICAgICAgIGlmIChfdGhpcy5fb3ZlcnJpZGVXaWR0aCB8fCBfdGhpcy5fb3ZlcnJpZGVIZWlnaHQpIHtcbiAgICAgICAgICAgICAgICB3aWR0aCA9IF90aGlzLl9vdmVycmlkZVdpZHRoIHx8IF90aGlzLl9vdmVycmlkZUhlaWdodCAvIHN2Z0hlaWdodCAqIHN2Z1dpZHRoO1xuICAgICAgICAgICAgICAgIGhlaWdodCA9IF90aGlzLl9vdmVycmlkZUhlaWdodCB8fCBfdGhpcy5fb3ZlcnJpZGVXaWR0aCAvIHN2Z1dpZHRoICogc3ZnSGVpZ2h0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2lkdGggPSBNYXRoLnJvdW5kKHdpZHRoKTtcbiAgICAgICAgICAgIGhlaWdodCA9IE1hdGgucm91bmQoaGVpZ2h0KTtcbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIGNhbnZhcyBlbGVtZW50XG4gICAgICAgICAgICB2YXIgY2FudmFzID0gX3RoaXMuc291cmNlO1xuICAgICAgICAgICAgY2FudmFzLndpZHRoID0gd2lkdGg7XG4gICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICAgICAgY2FudmFzLl9waXhpSWQgPSBcImNhbnZhc19cIiArIHV0aWxzLnVpZCgpO1xuICAgICAgICAgICAgLy8gRHJhdyB0aGUgU3ZnIHRvIHRoZSBjYW52YXNcbiAgICAgICAgICAgIGNhbnZhc1xuICAgICAgICAgICAgICAgIC5nZXRDb250ZXh0KCcyZCcpXG4gICAgICAgICAgICAgICAgLmRyYXdJbWFnZSh0ZW1wSW1hZ2UsIDAsIDAsIHN2Z1dpZHRoLCBzdmdIZWlnaHQsIDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICAgICAgX3RoaXMuX3Jlc29sdmUoKTtcbiAgICAgICAgICAgIF90aGlzLl9yZXNvbHZlID0gbnVsbDtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCBzaXplIGZyb20gYW4gc3ZnIHN0cmluZyB1c2luZyBhIHJlZ3VsYXIgZXhwcmVzc2lvbi5cbiAgICAgKiBAcGFyYW0gc3ZnU3RyaW5nIC0gYSBzZXJpYWxpemVkIHN2ZyBlbGVtZW50XG4gICAgICogQHJldHVybnMgLSBpbWFnZSBleHRlbnNpb25cbiAgICAgKi9cbiAgICBTVkdSZXNvdXJjZS5nZXRTaXplID0gZnVuY3Rpb24gKHN2Z1N0cmluZykge1xuICAgICAgICB2YXIgc2l6ZU1hdGNoID0gU1ZHUmVzb3VyY2UuU1ZHX1NJWkUuZXhlYyhzdmdTdHJpbmcpO1xuICAgICAgICB2YXIgc2l6ZSA9IHt9O1xuICAgICAgICBpZiAoc2l6ZU1hdGNoKSB7XG4gICAgICAgICAgICBzaXplW3NpemVNYXRjaFsxXV0gPSBNYXRoLnJvdW5kKHBhcnNlRmxvYXQoc2l6ZU1hdGNoWzNdKSk7XG4gICAgICAgICAgICBzaXplW3NpemVNYXRjaFs1XV0gPSBNYXRoLnJvdW5kKHBhcnNlRmxvYXQoc2l6ZU1hdGNoWzddKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNpemU7XG4gICAgfTtcbiAgICAvKiogRGVzdHJveXMgdGhpcyB0ZXh0dXJlLiAqL1xuICAgIFNWR1Jlc291cmNlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5fcmVzb2x2ZSA9IG51bGw7XG4gICAgICAgIHRoaXMuX2Nyb3Nzb3JpZ2luID0gbnVsbDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFVzZWQgdG8gYXV0by1kZXRlY3QgdGhlIHR5cGUgb2YgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHsqfSBzb3VyY2UgLSBUaGUgc291cmNlIG9iamVjdFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBleHRlbnNpb24gLSBUaGUgZXh0ZW5zaW9uIG9mIHNvdXJjZSwgaWYgc2V0XG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IC0gSWYgdGhlIHNvdXJjZSBpcyBhIFNWRyBzb3VyY2Ugb3IgZGF0YSBmaWxlXG4gICAgICovXG4gICAgU1ZHUmVzb3VyY2UudGVzdCA9IGZ1bmN0aW9uIChzb3VyY2UsIGV4dGVuc2lvbikge1xuICAgICAgICAvLyB1cmwgZmlsZSBleHRlbnNpb24gaXMgU1ZHXG4gICAgICAgIHJldHVybiBleHRlbnNpb24gPT09ICdzdmcnXG4gICAgICAgICAgICAvLyBzb3VyY2UgaXMgU1ZHIGRhdGEtdXJpXG4gICAgICAgICAgICB8fCAodHlwZW9mIHNvdXJjZSA9PT0gJ3N0cmluZycgJiYgKC9eZGF0YTppbWFnZVxcL3N2Z1xcK3htbCg7KGNoYXJzZXQ9dXRmOHx1dGY4KSk/O2Jhc2U2NC8pLnRlc3Qoc291cmNlKSlcbiAgICAgICAgICAgIC8vIHNvdXJjZSBpcyBTVkcgaW5saW5lXG4gICAgICAgICAgICB8fCAodHlwZW9mIHNvdXJjZSA9PT0gJ3N0cmluZycgJiYgU1ZHUmVzb3VyY2UuU1ZHX1hNTC50ZXN0KHNvdXJjZSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVndWxhciBleHByZXNzaW9uIGZvciBTVkcgWE1MIGRvY3VtZW50LlxuICAgICAqIEBleGFtcGxlICZsdDs/eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cInV0Zi04XCIgPyZndDsmbHQ7IS0tIGltYWdlL3N2ZyAtLSZndDsmbHQ7c3ZnXG4gICAgICogQHJlYWRvbmx5XG4gICAgICovXG4gICAgU1ZHUmVzb3VyY2UuU1ZHX1hNTCA9IC9eKDxcXD94bWxbXj9dK1xcPz4pP1xccyooPCEtLVteKC0tPildKi0tPik/XFxzKlxcPHN2Zy9tO1xuICAgIC8qKlxuICAgICAqIFJlZ3VsYXIgZXhwcmVzc2lvbiBmb3IgU1ZHIHNpemUuXG4gICAgICogQGV4YW1wbGUgJmx0O3N2ZyB3aWR0aD1cIjEwMFwiIGhlaWdodD1cIjEwMFwiJmd0OyZsdDsvc3ZnJmd0O1xuICAgICAqIEByZWFkb25seVxuICAgICAqL1xuICAgIFNWR1Jlc291cmNlLlNWR19TSVpFID0gLzxzdmdbXj5dKig/Olxccyh3aWR0aHxoZWlnaHQpPSgnfFwiKShcXGQqKD86XFwuXFxkKyk/KSg/OnB4KT8oJ3xcIikpW14+XSooPzpcXHMod2lkdGh8aGVpZ2h0KT0oJ3xcIikoXFxkKig/OlxcLlxcZCspPykoPzpweCk/KCd8XCIpKVtePl0qPi9pOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG1heC1sZW5cbiAgICByZXR1cm4gU1ZHUmVzb3VyY2U7XG59KEJhc2VJbWFnZVJlc291cmNlKSk7XG5cbi8qKlxuICogUmVzb3VyY2UgdHlwZSBmb3Ige0Bjb2RlIEhUTUxWaWRlb0VsZW1lbnR9LlxuICogQG1lbWJlcm9mIFBJWElcbiAqL1xudmFyIFZpZGVvUmVzb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFZpZGVvUmVzb3VyY2UsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtIVE1MVmlkZW9FbGVtZW50fG9iamVjdHxzdHJpbmd8QXJyYXk8c3RyaW5nfG9iamVjdD59IHNvdXJjZSAtIFZpZGVvIGVsZW1lbnQgdG8gdXNlLlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc10gLSBPcHRpb25zIHRvIHVzZVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuYXV0b0xvYWQ9dHJ1ZV0gLSBTdGFydCBsb2FkaW5nIHRoZSB2aWRlbyBpbW1lZGlhdGVseVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuYXV0b1BsYXk9dHJ1ZV0gLSBTdGFydCBwbGF5aW5nIHZpZGVvIGltbWVkaWF0ZWx5XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLnVwZGF0ZUZQUz0wXSAtIEhvdyBtYW55IHRpbWVzIGEgc2Vjb25kIHRvIHVwZGF0ZSB0aGUgdGV4dHVyZSBmcm9tIHRoZSB2aWRlby5cbiAgICAgKiBMZWF2ZSBhdCAwIHRvIHVwZGF0ZSBhdCBldmVyeSByZW5kZXIuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5jcm9zc29yaWdpbj10cnVlXSAtIExvYWQgaW1hZ2UgdXNpbmcgY3Jvc3Mgb3JpZ2luXG4gICAgICovXG4gICAgZnVuY3Rpb24gVmlkZW9SZXNvdXJjZShzb3VyY2UsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgIGlmICghKHNvdXJjZSBpbnN0YW5jZW9mIEhUTUxWaWRlb0VsZW1lbnQpKSB7XG4gICAgICAgICAgICB2YXIgdmlkZW9FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKTtcbiAgICAgICAgICAgIC8vIHdvcmthcm91bmQgZm9yIGh0dHBzOi8vZ2l0aHViLmNvbS9waXhpanMvcGl4aS5qcy9pc3N1ZXMvNTk5NlxuICAgICAgICAgICAgdmlkZW9FbGVtZW50LnNldEF0dHJpYnV0ZSgncHJlbG9hZCcsICdhdXRvJyk7XG4gICAgICAgICAgICB2aWRlb0VsZW1lbnQuc2V0QXR0cmlidXRlKCd3ZWJraXQtcGxheXNpbmxpbmUnLCAnJyk7XG4gICAgICAgICAgICB2aWRlb0VsZW1lbnQuc2V0QXR0cmlidXRlKCdwbGF5c2lubGluZScsICcnKTtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc291cmNlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHNvdXJjZSA9IFtzb3VyY2VdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGZpcnN0U3JjID0gc291cmNlWzBdLnNyYyB8fCBzb3VyY2VbMF07XG4gICAgICAgICAgICBCYXNlSW1hZ2VSZXNvdXJjZS5jcm9zc09yaWdpbih2aWRlb0VsZW1lbnQsIGZpcnN0U3JjLCBvcHRpb25zLmNyb3Nzb3JpZ2luKTtcbiAgICAgICAgICAgIC8vIGFycmF5IG9mIG9iamVjdHMgb3Igc3RyaW5nc1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzb3VyY2UubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICB2YXIgc291cmNlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NvdXJjZScpO1xuICAgICAgICAgICAgICAgIHZhciBfYSA9IHNvdXJjZVtpXSwgc3JjID0gX2Euc3JjLCBtaW1lID0gX2EubWltZTtcbiAgICAgICAgICAgICAgICBzcmMgPSBzcmMgfHwgc291cmNlW2ldO1xuICAgICAgICAgICAgICAgIHZhciBiYXNlU3JjID0gc3JjLnNwbGl0KCc/Jykuc2hpZnQoKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgIHZhciBleHQgPSBiYXNlU3JjLnNsaWNlKGJhc2VTcmMubGFzdEluZGV4T2YoJy4nKSArIDEpO1xuICAgICAgICAgICAgICAgIG1pbWUgPSBtaW1lIHx8IFZpZGVvUmVzb3VyY2UuTUlNRV9UWVBFU1tleHRdIHx8IFwidmlkZW8vXCIgKyBleHQ7XG4gICAgICAgICAgICAgICAgc291cmNlRWxlbWVudC5zcmMgPSBzcmM7XG4gICAgICAgICAgICAgICAgc291cmNlRWxlbWVudC50eXBlID0gbWltZTtcbiAgICAgICAgICAgICAgICB2aWRlb0VsZW1lbnQuYXBwZW5kQ2hpbGQoc291cmNlRWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBPdmVycmlkZSB0aGUgc291cmNlXG4gICAgICAgICAgICBzb3VyY2UgPSB2aWRlb0VsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBzb3VyY2UpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLm5vU3ViSW1hZ2UgPSB0cnVlO1xuICAgICAgICBfdGhpcy5fYXV0b1VwZGF0ZSA9IHRydWU7XG4gICAgICAgIF90aGlzLl9pc0Nvbm5lY3RlZFRvVGlja2VyID0gZmFsc2U7XG4gICAgICAgIF90aGlzLl91cGRhdGVGUFMgPSBvcHRpb25zLnVwZGF0ZUZQUyB8fCAwO1xuICAgICAgICBfdGhpcy5fbXNUb05leHRVcGRhdGUgPSAwO1xuICAgICAgICBfdGhpcy5hdXRvUGxheSA9IG9wdGlvbnMuYXV0b1BsYXkgIT09IGZhbHNlO1xuICAgICAgICBfdGhpcy5fbG9hZCA9IG51bGw7XG4gICAgICAgIF90aGlzLl9yZXNvbHZlID0gbnVsbDtcbiAgICAgICAgLy8gQmluZCBmb3IgbGlzdGVuZXJzXG4gICAgICAgIF90aGlzLl9vbkNhblBsYXkgPSBfdGhpcy5fb25DYW5QbGF5LmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5fb25FcnJvciA9IF90aGlzLl9vbkVycm9yLmJpbmQoX3RoaXMpO1xuICAgICAgICBpZiAob3B0aW9ucy5hdXRvTG9hZCAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIF90aGlzLmxvYWQoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyaWdnZXIgdXBkYXRpbmcgb2YgdGhlIHRleHR1cmUuXG4gICAgICogQHBhcmFtIF9kZWx0YVRpbWUgLSB0aW1lIGRlbHRhIHNpbmNlIGxhc3QgdGlja1xuICAgICAqL1xuICAgIFZpZGVvUmVzb3VyY2UucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChfZGVsdGFUaW1lKSB7XG4gICAgICAgIGlmICghdGhpcy5kZXN0cm95ZWQpIHtcbiAgICAgICAgICAgIC8vIGFjY291bnQgZm9yIGlmIHZpZGVvIGhhcyBoYWQgaXRzIHBsYXliYWNrUmF0ZSBjaGFuZ2VkXG4gICAgICAgICAgICB2YXIgZWxhcHNlZE1TID0gdGlja2VyLlRpY2tlci5zaGFyZWQuZWxhcHNlZE1TICogdGhpcy5zb3VyY2UucGxheWJhY2tSYXRlO1xuICAgICAgICAgICAgdGhpcy5fbXNUb05leHRVcGRhdGUgPSBNYXRoLmZsb29yKHRoaXMuX21zVG9OZXh0VXBkYXRlIC0gZWxhcHNlZE1TKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5fdXBkYXRlRlBTIHx8IHRoaXMuX21zVG9OZXh0VXBkYXRlIDw9IDApIHtcbiAgICAgICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLnVwZGF0ZS5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgICAgIHRoaXMuX21zVG9OZXh0VXBkYXRlID0gdGhpcy5fdXBkYXRlRlBTID8gTWF0aC5mbG9vcigxMDAwIC8gdGhpcy5fdXBkYXRlRlBTKSA6IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFN0YXJ0IHByZWxvYWRpbmcgdGhlIHZpZGVvIHJlc291cmNlLlxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPHZvaWQ+fSBIYW5kbGUgdGhlIHZhbGlkYXRlIGV2ZW50XG4gICAgICovXG4gICAgVmlkZW9SZXNvdXJjZS5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKHRoaXMuX2xvYWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9sb2FkO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLnNvdXJjZTtcbiAgICAgICAgaWYgKChzb3VyY2UucmVhZHlTdGF0ZSA9PT0gc291cmNlLkhBVkVfRU5PVUdIX0RBVEEgfHwgc291cmNlLnJlYWR5U3RhdGUgPT09IHNvdXJjZS5IQVZFX0ZVVFVSRV9EQVRBKVxuICAgICAgICAgICAgJiYgc291cmNlLndpZHRoICYmIHNvdXJjZS5oZWlnaHQpIHtcbiAgICAgICAgICAgIHNvdXJjZS5jb21wbGV0ZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgc291cmNlLmFkZEV2ZW50TGlzdGVuZXIoJ3BsYXknLCB0aGlzLl9vblBsYXlTdGFydC5iaW5kKHRoaXMpKTtcbiAgICAgICAgc291cmNlLmFkZEV2ZW50TGlzdGVuZXIoJ3BhdXNlJywgdGhpcy5fb25QbGF5U3RvcC5iaW5kKHRoaXMpKTtcbiAgICAgICAgaWYgKCF0aGlzLl9pc1NvdXJjZVJlYWR5KCkpIHtcbiAgICAgICAgICAgIHNvdXJjZS5hZGRFdmVudExpc3RlbmVyKCdjYW5wbGF5JywgdGhpcy5fb25DYW5QbGF5KTtcbiAgICAgICAgICAgIHNvdXJjZS5hZGRFdmVudExpc3RlbmVyKCdjYW5wbGF5dGhyb3VnaCcsIHRoaXMuX29uQ2FuUGxheSk7XG4gICAgICAgICAgICBzb3VyY2UuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCB0aGlzLl9vbkVycm9yLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX29uQ2FuUGxheSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2xvYWQgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICAgICAgaWYgKF90aGlzLnZhbGlkKSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShfdGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5fcmVzb2x2ZSA9IHJlc29sdmU7XG4gICAgICAgICAgICAgICAgc291cmNlLmxvYWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9sb2FkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHZpZGVvIGVycm9yIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0gZXZlbnRcbiAgICAgKi9cbiAgICBWaWRlb1Jlc291cmNlLnByb3RvdHlwZS5fb25FcnJvciA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB0aGlzLnNvdXJjZS5yZW1vdmVFdmVudExpc3RlbmVyKCdlcnJvcicsIHRoaXMuX29uRXJyb3IsIHRydWUpO1xuICAgICAgICB0aGlzLm9uRXJyb3IuZW1pdChldmVudCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHVuZGVybHlpbmcgc291cmNlIGlzIHBsYXlpbmcuXG4gICAgICogQHJldHVybnMgLSBUcnVlIGlmIHBsYXlpbmcuXG4gICAgICovXG4gICAgVmlkZW9SZXNvdXJjZS5wcm90b3R5cGUuX2lzU291cmNlUGxheWluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNvdXJjZSA9IHRoaXMuc291cmNlO1xuICAgICAgICByZXR1cm4gKHNvdXJjZS5jdXJyZW50VGltZSA+IDAgJiYgc291cmNlLnBhdXNlZCA9PT0gZmFsc2UgJiYgc291cmNlLmVuZGVkID09PSBmYWxzZSAmJiBzb3VyY2UucmVhZHlTdGF0ZSA+IDIpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSB1bmRlcmx5aW5nIHNvdXJjZSBpcyByZWFkeSBmb3IgcGxheWluZy5cbiAgICAgKiBAcmV0dXJucyAtIFRydWUgaWYgcmVhZHkuXG4gICAgICovXG4gICAgVmlkZW9SZXNvdXJjZS5wcm90b3R5cGUuX2lzU291cmNlUmVhZHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLnNvdXJjZTtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5yZWFkeVN0YXRlID09PSAzIHx8IHNvdXJjZS5yZWFkeVN0YXRlID09PSA0O1xuICAgIH07XG4gICAgLyoqIFJ1bnMgdGhlIHVwZGF0ZSBsb29wIHdoZW4gdGhlIHZpZGVvIGlzIHJlYWR5IHRvIHBsYXkuICovXG4gICAgVmlkZW9SZXNvdXJjZS5wcm90b3R5cGUuX29uUGxheVN0YXJ0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBKdXN0IGluIGNhc2UgdGhlIHZpZGVvIGhhcyBub3QgcmVjZWl2ZWQgaXRzIGNhbiBwbGF5IGV2ZW4geWV0Li5cbiAgICAgICAgaWYgKCF0aGlzLnZhbGlkKSB7XG4gICAgICAgICAgICB0aGlzLl9vbkNhblBsYXkoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5hdXRvVXBkYXRlICYmICF0aGlzLl9pc0Nvbm5lY3RlZFRvVGlja2VyKSB7XG4gICAgICAgICAgICB0aWNrZXIuVGlja2VyLnNoYXJlZC5hZGQodGhpcy51cGRhdGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5faXNDb25uZWN0ZWRUb1RpY2tlciA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKiBGaXJlZCB3aGVuIGEgcGF1c2UgZXZlbnQgaXMgdHJpZ2dlcmVkLCBzdG9wcyB0aGUgdXBkYXRlIGxvb3AuICovXG4gICAgVmlkZW9SZXNvdXJjZS5wcm90b3R5cGUuX29uUGxheVN0b3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLl9pc0Nvbm5lY3RlZFRvVGlja2VyKSB7XG4gICAgICAgICAgICB0aWNrZXIuVGlja2VyLnNoYXJlZC5yZW1vdmUodGhpcy51cGRhdGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5faXNDb25uZWN0ZWRUb1RpY2tlciA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKiogRmlyZWQgd2hlbiB0aGUgdmlkZW8gaXMgbG9hZGVkIGFuZCByZWFkeSB0byBwbGF5LiAqL1xuICAgIFZpZGVvUmVzb3VyY2UucHJvdG90eXBlLl9vbkNhblBsYXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLnNvdXJjZTtcbiAgICAgICAgc291cmNlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NhbnBsYXknLCB0aGlzLl9vbkNhblBsYXkpO1xuICAgICAgICBzb3VyY2UucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2FucGxheXRocm91Z2gnLCB0aGlzLl9vbkNhblBsYXkpO1xuICAgICAgICB2YXIgdmFsaWQgPSB0aGlzLnZhbGlkO1xuICAgICAgICB0aGlzLnJlc2l6ZShzb3VyY2UudmlkZW9XaWR0aCwgc291cmNlLnZpZGVvSGVpZ2h0KTtcbiAgICAgICAgLy8gcHJldmVudCBtdWx0aXBsZSBsb2FkZWQgZGlzcGF0Y2hlcy4uXG4gICAgICAgIGlmICghdmFsaWQgJiYgdGhpcy5fcmVzb2x2ZSkge1xuICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZSh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuX3Jlc29sdmUgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9pc1NvdXJjZVBsYXlpbmcoKSkge1xuICAgICAgICAgICAgdGhpcy5fb25QbGF5U3RhcnQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmF1dG9QbGF5KSB7XG4gICAgICAgICAgICBzb3VyY2UucGxheSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKiogRGVzdHJveXMgdGhpcyB0ZXh0dXJlLiAqL1xuICAgIFZpZGVvUmVzb3VyY2UucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLl9pc0Nvbm5lY3RlZFRvVGlja2VyKSB7XG4gICAgICAgICAgICB0aWNrZXIuVGlja2VyLnNoYXJlZC5yZW1vdmUodGhpcy51cGRhdGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5faXNDb25uZWN0ZWRUb1RpY2tlciA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLnNvdXJjZTtcbiAgICAgICAgaWYgKHNvdXJjZSkge1xuICAgICAgICAgICAgc291cmNlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgdGhpcy5fb25FcnJvciwgdHJ1ZSk7XG4gICAgICAgICAgICBzb3VyY2UucGF1c2UoKTtcbiAgICAgICAgICAgIHNvdXJjZS5zcmMgPSAnJztcbiAgICAgICAgICAgIHNvdXJjZS5sb2FkKCk7XG4gICAgICAgIH1cbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyk7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVmlkZW9SZXNvdXJjZS5wcm90b3R5cGUsIFwiYXV0b1VwZGF0ZVwiLCB7XG4gICAgICAgIC8qKiBTaG91bGQgdGhlIGJhc2UgdGV4dHVyZSBhdXRvbWF0aWNhbGx5IHVwZGF0ZSBpdHNlbGYsIHNldCB0byB0cnVlIGJ5IGRlZmF1bHQuICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2F1dG9VcGRhdGU7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUgIT09IHRoaXMuX2F1dG9VcGRhdGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9hdXRvVXBkYXRlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9hdXRvVXBkYXRlICYmIHRoaXMuX2lzQ29ubmVjdGVkVG9UaWNrZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGlja2VyLlRpY2tlci5zaGFyZWQucmVtb3ZlKHRoaXMudXBkYXRlLCB0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faXNDb25uZWN0ZWRUb1RpY2tlciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLl9hdXRvVXBkYXRlICYmICF0aGlzLl9pc0Nvbm5lY3RlZFRvVGlja2VyICYmIHRoaXMuX2lzU291cmNlUGxheWluZygpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRpY2tlci5UaWNrZXIuc2hhcmVkLmFkZCh0aGlzLnVwZGF0ZSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2lzQ29ubmVjdGVkVG9UaWNrZXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWaWRlb1Jlc291cmNlLnByb3RvdHlwZSwgXCJ1cGRhdGVGUFNcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogSG93IG1hbnkgdGltZXMgYSBzZWNvbmQgdG8gdXBkYXRlIHRoZSB0ZXh0dXJlIGZyb20gdGhlIHZpZGVvLiBMZWF2ZSBhdCAwIHRvIHVwZGF0ZSBhdCBldmVyeSByZW5kZXIuXG4gICAgICAgICAqIEEgbG93ZXIgZnBzIGNhbiBoZWxwIHBlcmZvcm1hbmNlLCBhcyB1cGRhdGluZyB0aGUgdGV4dHVyZSBhdCA2MGZwcyBvbiBhIDMwcHMgdmlkZW8gbWF5IG5vdCBiZSBlZmZpY2llbnQuXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl91cGRhdGVGUFM7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUgIT09IHRoaXMuX3VwZGF0ZUZQUykge1xuICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUZQUyA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgLyoqXG4gICAgICogVXNlZCB0byBhdXRvLWRldGVjdCB0aGUgdHlwZSBvZiByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0geyp9IHNvdXJjZSAtIFRoZSBzb3VyY2Ugb2JqZWN0XG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV4dGVuc2lvbiAtIFRoZSBleHRlbnNpb24gb2Ygc291cmNlLCBpZiBzZXRcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gYHRydWVgIGlmIHZpZGVvIHNvdXJjZVxuICAgICAqL1xuICAgIFZpZGVvUmVzb3VyY2UudGVzdCA9IGZ1bmN0aW9uIChzb3VyY2UsIGV4dGVuc2lvbikge1xuICAgICAgICByZXR1cm4gKGdsb2JhbFRoaXMuSFRNTFZpZGVvRWxlbWVudCAmJiBzb3VyY2UgaW5zdGFuY2VvZiBIVE1MVmlkZW9FbGVtZW50KVxuICAgICAgICAgICAgfHwgVmlkZW9SZXNvdXJjZS5UWVBFUy5pbmRleE9mKGV4dGVuc2lvbikgPiAtMTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIExpc3Qgb2YgY29tbW9uIHZpZGVvIGZpbGUgZXh0ZW5zaW9ucyBzdXBwb3J0ZWQgYnkgVmlkZW9SZXNvdXJjZS5cbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKi9cbiAgICBWaWRlb1Jlc291cmNlLlRZUEVTID0gWydtcDQnLCAnbTR2JywgJ3dlYm0nLCAnb2dnJywgJ29ndicsICdoMjY0JywgJ2F2aScsICdtb3YnXTtcbiAgICAvKipcbiAgICAgKiBNYXAgb2YgdmlkZW8gTUlNRSB0eXBlcyB0aGF0IGNhbid0IGJlIGRpcmVjdGx5IGRlcml2ZWQgZnJvbSBmaWxlIGV4dGVuc2lvbnMuXG4gICAgICogQHJlYWRvbmx5XG4gICAgICovXG4gICAgVmlkZW9SZXNvdXJjZS5NSU1FX1RZUEVTID0ge1xuICAgICAgICBvZ3Y6ICd2aWRlby9vZ2cnLFxuICAgICAgICBtb3Y6ICd2aWRlby9xdWlja3RpbWUnLFxuICAgICAgICBtNHY6ICd2aWRlby9tcDQnLFxuICAgIH07XG4gICAgcmV0dXJuIFZpZGVvUmVzb3VyY2U7XG59KEJhc2VJbWFnZVJlc291cmNlKSk7XG5cbi8qKlxuICogUmVzb3VyY2UgdHlwZSBmb3IgSW1hZ2VCaXRtYXAuXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG52YXIgSW1hZ2VCaXRtYXBSZXNvdXJjZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoSW1hZ2VCaXRtYXBSZXNvdXJjZSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gc291cmNlIC0gSW1hZ2UgZWxlbWVudCB0byB1c2VcbiAgICAgKi9cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZWxlc3MtY29uc3RydWN0b3JcbiAgICBmdW5jdGlvbiBJbWFnZUJpdG1hcFJlc291cmNlKHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVc2VkIHRvIGF1dG8tZGV0ZWN0IHRoZSB0eXBlIG9mIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSB7Kn0gc291cmNlIC0gVGhlIHNvdXJjZSBvYmplY3RcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gYHRydWVgIGlmIHNvdXJjZSBpcyBhbiBJbWFnZUJpdG1hcFxuICAgICAqL1xuICAgIEltYWdlQml0bWFwUmVzb3VyY2UudGVzdCA9IGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuICEhZ2xvYmFsVGhpcy5jcmVhdGVJbWFnZUJpdG1hcCAmJiBzb3VyY2UgaW5zdGFuY2VvZiBJbWFnZUJpdG1hcDtcbiAgICB9O1xuICAgIHJldHVybiBJbWFnZUJpdG1hcFJlc291cmNlO1xufShCYXNlSW1hZ2VSZXNvdXJjZSkpO1xuXG5JTlNUQUxMRUQucHVzaChJbWFnZVJlc291cmNlLCBJbWFnZUJpdG1hcFJlc291cmNlLCBDYW52YXNSZXNvdXJjZSwgVmlkZW9SZXNvdXJjZSwgU1ZHUmVzb3VyY2UsIEJ1ZmZlclJlc291cmNlLCBDdWJlUmVzb3VyY2UsIEFycmF5UmVzb3VyY2UpO1xuXG52YXIgX3Jlc291cmNlcyA9IHtcbiAgICBfX3Byb3RvX186IG51bGwsXG4gICAgUmVzb3VyY2U6IFJlc291cmNlLFxuICAgIEJhc2VJbWFnZVJlc291cmNlOiBCYXNlSW1hZ2VSZXNvdXJjZSxcbiAgICBJTlNUQUxMRUQ6IElOU1RBTExFRCxcbiAgICBhdXRvRGV0ZWN0UmVzb3VyY2U6IGF1dG9EZXRlY3RSZXNvdXJjZSxcbiAgICBBYnN0cmFjdE11bHRpUmVzb3VyY2U6IEFic3RyYWN0TXVsdGlSZXNvdXJjZSxcbiAgICBBcnJheVJlc291cmNlOiBBcnJheVJlc291cmNlLFxuICAgIEJ1ZmZlclJlc291cmNlOiBCdWZmZXJSZXNvdXJjZSxcbiAgICBDYW52YXNSZXNvdXJjZTogQ2FudmFzUmVzb3VyY2UsXG4gICAgQ3ViZVJlc291cmNlOiBDdWJlUmVzb3VyY2UsXG4gICAgSW1hZ2VSZXNvdXJjZTogSW1hZ2VSZXNvdXJjZSxcbiAgICBTVkdSZXNvdXJjZTogU1ZHUmVzb3VyY2UsXG4gICAgVmlkZW9SZXNvdXJjZTogVmlkZW9SZXNvdXJjZSxcbiAgICBJbWFnZUJpdG1hcFJlc291cmNlOiBJbWFnZUJpdG1hcFJlc291cmNlXG59O1xuXG4vKipcbiAqIFJlc291cmNlIHR5cGUgZm9yIERlcHRoVGV4dHVyZS5cbiAqIEBtZW1iZXJvZiBQSVhJXG4gKi9cbnZhciBEZXB0aFJlc291cmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhEZXB0aFJlc291cmNlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIERlcHRoUmVzb3VyY2UoKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBsb2FkIHRoZSB0ZXh0dXJlIHRvIHRoZSBHUFUuXG4gICAgICogQHBhcmFtIHJlbmRlcmVyIC0gVXBsb2FkIHRvIHRoZSByZW5kZXJlclxuICAgICAqIEBwYXJhbSBiYXNlVGV4dHVyZSAtIFJlZmVyZW5jZSB0byBwYXJlbnQgdGV4dHVyZVxuICAgICAqIEBwYXJhbSBnbFRleHR1cmUgLSBnbFRleHR1cmVcbiAgICAgKiBAcmV0dXJucyAtIHRydWUgaXMgc3VjY2Vzc1xuICAgICAqL1xuICAgIERlcHRoUmVzb3VyY2UucHJvdG90eXBlLnVwbG9hZCA9IGZ1bmN0aW9uIChyZW5kZXJlciwgYmFzZVRleHR1cmUsIGdsVGV4dHVyZSkge1xuICAgICAgICB2YXIgZ2wgPSByZW5kZXJlci5nbDtcbiAgICAgICAgZ2wucGl4ZWxTdG9yZWkoZ2wuVU5QQUNLX1BSRU1VTFRJUExZX0FMUEhBX1dFQkdMLCBiYXNlVGV4dHVyZS5hbHBoYU1vZGUgPT09IGNvbnN0YW50cy5BTFBIQV9NT0RFUy5VTlBBQ0spO1xuICAgICAgICB2YXIgd2lkdGggPSBiYXNlVGV4dHVyZS5yZWFsV2lkdGg7XG4gICAgICAgIHZhciBoZWlnaHQgPSBiYXNlVGV4dHVyZS5yZWFsSGVpZ2h0O1xuICAgICAgICBpZiAoZ2xUZXh0dXJlLndpZHRoID09PSB3aWR0aCAmJiBnbFRleHR1cmUuaGVpZ2h0ID09PSBoZWlnaHQpIHtcbiAgICAgICAgICAgIGdsLnRleFN1YkltYWdlMkQoYmFzZVRleHR1cmUudGFyZ2V0LCAwLCAwLCAwLCB3aWR0aCwgaGVpZ2h0LCBiYXNlVGV4dHVyZS5mb3JtYXQsIGdsVGV4dHVyZS50eXBlLCB0aGlzLmRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZ2xUZXh0dXJlLndpZHRoID0gd2lkdGg7XG4gICAgICAgICAgICBnbFRleHR1cmUuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICAgICAgZ2wudGV4SW1hZ2UyRChiYXNlVGV4dHVyZS50YXJnZXQsIDAsIGdsVGV4dHVyZS5pbnRlcm5hbEZvcm1hdCwgd2lkdGgsIGhlaWdodCwgMCwgYmFzZVRleHR1cmUuZm9ybWF0LCBnbFRleHR1cmUudHlwZSwgdGhpcy5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIHJldHVybiBEZXB0aFJlc291cmNlO1xufShCdWZmZXJSZXNvdXJjZSkpO1xuXG4vKipcbiAqIEEgZnJhbWVidWZmZXIgY2FuIGJlIHVzZWQgdG8gcmVuZGVyIGNvbnRlbnRzIG9mZiBvZiB0aGUgc2NyZWVuLiB7QGxpbmsgUElYSS5CYXNlUmVuZGVyVGV4dHVyZX0gdXNlc1xuICogb25lIGludGVybmFsbHkgdG8gcmVuZGVyIGludG8gaXRzZWxmLiBZb3UgY2FuIGF0dGFjaCBhIGRlcHRoIG9yIHN0ZW5jaWwgYnVmZmVyIHRvIGEgZnJhbWVidWZmZXIuXG4gKlxuICogT24gV2ViR0wgMiBtYWNoaW5lcywgc2hhZGVycyBjYW4gb3V0cHV0IHRvIG11bHRpcGxlIHRleHR1cmVzIHNpbXVsdGFuZW91c2x5IHdpdGggR0xTTCAzMDAgRVMuXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG52YXIgRnJhbWVidWZmZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHdpZHRoIC0gV2lkdGggb2YgdGhlIGZyYW1lIGJ1ZmZlclxuICAgICAqIEBwYXJhbSBoZWlnaHQgLSBIZWlnaHQgb2YgdGhlIGZyYW1lIGJ1ZmZlclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEZyYW1lYnVmZmVyKHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgICAgdGhpcy53aWR0aCA9IE1hdGgucm91bmQod2lkdGggfHwgMTAwKTtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBNYXRoLnJvdW5kKGhlaWdodCB8fCAxMDApO1xuICAgICAgICB0aGlzLnN0ZW5jaWwgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5kZXB0aCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmRpcnR5SWQgPSAwO1xuICAgICAgICB0aGlzLmRpcnR5Rm9ybWF0ID0gMDtcbiAgICAgICAgdGhpcy5kaXJ0eVNpemUgPSAwO1xuICAgICAgICB0aGlzLmRlcHRoVGV4dHVyZSA9IG51bGw7XG4gICAgICAgIHRoaXMuY29sb3JUZXh0dXJlcyA9IFtdO1xuICAgICAgICB0aGlzLmdsRnJhbWVidWZmZXJzID0ge307XG4gICAgICAgIHRoaXMuZGlzcG9zZVJ1bm5lciA9IG5ldyBydW5uZXIuUnVubmVyKCdkaXNwb3NlRnJhbWVidWZmZXInKTtcbiAgICAgICAgdGhpcy5tdWx0aXNhbXBsZSA9IGNvbnN0YW50cy5NU0FBX1FVQUxJVFkuTk9ORTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZyYW1lYnVmZmVyLnByb3RvdHlwZSwgXCJjb2xvclRleHR1cmVcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogUmVmZXJlbmNlIHRvIHRoZSBjb2xvclRleHR1cmUuXG4gICAgICAgICAqIEByZWFkb25seVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb2xvclRleHR1cmVzWzBdO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgLyoqXG4gICAgICogQWRkIHRleHR1cmUgdG8gdGhlIGNvbG9yVGV4dHVyZSBhcnJheS5cbiAgICAgKiBAcGFyYW0gaW5kZXggLSBJbmRleCBvZiB0aGUgYXJyYXkgdG8gYWRkIHRoZSB0ZXh0dXJlIHRvXG4gICAgICogQHBhcmFtIHRleHR1cmUgLSBUZXh0dXJlIHRvIGFkZCB0byB0aGUgYXJyYXlcbiAgICAgKi9cbiAgICBGcmFtZWJ1ZmZlci5wcm90b3R5cGUuYWRkQ29sb3JUZXh0dXJlID0gZnVuY3Rpb24gKGluZGV4LCB0ZXh0dXJlKSB7XG4gICAgICAgIGlmIChpbmRleCA9PT0gdm9pZCAwKSB7IGluZGV4ID0gMDsgfVxuICAgICAgICAvLyBUT0RPIGFkZCBzb21lIHZhbGlkYXRpb24gdG8gdGhlIHRleHR1cmUgLSBzYW1lIHdpZHRoIC8gaGVpZ2h0IGV0Yz9cbiAgICAgICAgdGhpcy5jb2xvclRleHR1cmVzW2luZGV4XSA9IHRleHR1cmUgfHwgbmV3IEJhc2VUZXh0dXJlKG51bGwsIHtcbiAgICAgICAgICAgIHNjYWxlTW9kZTogY29uc3RhbnRzLlNDQUxFX01PREVTLk5FQVJFU1QsXG4gICAgICAgICAgICByZXNvbHV0aW9uOiAxLFxuICAgICAgICAgICAgbWlwbWFwOiBjb25zdGFudHMuTUlQTUFQX01PREVTLk9GRixcbiAgICAgICAgICAgIHdpZHRoOiB0aGlzLndpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLmhlaWdodCxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZGlydHlJZCsrO1xuICAgICAgICB0aGlzLmRpcnR5Rm9ybWF0Kys7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQWRkIGEgZGVwdGggdGV4dHVyZSB0byB0aGUgZnJhbWUgYnVmZmVyLlxuICAgICAqIEBwYXJhbSB0ZXh0dXJlIC0gVGV4dHVyZSB0byBhZGQuXG4gICAgICovXG4gICAgRnJhbWVidWZmZXIucHJvdG90eXBlLmFkZERlcHRoVGV4dHVyZSA9IGZ1bmN0aW9uICh0ZXh0dXJlKSB7XG4gICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG1heC1sZW4gKi9cbiAgICAgICAgdGhpcy5kZXB0aFRleHR1cmUgPSB0ZXh0dXJlIHx8IG5ldyBCYXNlVGV4dHVyZShuZXcgRGVwdGhSZXNvdXJjZShudWxsLCB7IHdpZHRoOiB0aGlzLndpZHRoLCBoZWlnaHQ6IHRoaXMuaGVpZ2h0IH0pLCB7XG4gICAgICAgICAgICBzY2FsZU1vZGU6IGNvbnN0YW50cy5TQ0FMRV9NT0RFUy5ORUFSRVNULFxuICAgICAgICAgICAgcmVzb2x1dGlvbjogMSxcbiAgICAgICAgICAgIHdpZHRoOiB0aGlzLndpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLmhlaWdodCxcbiAgICAgICAgICAgIG1pcG1hcDogY29uc3RhbnRzLk1JUE1BUF9NT0RFUy5PRkYsXG4gICAgICAgICAgICBmb3JtYXQ6IGNvbnN0YW50cy5GT1JNQVRTLkRFUFRIX0NPTVBPTkVOVCxcbiAgICAgICAgICAgIHR5cGU6IGNvbnN0YW50cy5UWVBFUy5VTlNJR05FRF9TSE9SVCxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZGlydHlJZCsrO1xuICAgICAgICB0aGlzLmRpcnR5Rm9ybWF0Kys7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqIEVuYWJsZSBkZXB0aCBvbiB0aGUgZnJhbWUgYnVmZmVyLiAqL1xuICAgIEZyYW1lYnVmZmVyLnByb3RvdHlwZS5lbmFibGVEZXB0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5kZXB0aCA9IHRydWU7XG4gICAgICAgIHRoaXMuZGlydHlJZCsrO1xuICAgICAgICB0aGlzLmRpcnR5Rm9ybWF0Kys7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqIEVuYWJsZSBzdGVuY2lsIG9uIHRoZSBmcmFtZSBidWZmZXIuICovXG4gICAgRnJhbWVidWZmZXIucHJvdG90eXBlLmVuYWJsZVN0ZW5jaWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc3RlbmNpbCA9IHRydWU7XG4gICAgICAgIHRoaXMuZGlydHlJZCsrO1xuICAgICAgICB0aGlzLmRpcnR5Rm9ybWF0Kys7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVzaXplIHRoZSBmcmFtZSBidWZmZXJcbiAgICAgKiBAcGFyYW0gd2lkdGggLSBXaWR0aCBvZiB0aGUgZnJhbWUgYnVmZmVyIHRvIHJlc2l6ZSB0b1xuICAgICAqIEBwYXJhbSBoZWlnaHQgLSBIZWlnaHQgb2YgdGhlIGZyYW1lIGJ1ZmZlciB0byByZXNpemUgdG9cbiAgICAgKi9cbiAgICBGcmFtZWJ1ZmZlci5wcm90b3R5cGUucmVzaXplID0gZnVuY3Rpb24gKHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgICAgd2lkdGggPSBNYXRoLnJvdW5kKHdpZHRoKTtcbiAgICAgICAgaGVpZ2h0ID0gTWF0aC5yb3VuZChoZWlnaHQpO1xuICAgICAgICBpZiAod2lkdGggPT09IHRoaXMud2lkdGggJiYgaGVpZ2h0ID09PSB0aGlzLmhlaWdodClcbiAgICAgICAgICAgIHsgcmV0dXJuOyB9XG4gICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgIHRoaXMuZGlydHlJZCsrO1xuICAgICAgICB0aGlzLmRpcnR5U2l6ZSsrO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY29sb3JUZXh0dXJlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHRleHR1cmUgPSB0aGlzLmNvbG9yVGV4dHVyZXNbaV07XG4gICAgICAgICAgICB2YXIgcmVzb2x1dGlvbiA9IHRleHR1cmUucmVzb2x1dGlvbjtcbiAgICAgICAgICAgIC8vIHRha2UgaW50byBhY2NvdW50IHRoZSBmYWN0IHRoZSB0ZXh0dXJlIG1heSBoYXZlIGEgZGlmZmVyZW50IHJlc29sdXRpb24uLlxuICAgICAgICAgICAgdGV4dHVyZS5zZXRTaXplKHdpZHRoIC8gcmVzb2x1dGlvbiwgaGVpZ2h0IC8gcmVzb2x1dGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZGVwdGhUZXh0dXJlKSB7XG4gICAgICAgICAgICB2YXIgcmVzb2x1dGlvbiA9IHRoaXMuZGVwdGhUZXh0dXJlLnJlc29sdXRpb247XG4gICAgICAgICAgICB0aGlzLmRlcHRoVGV4dHVyZS5zZXRTaXplKHdpZHRoIC8gcmVzb2x1dGlvbiwgaGVpZ2h0IC8gcmVzb2x1dGlvbik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKiBEaXNwb3NlcyBXZWJHTCByZXNvdXJjZXMgdGhhdCBhcmUgY29ubmVjdGVkIHRvIHRoaXMgZ2VvbWV0cnkuICovXG4gICAgRnJhbWVidWZmZXIucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZGlzcG9zZVJ1bm5lci5lbWl0KHRoaXMsIGZhbHNlKTtcbiAgICB9O1xuICAgIC8qKiBEZXN0cm95cyBhbmQgcmVtb3ZlcyB0aGUgZGVwdGggdGV4dHVyZSBhZGRlZCB0byB0aGlzIGZyYW1lYnVmZmVyLiAqL1xuICAgIEZyYW1lYnVmZmVyLnByb3RvdHlwZS5kZXN0cm95RGVwdGhUZXh0dXJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5kZXB0aFRleHR1cmUpIHtcbiAgICAgICAgICAgIHRoaXMuZGVwdGhUZXh0dXJlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHRoaXMuZGVwdGhUZXh0dXJlID0gbnVsbDtcbiAgICAgICAgICAgICsrdGhpcy5kaXJ0eUlkO1xuICAgICAgICAgICAgKyt0aGlzLmRpcnR5Rm9ybWF0O1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gRnJhbWVidWZmZXI7XG59KCkpO1xuXG4vKipcbiAqIEEgQmFzZVJlbmRlclRleHR1cmUgaXMgYSBzcGVjaWFsIHRleHR1cmUgdGhhdCBhbGxvd3MgYW55IFBpeGlKUyBkaXNwbGF5IG9iamVjdCB0byBiZSByZW5kZXJlZCB0byBpdC5cbiAqXG4gKiBfX0hpbnRfXzogQWxsIERpc3BsYXlPYmplY3RzIChpLmUuIFNwcml0ZXMpIHRoYXQgcmVuZGVyIHRvIGEgQmFzZVJlbmRlclRleHR1cmUgc2hvdWxkIGJlIHByZWxvYWRlZFxuICogb3RoZXJ3aXNlIGJsYWNrIHJlY3RhbmdsZXMgd2lsbCBiZSBkcmF3biBpbnN0ZWFkLlxuICpcbiAqIEEgQmFzZVJlbmRlclRleHR1cmUgdGFrZXMgYSBzbmFwc2hvdCBvZiBhbnkgRGlzcGxheSBPYmplY3QgZ2l2ZW4gdG8gaXRzIHJlbmRlciBtZXRob2QuIFRoZSBwb3NpdGlvblxuICogYW5kIHJvdGF0aW9uIG9mIHRoZSBnaXZlbiBEaXNwbGF5IE9iamVjdHMgaXMgaWdub3JlZC4gRm9yIGV4YW1wbGU6XG4gKlxuICogYGBganNcbiAqIGxldCByZW5kZXJlciA9IFBJWEkuYXV0b0RldGVjdFJlbmRlcmVyKCk7XG4gKiBsZXQgYmFzZVJlbmRlclRleHR1cmUgPSBuZXcgUElYSS5CYXNlUmVuZGVyVGV4dHVyZSh7IHdpZHRoOiA4MDAsIGhlaWdodDogNjAwIH0pO1xuICogbGV0IHJlbmRlclRleHR1cmUgPSBuZXcgUElYSS5SZW5kZXJUZXh0dXJlKGJhc2VSZW5kZXJUZXh0dXJlKTtcbiAqIGxldCBzcHJpdGUgPSBQSVhJLlNwcml0ZS5mcm9tKFwic3Bpbk9ial8wMS5wbmdcIik7XG4gKlxuICogc3ByaXRlLnBvc2l0aW9uLnggPSA4MDAvMjtcbiAqIHNwcml0ZS5wb3NpdGlvbi55ID0gNjAwLzI7XG4gKiBzcHJpdGUuYW5jaG9yLnggPSAwLjU7XG4gKiBzcHJpdGUuYW5jaG9yLnkgPSAwLjU7XG4gKlxuICogcmVuZGVyZXIucmVuZGVyKHNwcml0ZSwge3JlbmRlclRleHR1cmV9KTtcbiAqIGBgYFxuICpcbiAqIFRoZSBTcHJpdGUgaW4gdGhpcyBjYXNlIHdpbGwgYmUgcmVuZGVyZWQgdXNpbmcgaXRzIGxvY2FsIHRyYW5zZm9ybS4gVG8gcmVuZGVyIHRoaXMgc3ByaXRlIGF0IDAsMFxuICogeW91IGNhbiBjbGVhciB0aGUgdHJhbnNmb3JtXG4gKlxuICogYGBganNcbiAqXG4gKiBzcHJpdGUuc2V0VHJhbnNmb3JtKClcbiAqXG4gKiBsZXQgYmFzZVJlbmRlclRleHR1cmUgPSBuZXcgUElYSS5CYXNlUmVuZGVyVGV4dHVyZSh7IHdpZHRoOiAxMDAsIGhlaWdodDogMTAwIH0pO1xuICogbGV0IHJlbmRlclRleHR1cmUgPSBuZXcgUElYSS5SZW5kZXJUZXh0dXJlKGJhc2VSZW5kZXJUZXh0dXJlKTtcbiAqXG4gKiByZW5kZXJlci5yZW5kZXIoc3ByaXRlLCB7cmVuZGVyVGV4dHVyZX0pOyAgLy8gUmVuZGVycyB0byBjZW50ZXIgb2YgUmVuZGVyVGV4dHVyZVxuICogYGBgXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG52YXIgQmFzZVJlbmRlclRleHR1cmUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEJhc2VSZW5kZXJUZXh0dXJlLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBvcHRpb25zXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLndpZHRoPTEwMF0gLSBUaGUgd2lkdGggb2YgdGhlIGJhc2UgcmVuZGVyIHRleHR1cmUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLmhlaWdodD0xMDBdIC0gVGhlIGhlaWdodCBvZiB0aGUgYmFzZSByZW5kZXIgdGV4dHVyZS5cbiAgICAgKiBAcGFyYW0ge1BJWEkuU0NBTEVfTU9ERVN9IFtvcHRpb25zLnNjYWxlTW9kZT1QSVhJLnNldHRpbmdzLlNDQUxFX01PREVdIC0gU2VlIHtAbGluayBQSVhJLlNDQUxFX01PREVTfVxuICAgICAqICAgZm9yIHBvc3NpYmxlIHZhbHVlcy5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMucmVzb2x1dGlvbj1QSVhJLnNldHRpbmdzLlJFU09MVVRJT05dIC0gVGhlIHJlc29sdXRpb24gLyBkZXZpY2UgcGl4ZWwgcmF0aW9cbiAgICAgKiAgIG9mIHRoZSB0ZXh0dXJlIGJlaW5nIGdlbmVyYXRlZC5cbiAgICAgKiBAcGFyYW0ge1BJWEkuTVNBQV9RVUFMSVRZfSBbb3B0aW9ucy5tdWx0aXNhbXBsZT1QSVhJLk1TQUFfUVVBTElUWS5OT05FXSAtIFRoZSBudW1iZXIgb2Ygc2FtcGxlcyBvZiB0aGUgZnJhbWUgYnVmZmVyLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEJhc2VSZW5kZXJUZXh0dXJlKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0ge307IH1cbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgcHJlZmVyLXJlc3QtcGFyYW1zICovXG4gICAgICAgICAgICAvLyBCYWNrd2FyZCBjb21wYXRpYmlsaXR5IG9mIHNpZ25hdHVyZVxuICAgICAgICAgICAgdmFyIHdpZHRoID0gYXJndW1lbnRzWzBdO1xuICAgICAgICAgICAgdmFyIGhlaWdodCA9IGFyZ3VtZW50c1sxXTtcbiAgICAgICAgICAgIHZhciBzY2FsZU1vZGUgPSBhcmd1bWVudHNbMl07XG4gICAgICAgICAgICB2YXIgcmVzb2x1dGlvbiA9IGFyZ3VtZW50c1szXTtcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7IHdpZHRoOiB3aWR0aCwgaGVpZ2h0OiBoZWlnaHQsIHNjYWxlTW9kZTogc2NhbGVNb2RlLCByZXNvbHV0aW9uOiByZXNvbHV0aW9uIH07XG4gICAgICAgICAgICAvKiBlc2xpbnQtZW5hYmxlIHByZWZlci1yZXN0LXBhcmFtcyAqL1xuICAgICAgICB9XG4gICAgICAgIG9wdGlvbnMud2lkdGggPSBvcHRpb25zLndpZHRoIHx8IDEwMDtcbiAgICAgICAgb3B0aW9ucy5oZWlnaHQgPSBvcHRpb25zLmhlaWdodCB8fCAxMDA7XG4gICAgICAgIG9wdGlvbnMubXVsdGlzYW1wbGUgPSBvcHRpb25zLm11bHRpc2FtcGxlICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm11bHRpc2FtcGxlIDogY29uc3RhbnRzLk1TQUFfUVVBTElUWS5OT05FO1xuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG51bGwsIG9wdGlvbnMpIHx8IHRoaXM7XG4gICAgICAgIC8vIFNldCBkZWZhdWx0c1xuICAgICAgICBfdGhpcy5taXBtYXAgPSBjb25zdGFudHMuTUlQTUFQX01PREVTLk9GRjtcbiAgICAgICAgX3RoaXMudmFsaWQgPSB0cnVlO1xuICAgICAgICBfdGhpcy5jbGVhckNvbG9yID0gWzAsIDAsIDAsIDBdO1xuICAgICAgICBfdGhpcy5mcmFtZWJ1ZmZlciA9IG5ldyBGcmFtZWJ1ZmZlcihfdGhpcy5yZWFsV2lkdGgsIF90aGlzLnJlYWxIZWlnaHQpXG4gICAgICAgICAgICAuYWRkQ29sb3JUZXh0dXJlKDAsIF90aGlzKTtcbiAgICAgICAgX3RoaXMuZnJhbWVidWZmZXIubXVsdGlzYW1wbGUgPSBvcHRpb25zLm11bHRpc2FtcGxlO1xuICAgICAgICAvLyBUT0RPIC0gY291bGQgdGhpcyBiZSBhZGRlZCB0aGUgc3lzdGVtcz9cbiAgICAgICAgX3RoaXMubWFza1N0YWNrID0gW107XG4gICAgICAgIF90aGlzLmZpbHRlclN0YWNrID0gW3t9XTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNpemVzIHRoZSBCYXNlUmVuZGVyVGV4dHVyZS5cbiAgICAgKiBAcGFyYW0gZGVzaXJlZFdpZHRoIC0gVGhlIGRlc2lyZWQgd2lkdGggdG8gcmVzaXplIHRvLlxuICAgICAqIEBwYXJhbSBkZXNpcmVkSGVpZ2h0IC0gVGhlIGRlc2lyZWQgaGVpZ2h0IHRvIHJlc2l6ZSB0by5cbiAgICAgKi9cbiAgICBCYXNlUmVuZGVyVGV4dHVyZS5wcm90b3R5cGUucmVzaXplID0gZnVuY3Rpb24gKGRlc2lyZWRXaWR0aCwgZGVzaXJlZEhlaWdodCkge1xuICAgICAgICB0aGlzLmZyYW1lYnVmZmVyLnJlc2l6ZShkZXNpcmVkV2lkdGggKiB0aGlzLnJlc29sdXRpb24sIGRlc2lyZWRIZWlnaHQgKiB0aGlzLnJlc29sdXRpb24pO1xuICAgICAgICB0aGlzLnNldFJlYWxTaXplKHRoaXMuZnJhbWVidWZmZXIud2lkdGgsIHRoaXMuZnJhbWVidWZmZXIuaGVpZ2h0KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEZyZWVzIHRoZSB0ZXh0dXJlIGFuZCBmcmFtZWJ1ZmZlciBmcm9tIFdlYkdMIG1lbW9yeSB3aXRob3V0IGRlc3Ryb3lpbmcgdGhpcyB0ZXh0dXJlIG9iamVjdC5cbiAgICAgKiBUaGlzIG1lYW5zIHlvdSBjYW4gc3RpbGwgdXNlIHRoZSB0ZXh0dXJlIGxhdGVyIHdoaWNoIHdpbGwgdXBsb2FkIGl0IHRvIEdQVVxuICAgICAqIG1lbW9yeSBhZ2Fpbi5cbiAgICAgKiBAZmlyZXMgUElYSS5CYXNlVGV4dHVyZSNkaXNwb3NlXG4gICAgICovXG4gICAgQmFzZVJlbmRlclRleHR1cmUucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZnJhbWVidWZmZXIuZGlzcG9zZSgpO1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKTtcbiAgICB9O1xuICAgIC8qKiBEZXN0cm95cyB0aGlzIHRleHR1cmUuICovXG4gICAgQmFzZVJlbmRlclRleHR1cmUucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuZGVzdHJveS5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLmZyYW1lYnVmZmVyLmRlc3Ryb3lEZXB0aFRleHR1cmUoKTtcbiAgICAgICAgdGhpcy5mcmFtZWJ1ZmZlciA9IG51bGw7XG4gICAgfTtcbiAgICByZXR1cm4gQmFzZVJlbmRlclRleHR1cmU7XG59KEJhc2VUZXh0dXJlKSk7XG5cbi8qKlxuICogU3RvcmVzIGEgdGV4dHVyZSdzIGZyYW1lIGluIFVWIGNvb3JkaW5hdGVzLCBpblxuICogd2hpY2ggZXZlcnl0aGluZyBsaWVzIGluIHRoZSByZWN0YW5nbGUgYFsoMCwwKSwgKDEsMCksXG4gKiAoMSwxKSwgKDAsMSldYC5cbiAqXG4gKiB8IENvcm5lciAgICAgICB8IENvb3JkaW5hdGVzIHxcbiAqIHwtLS0tLS0tLS0tLS0tLXwtLS0tLS0tLS0tLS0tfFxuICogfCBUb3AtTGVmdCAgICAgfCBgKHgwLHkwKWAgICB8XG4gKiB8IFRvcC1SaWdodCAgICB8IGAoeDEseTEpYCAgIHxcbiAqIHwgQm90dG9tLVJpZ2h0IHwgYCh4Mix5MilgICAgfFxuICogfCBCb3R0b20tTGVmdCAgfCBgKHgzLHkzKWAgICB8XG4gKiBAcHJvdGVjdGVkXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG52YXIgVGV4dHVyZVV2cyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBUZXh0dXJlVXZzKCkge1xuICAgICAgICB0aGlzLngwID0gMDtcbiAgICAgICAgdGhpcy55MCA9IDA7XG4gICAgICAgIHRoaXMueDEgPSAxO1xuICAgICAgICB0aGlzLnkxID0gMDtcbiAgICAgICAgdGhpcy54MiA9IDE7XG4gICAgICAgIHRoaXMueTIgPSAxO1xuICAgICAgICB0aGlzLngzID0gMDtcbiAgICAgICAgdGhpcy55MyA9IDE7XG4gICAgICAgIHRoaXMudXZzRmxvYXQzMiA9IG5ldyBGbG9hdDMyQXJyYXkoOCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHRleHR1cmUgVXZzIGJhc2VkIG9uIHRoZSBnaXZlbiBmcmFtZSBpbmZvcm1hdGlvbi5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHBhcmFtIGZyYW1lIC0gVGhlIGZyYW1lIG9mIHRoZSB0ZXh0dXJlXG4gICAgICogQHBhcmFtIGJhc2VGcmFtZSAtIFRoZSBiYXNlIGZyYW1lIG9mIHRoZSB0ZXh0dXJlXG4gICAgICogQHBhcmFtIHJvdGF0ZSAtIFJvdGF0aW9uIG9mIGZyYW1lLCBzZWUge0BsaW5rIFBJWEkuZ3JvdXBEOH1cbiAgICAgKi9cbiAgICBUZXh0dXJlVXZzLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoZnJhbWUsIGJhc2VGcmFtZSwgcm90YXRlKSB7XG4gICAgICAgIHZhciB0dyA9IGJhc2VGcmFtZS53aWR0aDtcbiAgICAgICAgdmFyIHRoID0gYmFzZUZyYW1lLmhlaWdodDtcbiAgICAgICAgaWYgKHJvdGF0ZSkge1xuICAgICAgICAgICAgLy8gd2lkdGggYW5kIGhlaWdodCBkaXYgMiBkaXYgYmFzZUZyYW1lIHNpemVcbiAgICAgICAgICAgIHZhciB3MiA9IGZyYW1lLndpZHRoIC8gMiAvIHR3O1xuICAgICAgICAgICAgdmFyIGgyID0gZnJhbWUuaGVpZ2h0IC8gMiAvIHRoO1xuICAgICAgICAgICAgLy8gY29vcmRpbmF0ZXMgb2YgY2VudGVyXG4gICAgICAgICAgICB2YXIgY1ggPSAoZnJhbWUueCAvIHR3KSArIHcyO1xuICAgICAgICAgICAgdmFyIGNZID0gKGZyYW1lLnkgLyB0aCkgKyBoMjtcbiAgICAgICAgICAgIHJvdGF0ZSA9IG1hdGguZ3JvdXBEOC5hZGQocm90YXRlLCBtYXRoLmdyb3VwRDguTlcpOyAvLyBOVyBpcyB0b3AtbGVmdCBjb3JuZXJcbiAgICAgICAgICAgIHRoaXMueDAgPSBjWCArICh3MiAqIG1hdGguZ3JvdXBEOC51WChyb3RhdGUpKTtcbiAgICAgICAgICAgIHRoaXMueTAgPSBjWSArIChoMiAqIG1hdGguZ3JvdXBEOC51WShyb3RhdGUpKTtcbiAgICAgICAgICAgIHJvdGF0ZSA9IG1hdGguZ3JvdXBEOC5hZGQocm90YXRlLCAyKTsgLy8gcm90YXRlIDkwIGRlZ3JlZXMgY2xvY2t3aXNlXG4gICAgICAgICAgICB0aGlzLngxID0gY1ggKyAodzIgKiBtYXRoLmdyb3VwRDgudVgocm90YXRlKSk7XG4gICAgICAgICAgICB0aGlzLnkxID0gY1kgKyAoaDIgKiBtYXRoLmdyb3VwRDgudVkocm90YXRlKSk7XG4gICAgICAgICAgICByb3RhdGUgPSBtYXRoLmdyb3VwRDguYWRkKHJvdGF0ZSwgMik7XG4gICAgICAgICAgICB0aGlzLngyID0gY1ggKyAodzIgKiBtYXRoLmdyb3VwRDgudVgocm90YXRlKSk7XG4gICAgICAgICAgICB0aGlzLnkyID0gY1kgKyAoaDIgKiBtYXRoLmdyb3VwRDgudVkocm90YXRlKSk7XG4gICAgICAgICAgICByb3RhdGUgPSBtYXRoLmdyb3VwRDguYWRkKHJvdGF0ZSwgMik7XG4gICAgICAgICAgICB0aGlzLngzID0gY1ggKyAodzIgKiBtYXRoLmdyb3VwRDgudVgocm90YXRlKSk7XG4gICAgICAgICAgICB0aGlzLnkzID0gY1kgKyAoaDIgKiBtYXRoLmdyb3VwRDgudVkocm90YXRlKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLngwID0gZnJhbWUueCAvIHR3O1xuICAgICAgICAgICAgdGhpcy55MCA9IGZyYW1lLnkgLyB0aDtcbiAgICAgICAgICAgIHRoaXMueDEgPSAoZnJhbWUueCArIGZyYW1lLndpZHRoKSAvIHR3O1xuICAgICAgICAgICAgdGhpcy55MSA9IGZyYW1lLnkgLyB0aDtcbiAgICAgICAgICAgIHRoaXMueDIgPSAoZnJhbWUueCArIGZyYW1lLndpZHRoKSAvIHR3O1xuICAgICAgICAgICAgdGhpcy55MiA9IChmcmFtZS55ICsgZnJhbWUuaGVpZ2h0KSAvIHRoO1xuICAgICAgICAgICAgdGhpcy54MyA9IGZyYW1lLnggLyB0dztcbiAgICAgICAgICAgIHRoaXMueTMgPSAoZnJhbWUueSArIGZyYW1lLmhlaWdodCkgLyB0aDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnV2c0Zsb2F0MzJbMF0gPSB0aGlzLngwO1xuICAgICAgICB0aGlzLnV2c0Zsb2F0MzJbMV0gPSB0aGlzLnkwO1xuICAgICAgICB0aGlzLnV2c0Zsb2F0MzJbMl0gPSB0aGlzLngxO1xuICAgICAgICB0aGlzLnV2c0Zsb2F0MzJbM10gPSB0aGlzLnkxO1xuICAgICAgICB0aGlzLnV2c0Zsb2F0MzJbNF0gPSB0aGlzLngyO1xuICAgICAgICB0aGlzLnV2c0Zsb2F0MzJbNV0gPSB0aGlzLnkyO1xuICAgICAgICB0aGlzLnV2c0Zsb2F0MzJbNl0gPSB0aGlzLngzO1xuICAgICAgICB0aGlzLnV2c0Zsb2F0MzJbN10gPSB0aGlzLnkzO1xuICAgIH07XG4gICAgVGV4dHVyZVV2cy5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBcIltAcGl4aS9jb3JlOlRleHR1cmVVdnMgXCJcbiAgICAgICAgICAgICsgKFwieDA9XCIgKyB0aGlzLngwICsgXCIgeTA9XCIgKyB0aGlzLnkwICsgXCIgXCIpXG4gICAgICAgICAgICArIChcIngxPVwiICsgdGhpcy54MSArIFwiIHkxPVwiICsgdGhpcy55MSArIFwiIHgyPVwiICsgdGhpcy54MiArIFwiIFwiKVxuICAgICAgICAgICAgKyAoXCJ5Mj1cIiArIHRoaXMueTIgKyBcIiB4Mz1cIiArIHRoaXMueDMgKyBcIiB5Mz1cIiArIHRoaXMueTMpXG4gICAgICAgICAgICArIFwiXVwiO1xuICAgIH07XG4gICAgcmV0dXJuIFRleHR1cmVVdnM7XG59KCkpO1xuXG52YXIgREVGQVVMVF9VVlMgPSBuZXcgVGV4dHVyZVV2cygpO1xuLyoqXG4gKiBVc2VkIHRvIHJlbW92ZSBsaXN0ZW5lcnMgZnJvbSBXSElURSBhbmQgRU1QVFkgVGV4dHVyZXNcbiAqIEBpZ25vcmVcbiAqL1xuZnVuY3Rpb24gcmVtb3ZlQWxsSGFuZGxlcnModGV4KSB7XG4gICAgdGV4LmRlc3Ryb3kgPSBmdW5jdGlvbiBfZW1wdHlEZXN0cm95KCkgeyB9O1xuICAgIHRleC5vbiA9IGZ1bmN0aW9uIF9lbXB0eU9uKCkgeyB9O1xuICAgIHRleC5vbmNlID0gZnVuY3Rpb24gX2VtcHR5T25jZSgpIHsgfTtcbiAgICB0ZXguZW1pdCA9IGZ1bmN0aW9uIF9lbXB0eUVtaXQoKSB7IH07XG59XG4vKipcbiAqIEEgdGV4dHVyZSBzdG9yZXMgdGhlIGluZm9ybWF0aW9uIHRoYXQgcmVwcmVzZW50cyBhbiBpbWFnZSBvciBwYXJ0IG9mIGFuIGltYWdlLlxuICpcbiAqIEl0IGNhbm5vdCBiZSBhZGRlZCB0byB0aGUgZGlzcGxheSBsaXN0IGRpcmVjdGx5OyBpbnN0ZWFkIHVzZSBpdCBhcyB0aGUgdGV4dHVyZSBmb3IgYSBTcHJpdGUuXG4gKiBJZiBubyBmcmFtZSBpcyBwcm92aWRlZCBmb3IgYSB0ZXh0dXJlLCB0aGVuIHRoZSB3aG9sZSBpbWFnZSBpcyB1c2VkLlxuICpcbiAqIFlvdSBjYW4gZGlyZWN0bHkgY3JlYXRlIGEgdGV4dHVyZSBmcm9tIGFuIGltYWdlIGFuZCB0aGVuIHJldXNlIGl0IG11bHRpcGxlIHRpbWVzIGxpa2UgdGhpcyA6XG4gKlxuICogYGBganNcbiAqIGxldCB0ZXh0dXJlID0gUElYSS5UZXh0dXJlLmZyb20oJ2Fzc2V0cy9pbWFnZS5wbmcnKTtcbiAqIGxldCBzcHJpdGUxID0gbmV3IFBJWEkuU3ByaXRlKHRleHR1cmUpO1xuICogbGV0IHNwcml0ZTIgPSBuZXcgUElYSS5TcHJpdGUodGV4dHVyZSk7XG4gKiBgYGBcbiAqXG4gKiBJZiB5b3UgZGlkbnQgcGFzcyB0aGUgdGV4dHVyZSBmcmFtZSB0byBjb25zdHJ1Y3RvciwgaXQgZW5hYmxlcyBgbm9GcmFtZWAgbW9kZTpcbiAqIGl0IHN1YnNjcmliZXMgb24gYmFzZVRleHR1cmUgZXZlbnRzLCBpdCBhdXRvbWF0aWNhbGx5IHJlc2l6ZXMgYXQgdGhlIHNhbWUgdGltZSBhcyBiYXNlVGV4dHVyZS5cbiAqXG4gKiBUZXh0dXJlcyBtYWRlIGZyb20gU1ZHcywgbG9hZGVkIG9yIG5vdCwgY2Fubm90IGJlIHVzZWQgYmVmb3JlIHRoZSBmaWxlIGZpbmlzaGVzIHByb2Nlc3NpbmcuXG4gKiBZb3UgY2FuIGNoZWNrIGZvciB0aGlzIGJ5IGNoZWNraW5nIHRoZSBzcHJpdGUncyBfdGV4dHVyZUlEIHByb3BlcnR5LlxuICogYGBganNcbiAqIHZhciB0ZXh0dXJlID0gUElYSS5UZXh0dXJlLmZyb20oJ2Fzc2V0cy9pbWFnZS5zdmcnKTtcbiAqIHZhciBzcHJpdGUxID0gbmV3IFBJWEkuU3ByaXRlKHRleHR1cmUpO1xuICogLy9zcHJpdGUxLl90ZXh0dXJlSUQgc2hvdWxkIG5vdCBiZSB1bmRlZmluZWQgaWYgdGhlIHRleHR1cmUgaGFzIGZpbmlzaGVkIHByb2Nlc3NpbmcgdGhlIFNWRyBmaWxlXG4gKiBgYGBcbiAqIFlvdSBjYW4gdXNlIGEgdGlja2VyIG9yIHJBRiB0byBlbnN1cmUgeW91ciBzcHJpdGVzIGxvYWQgdGhlIGZpbmlzaGVkIHRleHR1cmVzIGFmdGVyIHByb2Nlc3NpbmcuIFNlZSBpc3N1ZSAjMzA2OC5cbiAqIEBtZW1iZXJvZiBQSVhJXG4gKiBAdHlwZVBhcmFtIFIgLSBUaGUgQmFzZVRleHR1cmUncyBSZXNvdXJjZSB0eXBlLlxuICovXG52YXIgVGV4dHVyZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVGV4dHVyZSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gYmFzZVRleHR1cmUgLSBUaGUgYmFzZSB0ZXh0dXJlIHNvdXJjZSB0byBjcmVhdGUgdGhlIHRleHR1cmUgZnJvbVxuICAgICAqIEBwYXJhbSBmcmFtZSAtIFRoZSByZWN0YW5nbGUgZnJhbWUgb2YgdGhlIHRleHR1cmUgdG8gc2hvd1xuICAgICAqIEBwYXJhbSBvcmlnIC0gVGhlIGFyZWEgb2Ygb3JpZ2luYWwgdGV4dHVyZVxuICAgICAqIEBwYXJhbSB0cmltIC0gVHJpbW1lZCByZWN0YW5nbGUgb2Ygb3JpZ2luYWwgdGV4dHVyZVxuICAgICAqIEBwYXJhbSByb3RhdGUgLSBpbmRpY2F0ZXMgaG93IHRoZSB0ZXh0dXJlIHdhcyByb3RhdGVkIGJ5IHRleHR1cmUgcGFja2VyLiBTZWUge0BsaW5rIFBJWEkuZ3JvdXBEOH1cbiAgICAgKiBAcGFyYW0gYW5jaG9yIC0gRGVmYXVsdCBhbmNob3IgcG9pbnQgdXNlZCBmb3Igc3ByaXRlIHBsYWNlbWVudCAvIHJvdGF0aW9uXG4gICAgICovXG4gICAgZnVuY3Rpb24gVGV4dHVyZShiYXNlVGV4dHVyZSwgZnJhbWUsIG9yaWcsIHRyaW0sIHJvdGF0ZSwgYW5jaG9yKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLm5vRnJhbWUgPSBmYWxzZTtcbiAgICAgICAgaWYgKCFmcmFtZSkge1xuICAgICAgICAgICAgX3RoaXMubm9GcmFtZSA9IHRydWU7XG4gICAgICAgICAgICBmcmFtZSA9IG5ldyBtYXRoLlJlY3RhbmdsZSgwLCAwLCAxLCAxKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYmFzZVRleHR1cmUgaW5zdGFuY2VvZiBUZXh0dXJlKSB7XG4gICAgICAgICAgICBiYXNlVGV4dHVyZSA9IGJhc2VUZXh0dXJlLmJhc2VUZXh0dXJlO1xuICAgICAgICB9XG4gICAgICAgIF90aGlzLmJhc2VUZXh0dXJlID0gYmFzZVRleHR1cmU7XG4gICAgICAgIF90aGlzLl9mcmFtZSA9IGZyYW1lO1xuICAgICAgICBfdGhpcy50cmltID0gdHJpbTtcbiAgICAgICAgX3RoaXMudmFsaWQgPSBmYWxzZTtcbiAgICAgICAgX3RoaXMuX3V2cyA9IERFRkFVTFRfVVZTO1xuICAgICAgICBfdGhpcy51dk1hdHJpeCA9IG51bGw7XG4gICAgICAgIF90aGlzLm9yaWcgPSBvcmlnIHx8IGZyYW1lOyAvLyBuZXcgUmVjdGFuZ2xlKDAsIDAsIDEsIDEpO1xuICAgICAgICBfdGhpcy5fcm90YXRlID0gTnVtYmVyKHJvdGF0ZSB8fCAwKTtcbiAgICAgICAgaWYgKHJvdGF0ZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgLy8gdGhpcyBpcyBvbGQgdGV4dHVyZXBhY2tlciBsZWdhY3ksIHNvbWUgZ2FtZXMvbGlicmFyaWVzIGFyZSBwYXNzaW5nIFwidHJ1ZVwiIGZvciByb3RhdGVkIHRleHR1cmVzXG4gICAgICAgICAgICBfdGhpcy5fcm90YXRlID0gMjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChfdGhpcy5fcm90YXRlICUgMiAhPT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdhdHRlbXB0IHRvIHVzZSBkaWFtb25kLXNoYXBlZCBVVnMuIElmIHlvdSBhcmUgc3VyZSwgc2V0IHJvdGF0aW9uIG1hbnVhbGx5Jyk7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMuZGVmYXVsdEFuY2hvciA9IGFuY2hvciA/IG5ldyBtYXRoLlBvaW50KGFuY2hvci54LCBhbmNob3IueSkgOiBuZXcgbWF0aC5Qb2ludCgwLCAwKTtcbiAgICAgICAgX3RoaXMuX3VwZGF0ZUlEID0gMDtcbiAgICAgICAgX3RoaXMudGV4dHVyZUNhY2hlSWRzID0gW107XG4gICAgICAgIGlmICghYmFzZVRleHR1cmUudmFsaWQpIHtcbiAgICAgICAgICAgIGJhc2VUZXh0dXJlLm9uY2UoJ2xvYWRlZCcsIF90aGlzLm9uQmFzZVRleHR1cmVVcGRhdGVkLCBfdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoX3RoaXMubm9GcmFtZSkge1xuICAgICAgICAgICAgLy8gaWYgdGhlcmUgaXMgbm8gZnJhbWUgd2Ugc2hvdWxkIG1vbml0b3IgZm9yIGFueSBiYXNlIHRleHR1cmUgY2hhbmdlcy4uXG4gICAgICAgICAgICBpZiAoYmFzZVRleHR1cmUudmFsaWQpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5vbkJhc2VUZXh0dXJlVXBkYXRlZChiYXNlVGV4dHVyZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBfdGhpcy5mcmFtZSA9IGZyYW1lO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfdGhpcy5ub0ZyYW1lKSB7XG4gICAgICAgICAgICBiYXNlVGV4dHVyZS5vbigndXBkYXRlJywgX3RoaXMub25CYXNlVGV4dHVyZVVwZGF0ZWQsIF90aGlzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhpcyB0ZXh0dXJlIG9uIHRoZSBncHUuXG4gICAgICpcbiAgICAgKiBDYWxscyB0aGUgVGV4dHVyZVJlc291cmNlIHVwZGF0ZS5cbiAgICAgKlxuICAgICAqIElmIHlvdSBhZGp1c3RlZCBgZnJhbWVgIG1hbnVhbGx5LCBwbGVhc2UgY2FsbCBgdXBkYXRlVXZzKClgIGluc3RlYWQuXG4gICAgICovXG4gICAgVGV4dHVyZS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5iYXNlVGV4dHVyZS5yZXNvdXJjZSkge1xuICAgICAgICAgICAgdGhpcy5iYXNlVGV4dHVyZS5yZXNvdXJjZS51cGRhdGUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHdoZW4gdGhlIGJhc2UgdGV4dHVyZSBpcyB1cGRhdGVkXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBwYXJhbSBiYXNlVGV4dHVyZSAtIFRoZSBiYXNlIHRleHR1cmUuXG4gICAgICovXG4gICAgVGV4dHVyZS5wcm90b3R5cGUub25CYXNlVGV4dHVyZVVwZGF0ZWQgPSBmdW5jdGlvbiAoYmFzZVRleHR1cmUpIHtcbiAgICAgICAgaWYgKHRoaXMubm9GcmFtZSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmJhc2VUZXh0dXJlLnZhbGlkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fZnJhbWUud2lkdGggPSBiYXNlVGV4dHVyZS53aWR0aDtcbiAgICAgICAgICAgIHRoaXMuX2ZyYW1lLmhlaWdodCA9IGJhc2VUZXh0dXJlLmhlaWdodDtcbiAgICAgICAgICAgIHRoaXMudmFsaWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVVdnMoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIFRPRE8gdGhpcyBjb2RlIGxvb2tzIGNvbmZ1c2luZy4uIGJvbyB0byBhYnVzaW5nIGdldHRlcnMgYW5kIHNldHRlcnMhXG4gICAgICAgICAgICAvLyBpZiB1c2VyIGdhdmUgdXMgZnJhbWUgdGhhdCBoYXMgYmlnZ2VyIHNpemUgdGhhbiByZXNpemVkIHRleHR1cmUgaXQgY2FuIGJlIGEgcHJvYmxlbVxuICAgICAgICAgICAgdGhpcy5mcmFtZSA9IHRoaXMuX2ZyYW1lO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZW1pdCgndXBkYXRlJywgdGhpcyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEZXN0cm95cyB0aGlzIHRleHR1cmVcbiAgICAgKiBAcGFyYW0gW2Rlc3Ryb3lCYXNlPWZhbHNlXSAtIFdoZXRoZXIgdG8gZGVzdHJveSB0aGUgYmFzZSB0ZXh0dXJlIGFzIHdlbGxcbiAgICAgKi9cbiAgICBUZXh0dXJlLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKGRlc3Ryb3lCYXNlKSB7XG4gICAgICAgIGlmICh0aGlzLmJhc2VUZXh0dXJlKSB7XG4gICAgICAgICAgICBpZiAoZGVzdHJveUJhc2UpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVzb3VyY2UgPSB0aGlzLmJhc2VUZXh0dXJlLnJlc291cmNlO1xuICAgICAgICAgICAgICAgIC8vIGRlbGV0ZSB0aGUgdGV4dHVyZSBpZiBpdCBleGlzdHMgaW4gdGhlIHRleHR1cmUgY2FjaGUuLlxuICAgICAgICAgICAgICAgIC8vIHRoaXMgb25seSBuZWVkcyB0byBiZSByZW1vdmVkIGlmIHRoZSBiYXNlIHRleHR1cmUgaXMgYWN0dWFsbHkgZGVzdHJveWVkIHRvby4uXG4gICAgICAgICAgICAgICAgaWYgKHJlc291cmNlICYmIHJlc291cmNlLnVybCAmJiB1dGlscy5UZXh0dXJlQ2FjaGVbcmVzb3VyY2UudXJsXSkge1xuICAgICAgICAgICAgICAgICAgICBUZXh0dXJlLnJlbW92ZUZyb21DYWNoZShyZXNvdXJjZS51cmwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmJhc2VUZXh0dXJlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYmFzZVRleHR1cmUub2ZmKCdsb2FkZWQnLCB0aGlzLm9uQmFzZVRleHR1cmVVcGRhdGVkLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuYmFzZVRleHR1cmUub2ZmKCd1cGRhdGUnLCB0aGlzLm9uQmFzZVRleHR1cmVVcGRhdGVkLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuYmFzZVRleHR1cmUgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2ZyYW1lID0gbnVsbDtcbiAgICAgICAgdGhpcy5fdXZzID0gbnVsbDtcbiAgICAgICAgdGhpcy50cmltID0gbnVsbDtcbiAgICAgICAgdGhpcy5vcmlnID0gbnVsbDtcbiAgICAgICAgdGhpcy52YWxpZCA9IGZhbHNlO1xuICAgICAgICBUZXh0dXJlLnJlbW92ZUZyb21DYWNoZSh0aGlzKTtcbiAgICAgICAgdGhpcy50ZXh0dXJlQ2FjaGVJZHMgPSBudWxsO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0ZXh0dXJlIG9iamVjdCB0aGF0IGFjdHMgdGhlIHNhbWUgYXMgdGhpcyBvbmUuXG4gICAgICogQHJldHVybnMgLSBUaGUgbmV3IHRleHR1cmVcbiAgICAgKi9cbiAgICBUZXh0dXJlLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNsb25lZEZyYW1lID0gdGhpcy5fZnJhbWUuY2xvbmUoKTtcbiAgICAgICAgdmFyIGNsb25lZE9yaWcgPSB0aGlzLl9mcmFtZSA9PT0gdGhpcy5vcmlnID8gY2xvbmVkRnJhbWUgOiB0aGlzLm9yaWcuY2xvbmUoKTtcbiAgICAgICAgdmFyIGNsb25lZFRleHR1cmUgPSBuZXcgVGV4dHVyZSh0aGlzLmJhc2VUZXh0dXJlLCAhdGhpcy5ub0ZyYW1lICYmIGNsb25lZEZyYW1lLCBjbG9uZWRPcmlnLCB0aGlzLnRyaW0gJiYgdGhpcy50cmltLmNsb25lKCksIHRoaXMucm90YXRlLCB0aGlzLmRlZmF1bHRBbmNob3IpO1xuICAgICAgICBpZiAodGhpcy5ub0ZyYW1lKSB7XG4gICAgICAgICAgICBjbG9uZWRUZXh0dXJlLl9mcmFtZSA9IGNsb25lZEZyYW1lO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjbG9uZWRUZXh0dXJlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgaW50ZXJuYWwgV2ViR0wgVVYgY2FjaGUuIFVzZSBpdCBhZnRlciB5b3UgY2hhbmdlIGBmcmFtZWAgb3IgYHRyaW1gIG9mIHRoZSB0ZXh0dXJlLlxuICAgICAqIENhbGwgaXQgYWZ0ZXIgY2hhbmdpbmcgdGhlIGZyYW1lXG4gICAgICovXG4gICAgVGV4dHVyZS5wcm90b3R5cGUudXBkYXRlVXZzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5fdXZzID09PSBERUZBVUxUX1VWUykge1xuICAgICAgICAgICAgdGhpcy5fdXZzID0gbmV3IFRleHR1cmVVdnMoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl91dnMuc2V0KHRoaXMuX2ZyYW1lLCB0aGlzLmJhc2VUZXh0dXJlLCB0aGlzLnJvdGF0ZSk7XG4gICAgICAgIHRoaXMuX3VwZGF0ZUlEKys7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBIZWxwZXIgZnVuY3Rpb24gdGhhdCBjcmVhdGVzIGEgbmV3IFRleHR1cmUgYmFzZWQgb24gdGhlIHNvdXJjZSB5b3UgcHJvdmlkZS5cbiAgICAgKiBUaGUgc291cmNlIGNhbiBiZSAtIGZyYW1lIGlkLCBpbWFnZSB1cmwsIHZpZGVvIHVybCwgY2FudmFzIGVsZW1lbnQsIHZpZGVvIGVsZW1lbnQsIGJhc2UgdGV4dHVyZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfEhUTUxJbWFnZUVsZW1lbnR8SFRNTENhbnZhc0VsZW1lbnR8SFRNTFZpZGVvRWxlbWVudHxQSVhJLkJhc2VUZXh0dXJlfSBzb3VyY2UgLVxuICAgICAqICAgICAgICBTb3VyY2Ugb3IgYXJyYXkgb2Ygc291cmNlcyB0byBjcmVhdGUgdGV4dHVyZSBmcm9tXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBTZWUge0BsaW5rIFBJWEkuQmFzZVRleHR1cmV9J3MgY29uc3RydWN0b3IgZm9yIG9wdGlvbnMuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnBpeGlJZFByZWZpeD1waXhpaWRdIC0gSWYgYSBzb3VyY2UgaGFzIG5vIGlkLCB0aGlzIGlzIHRoZSBwcmVmaXggb2YgdGhlIGdlbmVyYXRlZCBpZFxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3N0cmljdF0gLSBFbmZvcmNlIHN0cmljdC1tb2RlLCBzZWUge0BsaW5rIFBJWEkuc2V0dGluZ3MuU1RSSUNUX1RFWFRVUkVfQ0FDSEV9LlxuICAgICAqIEByZXR1cm5zIHtQSVhJLlRleHR1cmV9IFRoZSBuZXdseSBjcmVhdGVkIHRleHR1cmVcbiAgICAgKi9cbiAgICBUZXh0dXJlLmZyb20gPSBmdW5jdGlvbiAoc291cmNlLCBvcHRpb25zLCBzdHJpY3QpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0ge307IH1cbiAgICAgICAgaWYgKHN0cmljdCA9PT0gdm9pZCAwKSB7IHN0cmljdCA9IHNldHRpbmdzLnNldHRpbmdzLlNUUklDVF9URVhUVVJFX0NBQ0hFOyB9XG4gICAgICAgIHZhciBpc0ZyYW1lID0gdHlwZW9mIHNvdXJjZSA9PT0gJ3N0cmluZyc7XG4gICAgICAgIHZhciBjYWNoZUlkID0gbnVsbDtcbiAgICAgICAgaWYgKGlzRnJhbWUpIHtcbiAgICAgICAgICAgIGNhY2hlSWQgPSBzb3VyY2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc291cmNlIGluc3RhbmNlb2YgQmFzZVRleHR1cmUpIHtcbiAgICAgICAgICAgIGlmICghc291cmNlLmNhY2hlSWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJlZml4ID0gKG9wdGlvbnMgJiYgb3B0aW9ucy5waXhpSWRQcmVmaXgpIHx8ICdwaXhpaWQnO1xuICAgICAgICAgICAgICAgIHNvdXJjZS5jYWNoZUlkID0gcHJlZml4ICsgXCItXCIgKyB1dGlscy51aWQoKTtcbiAgICAgICAgICAgICAgICBCYXNlVGV4dHVyZS5hZGRUb0NhY2hlKHNvdXJjZSwgc291cmNlLmNhY2hlSWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FjaGVJZCA9IHNvdXJjZS5jYWNoZUlkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKCFzb3VyY2UuX3BpeGlJZCkge1xuICAgICAgICAgICAgICAgIHZhciBwcmVmaXggPSAob3B0aW9ucyAmJiBvcHRpb25zLnBpeGlJZFByZWZpeCkgfHwgJ3BpeGlpZCc7XG4gICAgICAgICAgICAgICAgc291cmNlLl9waXhpSWQgPSBwcmVmaXggKyBcIl9cIiArIHV0aWxzLnVpZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FjaGVJZCA9IHNvdXJjZS5fcGl4aUlkO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0ZXh0dXJlID0gdXRpbHMuVGV4dHVyZUNhY2hlW2NhY2hlSWRdO1xuICAgICAgICAvLyBTdHJpY3QtbW9kZSByZWplY3RzIGludmFsaWQgY2FjaGVJZHNcbiAgICAgICAgaWYgKGlzRnJhbWUgJiYgc3RyaWN0ICYmICF0ZXh0dXJlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgY2FjaGVJZCBcXFwiXCIgKyBjYWNoZUlkICsgXCJcXFwiIGRvZXMgbm90IGV4aXN0IGluIFRleHR1cmVDYWNoZS5cIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0ZXh0dXJlICYmICEoc291cmNlIGluc3RhbmNlb2YgQmFzZVRleHR1cmUpKSB7XG4gICAgICAgICAgICBpZiAoIW9wdGlvbnMucmVzb2x1dGlvbikge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMucmVzb2x1dGlvbiA9IHV0aWxzLmdldFJlc29sdXRpb25PZlVybChzb3VyY2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGV4dHVyZSA9IG5ldyBUZXh0dXJlKG5ldyBCYXNlVGV4dHVyZShzb3VyY2UsIG9wdGlvbnMpKTtcbiAgICAgICAgICAgIHRleHR1cmUuYmFzZVRleHR1cmUuY2FjaGVJZCA9IGNhY2hlSWQ7XG4gICAgICAgICAgICBCYXNlVGV4dHVyZS5hZGRUb0NhY2hlKHRleHR1cmUuYmFzZVRleHR1cmUsIGNhY2hlSWQpO1xuICAgICAgICAgICAgVGV4dHVyZS5hZGRUb0NhY2hlKHRleHR1cmUsIGNhY2hlSWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCF0ZXh0dXJlICYmIChzb3VyY2UgaW5zdGFuY2VvZiBCYXNlVGV4dHVyZSkpIHtcbiAgICAgICAgICAgIHRleHR1cmUgPSBuZXcgVGV4dHVyZShzb3VyY2UpO1xuICAgICAgICAgICAgVGV4dHVyZS5hZGRUb0NhY2hlKHRleHR1cmUsIGNhY2hlSWQpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGxldHMgYXNzdW1lIGl0cyBhIGJhc2UgdGV4dHVyZSFcbiAgICAgICAgcmV0dXJuIHRleHR1cmU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBVc2VmdWwgZm9yIGxvYWRpbmcgdGV4dHVyZXMgdmlhIFVSTHMuIFVzZSBpbnN0ZWFkIG9mIGBUZXh0dXJlLmZyb21gIGJlY2F1c2VcbiAgICAgKiBpdCBkb2VzIGEgYmV0dGVyIGpvYiBvZiBoYW5kbGluZyBmYWlsZWQgVVJMcyBtb3JlIGVmZmVjdGl2ZWx5LiBUaGlzIGFsc28gaWdub3Jlc1xuICAgICAqIGBQSVhJLnNldHRpbmdzLlNUUklDVF9URVhUVVJFX0NBQ0hFYC4gV29ya3MgZm9yIFZpZGVvcywgU1ZHcywgSW1hZ2VzLlxuICAgICAqIEBwYXJhbSB1cmwgLSBUaGUgcmVtb3RlIFVSTCBvciBhcnJheSBvZiBVUkxzIHRvIGxvYWQuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBvcHRpb25zIHRvIGluY2x1ZGVcbiAgICAgKiBAcmV0dXJucyAtIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGEgVGV4dHVyZS5cbiAgICAgKi9cbiAgICBUZXh0dXJlLmZyb21VUkwgPSBmdW5jdGlvbiAodXJsLCBvcHRpb25zKSB7XG4gICAgICAgIHZhciByZXNvdXJjZU9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgYXV0b0xvYWQ6IGZhbHNlIH0sIG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5yZXNvdXJjZU9wdGlvbnMpO1xuICAgICAgICB2YXIgdGV4dHVyZSA9IFRleHR1cmUuZnJvbSh1cmwsIE9iamVjdC5hc3NpZ24oeyByZXNvdXJjZU9wdGlvbnM6IHJlc291cmNlT3B0aW9ucyB9LCBvcHRpb25zKSwgZmFsc2UpO1xuICAgICAgICB2YXIgcmVzb3VyY2UgPSB0ZXh0dXJlLmJhc2VUZXh0dXJlLnJlc291cmNlO1xuICAgICAgICAvLyBUaGUgdGV4dHVyZSB3YXMgYWxyZWFkeSBsb2FkZWRcbiAgICAgICAgaWYgKHRleHR1cmUuYmFzZVRleHR1cmUudmFsaWQpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGV4dHVyZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gTWFudWFsbHkgbG9hZCB0aGUgdGV4dHVyZSwgdGhpcyBzaG91bGQgYWxsb3cgdXNlcnMgdG8gaGFuZGxlIGxvYWQgZXJyb3JzXG4gICAgICAgIHJldHVybiByZXNvdXJjZS5sb2FkKCkudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiBQcm9taXNlLnJlc29sdmUodGV4dHVyZSk7IH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IFRleHR1cmUgd2l0aCBhIEJ1ZmZlclJlc291cmNlIGZyb20gYSBGbG9hdDMyQXJyYXkuXG4gICAgICogUkdCQSB2YWx1ZXMgYXJlIGZsb2F0cyBmcm9tIDAgdG8gMS5cbiAgICAgKiBAcGFyYW0ge0Zsb2F0MzJBcnJheXxVaW50OEFycmF5fSBidWZmZXIgLSBUaGUgb3B0aW9uYWwgYXJyYXkgdG8gdXNlLCBpZiBubyBkYXRhXG4gICAgICogICAgICAgIGlzIHByb3ZpZGVkLCBhIG5ldyBGbG9hdDMyQXJyYXkgaXMgY3JlYXRlZC5cbiAgICAgKiBAcGFyYW0gd2lkdGggLSBXaWR0aCBvZiB0aGUgcmVzb3VyY2VcbiAgICAgKiBAcGFyYW0gaGVpZ2h0IC0gSGVpZ2h0IG9mIHRoZSByZXNvdXJjZVxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gU2VlIHtAbGluayBQSVhJLkJhc2VUZXh0dXJlfSdzIGNvbnN0cnVjdG9yIGZvciBvcHRpb25zLlxuICAgICAqIEByZXR1cm5zIC0gVGhlIHJlc3VsdGluZyBuZXcgQmFzZVRleHR1cmVcbiAgICAgKi9cbiAgICBUZXh0dXJlLmZyb21CdWZmZXIgPSBmdW5jdGlvbiAoYnVmZmVyLCB3aWR0aCwgaGVpZ2h0LCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBuZXcgVGV4dHVyZShCYXNlVGV4dHVyZS5mcm9tQnVmZmVyKGJ1ZmZlciwgd2lkdGgsIGhlaWdodCwgb3B0aW9ucykpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgdGV4dHVyZSBmcm9tIGEgc291cmNlIGFuZCBhZGQgdG8gdGhlIGNhY2hlLlxuICAgICAqIEBwYXJhbSB7SFRNTEltYWdlRWxlbWVudHxIVE1MQ2FudmFzRWxlbWVudHxzdHJpbmd9IHNvdXJjZSAtIFRoZSBpbnB1dCBzb3VyY2UuXG4gICAgICogQHBhcmFtIGltYWdlVXJsIC0gRmlsZSBuYW1lIG9mIHRleHR1cmUsIGZvciBjYWNoZSBhbmQgcmVzb2x2aW5nIHJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIG5hbWUgLSBIdW1hbiByZWFkYWJsZSBuYW1lIGZvciB0aGUgdGV4dHVyZSBjYWNoZS4gSWYgbm8gbmFtZSBpc1xuICAgICAqICAgICAgICBzcGVjaWZpZWQsIG9ubHkgYGltYWdlVXJsYCB3aWxsIGJlIHVzZWQgYXMgdGhlIGNhY2hlIElELlxuICAgICAqIEBwYXJhbSBvcHRpb25zXG4gICAgICogQHJldHVybnMgLSBPdXRwdXQgdGV4dHVyZVxuICAgICAqL1xuICAgIFRleHR1cmUuZnJvbUxvYWRlciA9IGZ1bmN0aW9uIChzb3VyY2UsIGltYWdlVXJsLCBuYW1lLCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBiYXNlVGV4dHVyZSA9IG5ldyBCYXNlVGV4dHVyZShzb3VyY2UsIE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgICAgc2NhbGVNb2RlOiBzZXR0aW5ncy5zZXR0aW5ncy5TQ0FMRV9NT0RFLFxuICAgICAgICAgICAgcmVzb2x1dGlvbjogdXRpbHMuZ2V0UmVzb2x1dGlvbk9mVXJsKGltYWdlVXJsKSxcbiAgICAgICAgfSwgb3B0aW9ucykpO1xuICAgICAgICB2YXIgcmVzb3VyY2UgPSBiYXNlVGV4dHVyZS5yZXNvdXJjZTtcbiAgICAgICAgaWYgKHJlc291cmNlIGluc3RhbmNlb2YgSW1hZ2VSZXNvdXJjZSkge1xuICAgICAgICAgICAgcmVzb3VyY2UudXJsID0gaW1hZ2VVcmw7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRleHR1cmUgPSBuZXcgVGV4dHVyZShiYXNlVGV4dHVyZSk7XG4gICAgICAgIC8vIE5vIG5hbWUsIHVzZSBpbWFnZVVybCBpbnN0ZWFkXG4gICAgICAgIGlmICghbmFtZSkge1xuICAgICAgICAgICAgbmFtZSA9IGltYWdlVXJsO1xuICAgICAgICB9XG4gICAgICAgIC8vIGxldHMgYWxzbyBhZGQgdGhlIGZyYW1lIHRvIHBpeGkncyBnbG9iYWwgY2FjaGUgZm9yICdmcm9tTG9hZGVyJyBmdW5jdGlvblxuICAgICAgICBCYXNlVGV4dHVyZS5hZGRUb0NhY2hlKHRleHR1cmUuYmFzZVRleHR1cmUsIG5hbWUpO1xuICAgICAgICBUZXh0dXJlLmFkZFRvQ2FjaGUodGV4dHVyZSwgbmFtZSk7XG4gICAgICAgIC8vIGFsc28gYWRkIHJlZmVyZW5jZXMgYnkgdXJsIGlmIHRoZXkgYXJlIGRpZmZlcmVudC5cbiAgICAgICAgaWYgKG5hbWUgIT09IGltYWdlVXJsKSB7XG4gICAgICAgICAgICBCYXNlVGV4dHVyZS5hZGRUb0NhY2hlKHRleHR1cmUuYmFzZVRleHR1cmUsIGltYWdlVXJsKTtcbiAgICAgICAgICAgIFRleHR1cmUuYWRkVG9DYWNoZSh0ZXh0dXJlLCBpbWFnZVVybCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gR2VuZXJhbGx5IGltYWdlcyBhcmUgdmFsaWQgcmlnaHQgYXdheVxuICAgICAgICBpZiAodGV4dHVyZS5iYXNlVGV4dHVyZS52YWxpZCkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0ZXh0dXJlKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBTVkcgYXNzZXRzIG5lZWQgdG8gYmUgcGFyc2VkIGFzeW5jLCBsZXQncyB3YWl0XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICAgICAgdGV4dHVyZS5iYXNlVGV4dHVyZS5vbmNlKCdsb2FkZWQnLCBmdW5jdGlvbiAoKSB7IHJldHVybiByZXNvbHZlKHRleHR1cmUpOyB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBZGRzIGEgVGV4dHVyZSB0byB0aGUgZ2xvYmFsIFRleHR1cmVDYWNoZS4gVGhpcyBjYWNoZSBpcyBzaGFyZWQgYWNyb3NzIHRoZSB3aG9sZSBQSVhJIG9iamVjdC5cbiAgICAgKiBAcGFyYW0gdGV4dHVyZSAtIFRoZSBUZXh0dXJlIHRvIGFkZCB0byB0aGUgY2FjaGUuXG4gICAgICogQHBhcmFtIGlkIC0gVGhlIGlkIHRoYXQgdGhlIFRleHR1cmUgd2lsbCBiZSBzdG9yZWQgYWdhaW5zdC5cbiAgICAgKi9cbiAgICBUZXh0dXJlLmFkZFRvQ2FjaGUgPSBmdW5jdGlvbiAodGV4dHVyZSwgaWQpIHtcbiAgICAgICAgaWYgKGlkKSB7XG4gICAgICAgICAgICBpZiAodGV4dHVyZS50ZXh0dXJlQ2FjaGVJZHMuaW5kZXhPZihpZCkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgdGV4dHVyZS50ZXh0dXJlQ2FjaGVJZHMucHVzaChpZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodXRpbHMuVGV4dHVyZUNhY2hlW2lkXSkge1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiVGV4dHVyZSBhZGRlZCB0byB0aGUgY2FjaGUgd2l0aCBhbiBpZCBbXCIgKyBpZCArIFwiXSB0aGF0IGFscmVhZHkgaGFkIGFuIGVudHJ5XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdXRpbHMuVGV4dHVyZUNhY2hlW2lkXSA9IHRleHR1cmU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhIFRleHR1cmUgZnJvbSB0aGUgZ2xvYmFsIFRleHR1cmVDYWNoZS5cbiAgICAgKiBAcGFyYW0gdGV4dHVyZSAtIGlkIG9mIGEgVGV4dHVyZSB0byBiZSByZW1vdmVkLCBvciBhIFRleHR1cmUgaW5zdGFuY2UgaXRzZWxmXG4gICAgICogQHJldHVybnMgLSBUaGUgVGV4dHVyZSB0aGF0IHdhcyByZW1vdmVkXG4gICAgICovXG4gICAgVGV4dHVyZS5yZW1vdmVGcm9tQ2FjaGUgPSBmdW5jdGlvbiAodGV4dHVyZSkge1xuICAgICAgICBpZiAodHlwZW9mIHRleHR1cmUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB2YXIgdGV4dHVyZUZyb21DYWNoZSA9IHV0aWxzLlRleHR1cmVDYWNoZVt0ZXh0dXJlXTtcbiAgICAgICAgICAgIGlmICh0ZXh0dXJlRnJvbUNhY2hlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gdGV4dHVyZUZyb21DYWNoZS50ZXh0dXJlQ2FjaGVJZHMuaW5kZXhPZih0ZXh0dXJlKTtcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlRnJvbUNhY2hlLnRleHR1cmVDYWNoZUlkcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkZWxldGUgdXRpbHMuVGV4dHVyZUNhY2hlW3RleHR1cmVdO1xuICAgICAgICAgICAgICAgIHJldHVybiB0ZXh0dXJlRnJvbUNhY2hlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRleHR1cmUgJiYgdGV4dHVyZS50ZXh0dXJlQ2FjaGVJZHMpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGV4dHVyZS50ZXh0dXJlQ2FjaGVJZHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAvLyBDaGVjayB0aGF0IHRleHR1cmUgbWF0Y2hlcyB0aGUgb25lIGJlaW5nIHBhc3NlZCBpbiBiZWZvcmUgZGVsZXRpbmcgaXQgZnJvbSB0aGUgY2FjaGUuXG4gICAgICAgICAgICAgICAgaWYgKHV0aWxzLlRleHR1cmVDYWNoZVt0ZXh0dXJlLnRleHR1cmVDYWNoZUlkc1tpXV0gPT09IHRleHR1cmUpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHV0aWxzLlRleHR1cmVDYWNoZVt0ZXh0dXJlLnRleHR1cmVDYWNoZUlkc1tpXV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGV4dHVyZS50ZXh0dXJlQ2FjaGVJZHMubGVuZ3RoID0gMDtcbiAgICAgICAgICAgIHJldHVybiB0ZXh0dXJlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRleHR1cmUucHJvdG90eXBlLCBcInJlc29sdXRpb25cIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyByZXNvbHV0aW9uIG9mIGJhc2VUZXh0dXJlXG4gICAgICAgICAqIEByZWFkb25seVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5iYXNlVGV4dHVyZS5yZXNvbHV0aW9uO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRleHR1cmUucHJvdG90eXBlLCBcImZyYW1lXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBmcmFtZSBzcGVjaWZpZXMgdGhlIHJlZ2lvbiBvZiB0aGUgYmFzZSB0ZXh0dXJlIHRoYXQgdGhpcyB0ZXh0dXJlIHVzZXMuXG4gICAgICAgICAqIFBsZWFzZSBjYWxsIGB1cGRhdGVVdnMoKWAgYWZ0ZXIgeW91IGNoYW5nZSBjb29yZGluYXRlcyBvZiBgZnJhbWVgIG1hbnVhbGx5LlxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZnJhbWU7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKGZyYW1lKSB7XG4gICAgICAgICAgICB0aGlzLl9mcmFtZSA9IGZyYW1lO1xuICAgICAgICAgICAgdGhpcy5ub0ZyYW1lID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgeCA9IGZyYW1lLngsIHkgPSBmcmFtZS55LCB3aWR0aCA9IGZyYW1lLndpZHRoLCBoZWlnaHQgPSBmcmFtZS5oZWlnaHQ7XG4gICAgICAgICAgICB2YXIgeE5vdEZpdCA9IHggKyB3aWR0aCA+IHRoaXMuYmFzZVRleHR1cmUud2lkdGg7XG4gICAgICAgICAgICB2YXIgeU5vdEZpdCA9IHkgKyBoZWlnaHQgPiB0aGlzLmJhc2VUZXh0dXJlLmhlaWdodDtcbiAgICAgICAgICAgIGlmICh4Tm90Rml0IHx8IHlOb3RGaXQpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVsYXRpb25zaGlwID0geE5vdEZpdCAmJiB5Tm90Rml0ID8gJ2FuZCcgOiAnb3InO1xuICAgICAgICAgICAgICAgIHZhciBlcnJvclggPSBcIlg6IFwiICsgeCArIFwiICsgXCIgKyB3aWR0aCArIFwiID0gXCIgKyAoeCArIHdpZHRoKSArIFwiID4gXCIgKyB0aGlzLmJhc2VUZXh0dXJlLndpZHRoO1xuICAgICAgICAgICAgICAgIHZhciBlcnJvclkgPSBcIlk6IFwiICsgeSArIFwiICsgXCIgKyBoZWlnaHQgKyBcIiA9IFwiICsgKHkgKyBoZWlnaHQpICsgXCIgPiBcIiArIHRoaXMuYmFzZVRleHR1cmUuaGVpZ2h0O1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGV4dHVyZSBFcnJvcjogZnJhbWUgZG9lcyBub3QgZml0IGluc2lkZSB0aGUgYmFzZSBUZXh0dXJlIGRpbWVuc2lvbnM6ICdcbiAgICAgICAgICAgICAgICAgICAgKyAoZXJyb3JYICsgXCIgXCIgKyByZWxhdGlvbnNoaXAgKyBcIiBcIiArIGVycm9yWSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy52YWxpZCA9IHdpZHRoICYmIGhlaWdodCAmJiB0aGlzLmJhc2VUZXh0dXJlLnZhbGlkO1xuICAgICAgICAgICAgaWYgKCF0aGlzLnRyaW0gJiYgIXRoaXMucm90YXRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vcmlnID0gZnJhbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy52YWxpZCkge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVXZzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVGV4dHVyZS5wcm90b3R5cGUsIFwicm90YXRlXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluZGljYXRlcyB3aGV0aGVyIHRoZSB0ZXh0dXJlIGlzIHJvdGF0ZWQgaW5zaWRlIHRoZSBhdGxhc1xuICAgICAgICAgKiBzZXQgdG8gMiB0byBjb21wZW5zYXRlIGZvciB0ZXh0dXJlIHBhY2tlciByb3RhdGlvblxuICAgICAgICAgKiBzZXQgdG8gNiB0byBjb21wZW5zYXRlIGZvciBzcGluZSBwYWNrZXIgcm90YXRpb25cbiAgICAgICAgICogY2FuIGJlIHVzZWQgdG8gcm90YXRlIG9yIG1pcnJvciBzcHJpdGVzXG4gICAgICAgICAqIFNlZSB7QGxpbmsgUElYSS5ncm91cEQ4fSBmb3IgZXhwbGFuYXRpb25cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JvdGF0ZTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAocm90YXRlKSB7XG4gICAgICAgICAgICB0aGlzLl9yb3RhdGUgPSByb3RhdGU7XG4gICAgICAgICAgICBpZiAodGhpcy52YWxpZCkge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVXZzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVGV4dHVyZS5wcm90b3R5cGUsIFwid2lkdGhcIiwge1xuICAgICAgICAvKiogVGhlIHdpZHRoIG9mIHRoZSBUZXh0dXJlIGluIHBpeGVscy4gKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vcmlnLndpZHRoO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRleHR1cmUucHJvdG90eXBlLCBcImhlaWdodFwiLCB7XG4gICAgICAgIC8qKiBUaGUgaGVpZ2h0IG9mIHRoZSBUZXh0dXJlIGluIHBpeGVscy4gKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vcmlnLmhlaWdodDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIC8qKiBVdGlsaXR5IGZ1bmN0aW9uIGZvciBCYXNlVGV4dHVyZXxUZXh0dXJlIGNhc3QuICovXG4gICAgVGV4dHVyZS5wcm90b3R5cGUuY2FzdFRvQmFzZVRleHR1cmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VUZXh0dXJlO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRleHR1cmUsIFwiRU1QVFlcIiwge1xuICAgICAgICAvKiogQW4gZW1wdHkgdGV4dHVyZSwgdXNlZCBvZnRlbiB0byBub3QgaGF2ZSB0byBjcmVhdGUgbXVsdGlwbGUgZW1wdHkgdGV4dHVyZXMuIENhbiBub3QgYmUgZGVzdHJveWVkLiAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghVGV4dHVyZS5fRU1QVFkpIHtcbiAgICAgICAgICAgICAgICBUZXh0dXJlLl9FTVBUWSA9IG5ldyBUZXh0dXJlKG5ldyBCYXNlVGV4dHVyZSgpKTtcbiAgICAgICAgICAgICAgICByZW1vdmVBbGxIYW5kbGVycyhUZXh0dXJlLl9FTVBUWSk7XG4gICAgICAgICAgICAgICAgcmVtb3ZlQWxsSGFuZGxlcnMoVGV4dHVyZS5fRU1QVFkuYmFzZVRleHR1cmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFRleHR1cmUuX0VNUFRZO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRleHR1cmUsIFwiV0hJVEVcIiwge1xuICAgICAgICAvKiogQSB3aGl0ZSB0ZXh0dXJlIG9mIDE2eDE2IHNpemUsIHVzZWQgZm9yIGdyYXBoaWNzIGFuZCBvdGhlciB0aGluZ3MgQ2FuIG5vdCBiZSBkZXN0cm95ZWQuICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCFUZXh0dXJlLl9XSElURSkge1xuICAgICAgICAgICAgICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAgICAgICAgICAgICB2YXIgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IDE2O1xuICAgICAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSAxNjtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9ICd3aGl0ZSc7XG4gICAgICAgICAgICAgICAgY29udGV4dC5maWxsUmVjdCgwLCAwLCAxNiwgMTYpO1xuICAgICAgICAgICAgICAgIFRleHR1cmUuX1dISVRFID0gbmV3IFRleHR1cmUobmV3IEJhc2VUZXh0dXJlKG5ldyBDYW52YXNSZXNvdXJjZShjYW52YXMpKSk7XG4gICAgICAgICAgICAgICAgcmVtb3ZlQWxsSGFuZGxlcnMoVGV4dHVyZS5fV0hJVEUpO1xuICAgICAgICAgICAgICAgIHJlbW92ZUFsbEhhbmRsZXJzKFRleHR1cmUuX1dISVRFLmJhc2VUZXh0dXJlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBUZXh0dXJlLl9XSElURTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBUZXh0dXJlO1xufSh1dGlscy5FdmVudEVtaXR0ZXIpKTtcblxuLyoqXG4gKiBBIFJlbmRlclRleHR1cmUgaXMgYSBzcGVjaWFsIHRleHR1cmUgdGhhdCBhbGxvd3MgYW55IFBpeGlKUyBkaXNwbGF5IG9iamVjdCB0byBiZSByZW5kZXJlZCB0byBpdC5cbiAqXG4gKiBfX0hpbnRfXzogQWxsIERpc3BsYXlPYmplY3RzIChpLmUuIFNwcml0ZXMpIHRoYXQgcmVuZGVyIHRvIGEgUmVuZGVyVGV4dHVyZSBzaG91bGQgYmUgcHJlbG9hZGVkXG4gKiBvdGhlcndpc2UgYmxhY2sgcmVjdGFuZ2xlcyB3aWxsIGJlIGRyYXduIGluc3RlYWQuXG4gKlxuICogX19IaW50LTJfXzogVGhlIGFjdHVhbCBtZW1vcnkgYWxsb2NhdGlvbiB3aWxsIGhhcHBlbiBvbiBmaXJzdCByZW5kZXIuXG4gKiBZb3Ugc2hvdWxkbid0IGNyZWF0ZSByZW5kZXJUZXh0dXJlcyBlYWNoIGZyYW1lIGp1c3QgdG8gZGVsZXRlIHRoZW0gYWZ0ZXIsIHRyeSB0byByZXVzZSB0aGVtLlxuICpcbiAqIEEgUmVuZGVyVGV4dHVyZSB0YWtlcyBhIHNuYXBzaG90IG9mIGFueSBEaXNwbGF5IE9iamVjdCBnaXZlbiB0byBpdHMgcmVuZGVyIG1ldGhvZC4gRm9yIGV4YW1wbGU6XG4gKlxuICogYGBganNcbiAqIGxldCByZW5kZXJlciA9IFBJWEkuYXV0b0RldGVjdFJlbmRlcmVyKCk7XG4gKiBsZXQgcmVuZGVyVGV4dHVyZSA9IFBJWEkuUmVuZGVyVGV4dHVyZS5jcmVhdGUoeyB3aWR0aDogODAwLCBoZWlnaHQ6IDYwMCB9KTtcbiAqIGxldCBzcHJpdGUgPSBQSVhJLlNwcml0ZS5mcm9tKFwic3Bpbk9ial8wMS5wbmdcIik7XG4gKlxuICogc3ByaXRlLnBvc2l0aW9uLnggPSA4MDAvMjtcbiAqIHNwcml0ZS5wb3NpdGlvbi55ID0gNjAwLzI7XG4gKiBzcHJpdGUuYW5jaG9yLnggPSAwLjU7XG4gKiBzcHJpdGUuYW5jaG9yLnkgPSAwLjU7XG4gKlxuICogcmVuZGVyZXIucmVuZGVyKHNwcml0ZSwge3JlbmRlclRleHR1cmV9KTtcbiAqIGBgYFxuICogTm90ZSB0aGF0IHlvdSBzaG91bGQgbm90IGNyZWF0ZSBhIG5ldyByZW5kZXJlciwgYnV0IHJldXNlIHRoZSBzYW1lIG9uZSBhcyB0aGUgcmVzdCBvZiB0aGUgYXBwbGljYXRpb24uXG4gKlxuICogVGhlIFNwcml0ZSBpbiB0aGlzIGNhc2Ugd2lsbCBiZSByZW5kZXJlZCB1c2luZyBpdHMgbG9jYWwgdHJhbnNmb3JtLiBUbyByZW5kZXIgdGhpcyBzcHJpdGUgYXQgMCwwXG4gKiB5b3UgY2FuIGNsZWFyIHRoZSB0cmFuc2Zvcm1cbiAqXG4gKiBgYGBqc1xuICpcbiAqIHNwcml0ZS5zZXRUcmFuc2Zvcm0oKVxuICpcbiAqIGxldCByZW5kZXJUZXh0dXJlID0gbmV3IFBJWEkuUmVuZGVyVGV4dHVyZS5jcmVhdGUoeyB3aWR0aDogMTAwLCBoZWlnaHQ6IDEwMCB9KTtcbiAqXG4gKiByZW5kZXJlci5yZW5kZXIoc3ByaXRlLCB7cmVuZGVyVGV4dHVyZX0pOyAgLy8gUmVuZGVycyB0byBjZW50ZXIgb2YgUmVuZGVyVGV4dHVyZVxuICogYGBgXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG52YXIgUmVuZGVyVGV4dHVyZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUmVuZGVyVGV4dHVyZSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gYmFzZVJlbmRlclRleHR1cmUgLSBUaGUgYmFzZSB0ZXh0dXJlIG9iamVjdCB0aGF0IHRoaXMgdGV4dHVyZSB1c2VzLlxuICAgICAqIEBwYXJhbSBmcmFtZSAtIFRoZSByZWN0YW5nbGUgZnJhbWUgb2YgdGhlIHRleHR1cmUgdG8gc2hvdy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBSZW5kZXJUZXh0dXJlKGJhc2VSZW5kZXJUZXh0dXJlLCBmcmFtZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBiYXNlUmVuZGVyVGV4dHVyZSwgZnJhbWUpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnZhbGlkID0gdHJ1ZTtcbiAgICAgICAgX3RoaXMuZmlsdGVyRnJhbWUgPSBudWxsO1xuICAgICAgICBfdGhpcy5maWx0ZXJQb29sS2V5ID0gbnVsbDtcbiAgICAgICAgX3RoaXMudXBkYXRlVXZzKCk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlbmRlclRleHR1cmUucHJvdG90eXBlLCBcImZyYW1lYnVmZmVyXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNob3J0Y3V0IHRvIGB0aGlzLmJhc2VUZXh0dXJlLmZyYW1lYnVmZmVyYCwgc2F2ZXMgYmFzZVRleHR1cmUgY2FzdC5cbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJhc2VUZXh0dXJlLmZyYW1lYnVmZmVyO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlbmRlclRleHR1cmUucHJvdG90eXBlLCBcIm11bHRpc2FtcGxlXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNob3J0Y3V0IHRvIGB0aGlzLmZyYW1lYnVmZmVyLm11bHRpc2FtcGxlYC5cbiAgICAgICAgICogQGRlZmF1bHQgUElYSS5NU0FBX1FVQUxJVFkuTk9ORVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mcmFtZWJ1ZmZlci5tdWx0aXNhbXBsZTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuZnJhbWVidWZmZXIubXVsdGlzYW1wbGUgPSB2YWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIC8qKlxuICAgICAqIFJlc2l6ZXMgdGhlIFJlbmRlclRleHR1cmUuXG4gICAgICogQHBhcmFtIGRlc2lyZWRXaWR0aCAtIFRoZSBkZXNpcmVkIHdpZHRoIHRvIHJlc2l6ZSB0by5cbiAgICAgKiBAcGFyYW0gZGVzaXJlZEhlaWdodCAtIFRoZSBkZXNpcmVkIGhlaWdodCB0byByZXNpemUgdG8uXG4gICAgICogQHBhcmFtIHJlc2l6ZUJhc2VUZXh0dXJlIC0gU2hvdWxkIHRoZSBiYXNlVGV4dHVyZS53aWR0aCBhbmQgaGVpZ2h0IHZhbHVlcyBiZSByZXNpemVkIGFzIHdlbGw/XG4gICAgICovXG4gICAgUmVuZGVyVGV4dHVyZS5wcm90b3R5cGUucmVzaXplID0gZnVuY3Rpb24gKGRlc2lyZWRXaWR0aCwgZGVzaXJlZEhlaWdodCwgcmVzaXplQmFzZVRleHR1cmUpIHtcbiAgICAgICAgaWYgKHJlc2l6ZUJhc2VUZXh0dXJlID09PSB2b2lkIDApIHsgcmVzaXplQmFzZVRleHR1cmUgPSB0cnVlOyB9XG4gICAgICAgIHZhciByZXNvbHV0aW9uID0gdGhpcy5iYXNlVGV4dHVyZS5yZXNvbHV0aW9uO1xuICAgICAgICB2YXIgd2lkdGggPSBNYXRoLnJvdW5kKGRlc2lyZWRXaWR0aCAqIHJlc29sdXRpb24pIC8gcmVzb2x1dGlvbjtcbiAgICAgICAgdmFyIGhlaWdodCA9IE1hdGgucm91bmQoZGVzaXJlZEhlaWdodCAqIHJlc29sdXRpb24pIC8gcmVzb2x1dGlvbjtcbiAgICAgICAgLy8gVE9ETyAtIGNvdWxkIGJlIG5vdCByZXF1aXJlZC4uXG4gICAgICAgIHRoaXMudmFsaWQgPSAod2lkdGggPiAwICYmIGhlaWdodCA+IDApO1xuICAgICAgICB0aGlzLl9mcmFtZS53aWR0aCA9IHRoaXMub3JpZy53aWR0aCA9IHdpZHRoO1xuICAgICAgICB0aGlzLl9mcmFtZS5oZWlnaHQgPSB0aGlzLm9yaWcuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICBpZiAocmVzaXplQmFzZVRleHR1cmUpIHtcbiAgICAgICAgICAgIHRoaXMuYmFzZVRleHR1cmUucmVzaXplKHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlVXZzKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDaGFuZ2VzIHRoZSByZXNvbHV0aW9uIG9mIGJhc2VUZXh0dXJlLCBidXQgZG9lcyBub3QgY2hhbmdlIGZyYW1lYnVmZmVyIHNpemUuXG4gICAgICogQHBhcmFtIHJlc29sdXRpb24gLSBUaGUgbmV3IHJlc29sdXRpb24gdG8gYXBwbHkgdG8gUmVuZGVyVGV4dHVyZVxuICAgICAqL1xuICAgIFJlbmRlclRleHR1cmUucHJvdG90eXBlLnNldFJlc29sdXRpb24gPSBmdW5jdGlvbiAocmVzb2x1dGlvbikge1xuICAgICAgICB2YXIgYmFzZVRleHR1cmUgPSB0aGlzLmJhc2VUZXh0dXJlO1xuICAgICAgICBpZiAoYmFzZVRleHR1cmUucmVzb2x1dGlvbiA9PT0gcmVzb2x1dGlvbikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGJhc2VUZXh0dXJlLnNldFJlc29sdXRpb24ocmVzb2x1dGlvbik7XG4gICAgICAgIHRoaXMucmVzaXplKGJhc2VUZXh0dXJlLndpZHRoLCBiYXNlVGV4dHVyZS5oZWlnaHQsIGZhbHNlKTtcbiAgICB9O1xuICAgIFJlbmRlclRleHR1cmUuY3JlYXRlID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIGFyZ3VtZW50cyQxID0gYXJndW1lbnRzO1xuXG4gICAgICAgIHZhciByZXN0ID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICByZXN0W19pIC0gMV0gPSBhcmd1bWVudHMkMVtfaV07XG4gICAgICAgIH1cbiAgICAgICAgLy8gQGRlcHJlY2F0ZWQgZmFsbGJhY2ssIG9sZC1zdHlsZTogY3JlYXRlKHdpZHRoLCBoZWlnaHQsIHNjYWxlTW9kZSwgcmVzb2x1dGlvbilcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgdXRpbHMuZGVwcmVjYXRpb24oJzYuMC4wJywgJ0FyZ3VtZW50cyAod2lkdGgsIGhlaWdodCwgc2NhbGVNb2RlLCByZXNvbHV0aW9uKSBoYXZlIGJlZW4gZGVwcmVjYXRlZC4nKTtcbiAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIHByZWZlci1yZXN0LXBhcmFtcyAqL1xuICAgICAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICB3aWR0aDogb3B0aW9ucyxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHJlc3RbMF0sXG4gICAgICAgICAgICAgICAgc2NhbGVNb2RlOiByZXN0WzFdLFxuICAgICAgICAgICAgICAgIHJlc29sdXRpb246IHJlc3RbMl0sXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLyogZXNsaW50LWVuYWJsZSBwcmVmZXItcmVzdC1wYXJhbXMgKi9cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFJlbmRlclRleHR1cmUobmV3IEJhc2VSZW5kZXJUZXh0dXJlKG9wdGlvbnMpKTtcbiAgICB9O1xuICAgIHJldHVybiBSZW5kZXJUZXh0dXJlO1xufShUZXh0dXJlKSk7XG5cbi8qKlxuICogVGV4dHVyZSBwb29sLCB1c2VkIGJ5IEZpbHRlclN5c3RlbSBhbmQgcGx1Z2lucy5cbiAqXG4gKiBTdG9yZXMgY29sbGVjdGlvbiBvZiB0ZW1wb3JhcnkgcG93MiBvciBzY3JlZW4tc2l6ZWQgcmVuZGVyVGV4dHVyZXNcbiAqXG4gKiBJZiB5b3UgdXNlIGN1c3RvbSBSZW5kZXJUZXh0dXJlUG9vbCBmb3IgeW91ciBmaWx0ZXJzLCB5b3UgY2FuIHVzZSBtZXRob2RzXG4gKiBgZ2V0RmlsdGVyVGV4dHVyZWAgYW5kIGByZXR1cm5GaWx0ZXJUZXh0dXJlYCBzYW1lIGFzIGluXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG52YXIgUmVuZGVyVGV4dHVyZVBvb2wgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHRleHR1cmVPcHRpb25zIC0gb3B0aW9ucyB0aGF0IHdpbGwgYmUgcGFzc2VkIHRvIEJhc2VSZW5kZXJUZXh0dXJlIGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtQSVhJLlNDQUxFX01PREVTfSBbdGV4dHVyZU9wdGlvbnMuc2NhbGVNb2RlXSAtIFNlZSB7QGxpbmsgUElYSS5TQ0FMRV9NT0RFU30gZm9yIHBvc3NpYmxlIHZhbHVlcy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBSZW5kZXJUZXh0dXJlUG9vbCh0ZXh0dXJlT3B0aW9ucykge1xuICAgICAgICB0aGlzLnRleHR1cmVQb29sID0ge307XG4gICAgICAgIHRoaXMudGV4dHVyZU9wdGlvbnMgPSB0ZXh0dXJlT3B0aW9ucyB8fCB7fTtcbiAgICAgICAgdGhpcy5lbmFibGVGdWxsU2NyZWVuID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX3BpeGVsc1dpZHRoID0gMDtcbiAgICAgICAgdGhpcy5fcGl4ZWxzSGVpZ2h0ID0gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyB0ZXh0dXJlIHdpdGggcGFyYW1zIHRoYXQgd2VyZSBzcGVjaWZpZWQgaW4gcG9vbCBjb25zdHJ1Y3Rvci5cbiAgICAgKiBAcGFyYW0gcmVhbFdpZHRoIC0gV2lkdGggb2YgdGV4dHVyZSBpbiBwaXhlbHMuXG4gICAgICogQHBhcmFtIHJlYWxIZWlnaHQgLSBIZWlnaHQgb2YgdGV4dHVyZSBpbiBwaXhlbHMuXG4gICAgICogQHBhcmFtIG11bHRpc2FtcGxlIC0gTnVtYmVyIG9mIHNhbXBsZXMgb2YgdGhlIGZyYW1lYnVmZmVyLlxuICAgICAqL1xuICAgIFJlbmRlclRleHR1cmVQb29sLnByb3RvdHlwZS5jcmVhdGVUZXh0dXJlID0gZnVuY3Rpb24gKHJlYWxXaWR0aCwgcmVhbEhlaWdodCwgbXVsdGlzYW1wbGUpIHtcbiAgICAgICAgaWYgKG11bHRpc2FtcGxlID09PSB2b2lkIDApIHsgbXVsdGlzYW1wbGUgPSBjb25zdGFudHMuTVNBQV9RVUFMSVRZLk5PTkU7IH1cbiAgICAgICAgdmFyIGJhc2VSZW5kZXJUZXh0dXJlID0gbmV3IEJhc2VSZW5kZXJUZXh0dXJlKE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgICAgd2lkdGg6IHJlYWxXaWR0aCxcbiAgICAgICAgICAgIGhlaWdodDogcmVhbEhlaWdodCxcbiAgICAgICAgICAgIHJlc29sdXRpb246IDEsXG4gICAgICAgICAgICBtdWx0aXNhbXBsZTogbXVsdGlzYW1wbGUsXG4gICAgICAgIH0sIHRoaXMudGV4dHVyZU9wdGlvbnMpKTtcbiAgICAgICAgcmV0dXJuIG5ldyBSZW5kZXJUZXh0dXJlKGJhc2VSZW5kZXJUZXh0dXJlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldHMgYSBQb3dlci1vZi1Ud28gcmVuZGVyIHRleHR1cmUgb3IgZnVsbFNjcmVlbiB0ZXh0dXJlXG4gICAgICogQHBhcmFtIG1pbldpZHRoIC0gVGhlIG1pbmltdW0gd2lkdGggb2YgdGhlIHJlbmRlciB0ZXh0dXJlLlxuICAgICAqIEBwYXJhbSBtaW5IZWlnaHQgLSBUaGUgbWluaW11bSBoZWlnaHQgb2YgdGhlIHJlbmRlciB0ZXh0dXJlLlxuICAgICAqIEBwYXJhbSByZXNvbHV0aW9uIC0gVGhlIHJlc29sdXRpb24gb2YgdGhlIHJlbmRlciB0ZXh0dXJlLlxuICAgICAqIEBwYXJhbSBtdWx0aXNhbXBsZSAtIE51bWJlciBvZiBzYW1wbGVzIG9mIHRoZSByZW5kZXIgdGV4dHVyZS5cbiAgICAgKiBAcmV0dXJucyBUaGUgbmV3IHJlbmRlciB0ZXh0dXJlLlxuICAgICAqL1xuICAgIFJlbmRlclRleHR1cmVQb29sLnByb3RvdHlwZS5nZXRPcHRpbWFsVGV4dHVyZSA9IGZ1bmN0aW9uIChtaW5XaWR0aCwgbWluSGVpZ2h0LCByZXNvbHV0aW9uLCBtdWx0aXNhbXBsZSkge1xuICAgICAgICBpZiAocmVzb2x1dGlvbiA9PT0gdm9pZCAwKSB7IHJlc29sdXRpb24gPSAxOyB9XG4gICAgICAgIGlmIChtdWx0aXNhbXBsZSA9PT0gdm9pZCAwKSB7IG11bHRpc2FtcGxlID0gY29uc3RhbnRzLk1TQUFfUVVBTElUWS5OT05FOyB9XG4gICAgICAgIHZhciBrZXk7XG4gICAgICAgIG1pbldpZHRoID0gTWF0aC5jZWlsKChtaW5XaWR0aCAqIHJlc29sdXRpb24pIC0gMWUtNik7XG4gICAgICAgIG1pbkhlaWdodCA9IE1hdGguY2VpbCgobWluSGVpZ2h0ICogcmVzb2x1dGlvbikgLSAxZS02KTtcbiAgICAgICAgaWYgKCF0aGlzLmVuYWJsZUZ1bGxTY3JlZW4gfHwgbWluV2lkdGggIT09IHRoaXMuX3BpeGVsc1dpZHRoIHx8IG1pbkhlaWdodCAhPT0gdGhpcy5fcGl4ZWxzSGVpZ2h0KSB7XG4gICAgICAgICAgICBtaW5XaWR0aCA9IHV0aWxzLm5leHRQb3cyKG1pbldpZHRoKTtcbiAgICAgICAgICAgIG1pbkhlaWdodCA9IHV0aWxzLm5leHRQb3cyKG1pbkhlaWdodCk7XG4gICAgICAgICAgICBrZXkgPSAoKChtaW5XaWR0aCAmIDB4RkZGRikgPDwgMTYpIHwgKG1pbkhlaWdodCAmIDB4RkZGRikpID4+PiAwO1xuICAgICAgICAgICAgaWYgKG11bHRpc2FtcGxlID4gMSkge1xuICAgICAgICAgICAgICAgIGtleSArPSBtdWx0aXNhbXBsZSAqIDB4MTAwMDAwMDAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAga2V5ID0gbXVsdGlzYW1wbGUgPiAxID8gLW11bHRpc2FtcGxlIDogLTE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLnRleHR1cmVQb29sW2tleV0pIHtcbiAgICAgICAgICAgIHRoaXMudGV4dHVyZVBvb2xba2V5XSA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHZhciByZW5kZXJUZXh0dXJlID0gdGhpcy50ZXh0dXJlUG9vbFtrZXldLnBvcCgpO1xuICAgICAgICBpZiAoIXJlbmRlclRleHR1cmUpIHtcbiAgICAgICAgICAgIHJlbmRlclRleHR1cmUgPSB0aGlzLmNyZWF0ZVRleHR1cmUobWluV2lkdGgsIG1pbkhlaWdodCwgbXVsdGlzYW1wbGUpO1xuICAgICAgICB9XG4gICAgICAgIHJlbmRlclRleHR1cmUuZmlsdGVyUG9vbEtleSA9IGtleTtcbiAgICAgICAgcmVuZGVyVGV4dHVyZS5zZXRSZXNvbHV0aW9uKHJlc29sdXRpb24pO1xuICAgICAgICByZXR1cm4gcmVuZGVyVGV4dHVyZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldHMgZXh0cmEgdGV4dHVyZSBvZiB0aGUgc2FtZSBzaXplIGFzIGlucHV0IHJlbmRlclRleHR1cmVcbiAgICAgKlxuICAgICAqIGBnZXRGaWx0ZXJUZXh0dXJlKGlucHV0LCAwLjUpYCBvciBgZ2V0RmlsdGVyVGV4dHVyZSgwLjUsIGlucHV0KWBcbiAgICAgKiBAcGFyYW0gaW5wdXQgLSByZW5kZXJUZXh0dXJlIGZyb20gd2hpY2ggc2l6ZSBhbmQgcmVzb2x1dGlvbiB3aWxsIGJlIGNvcGllZFxuICAgICAqIEBwYXJhbSByZXNvbHV0aW9uIC0gb3ZlcnJpZGUgcmVzb2x1dGlvbiBvZiB0aGUgcmVuZGVyVGV4dHVyZVxuICAgICAqICBJdCBvdmVycmlkZXMsIGl0IGRvZXMgbm90IG11bHRpcGx5XG4gICAgICogQHBhcmFtIG11bHRpc2FtcGxlIC0gbnVtYmVyIG9mIHNhbXBsZXMgb2YgdGhlIHJlbmRlclRleHR1cmVcbiAgICAgKi9cbiAgICBSZW5kZXJUZXh0dXJlUG9vbC5wcm90b3R5cGUuZ2V0RmlsdGVyVGV4dHVyZSA9IGZ1bmN0aW9uIChpbnB1dCwgcmVzb2x1dGlvbiwgbXVsdGlzYW1wbGUpIHtcbiAgICAgICAgdmFyIGZpbHRlclRleHR1cmUgPSB0aGlzLmdldE9wdGltYWxUZXh0dXJlKGlucHV0LndpZHRoLCBpbnB1dC5oZWlnaHQsIHJlc29sdXRpb24gfHwgaW5wdXQucmVzb2x1dGlvbiwgbXVsdGlzYW1wbGUgfHwgY29uc3RhbnRzLk1TQUFfUVVBTElUWS5OT05FKTtcbiAgICAgICAgZmlsdGVyVGV4dHVyZS5maWx0ZXJGcmFtZSA9IGlucHV0LmZpbHRlckZyYW1lO1xuICAgICAgICByZXR1cm4gZmlsdGVyVGV4dHVyZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFBsYWNlIGEgcmVuZGVyIHRleHR1cmUgYmFjayBpbnRvIHRoZSBwb29sLlxuICAgICAqIEBwYXJhbSByZW5kZXJUZXh0dXJlIC0gVGhlIHJlbmRlclRleHR1cmUgdG8gZnJlZVxuICAgICAqL1xuICAgIFJlbmRlclRleHR1cmVQb29sLnByb3RvdHlwZS5yZXR1cm5UZXh0dXJlID0gZnVuY3Rpb24gKHJlbmRlclRleHR1cmUpIHtcbiAgICAgICAgdmFyIGtleSA9IHJlbmRlclRleHR1cmUuZmlsdGVyUG9vbEtleTtcbiAgICAgICAgcmVuZGVyVGV4dHVyZS5maWx0ZXJGcmFtZSA9IG51bGw7XG4gICAgICAgIHRoaXMudGV4dHVyZVBvb2xba2V5XS5wdXNoKHJlbmRlclRleHR1cmUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQWxpYXMgZm9yIHJldHVyblRleHR1cmUsIHRvIGJlIGNvbXBsaWFudCB3aXRoIEZpbHRlclN5c3RlbSBpbnRlcmZhY2UuXG4gICAgICogQHBhcmFtIHJlbmRlclRleHR1cmUgLSBUaGUgcmVuZGVyVGV4dHVyZSB0byBmcmVlXG4gICAgICovXG4gICAgUmVuZGVyVGV4dHVyZVBvb2wucHJvdG90eXBlLnJldHVybkZpbHRlclRleHR1cmUgPSBmdW5jdGlvbiAocmVuZGVyVGV4dHVyZSkge1xuICAgICAgICB0aGlzLnJldHVyblRleHR1cmUocmVuZGVyVGV4dHVyZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDbGVhcnMgdGhlIHBvb2wuXG4gICAgICogQHBhcmFtIGRlc3Ryb3lUZXh0dXJlcyAtIERlc3Ryb3kgYWxsIHN0b3JlZCB0ZXh0dXJlcy5cbiAgICAgKi9cbiAgICBSZW5kZXJUZXh0dXJlUG9vbC5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoZGVzdHJveVRleHR1cmVzKSB7XG4gICAgICAgIGRlc3Ryb3lUZXh0dXJlcyA9IGRlc3Ryb3lUZXh0dXJlcyAhPT0gZmFsc2U7XG4gICAgICAgIGlmIChkZXN0cm95VGV4dHVyZXMpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgaW4gdGhpcy50ZXh0dXJlUG9vbCkge1xuICAgICAgICAgICAgICAgIHZhciB0ZXh0dXJlcyA9IHRoaXMudGV4dHVyZVBvb2xbaV07XG4gICAgICAgICAgICAgICAgaWYgKHRleHR1cmVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGV4dHVyZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHR1cmVzW2pdLmRlc3Ryb3kodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50ZXh0dXJlUG9vbCA9IHt9O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSWYgc2NyZWVuIHNpemUgd2FzIGNoYW5nZWQsIGRyb3BzIGFsbCBzY3JlZW4tc2l6ZWQgdGV4dHVyZXMsXG4gICAgICogc2V0cyBuZXcgc2NyZWVuIHNpemUsIHNldHMgYGVuYWJsZUZ1bGxTY3JlZW5gIHRvIHRydWVcbiAgICAgKlxuICAgICAqIFNpemUgaXMgbWVhc3VyZWQgaW4gcGl4ZWxzLCBgcmVuZGVyZXIudmlld2AgY2FuIGJlIHBhc3NlZCBoZXJlLCBub3QgYHJlbmRlcmVyLnNjcmVlbmBcbiAgICAgKiBAcGFyYW0gc2l6ZSAtIEluaXRpYWwgc2l6ZSBvZiBzY3JlZW4uXG4gICAgICovXG4gICAgUmVuZGVyVGV4dHVyZVBvb2wucHJvdG90eXBlLnNldFNjcmVlblNpemUgPSBmdW5jdGlvbiAoc2l6ZSkge1xuICAgICAgICBpZiAoc2l6ZS53aWR0aCA9PT0gdGhpcy5fcGl4ZWxzV2lkdGhcbiAgICAgICAgICAgICYmIHNpemUuaGVpZ2h0ID09PSB0aGlzLl9waXhlbHNIZWlnaHQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVuYWJsZUZ1bGxTY3JlZW4gPSBzaXplLndpZHRoID4gMCAmJiBzaXplLmhlaWdodCA+IDA7XG4gICAgICAgIGZvciAodmFyIGkgaW4gdGhpcy50ZXh0dXJlUG9vbCkge1xuICAgICAgICAgICAgaWYgKCEoTnVtYmVyKGkpIDwgMCkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB0ZXh0dXJlcyA9IHRoaXMudGV4dHVyZVBvb2xbaV07XG4gICAgICAgICAgICBpZiAodGV4dHVyZXMpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRleHR1cmVzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRleHR1cmVzW2pdLmRlc3Ryb3kodHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50ZXh0dXJlUG9vbFtpXSA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3BpeGVsc1dpZHRoID0gc2l6ZS53aWR0aDtcbiAgICAgICAgdGhpcy5fcGl4ZWxzSGVpZ2h0ID0gc2l6ZS5oZWlnaHQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBLZXkgdGhhdCBpcyB1c2VkIHRvIHN0b3JlIGZ1bGxzY3JlZW4gcmVuZGVyVGV4dHVyZXMgaW4gYSBwb29sXG4gICAgICogQGNvbnN0YW50XG4gICAgICovXG4gICAgUmVuZGVyVGV4dHVyZVBvb2wuU0NSRUVOX0tFWSA9IC0xO1xuICAgIHJldHVybiBSZW5kZXJUZXh0dXJlUG9vbDtcbn0oKSk7XG5cbi8qIGVzbGludC1kaXNhYmxlIG1heC1sZW4gKi9cbi8qKlxuICogSG9sZHMgdGhlIGluZm9ybWF0aW9uIGZvciBhIHNpbmdsZSBhdHRyaWJ1dGUgc3RydWN0dXJlIHJlcXVpcmVkIHRvIHJlbmRlciBnZW9tZXRyeS5cbiAqXG4gKiBUaGlzIGRvZXMgbm90IGNvbnRhaW4gdGhlIGFjdHVhbCBkYXRhLCBidXQgaW5zdGVhZCBoYXMgYSBidWZmZXIgaWQgdGhhdCBtYXBzIHRvIGEge0BsaW5rIFBJWEkuQnVmZmVyfVxuICogVGhpcyBjYW4gaW5jbHVkZSBhbnl0aGluZyBmcm9tIHBvc2l0aW9ucywgdXZzLCBub3JtYWxzLCBjb2xvcnMgZXRjLlxuICogQG1lbWJlcm9mIFBJWElcbiAqL1xudmFyIEF0dHJpYnV0ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gYnVmZmVyIC0gdGhlIGlkIG9mIHRoZSBidWZmZXIgdGhhdCB0aGlzIGF0dHJpYnV0ZSB3aWxsIGxvb2sgZm9yXG4gICAgICogQHBhcmFtIHNpemUgLSB0aGUgc2l6ZSBvZiB0aGUgYXR0cmlidXRlLiBJZiB5b3UgaGF2ZSAyIGZsb2F0cyBwZXIgdmVydGV4IChlZyBwb3NpdGlvbiB4IGFuZCB5KSB0aGlzIHdvdWxkIGJlIDIuXG4gICAgICogQHBhcmFtIG5vcm1hbGl6ZWQgLSBzaG91bGQgdGhlIGRhdGEgYmUgbm9ybWFsaXplZC5cbiAgICAgKiBAcGFyYW0ge1BJWEkuVFlQRVN9IFt0eXBlPVBJWEkuVFlQRVMuRkxPQVRdIC0gd2hhdCB0eXBlIG9mIG51bWJlciBpcyB0aGUgYXR0cmlidXRlLiBDaGVjayB7QGxpbmsgUElYSS5UWVBFU30gdG8gc2VlIHRoZSBvbmVzIGF2YWlsYWJsZVxuICAgICAqIEBwYXJhbSBbc3RyaWRlPTBdIC0gSG93IGZhciBhcGFydCwgaW4gYnl0ZXMsIHRoZSBzdGFydCBvZiBlYWNoIHZhbHVlIGlzLiAodXNlZCBmb3IgaW50ZXJsZWF2aW5nIGRhdGEpXG4gICAgICogQHBhcmFtIFtzdGFydD0wXSAtIEhvdyBmYXIgaW50byB0aGUgYXJyYXkgdG8gc3RhcnQgcmVhZGluZyB2YWx1ZXMgKHVzZWQgZm9yIGludGVybGVhdmluZyBkYXRhKVxuICAgICAqIEBwYXJhbSBbaW5zdGFuY2U9ZmFsc2VdIC0gV2hldGhlciB0aGUgZ2VvbWV0cnkgaXMgaW5zdGFuY2VkLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEF0dHJpYnV0ZShidWZmZXIsIHNpemUsIG5vcm1hbGl6ZWQsIHR5cGUsIHN0cmlkZSwgc3RhcnQsIGluc3RhbmNlKSB7XG4gICAgICAgIGlmIChzaXplID09PSB2b2lkIDApIHsgc2l6ZSA9IDA7IH1cbiAgICAgICAgaWYgKG5vcm1hbGl6ZWQgPT09IHZvaWQgMCkgeyBub3JtYWxpemVkID0gZmFsc2U7IH1cbiAgICAgICAgaWYgKHR5cGUgPT09IHZvaWQgMCkgeyB0eXBlID0gY29uc3RhbnRzLlRZUEVTLkZMT0FUOyB9XG4gICAgICAgIHRoaXMuYnVmZmVyID0gYnVmZmVyO1xuICAgICAgICB0aGlzLnNpemUgPSBzaXplO1xuICAgICAgICB0aGlzLm5vcm1hbGl6ZWQgPSBub3JtYWxpemVkO1xuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgICAgICB0aGlzLnN0cmlkZSA9IHN0cmlkZTtcbiAgICAgICAgdGhpcy5zdGFydCA9IHN0YXJ0O1xuICAgICAgICB0aGlzLmluc3RhbmNlID0gaW5zdGFuY2U7XG4gICAgfVxuICAgIC8qKiBEZXN0cm95cyB0aGUgQXR0cmlidXRlLiAqL1xuICAgIEF0dHJpYnV0ZS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5idWZmZXIgPSBudWxsO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSGVscGVyIGZ1bmN0aW9uIHRoYXQgY3JlYXRlcyBhbiBBdHRyaWJ1dGUgYmFzZWQgb24gdGhlIGluZm9ybWF0aW9uIHByb3ZpZGVkXG4gICAgICogQHBhcmFtIGJ1ZmZlciAtIHRoZSBpZCBvZiB0aGUgYnVmZmVyIHRoYXQgdGhpcyBhdHRyaWJ1dGUgd2lsbCBsb29rIGZvclxuICAgICAqIEBwYXJhbSBbc2l6ZT0wXSAtIHRoZSBzaXplIG9mIHRoZSBhdHRyaWJ1dGUuIElmIHlvdSBoYXZlIDIgZmxvYXRzIHBlciB2ZXJ0ZXggKGVnIHBvc2l0aW9uIHggYW5kIHkpIHRoaXMgd291bGQgYmUgMlxuICAgICAqIEBwYXJhbSBbbm9ybWFsaXplZD1mYWxzZV0gLSBzaG91bGQgdGhlIGRhdGEgYmUgbm9ybWFsaXplZC5cbiAgICAgKiBAcGFyYW0gW3R5cGU9UElYSS5UWVBFUy5GTE9BVF0gLSB3aGF0IHR5cGUgb2YgbnVtYmVyIGlzIHRoZSBhdHRyaWJ1dGUuIENoZWNrIHtAbGluayBQSVhJLlRZUEVTfSB0byBzZWUgdGhlIG9uZXMgYXZhaWxhYmxlXG4gICAgICogQHBhcmFtIFtzdHJpZGU9MF0gLSBIb3cgZmFyIGFwYXJ0LCBpbiBieXRlcywgdGhlIHN0YXJ0IG9mIGVhY2ggdmFsdWUgaXMuICh1c2VkIGZvciBpbnRlcmxlYXZpbmcgZGF0YSlcbiAgICAgKiBAcmV0dXJucyAtIEEgbmV3IHtAbGluayBQSVhJLkF0dHJpYnV0ZX0gYmFzZWQgb24gdGhlIGluZm9ybWF0aW9uIHByb3ZpZGVkXG4gICAgICovXG4gICAgQXR0cmlidXRlLmZyb20gPSBmdW5jdGlvbiAoYnVmZmVyLCBzaXplLCBub3JtYWxpemVkLCB0eXBlLCBzdHJpZGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBdHRyaWJ1dGUoYnVmZmVyLCBzaXplLCBub3JtYWxpemVkLCB0eXBlLCBzdHJpZGUpO1xuICAgIH07XG4gICAgcmV0dXJuIEF0dHJpYnV0ZTtcbn0oKSk7XG5cbnZhciBVSUQkNCA9IDA7XG4vKipcbiAqIEEgd3JhcHBlciBmb3IgZGF0YSBzbyB0aGF0IGl0IGNhbiBiZSB1c2VkIGFuZCB1cGxvYWRlZCBieSBXZWJHTFxuICogQG1lbWJlcm9mIFBJWElcbiAqL1xudmFyIEJ1ZmZlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1BJWEkuSUFycmF5QnVmZmVyfSBkYXRhIC0gdGhlIGRhdGEgdG8gc3RvcmUgaW4gdGhlIGJ1ZmZlci5cbiAgICAgKiBAcGFyYW0gX3N0YXRpYyAtIGB0cnVlYCBmb3Igc3RhdGljIGJ1ZmZlclxuICAgICAqIEBwYXJhbSBpbmRleCAtIGB0cnVlYCBmb3IgaW5kZXggYnVmZmVyXG4gICAgICovXG4gICAgZnVuY3Rpb24gQnVmZmVyKGRhdGEsIF9zdGF0aWMsIGluZGV4KSB7XG4gICAgICAgIGlmIChfc3RhdGljID09PSB2b2lkIDApIHsgX3N0YXRpYyA9IHRydWU7IH1cbiAgICAgICAgaWYgKGluZGV4ID09PSB2b2lkIDApIHsgaW5kZXggPSBmYWxzZTsgfVxuICAgICAgICB0aGlzLmRhdGEgPSAoZGF0YSB8fCBuZXcgRmxvYXQzMkFycmF5KDEpKTtcbiAgICAgICAgdGhpcy5fZ2xCdWZmZXJzID0ge307XG4gICAgICAgIHRoaXMuX3VwZGF0ZUlEID0gMDtcbiAgICAgICAgdGhpcy5pbmRleCA9IGluZGV4O1xuICAgICAgICB0aGlzLnN0YXRpYyA9IF9zdGF0aWM7XG4gICAgICAgIHRoaXMuaWQgPSBVSUQkNCsrO1xuICAgICAgICB0aGlzLmRpc3Bvc2VSdW5uZXIgPSBuZXcgcnVubmVyLlJ1bm5lcignZGlzcG9zZUJ1ZmZlcicpO1xuICAgIH1cbiAgICAvLyBUT0RPIGNvdWxkIGV4cGxvcmUgZmxhZ2dpbmcgb25seSBhIHBhcnRpYWwgdXBsb2FkP1xuICAgIC8qKlxuICAgICAqIEZsYWdzIHRoaXMgYnVmZmVyIGFzIHJlcXVpcmluZyBhbiB1cGxvYWQgdG8gdGhlIEdQVS5cbiAgICAgKiBAcGFyYW0ge1BJWEkuSUFycmF5QnVmZmVyfG51bWJlcltdfSBbZGF0YV0gLSB0aGUgZGF0YSB0byB1cGRhdGUgaW4gdGhlIGJ1ZmZlci5cbiAgICAgKi9cbiAgICBCdWZmZXIucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIGlmIChkYXRhIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgICAgIGRhdGEgPSBuZXcgRmxvYXQzMkFycmF5KGRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGEgfHwgdGhpcy5kYXRhO1xuICAgICAgICB0aGlzLl91cGRhdGVJRCsrO1xuICAgIH07XG4gICAgLyoqIERpc3Bvc2VzIFdlYkdMIHJlc291cmNlcyB0aGF0IGFyZSBjb25uZWN0ZWQgdG8gdGhpcyBnZW9tZXRyeS4gKi9cbiAgICBCdWZmZXIucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZGlzcG9zZVJ1bm5lci5lbWl0KHRoaXMsIGZhbHNlKTtcbiAgICB9O1xuICAgIC8qKiBEZXN0cm95cyB0aGUgYnVmZmVyLiAqL1xuICAgIEJ1ZmZlci5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgIHRoaXMuZGF0YSA9IG51bGw7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQnVmZmVyLnByb3RvdHlwZSwgXCJpbmRleFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudHlwZSA9PT0gY29uc3RhbnRzLkJVRkZFUl9UWVBFLkVMRU1FTlRfQVJSQVlfQlVGRkVSO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICogRmxhZ3Mgd2hldGhlciB0aGlzIGlzIGFuIGluZGV4IGJ1ZmZlci5cbiAgICAgICAgICpcbiAgICAgICAgICogSW5kZXggYnVmZmVycyBhcmUgb2YgdHlwZSBgRUxFTUVOVF9BUlJBWV9CVUZGRVJgLiBOb3RlIHRoYXQgc2V0dGluZyB0aGlzIHByb3BlcnR5IHRvIGZhbHNlIHdpbGwgbWFrZVxuICAgICAgICAgKiB0aGUgYnVmZmVyIG9mIHR5cGUgYEFSUkFZX0JVRkZFUmAuXG4gICAgICAgICAqXG4gICAgICAgICAqIEZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eS5cbiAgICAgICAgICovXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnR5cGUgPSB2YWx1ZSA/IGNvbnN0YW50cy5CVUZGRVJfVFlQRS5FTEVNRU5UX0FSUkFZX0JVRkZFUiA6IGNvbnN0YW50cy5CVUZGRVJfVFlQRS5BUlJBWV9CVUZGRVI7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICAvKipcbiAgICAgKiBIZWxwZXIgZnVuY3Rpb24gdGhhdCBjcmVhdGVzIGEgYnVmZmVyIGJhc2VkIG9uIGFuIGFycmF5IG9yIFR5cGVkQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5QnVmZmVyVmlldyB8IG51bWJlcltdfSBkYXRhIC0gdGhlIFR5cGVkQXJyYXkgdGhhdCB0aGUgYnVmZmVyIHdpbGwgc3RvcmUuIElmIHRoaXMgaXMgYSByZWd1bGFyIEFycmF5IGl0IHdpbGwgYmUgY29udmVydGVkIHRvIGEgRmxvYXQzMkFycmF5LlxuICAgICAqIEByZXR1cm5zIC0gQSBuZXcgQnVmZmVyIGJhc2VkIG9uIHRoZSBkYXRhIHByb3ZpZGVkLlxuICAgICAqL1xuICAgIEJ1ZmZlci5mcm9tID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgaWYgKGRhdGEgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgZGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkoZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBCdWZmZXIoZGF0YSk7XG4gICAgfTtcbiAgICByZXR1cm4gQnVmZmVyO1xufSgpKTtcblxuLyogZXNsaW50LWRpc2FibGUgb2JqZWN0LXNob3J0aGFuZCAqL1xudmFyIG1hcCQxID0ge1xuICAgIEZsb2F0MzJBcnJheTogRmxvYXQzMkFycmF5LFxuICAgIFVpbnQzMkFycmF5OiBVaW50MzJBcnJheSxcbiAgICBJbnQzMkFycmF5OiBJbnQzMkFycmF5LFxuICAgIFVpbnQ4QXJyYXk6IFVpbnQ4QXJyYXksXG59O1xuZnVuY3Rpb24gaW50ZXJsZWF2ZVR5cGVkQXJyYXlzKGFycmF5cywgc2l6ZXMpIHtcbiAgICB2YXIgb3V0U2l6ZSA9IDA7XG4gICAgdmFyIHN0cmlkZSA9IDA7XG4gICAgdmFyIHZpZXdzID0ge307XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgc3RyaWRlICs9IHNpemVzW2ldO1xuICAgICAgICBvdXRTaXplICs9IGFycmF5c1tpXS5sZW5ndGg7XG4gICAgfVxuICAgIHZhciBidWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIob3V0U2l6ZSAqIDQpO1xuICAgIHZhciBvdXQgPSBudWxsO1xuICAgIHZhciBsaXR0bGVPZmZzZXQgPSAwO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBzaXplID0gc2l6ZXNbaV07XG4gICAgICAgIHZhciBhcnJheSA9IGFycmF5c1tpXTtcbiAgICAgICAgdmFyIHR5cGUgPSB1dGlscy5nZXRCdWZmZXJUeXBlKGFycmF5KTtcbiAgICAgICAgaWYgKCF2aWV3c1t0eXBlXSkge1xuICAgICAgICAgICAgdmlld3NbdHlwZV0gPSBuZXcgbWFwJDFbdHlwZV0oYnVmZmVyKTtcbiAgICAgICAgfVxuICAgICAgICBvdXQgPSB2aWV3c1t0eXBlXTtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBhcnJheS5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgdmFyIGluZGV4U3RhcnQgPSAoKGogLyBzaXplIHwgMCkgKiBzdHJpZGUpICsgbGl0dGxlT2Zmc2V0O1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gaiAlIHNpemU7XG4gICAgICAgICAgICBvdXRbaW5kZXhTdGFydCArIGluZGV4XSA9IGFycmF5W2pdO1xuICAgICAgICB9XG4gICAgICAgIGxpdHRsZU9mZnNldCArPSBzaXplO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheShidWZmZXIpO1xufVxuXG52YXIgYnl0ZVNpemVNYXAkMSA9IHsgNTEyNjogNCwgNTEyMzogMiwgNTEyMTogMSB9O1xudmFyIFVJRCQzID0gMDtcbi8qIGVzbGludC1kaXNhYmxlIG9iamVjdC1zaG9ydGhhbmQgKi9cbnZhciBtYXAgPSB7XG4gICAgRmxvYXQzMkFycmF5OiBGbG9hdDMyQXJyYXksXG4gICAgVWludDMyQXJyYXk6IFVpbnQzMkFycmF5LFxuICAgIEludDMyQXJyYXk6IEludDMyQXJyYXksXG4gICAgVWludDhBcnJheTogVWludDhBcnJheSxcbiAgICBVaW50MTZBcnJheTogVWludDE2QXJyYXksXG59O1xuLyogZXNsaW50LWRpc2FibGUgbWF4LWxlbiAqL1xuLyoqXG4gKiBUaGUgR2VvbWV0cnkgcmVwcmVzZW50cyBhIG1vZGVsLiBJdCBjb25zaXN0cyBvZiB0d28gY29tcG9uZW50czpcbiAqIC0gR2VvbWV0cnlTdHlsZSAtIFRoZSBzdHJ1Y3R1cmUgb2YgdGhlIG1vZGVsIHN1Y2ggYXMgdGhlIGF0dHJpYnV0ZXMgbGF5b3V0XG4gKiAtIEdlb21ldHJ5RGF0YSAtIHRoZSBkYXRhIG9mIHRoZSBtb2RlbCAtIHRoaXMgY29uc2lzdHMgb2YgYnVmZmVycy5cbiAqIFRoaXMgY2FuIGluY2x1ZGUgYW55dGhpbmcgZnJvbSBwb3NpdGlvbnMsIHV2cywgbm9ybWFscywgY29sb3JzIGV0Yy5cbiAqXG4gKiBHZW9tZXRyeSBjYW4gYmUgZGVmaW5lZCB3aXRob3V0IHBhc3NpbmcgaW4gYSBzdHlsZSBvciBkYXRhIGlmIHJlcXVpcmVkICh0aGF0cyBob3cgSSBwcmVmZXIhKVxuICpcbiAqIGBgYGpzXG4gKiBsZXQgZ2VvbWV0cnkgPSBuZXcgUElYSS5HZW9tZXRyeSgpO1xuICpcbiAqIGdlb21ldHJ5LmFkZEF0dHJpYnV0ZSgncG9zaXRpb25zJywgWzAsIDAsIDEwMCwgMCwgMTAwLCAxMDAsIDAsIDEwMF0sIDIpO1xuICogZ2VvbWV0cnkuYWRkQXR0cmlidXRlKCd1dnMnLCBbMCwwLDEsMCwxLDEsMCwxXSwyKVxuICogZ2VvbWV0cnkuYWRkSW5kZXgoWzAsMSwyLDEsMywyXSlcbiAqIGBgYFxuICogQG1lbWJlcm9mIFBJWElcbiAqL1xudmFyIEdlb21ldHJ5ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBidWZmZXJzIC0gQW4gYXJyYXkgb2YgYnVmZmVycy4gb3B0aW9uYWwuXG4gICAgICogQHBhcmFtIGF0dHJpYnV0ZXMgLSBPZiB0aGUgZ2VvbWV0cnksIG9wdGlvbmFsIHN0cnVjdHVyZSBvZiB0aGUgYXR0cmlidXRlcyBsYXlvdXRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBHZW9tZXRyeShidWZmZXJzLCBhdHRyaWJ1dGVzKSB7XG4gICAgICAgIGlmIChidWZmZXJzID09PSB2b2lkIDApIHsgYnVmZmVycyA9IFtdOyB9XG4gICAgICAgIGlmIChhdHRyaWJ1dGVzID09PSB2b2lkIDApIHsgYXR0cmlidXRlcyA9IHt9OyB9XG4gICAgICAgIHRoaXMuYnVmZmVycyA9IGJ1ZmZlcnM7XG4gICAgICAgIHRoaXMuaW5kZXhCdWZmZXIgPSBudWxsO1xuICAgICAgICB0aGlzLmF0dHJpYnV0ZXMgPSBhdHRyaWJ1dGVzO1xuICAgICAgICB0aGlzLmdsVmVydGV4QXJyYXlPYmplY3RzID0ge307XG4gICAgICAgIHRoaXMuaWQgPSBVSUQkMysrO1xuICAgICAgICB0aGlzLmluc3RhbmNlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmluc3RhbmNlQ291bnQgPSAxO1xuICAgICAgICB0aGlzLmRpc3Bvc2VSdW5uZXIgPSBuZXcgcnVubmVyLlJ1bm5lcignZGlzcG9zZUdlb21ldHJ5Jyk7XG4gICAgICAgIHRoaXMucmVmQ291bnQgPSAwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEFkZHMgYW4gYXR0cmlidXRlIHRvIHRoZSBnZW9tZXRyeVxuICAgICAqIE5vdGU6IGBzdHJpZGVgIGFuZCBgc3RhcnRgIHNob3VsZCBiZSBgdW5kZWZpbmVkYCBpZiB5b3UgZG9udCBrbm93IHRoZW0sIG5vdCAwIVxuICAgICAqIEBwYXJhbSBpZCAtIHRoZSBuYW1lIG9mIHRoZSBhdHRyaWJ1dGUgKG1hdGNoaW5nIHVwIHRvIGEgc2hhZGVyKVxuICAgICAqIEBwYXJhbSB7UElYSS5CdWZmZXJ8bnVtYmVyW119IGJ1ZmZlciAtIHRoZSBidWZmZXIgdGhhdCBob2xkcyB0aGUgZGF0YSBvZiB0aGUgYXR0cmlidXRlIC4gWW91IGNhbiBhbHNvIHByb3ZpZGUgYW4gQXJyYXkgYW5kIGEgYnVmZmVyIHdpbGwgYmUgY3JlYXRlZCBmcm9tIGl0LlxuICAgICAqIEBwYXJhbSBzaXplIC0gdGhlIHNpemUgb2YgdGhlIGF0dHJpYnV0ZS4gSWYgeW91IGhhdmUgMiBmbG9hdHMgcGVyIHZlcnRleCAoZWcgcG9zaXRpb24geCBhbmQgeSkgdGhpcyB3b3VsZCBiZSAyXG4gICAgICogQHBhcmFtIG5vcm1hbGl6ZWQgLSBzaG91bGQgdGhlIGRhdGEgYmUgbm9ybWFsaXplZC5cbiAgICAgKiBAcGFyYW0gW3R5cGU9UElYSS5UWVBFUy5GTE9BVF0gLSB3aGF0IHR5cGUgb2YgbnVtYmVyIGlzIHRoZSBhdHRyaWJ1dGUuIENoZWNrIHtQSVhJLlRZUEVTfSB0byBzZWUgdGhlIG9uZXMgYXZhaWxhYmxlXG4gICAgICogQHBhcmFtIFtzdHJpZGU9MF0gLSBIb3cgZmFyIGFwYXJ0LCBpbiBieXRlcywgdGhlIHN0YXJ0IG9mIGVhY2ggdmFsdWUgaXMuICh1c2VkIGZvciBpbnRlcmxlYXZpbmcgZGF0YSlcbiAgICAgKiBAcGFyYW0gW3N0YXJ0PTBdIC0gSG93IGZhciBpbnRvIHRoZSBhcnJheSB0byBzdGFydCByZWFkaW5nIHZhbHVlcyAodXNlZCBmb3IgaW50ZXJsZWF2aW5nIGRhdGEpXG4gICAgICogQHBhcmFtIGluc3RhbmNlIC0gSW5zdGFuY2luZyBmbGFnXG4gICAgICogQHJldHVybnMgLSBSZXR1cm5zIHNlbGYsIHVzZWZ1bCBmb3IgY2hhaW5pbmcuXG4gICAgICovXG4gICAgR2VvbWV0cnkucHJvdG90eXBlLmFkZEF0dHJpYnV0ZSA9IGZ1bmN0aW9uIChpZCwgYnVmZmVyLCBzaXplLCBub3JtYWxpemVkLCB0eXBlLCBzdHJpZGUsIHN0YXJ0LCBpbnN0YW5jZSkge1xuICAgICAgICBpZiAoc2l6ZSA9PT0gdm9pZCAwKSB7IHNpemUgPSAwOyB9XG4gICAgICAgIGlmIChub3JtYWxpemVkID09PSB2b2lkIDApIHsgbm9ybWFsaXplZCA9IGZhbHNlOyB9XG4gICAgICAgIGlmIChpbnN0YW5jZSA9PT0gdm9pZCAwKSB7IGluc3RhbmNlID0gZmFsc2U7IH1cbiAgICAgICAgaWYgKCFidWZmZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignWW91IG11c3QgcGFzcyBhIGJ1ZmZlciB3aGVuIGNyZWF0aW5nIGFuIGF0dHJpYnV0ZScpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGNoZWNrIGlmIHRoaXMgaXMgYSBidWZmZXIhXG4gICAgICAgIGlmICghKGJ1ZmZlciBpbnN0YW5jZW9mIEJ1ZmZlcikpIHtcbiAgICAgICAgICAgIC8vIGl0cyBhbiBhcnJheSFcbiAgICAgICAgICAgIGlmIChidWZmZXIgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgICAgIGJ1ZmZlciA9IG5ldyBGbG9hdDMyQXJyYXkoYnVmZmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJ1ZmZlciA9IG5ldyBCdWZmZXIoYnVmZmVyKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgaWRzID0gaWQuc3BsaXQoJ3wnKTtcbiAgICAgICAgaWYgKGlkcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGlkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkQXR0cmlidXRlKGlkc1tpXSwgYnVmZmVyLCBzaXplLCBub3JtYWxpemVkLCB0eXBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHZhciBidWZmZXJJbmRleCA9IHRoaXMuYnVmZmVycy5pbmRleE9mKGJ1ZmZlcik7XG4gICAgICAgIGlmIChidWZmZXJJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuYnVmZmVycy5wdXNoKGJ1ZmZlcik7XG4gICAgICAgICAgICBidWZmZXJJbmRleCA9IHRoaXMuYnVmZmVycy5sZW5ndGggLSAxO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYXR0cmlidXRlc1tpZF0gPSBuZXcgQXR0cmlidXRlKGJ1ZmZlckluZGV4LCBzaXplLCBub3JtYWxpemVkLCB0eXBlLCBzdHJpZGUsIHN0YXJ0LCBpbnN0YW5jZSk7XG4gICAgICAgIC8vIGFzc3VtaW5nIHRoYXQgaWYgdGhlcmUgaXMgaW5zdGFuY2VkIGRhdGEgdGhlbiB0aGlzIHdpbGwgYmUgZHJhd24gd2l0aCBpbnN0YW5jaW5nIVxuICAgICAgICB0aGlzLmluc3RhbmNlZCA9IHRoaXMuaW5zdGFuY2VkIHx8IGluc3RhbmNlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHJlcXVlc3RlZCBhdHRyaWJ1dGUuXG4gICAgICogQHBhcmFtIGlkIC0gVGhlIG5hbWUgb2YgdGhlIGF0dHJpYnV0ZSByZXF1aXJlZFxuICAgICAqIEByZXR1cm5zIC0gVGhlIGF0dHJpYnV0ZSByZXF1ZXN0ZWQuXG4gICAgICovXG4gICAgR2VvbWV0cnkucHJvdG90eXBlLmdldEF0dHJpYnV0ZSA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hdHRyaWJ1dGVzW2lkXTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHJlcXVlc3RlZCBidWZmZXIuXG4gICAgICogQHBhcmFtIGlkIC0gVGhlIG5hbWUgb2YgdGhlIGJ1ZmZlciByZXF1aXJlZC5cbiAgICAgKiBAcmV0dXJucyAtIFRoZSBidWZmZXIgcmVxdWVzdGVkLlxuICAgICAqL1xuICAgIEdlb21ldHJ5LnByb3RvdHlwZS5nZXRCdWZmZXIgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyc1t0aGlzLmdldEF0dHJpYnV0ZShpZCkuYnVmZmVyXTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqXG4gICAgICogQWRkcyBhbiBpbmRleCBidWZmZXIgdG8gdGhlIGdlb21ldHJ5XG4gICAgICogVGhlIGluZGV4IGJ1ZmZlciBjb250YWlucyBpbnRlZ2VycywgdGhyZWUgZm9yIGVhY2ggdHJpYW5nbGUgaW4gdGhlIGdlb21ldHJ5LCB3aGljaCByZWZlcmVuY2UgdGhlIHZhcmlvdXMgYXR0cmlidXRlIGJ1ZmZlcnMgKHBvc2l0aW9uLCBjb2xvdXIsIFVWIGNvb3JkaW5hdGVzLCBvdGhlciBVViBjb29yZGluYXRlcywgbm9ybWFsLCDigKYpLiBUaGVyZSBpcyBvbmx5IE9ORSBpbmRleCBidWZmZXIuXG4gICAgICogQHBhcmFtIHtQSVhJLkJ1ZmZlcnxudW1iZXJbXX0gW2J1ZmZlcl0gLSBUaGUgYnVmZmVyIHRoYXQgaG9sZHMgdGhlIGRhdGEgb2YgdGhlIGluZGV4IGJ1ZmZlci4gWW91IGNhbiBhbHNvIHByb3ZpZGUgYW4gQXJyYXkgYW5kIGEgYnVmZmVyIHdpbGwgYmUgY3JlYXRlZCBmcm9tIGl0LlxuICAgICAqIEByZXR1cm5zIC0gUmV0dXJucyBzZWxmLCB1c2VmdWwgZm9yIGNoYWluaW5nLlxuICAgICAqL1xuICAgIEdlb21ldHJ5LnByb3RvdHlwZS5hZGRJbmRleCA9IGZ1bmN0aW9uIChidWZmZXIpIHtcbiAgICAgICAgaWYgKCEoYnVmZmVyIGluc3RhbmNlb2YgQnVmZmVyKSkge1xuICAgICAgICAgICAgLy8gaXRzIGFuIGFycmF5IVxuICAgICAgICAgICAgaWYgKGJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgICAgICAgICAgYnVmZmVyID0gbmV3IFVpbnQxNkFycmF5KGJ1ZmZlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBidWZmZXIgPSBuZXcgQnVmZmVyKGJ1ZmZlcik7XG4gICAgICAgIH1cbiAgICAgICAgYnVmZmVyLnR5cGUgPSBjb25zdGFudHMuQlVGRkVSX1RZUEUuRUxFTUVOVF9BUlJBWV9CVUZGRVI7XG4gICAgICAgIHRoaXMuaW5kZXhCdWZmZXIgPSBidWZmZXI7XG4gICAgICAgIGlmICh0aGlzLmJ1ZmZlcnMuaW5kZXhPZihidWZmZXIpID09PSAtMSkge1xuICAgICAgICAgICAgdGhpcy5idWZmZXJzLnB1c2goYnVmZmVyKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGluZGV4IGJ1ZmZlclxuICAgICAqIEByZXR1cm5zIC0gVGhlIGluZGV4IGJ1ZmZlci5cbiAgICAgKi9cbiAgICBHZW9tZXRyeS5wcm90b3R5cGUuZ2V0SW5kZXggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmluZGV4QnVmZmVyO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBtb2RpZmllcyB0aGUgc3RydWN0dXJlIHNvIHRoYXQgYWxsIGN1cnJlbnQgYXR0cmlidXRlcyBiZWNvbWUgaW50ZXJsZWF2ZWQgaW50byBhIHNpbmdsZSBidWZmZXJcbiAgICAgKiBUaGlzIGNhbiBiZSB1c2VmdWwgaWYgeW91ciBtb2RlbCByZW1haW5zIHN0YXRpYyBhcyBpdCBvZmZlcnMgYSBsaXR0bGUgcGVyZm9ybWFuY2UgYm9vc3RcbiAgICAgKiBAcmV0dXJucyAtIFJldHVybnMgc2VsZiwgdXNlZnVsIGZvciBjaGFpbmluZy5cbiAgICAgKi9cbiAgICBHZW9tZXRyeS5wcm90b3R5cGUuaW50ZXJsZWF2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gYSBzaW1wbGUgY2hlY2sgdG8gc2VlIGlmIGJ1ZmZlcnMgYXJlIGFscmVhZHkgaW50ZXJsZWF2ZWQuLlxuICAgICAgICBpZiAodGhpcy5idWZmZXJzLmxlbmd0aCA9PT0gMSB8fCAodGhpcy5idWZmZXJzLmxlbmd0aCA9PT0gMiAmJiB0aGlzLmluZGV4QnVmZmVyKSlcbiAgICAgICAgICAgIHsgcmV0dXJuIHRoaXM7IH1cbiAgICAgICAgLy8gYXNzdW1lIGFscmVhZHkgdGhhdCBubyBidWZmZXJzIGFyZSBpbnRlcmxlYXZlZFxuICAgICAgICB2YXIgYXJyYXlzID0gW107XG4gICAgICAgIHZhciBzaXplcyA9IFtdO1xuICAgICAgICB2YXIgaW50ZXJsZWF2ZWRCdWZmZXIgPSBuZXcgQnVmZmVyKCk7XG4gICAgICAgIHZhciBpO1xuICAgICAgICBmb3IgKGkgaW4gdGhpcy5hdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICB2YXIgYXR0cmlidXRlID0gdGhpcy5hdHRyaWJ1dGVzW2ldO1xuICAgICAgICAgICAgdmFyIGJ1ZmZlciA9IHRoaXMuYnVmZmVyc1thdHRyaWJ1dGUuYnVmZmVyXTtcbiAgICAgICAgICAgIGFycmF5cy5wdXNoKGJ1ZmZlci5kYXRhKTtcbiAgICAgICAgICAgIHNpemVzLnB1c2goKGF0dHJpYnV0ZS5zaXplICogYnl0ZVNpemVNYXAkMVthdHRyaWJ1dGUudHlwZV0pIC8gNCk7XG4gICAgICAgICAgICBhdHRyaWJ1dGUuYnVmZmVyID0gMDtcbiAgICAgICAgfVxuICAgICAgICBpbnRlcmxlYXZlZEJ1ZmZlci5kYXRhID0gaW50ZXJsZWF2ZVR5cGVkQXJyYXlzKGFycmF5cywgc2l6ZXMpO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5idWZmZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5idWZmZXJzW2ldICE9PSB0aGlzLmluZGV4QnVmZmVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5idWZmZXJzW2ldLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmJ1ZmZlcnMgPSBbaW50ZXJsZWF2ZWRCdWZmZXJdO1xuICAgICAgICBpZiAodGhpcy5pbmRleEJ1ZmZlcikge1xuICAgICAgICAgICAgdGhpcy5idWZmZXJzLnB1c2godGhpcy5pbmRleEJ1ZmZlcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKiogR2V0IHRoZSBzaXplIG9mIHRoZSBnZW9tZXRyaWVzLCBpbiB2ZXJ0aWNlcy4gKi9cbiAgICBHZW9tZXRyeS5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZm9yICh2YXIgaSBpbiB0aGlzLmF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgIHZhciBhdHRyaWJ1dGUgPSB0aGlzLmF0dHJpYnV0ZXNbaV07XG4gICAgICAgICAgICB2YXIgYnVmZmVyID0gdGhpcy5idWZmZXJzW2F0dHJpYnV0ZS5idWZmZXJdO1xuICAgICAgICAgICAgcmV0dXJuIGJ1ZmZlci5kYXRhLmxlbmd0aCAvICgoYXR0cmlidXRlLnN0cmlkZSAvIDQpIHx8IGF0dHJpYnV0ZS5zaXplKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMDtcbiAgICB9O1xuICAgIC8qKiBEaXNwb3NlcyBXZWJHTCByZXNvdXJjZXMgdGhhdCBhcmUgY29ubmVjdGVkIHRvIHRoaXMgZ2VvbWV0cnkuICovXG4gICAgR2VvbWV0cnkucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZGlzcG9zZVJ1bm5lci5lbWl0KHRoaXMsIGZhbHNlKTtcbiAgICB9O1xuICAgIC8qKiBEZXN0cm95cyB0aGUgZ2VvbWV0cnkuICovXG4gICAgR2VvbWV0cnkucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgICAgICB0aGlzLmJ1ZmZlcnMgPSBudWxsO1xuICAgICAgICB0aGlzLmluZGV4QnVmZmVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGVzID0gbnVsbDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBjbG9uZSBvZiB0aGUgZ2VvbWV0cnkuXG4gICAgICogQHJldHVybnMgLSBBIG5ldyBjbG9uZSBvZiB0aGlzIGdlb21ldHJ5LlxuICAgICAqL1xuICAgIEdlb21ldHJ5LnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGdlb21ldHJ5ID0gbmV3IEdlb21ldHJ5KCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5idWZmZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBnZW9tZXRyeS5idWZmZXJzW2ldID0gbmV3IEJ1ZmZlcih0aGlzLmJ1ZmZlcnNbaV0uZGF0YS5zbGljZSgwKSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSBpbiB0aGlzLmF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgIHZhciBhdHRyaWIgPSB0aGlzLmF0dHJpYnV0ZXNbaV07XG4gICAgICAgICAgICBnZW9tZXRyeS5hdHRyaWJ1dGVzW2ldID0gbmV3IEF0dHJpYnV0ZShhdHRyaWIuYnVmZmVyLCBhdHRyaWIuc2l6ZSwgYXR0cmliLm5vcm1hbGl6ZWQsIGF0dHJpYi50eXBlLCBhdHRyaWIuc3RyaWRlLCBhdHRyaWIuc3RhcnQsIGF0dHJpYi5pbnN0YW5jZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaW5kZXhCdWZmZXIpIHtcbiAgICAgICAgICAgIGdlb21ldHJ5LmluZGV4QnVmZmVyID0gZ2VvbWV0cnkuYnVmZmVyc1t0aGlzLmJ1ZmZlcnMuaW5kZXhPZih0aGlzLmluZGV4QnVmZmVyKV07XG4gICAgICAgICAgICBnZW9tZXRyeS5pbmRleEJ1ZmZlci50eXBlID0gY29uc3RhbnRzLkJVRkZFUl9UWVBFLkVMRU1FTlRfQVJSQVlfQlVGRkVSO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBnZW9tZXRyeTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIE1lcmdlcyBhbiBhcnJheSBvZiBnZW9tZXRyaWVzIGludG8gYSBuZXcgc2luZ2xlIG9uZS5cbiAgICAgKlxuICAgICAqIEdlb21ldHJ5IGF0dHJpYnV0ZSBzdHlsZXMgbXVzdCBtYXRjaCBmb3IgdGhpcyBvcGVyYXRpb24gdG8gd29yay5cbiAgICAgKiBAcGFyYW0gZ2VvbWV0cmllcyAtIGFycmF5IG9mIGdlb21ldHJpZXMgdG8gbWVyZ2VcbiAgICAgKiBAcmV0dXJucyAtIFNoaW55IG5ldyBnZW9tZXRyeSFcbiAgICAgKi9cbiAgICBHZW9tZXRyeS5tZXJnZSA9IGZ1bmN0aW9uIChnZW9tZXRyaWVzKSB7XG4gICAgICAgIC8vIHRvZG8gYWRkIGEgZ2VvbWV0cnkgY2hlY2shXG4gICAgICAgIC8vIGFsc28gYSBzaXplIGNoZWNrLi4gY2FudCBiZSB0b28gYmlnIV1cbiAgICAgICAgdmFyIGdlb21ldHJ5T3V0ID0gbmV3IEdlb21ldHJ5KCk7XG4gICAgICAgIHZhciBhcnJheXMgPSBbXTtcbiAgICAgICAgdmFyIHNpemVzID0gW107XG4gICAgICAgIHZhciBvZmZzZXRzID0gW107XG4gICAgICAgIHZhciBnZW9tZXRyeTtcbiAgICAgICAgLy8gcGFzcyBvbmUuLiBnZXQgc2l6ZXMuLlxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGdlb21ldHJpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGdlb21ldHJ5ID0gZ2VvbWV0cmllc1tpXTtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZ2VvbWV0cnkuYnVmZmVycy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIHNpemVzW2pdID0gc2l6ZXNbal0gfHwgMDtcbiAgICAgICAgICAgICAgICBzaXplc1tqXSArPSBnZW9tZXRyeS5idWZmZXJzW2pdLmRhdGEubGVuZ3RoO1xuICAgICAgICAgICAgICAgIG9mZnNldHNbal0gPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGJ1aWxkIHRoZSBjb3JyZWN0IHNpemUgYXJyYXlzLi5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBnZW9tZXRyeS5idWZmZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAvLyBUT0RPIHR5cGVzIVxuICAgICAgICAgICAgYXJyYXlzW2ldID0gbmV3IG1hcFt1dGlscy5nZXRCdWZmZXJUeXBlKGdlb21ldHJ5LmJ1ZmZlcnNbaV0uZGF0YSldKHNpemVzW2ldKTtcbiAgICAgICAgICAgIGdlb21ldHJ5T3V0LmJ1ZmZlcnNbaV0gPSBuZXcgQnVmZmVyKGFycmF5c1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcGFzcyB0byBzZXQgZGF0YS4uXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ2VvbWV0cmllcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZ2VvbWV0cnkgPSBnZW9tZXRyaWVzW2ldO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBnZW9tZXRyeS5idWZmZXJzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgYXJyYXlzW2pdLnNldChnZW9tZXRyeS5idWZmZXJzW2pdLmRhdGEsIG9mZnNldHNbal0pO1xuICAgICAgICAgICAgICAgIG9mZnNldHNbal0gKz0gZ2VvbWV0cnkuYnVmZmVyc1tqXS5kYXRhLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBnZW9tZXRyeU91dC5hdHRyaWJ1dGVzID0gZ2VvbWV0cnkuYXR0cmlidXRlcztcbiAgICAgICAgaWYgKGdlb21ldHJ5LmluZGV4QnVmZmVyKSB7XG4gICAgICAgICAgICBnZW9tZXRyeU91dC5pbmRleEJ1ZmZlciA9IGdlb21ldHJ5T3V0LmJ1ZmZlcnNbZ2VvbWV0cnkuYnVmZmVycy5pbmRleE9mKGdlb21ldHJ5LmluZGV4QnVmZmVyKV07XG4gICAgICAgICAgICBnZW9tZXRyeU91dC5pbmRleEJ1ZmZlci50eXBlID0gY29uc3RhbnRzLkJVRkZFUl9UWVBFLkVMRU1FTlRfQVJSQVlfQlVGRkVSO1xuICAgICAgICAgICAgdmFyIG9mZnNldCA9IDA7XG4gICAgICAgICAgICB2YXIgc3RyaWRlID0gMDtcbiAgICAgICAgICAgIHZhciBvZmZzZXQyID0gMDtcbiAgICAgICAgICAgIHZhciBidWZmZXJJbmRleFRvQ291bnQgPSAwO1xuICAgICAgICAgICAgLy8gZ2V0IGEgYnVmZmVyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGdlb21ldHJ5LmJ1ZmZlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoZ2VvbWV0cnkuYnVmZmVyc1tpXSAhPT0gZ2VvbWV0cnkuaW5kZXhCdWZmZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVySW5kZXhUb0NvdW50ID0gaTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZmlndXJlIG91dCB0aGUgc3RyaWRlIG9mIG9uZSBidWZmZXIuLlxuICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBnZW9tZXRyeS5hdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgdmFyIGF0dHJpYnV0ZSA9IGdlb21ldHJ5LmF0dHJpYnV0ZXNbaV07XG4gICAgICAgICAgICAgICAgaWYgKChhdHRyaWJ1dGUuYnVmZmVyIHwgMCkgPT09IGJ1ZmZlckluZGV4VG9Db3VudCkge1xuICAgICAgICAgICAgICAgICAgICBzdHJpZGUgKz0gKChhdHRyaWJ1dGUuc2l6ZSAqIGJ5dGVTaXplTWFwJDFbYXR0cmlidXRlLnR5cGVdKSAvIDQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHRpbWUgdG8gb2ZmIHNldCBhbGwgaW5kZXhlcy4uXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGdlb21ldHJpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXhCdWZmZXJEYXRhID0gZ2VvbWV0cmllc1tpXS5pbmRleEJ1ZmZlci5kYXRhO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgaW5kZXhCdWZmZXJEYXRhLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5T3V0LmluZGV4QnVmZmVyLmRhdGFbaiArIG9mZnNldDJdICs9IG9mZnNldDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IGdlb21ldHJpZXNbaV0uYnVmZmVyc1tidWZmZXJJbmRleFRvQ291bnRdLmRhdGEubGVuZ3RoIC8gKHN0cmlkZSk7XG4gICAgICAgICAgICAgICAgb2Zmc2V0MiArPSBpbmRleEJ1ZmZlckRhdGEubGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBnZW9tZXRyeU91dDtcbiAgICB9O1xuICAgIHJldHVybiBHZW9tZXRyeTtcbn0oKSk7XG5cbi8qKlxuICogSGVscGVyIGNsYXNzIHRvIGNyZWF0ZSBhIHF1YWRcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKi9cbnZhciBRdWFkID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhRdWFkLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFF1YWQoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLmFkZEF0dHJpYnV0ZSgnYVZlcnRleFBvc2l0aW9uJywgbmV3IEZsb2F0MzJBcnJheShbXG4gICAgICAgICAgICAwLCAwLFxuICAgICAgICAgICAgMSwgMCxcbiAgICAgICAgICAgIDEsIDEsXG4gICAgICAgICAgICAwLCAxIF0pKVxuICAgICAgICAgICAgLmFkZEluZGV4KFswLCAxLCAzLCAyXSk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIFF1YWQ7XG59KEdlb21ldHJ5KSk7XG5cbi8qKlxuICogSGVscGVyIGNsYXNzIHRvIGNyZWF0ZSBhIHF1YWQgd2l0aCB1dnMgbGlrZSBpbiB2NFxuICogQG1lbWJlcm9mIFBJWElcbiAqL1xudmFyIFF1YWRVdiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUXVhZFV2LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFF1YWRVdigpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMudmVydGljZXMgPSBuZXcgRmxvYXQzMkFycmF5KFtcbiAgICAgICAgICAgIC0xLCAtMSxcbiAgICAgICAgICAgIDEsIC0xLFxuICAgICAgICAgICAgMSwgMSxcbiAgICAgICAgICAgIC0xLCAxIF0pO1xuICAgICAgICBfdGhpcy51dnMgPSBuZXcgRmxvYXQzMkFycmF5KFtcbiAgICAgICAgICAgIDAsIDAsXG4gICAgICAgICAgICAxLCAwLFxuICAgICAgICAgICAgMSwgMSxcbiAgICAgICAgICAgIDAsIDEgXSk7XG4gICAgICAgIF90aGlzLnZlcnRleEJ1ZmZlciA9IG5ldyBCdWZmZXIoX3RoaXMudmVydGljZXMpO1xuICAgICAgICBfdGhpcy51dkJ1ZmZlciA9IG5ldyBCdWZmZXIoX3RoaXMudXZzKTtcbiAgICAgICAgX3RoaXMuYWRkQXR0cmlidXRlKCdhVmVydGV4UG9zaXRpb24nLCBfdGhpcy52ZXJ0ZXhCdWZmZXIpXG4gICAgICAgICAgICAuYWRkQXR0cmlidXRlKCdhVGV4dHVyZUNvb3JkJywgX3RoaXMudXZCdWZmZXIpXG4gICAgICAgICAgICAuYWRkSW5kZXgoWzAsIDEsIDIsIDAsIDIsIDNdKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYXBzIHR3byBSZWN0YW5nbGUgdG8gdGhlIHF1YWQuXG4gICAgICogQHBhcmFtIHRhcmdldFRleHR1cmVGcmFtZSAtIFRoZSBmaXJzdCByZWN0YW5nbGVcbiAgICAgKiBAcGFyYW0gZGVzdGluYXRpb25GcmFtZSAtIFRoZSBzZWNvbmQgcmVjdGFuZ2xlXG4gICAgICogQHJldHVybnMgLSBSZXR1cm5zIGl0c2VsZi5cbiAgICAgKi9cbiAgICBRdWFkVXYucHJvdG90eXBlLm1hcCA9IGZ1bmN0aW9uICh0YXJnZXRUZXh0dXJlRnJhbWUsIGRlc3RpbmF0aW9uRnJhbWUpIHtcbiAgICAgICAgdmFyIHggPSAwOyAvLyBkZXN0aW5hdGlvbkZyYW1lLnggLyB0YXJnZXRUZXh0dXJlRnJhbWUud2lkdGg7XG4gICAgICAgIHZhciB5ID0gMDsgLy8gZGVzdGluYXRpb25GcmFtZS55IC8gdGFyZ2V0VGV4dHVyZUZyYW1lLmhlaWdodDtcbiAgICAgICAgdGhpcy51dnNbMF0gPSB4O1xuICAgICAgICB0aGlzLnV2c1sxXSA9IHk7XG4gICAgICAgIHRoaXMudXZzWzJdID0geCArIChkZXN0aW5hdGlvbkZyYW1lLndpZHRoIC8gdGFyZ2V0VGV4dHVyZUZyYW1lLndpZHRoKTtcbiAgICAgICAgdGhpcy51dnNbM10gPSB5O1xuICAgICAgICB0aGlzLnV2c1s0XSA9IHggKyAoZGVzdGluYXRpb25GcmFtZS53aWR0aCAvIHRhcmdldFRleHR1cmVGcmFtZS53aWR0aCk7XG4gICAgICAgIHRoaXMudXZzWzVdID0geSArIChkZXN0aW5hdGlvbkZyYW1lLmhlaWdodCAvIHRhcmdldFRleHR1cmVGcmFtZS5oZWlnaHQpO1xuICAgICAgICB0aGlzLnV2c1s2XSA9IHg7XG4gICAgICAgIHRoaXMudXZzWzddID0geSArIChkZXN0aW5hdGlvbkZyYW1lLmhlaWdodCAvIHRhcmdldFRleHR1cmVGcmFtZS5oZWlnaHQpO1xuICAgICAgICB4ID0gZGVzdGluYXRpb25GcmFtZS54O1xuICAgICAgICB5ID0gZGVzdGluYXRpb25GcmFtZS55O1xuICAgICAgICB0aGlzLnZlcnRpY2VzWzBdID0geDtcbiAgICAgICAgdGhpcy52ZXJ0aWNlc1sxXSA9IHk7XG4gICAgICAgIHRoaXMudmVydGljZXNbMl0gPSB4ICsgZGVzdGluYXRpb25GcmFtZS53aWR0aDtcbiAgICAgICAgdGhpcy52ZXJ0aWNlc1szXSA9IHk7XG4gICAgICAgIHRoaXMudmVydGljZXNbNF0gPSB4ICsgZGVzdGluYXRpb25GcmFtZS53aWR0aDtcbiAgICAgICAgdGhpcy52ZXJ0aWNlc1s1XSA9IHkgKyBkZXN0aW5hdGlvbkZyYW1lLmhlaWdodDtcbiAgICAgICAgdGhpcy52ZXJ0aWNlc1s2XSA9IHg7XG4gICAgICAgIHRoaXMudmVydGljZXNbN10gPSB5ICsgZGVzdGluYXRpb25GcmFtZS5oZWlnaHQ7XG4gICAgICAgIHRoaXMuaW52YWxpZGF0ZSgpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIExlZ2FjeSB1cGxvYWQgbWV0aG9kLCBqdXN0IG1hcmtzIGJ1ZmZlcnMgZGlydHkuXG4gICAgICogQHJldHVybnMgLSBSZXR1cm5zIGl0c2VsZi5cbiAgICAgKi9cbiAgICBRdWFkVXYucHJvdG90eXBlLmludmFsaWRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMudmVydGV4QnVmZmVyLl91cGRhdGVJRCsrO1xuICAgICAgICB0aGlzLnV2QnVmZmVyLl91cGRhdGVJRCsrO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIHJldHVybiBRdWFkVXY7XG59KEdlb21ldHJ5KSk7XG5cbnZhciBVSUQkMiA9IDA7XG4vKipcbiAqIFVuaWZvcm0gZ3JvdXAgaG9sZHMgdW5pZm9ybSBtYXAgYW5kIHNvbWUgSUQncyBmb3Igd29ya1xuICpcbiAqIGBVbmlmb3JtR3JvdXBgIGhhcyB0d28gbW9kZXM6XG4gKlxuICogMTogTm9ybWFsIG1vZGVcbiAqIE5vcm1hbCBtb2RlIHdpbGwgdXBsb2FkIHRoZSB1bmlmb3JtcyB3aXRoIGluZGl2aWR1YWwgZnVuY3Rpb24gY2FsbHMgYXMgcmVxdWlyZWRcbiAqXG4gKiAyOiBVbmlmb3JtIGJ1ZmZlciBtb2RlXG4gKiBUaGlzIG1vZGUgd2lsbCB0cmVhdCB0aGUgdW5pZm9ybXMgYXMgYSB1bmlmb3JtIGJ1ZmZlci4gWW91IGNhbiBwYXNzIGluIGVpdGhlciBhIGJ1ZmZlciB0aGF0IHlvdSBtYW51YWxseSBoYW5kbGUsIG9yXG4gKiBvciBhIGdlbmVyaWMgb2JqZWN0IHRoYXQgUGl4aUpTIHdpbGwgYXV0b21hdGljYWxseSBtYXAgdG8gYSBidWZmZXIgZm9yIHlvdS5cbiAqIEZvciBtYXhpbXVtIGJlbmVmaXRzLCBtYWtlIFVibyBVbmlmb3JtR3JvdXBzIHN0YXRpYywgYW5kIG9ubHkgdXBkYXRlIHRoZW0gZWFjaCBmcmFtZS5cbiAqXG4gKiBSdWxlcyBvZiBVQk9zOlxuICogLSBVQk9zIG9ubHkgd29yayB3aXRoIFdlYkdMMiwgc28gbWFrZSBzdXJlIHlvdSBoYXZlIGEgZmFsbGJhY2shXG4gKiAtIE9ubHkgZmxvYXRzIGFyZSBzdXBwb3J0ZWQgKGluY2x1ZGluZyB2ZWNbMiwzLDRdLCBtYXRbMiwzLDRdKVxuICogLSBTYW1wbGVycyBjYW5ub3QgYmUgdXNlZCBpbiB1Ym8ncyAoYSBHUFUgbGltaXRhdGlvbilcbiAqIC0gWW91IG11c3QgZW5zdXJlIHRoYXQgdGhlIG9iamVjdCB5b3UgcGFzcyBpbiBleGFjdGx5IG1hdGNoZXMgaW4gdGhlIHNoYWRlciB1Ym8gc3RydWN0dXJlLlxuICogT3RoZXJ3aXNlLCB3ZWlyZG5lc3Mgd2lsbCBlbnN1ZSFcbiAqIC0gVGhlIG5hbWUgb2YgdGhlIHVibyBvYmplY3QgYWRkZWQgdG8gdGhlIGdyb3VwIG11c3QgbWF0Y2ggZXhhY3RseSB0aGUgbmFtZSBvZiB0aGUgdWJvIGluIHRoZSBzaGFkZXIuXG4gKlxuICogYGBgXG4gKiAvLyB1Ym8gaW4gc2hhZGVyOlxuICogdW5pZm9ybSBteUNvb2xEYXRhIHsgLy8gZGVjbGFyaW5nIGEgdWJvLi5cbiAqIG1hdDQgdUNvb2xNYXRyaXg7XG4gKiBmbG9hdCB1RmxvYXR5TWNGbG9hdEZhY2VcbiAqXG4gKlxuICogLy8gYSBuZXcgdW5pZm9ybSBidWZmZXIgb2JqZWN0Li5cbiAqIGNvbnN0IG15Q29vbERhdGEgPSBuZXcgVW5pZm9ybUJ1ZmZlckdyb3VwKHtcbiAqICAgdUNvb2xNYXRyaXg6IG5ldyBNYXRyaXgoKSxcbiAqICAgdUZsb2F0eU1jRmxvYXRGYWNlOiAyMyxcbiAqIH19XG4gKlxuICogLy8gYnVpbGQgYSBzaGFkZXIuLi5cbiAqIGNvbnN0IHNoYWRlciA9IFNoYWRlci5mcm9tKHNyY1ZlcnQsIHNyY0ZyYWcsIHtcbiAqICAgbXlDb29sRGF0YSAvLyBuYW1lIG1hdGNoZXMgdGhlIHVibyBuYW1lIGluIHRoZSBzaGFkZXIuIHdpbGwgYmUgcHJvY2Vzc2VkIGFjY29yZGluZ2x5LlxuICogfSlcbiAqXG4gKiAgYGBgXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG52YXIgVW5pZm9ybUdyb3VwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7b2JqZWN0IHwgQnVmZmVyfSBbdW5pZm9ybXNdIC0gQ3VzdG9tIHVuaWZvcm1zIHRvIHVzZSB0byBhdWdtZW50IHRoZSBidWlsdC1pbiBvbmVzLiBPciBhIHBpeGkgYnVmZmVyLlxuICAgICAqIEBwYXJhbSBpc1N0YXRpYyAtIFVuaWZvcm1zIHdvbnQgYmUgY2hhbmdlZCBhZnRlciBjcmVhdGlvbi5cbiAgICAgKiBAcGFyYW0gaXNVYm8gLSBJZiB0cnVlLCB3aWxsIHRyZWF0IHRoaXMgdW5pZm9ybSBncm91cCBhcyBhIHVuaWZvcm0gYnVmZmVyIG9iamVjdC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBVbmlmb3JtR3JvdXAodW5pZm9ybXMsIGlzU3RhdGljLCBpc1Vibykge1xuICAgICAgICB0aGlzLmdyb3VwID0gdHJ1ZTtcbiAgICAgICAgLy8gbGV0cyBnZW5lcmF0ZSB0aGlzIHdoZW4gdGhlIHNoYWRlciA/XG4gICAgICAgIHRoaXMuc3luY1VuaWZvcm1zID0ge307XG4gICAgICAgIHRoaXMuZGlydHlJZCA9IDA7XG4gICAgICAgIHRoaXMuaWQgPSBVSUQkMisrO1xuICAgICAgICB0aGlzLnN0YXRpYyA9ICEhaXNTdGF0aWM7XG4gICAgICAgIHRoaXMudWJvID0gISFpc1VibztcbiAgICAgICAgaWYgKHVuaWZvcm1zIGluc3RhbmNlb2YgQnVmZmVyKSB7XG4gICAgICAgICAgICB0aGlzLmJ1ZmZlciA9IHVuaWZvcm1zO1xuICAgICAgICAgICAgdGhpcy5idWZmZXIudHlwZSA9IGNvbnN0YW50cy5CVUZGRVJfVFlQRS5VTklGT1JNX0JVRkZFUjtcbiAgICAgICAgICAgIHRoaXMuYXV0b01hbmFnZSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy51Ym8gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy51bmlmb3JtcyA9IHVuaWZvcm1zO1xuICAgICAgICAgICAgaWYgKHRoaXMudWJvKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5idWZmZXIgPSBuZXcgQnVmZmVyKG5ldyBGbG9hdDMyQXJyYXkoMSkpO1xuICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVyLnR5cGUgPSBjb25zdGFudHMuQlVGRkVSX1RZUEUuVU5JRk9STV9CVUZGRVI7XG4gICAgICAgICAgICAgICAgdGhpcy5hdXRvTWFuYWdlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBVbmlmb3JtR3JvdXAucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5kaXJ0eUlkKys7XG4gICAgICAgIGlmICghdGhpcy5hdXRvTWFuYWdlICYmIHRoaXMuYnVmZmVyKSB7XG4gICAgICAgICAgICB0aGlzLmJ1ZmZlci51cGRhdGUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgVW5pZm9ybUdyb3VwLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAobmFtZSwgdW5pZm9ybXMsIF9zdGF0aWMpIHtcbiAgICAgICAgaWYgKCF0aGlzLnVibykge1xuICAgICAgICAgICAgdGhpcy51bmlmb3Jtc1tuYW1lXSA9IG5ldyBVbmlmb3JtR3JvdXAodW5pZm9ybXMsIF9zdGF0aWMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG1heC1sZW5cbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignW1VuaWZvcm1Hcm91cF0gdW5pZm9ybSBncm91cHMgaW4gdWJvIG1vZGUgY2Fubm90IGJlIG1vZGlmaWVkLCBvciBoYXZlIHVuaWZvcm0gZ3JvdXBzIG5lc3RlZCBpbiB0aGVtJyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFVuaWZvcm1Hcm91cC5mcm9tID0gZnVuY3Rpb24gKHVuaWZvcm1zLCBfc3RhdGljLCBfdWJvKSB7XG4gICAgICAgIHJldHVybiBuZXcgVW5pZm9ybUdyb3VwKHVuaWZvcm1zLCBfc3RhdGljLCBfdWJvKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEEgc2hvcnQgaGFuZCBmdW5jdGlvbiBmb3IgY3JlYXRpbmcgYSBzdGF0aWMgVUJPIFVuaWZvcm1Hcm91cC5cbiAgICAgKiBAcGFyYW0gdW5pZm9ybXMgLSB0aGUgdWJvIGl0ZW1cbiAgICAgKiBAcGFyYW0gX3N0YXRpYyAtIHNob3VsZCB0aGlzIGJlIHVwZGF0ZWQgZWFjaCB0aW1lIGl0IGlzIHVzZWQ/IGRlZmF1bHRzIHRvIHRydWUgaGVyZSFcbiAgICAgKi9cbiAgICBVbmlmb3JtR3JvdXAudWJvRnJvbSA9IGZ1bmN0aW9uICh1bmlmb3JtcywgX3N0YXRpYykge1xuICAgICAgICByZXR1cm4gbmV3IFVuaWZvcm1Hcm91cCh1bmlmb3JtcywgX3N0YXRpYyAhPT0gbnVsbCAmJiBfc3RhdGljICE9PSB2b2lkIDAgPyBfc3RhdGljIDogdHJ1ZSwgdHJ1ZSk7XG4gICAgfTtcbiAgICByZXR1cm4gVW5pZm9ybUdyb3VwO1xufSgpKTtcblxuLyoqXG4gKiBTeXN0ZW0gcGx1Z2luIHRvIHRoZSByZW5kZXJlciB0byBtYW5hZ2UgZmlsdGVyIHN0YXRlcy5cbiAqIEBpZ25vcmVcbiAqL1xudmFyIEZpbHRlclN0YXRlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEZpbHRlclN0YXRlKCkge1xuICAgICAgICB0aGlzLnJlbmRlclRleHR1cmUgPSBudWxsO1xuICAgICAgICB0aGlzLnRhcmdldCA9IG51bGw7XG4gICAgICAgIHRoaXMubGVnYWN5ID0gZmFsc2U7XG4gICAgICAgIHRoaXMucmVzb2x1dGlvbiA9IDE7XG4gICAgICAgIHRoaXMubXVsdGlzYW1wbGUgPSBjb25zdGFudHMuTVNBQV9RVUFMSVRZLk5PTkU7XG4gICAgICAgIC8vIG5leHQgdGhyZWUgZmllbGRzIGFyZSBjcmVhdGVkIG9ubHkgZm9yIHJvb3RcbiAgICAgICAgLy8gcmUtYXNzaWduZWQgZm9yIGV2ZXJ5dGhpbmcgZWxzZVxuICAgICAgICB0aGlzLnNvdXJjZUZyYW1lID0gbmV3IG1hdGguUmVjdGFuZ2xlKCk7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb25GcmFtZSA9IG5ldyBtYXRoLlJlY3RhbmdsZSgpO1xuICAgICAgICB0aGlzLmJpbmRpbmdTb3VyY2VGcmFtZSA9IG5ldyBtYXRoLlJlY3RhbmdsZSgpO1xuICAgICAgICB0aGlzLmJpbmRpbmdEZXN0aW5hdGlvbkZyYW1lID0gbmV3IG1hdGguUmVjdGFuZ2xlKCk7XG4gICAgICAgIHRoaXMuZmlsdGVycyA9IFtdO1xuICAgICAgICB0aGlzLnRyYW5zZm9ybSA9IG51bGw7XG4gICAgfVxuICAgIC8qKiBDbGVhcnMgdGhlIHN0YXRlICovXG4gICAgRmlsdGVyU3RhdGUucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnRhcmdldCA9IG51bGw7XG4gICAgICAgIHRoaXMuZmlsdGVycyA9IG51bGw7XG4gICAgICAgIHRoaXMucmVuZGVyVGV4dHVyZSA9IG51bGw7XG4gICAgfTtcbiAgICByZXR1cm4gRmlsdGVyU3RhdGU7XG59KCkpO1xuXG52YXIgdGVtcFBvaW50cyA9IFtuZXcgbWF0aC5Qb2ludCgpLCBuZXcgbWF0aC5Qb2ludCgpLCBuZXcgbWF0aC5Qb2ludCgpLCBuZXcgbWF0aC5Qb2ludCgpXTtcbnZhciB0ZW1wTWF0cml4JDIgPSBuZXcgbWF0aC5NYXRyaXgoKTtcbi8qKlxuICogU3lzdGVtIHBsdWdpbiB0byB0aGUgcmVuZGVyZXIgdG8gbWFuYWdlIGZpbHRlcnMuXG4gKlxuICogIyMgUGlwZWxpbmVcbiAqXG4gKiBUaGUgRmlsdGVyU3lzdGVtIGV4ZWN1dGVzIHRoZSBmaWx0ZXJpbmcgcGlwZWxpbmUgYnkgcmVuZGVyaW5nIHRoZSBkaXNwbGF5LW9iamVjdCBpbnRvIGEgdGV4dHVyZSwgYXBwbHlpbmcgaXRzXG4gKiBbZmlsdGVyc117QGxpbmsgUElYSS5GaWx0ZXJ9IGluIHNlcmllcywgYW5kIHRoZSBsYXN0IGZpbHRlciBvdXRwdXRzIGludG8gdGhlIGZpbmFsIHJlbmRlci10YXJnZXQuXG4gKlxuICogVGhlIGZpbHRlci1mcmFtZSBpcyB0aGUgcmVjdGFuZ2xlIGluIHdvcmxkIHNwYWNlIGJlaW5nIGZpbHRlcmVkLCBhbmQgdGhvc2UgY29udGVudHMgYXJlIG1hcHBlZCBpbnRvXG4gKiBgKDAsIDAsIGZpbHRlckZyYW1lLndpZHRoLCBmaWx0ZXJGcmFtZS5oZWlnaHQpYCBpbnRvIHRoZSBmaWx0ZXIgcmVuZGVyLXRleHR1cmUuIFRoZSBmaWx0ZXItZnJhbWUgaXMgYWxzbyBjYWxsZWRcbiAqIHRoZSBzb3VyY2UtZnJhbWUsIGFzIGl0IGlzIHVzZWQgdG8gYmluZCB0aGUgZmlsdGVyIHJlbmRlci10ZXh0dXJlcy4gVGhlIGxhc3QgZmlsdGVyIG91dHB1dHMgdG8gdGhlIGBmaWx0ZXJGcmFtZWBcbiAqIGluIHRoZSBmaW5hbCByZW5kZXItdGFyZ2V0LlxuICpcbiAqICMjIFVzYWdlXG4gKlxuICoge0BsaW5rIFBJWEkuQ29udGFpbmVyI3JlbmRlckFkdmFuY2VkfSBpcyBhbiBleGFtcGxlIG9mIGhvdyB0byB1c2UgdGhlIGZpbHRlciBzeXN0ZW0uIEl0IGlzIGEgMyBzdGVwIHByb2Nlc3M6XG4gKlxuICogKipwdXNoKio6IFVzZSB7QGxpbmsgUElYSS5GaWx0ZXJTeXN0ZW0jcHVzaH0gdG8gcHVzaCB0aGUgc2V0IG9mIGZpbHRlcnMgdG8gYmUgYXBwbGllZCBvbiBhIGZpbHRlci10YXJnZXQuXG4gKiAqKnJlbmRlcioqOiBSZW5kZXIgdGhlIGNvbnRlbnRzIHRvIGJlIGZpbHRlcmVkIHVzaW5nIHRoZSByZW5kZXJlci4gVGhlIGZpbHRlci1zeXN0ZW0gd2lsbCBvbmx5IGNhcHR1cmUgdGhlIGNvbnRlbnRzXG4gKiAgICAgIGluc2lkZSB0aGUgYm91bmRzIG9mIHRoZSBmaWx0ZXItdGFyZ2V0LiBOT1RFOiBVc2luZyB7QGxpbmsgUElYSS5SZW5kZXJlciNyZW5kZXJ9IGlzXG4gKiAgICAgIGlsbGVnYWwgZHVyaW5nIGFuIGV4aXN0aW5nIHJlbmRlciBjeWNsZSwgYW5kIGl0IG1heSByZXNldCB0aGUgZmlsdGVyIHN5c3RlbS5cbiAqICoqcG9wKio6IFVzZSB7QGxpbmsgUElYSS5GaWx0ZXJTeXN0ZW0jcG9wfSB0byBwb3AgJiBleGVjdXRlIHRoZSBmaWx0ZXJzIHlvdSBpbml0aWFsbHkgcHVzaGVkLiBJdCB3aWxsIGFwcGx5IHRoZW1cbiAqICAgICAgc2VyaWFsbHkgYW5kIG91dHB1dCB0byB0aGUgYm91bmRzIG9mIHRoZSBmaWx0ZXItdGFyZ2V0LlxuICogQG1lbWJlcm9mIFBJWElcbiAqL1xudmFyIEZpbHRlclN5c3RlbSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gcmVuZGVyZXIgLSBUaGUgcmVuZGVyZXIgdGhpcyBTeXN0ZW0gd29ya3MgZm9yLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEZpbHRlclN5c3RlbShyZW5kZXJlcikge1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgIHRoaXMuZGVmYXVsdEZpbHRlclN0YWNrID0gW3t9XTtcbiAgICAgICAgdGhpcy50ZXh0dXJlUG9vbCA9IG5ldyBSZW5kZXJUZXh0dXJlUG9vbCgpO1xuICAgICAgICB0aGlzLnRleHR1cmVQb29sLnNldFNjcmVlblNpemUocmVuZGVyZXIudmlldyk7XG4gICAgICAgIHRoaXMuc3RhdGVQb29sID0gW107XG4gICAgICAgIHRoaXMucXVhZCA9IG5ldyBRdWFkKCk7XG4gICAgICAgIHRoaXMucXVhZFV2ID0gbmV3IFF1YWRVdigpO1xuICAgICAgICB0aGlzLnRlbXBSZWN0ID0gbmV3IG1hdGguUmVjdGFuZ2xlKCk7XG4gICAgICAgIHRoaXMuYWN0aXZlU3RhdGUgPSB7fTtcbiAgICAgICAgdGhpcy5nbG9iYWxVbmlmb3JtcyA9IG5ldyBVbmlmb3JtR3JvdXAoe1xuICAgICAgICAgICAgb3V0cHV0RnJhbWU6IG5ldyBtYXRoLlJlY3RhbmdsZSgpLFxuICAgICAgICAgICAgaW5wdXRTaXplOiBuZXcgRmxvYXQzMkFycmF5KDQpLFxuICAgICAgICAgICAgaW5wdXRQaXhlbDogbmV3IEZsb2F0MzJBcnJheSg0KSxcbiAgICAgICAgICAgIGlucHV0Q2xhbXA6IG5ldyBGbG9hdDMyQXJyYXkoNCksXG4gICAgICAgICAgICByZXNvbHV0aW9uOiAxLFxuICAgICAgICAgICAgLy8gbGVnYWN5IHZhcmlhYmxlc1xuICAgICAgICAgICAgZmlsdGVyQXJlYTogbmV3IEZsb2F0MzJBcnJheSg0KSxcbiAgICAgICAgICAgIGZpbHRlckNsYW1wOiBuZXcgRmxvYXQzMkFycmF5KDQpLFxuICAgICAgICB9LCB0cnVlKTtcbiAgICAgICAgdGhpcy5mb3JjZUNsZWFyID0gZmFsc2U7XG4gICAgICAgIHRoaXMudXNlTWF4UGFkZGluZyA9IGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQdXNoZXMgYSBzZXQgb2YgZmlsdGVycyB0byBiZSBhcHBsaWVkIGxhdGVyIHRvIHRoZSBzeXN0ZW0uIFRoaXMgd2lsbCByZWRpcmVjdCBmdXJ0aGVyIHJlbmRlcmluZyBpbnRvIGFuXG4gICAgICogaW5wdXQgcmVuZGVyLXRleHR1cmUgZm9yIHRoZSByZXN0IG9mIHRoZSBmaWx0ZXJpbmcgcGlwZWxpbmUuXG4gICAgICogQHBhcmFtIHtQSVhJLkRpc3BsYXlPYmplY3R9IHRhcmdldCAtIFRoZSB0YXJnZXQgb2YgdGhlIGZpbHRlciB0byByZW5kZXIuXG4gICAgICogQHBhcmFtIGZpbHRlcnMgLSBUaGUgZmlsdGVycyB0byBhcHBseS5cbiAgICAgKi9cbiAgICBGaWx0ZXJTeXN0ZW0ucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiAodGFyZ2V0LCBmaWx0ZXJzKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIHZhciByZW5kZXJlciA9IHRoaXMucmVuZGVyZXI7XG4gICAgICAgIHZhciBmaWx0ZXJTdGFjayA9IHRoaXMuZGVmYXVsdEZpbHRlclN0YWNrO1xuICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLnN0YXRlUG9vbC5wb3AoKSB8fCBuZXcgRmlsdGVyU3RhdGUoKTtcbiAgICAgICAgdmFyIHJlbmRlclRleHR1cmVTeXN0ZW0gPSB0aGlzLnJlbmRlcmVyLnJlbmRlclRleHR1cmU7XG4gICAgICAgIHZhciByZXNvbHV0aW9uID0gZmlsdGVyc1swXS5yZXNvbHV0aW9uO1xuICAgICAgICB2YXIgbXVsdGlzYW1wbGUgPSBmaWx0ZXJzWzBdLm11bHRpc2FtcGxlO1xuICAgICAgICB2YXIgcGFkZGluZyA9IGZpbHRlcnNbMF0ucGFkZGluZztcbiAgICAgICAgdmFyIGF1dG9GaXQgPSBmaWx0ZXJzWzBdLmF1dG9GaXQ7XG4gICAgICAgIC8vIFdlIGRvbid0IGtub3cgd2hldGhlciBpdCdzIGEgbGVnYWN5IGZpbHRlciB1bnRpbCBpdCB3YXMgYm91bmQgZm9yIHRoZSBmaXJzdCB0aW1lLFxuICAgICAgICAvLyB0aGVyZWZvcmUgd2UgaGF2ZSB0byBhc3N1bWUgdGhhdCBpdCBpcyBpZiBsZWdhY3kgaXMgdW5kZWZpbmVkLlxuICAgICAgICB2YXIgbGVnYWN5ID0gKF9hID0gZmlsdGVyc1swXS5sZWdhY3kpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHRydWU7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgZmlsdGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGZpbHRlciA9IGZpbHRlcnNbaV07XG4gICAgICAgICAgICAvLyBsZXQncyB1c2UgdGhlIGxvd2VzdCByZXNvbHV0aW9uXG4gICAgICAgICAgICByZXNvbHV0aW9uID0gTWF0aC5taW4ocmVzb2x1dGlvbiwgZmlsdGVyLnJlc29sdXRpb24pO1xuICAgICAgICAgICAgLy8gbGV0J3MgdXNlIHRoZSBsb3dlc3QgbnVtYmVyIG9mIHNhbXBsZXNcbiAgICAgICAgICAgIG11bHRpc2FtcGxlID0gTWF0aC5taW4obXVsdGlzYW1wbGUsIGZpbHRlci5tdWx0aXNhbXBsZSk7XG4gICAgICAgICAgICAvLyBmaWd1cmUgb3V0IHRoZSBwYWRkaW5nIHJlcXVpcmVkIGZvciBmaWx0ZXJzXG4gICAgICAgICAgICBwYWRkaW5nID0gdGhpcy51c2VNYXhQYWRkaW5nXG4gICAgICAgICAgICAgICAgLy8gb2xkIGJlaGF2aW9yOiB1c2UgbGFyZ2VzdCBhbW91bnQgb2YgcGFkZGluZyFcbiAgICAgICAgICAgICAgICA/IE1hdGgubWF4KHBhZGRpbmcsIGZpbHRlci5wYWRkaW5nKVxuICAgICAgICAgICAgICAgIC8vIG5ldyBiZWhhdmlvcjogc3VtIHRoZSBwYWRkaW5nXG4gICAgICAgICAgICAgICAgOiBwYWRkaW5nICsgZmlsdGVyLnBhZGRpbmc7XG4gICAgICAgICAgICAvLyBvbmx5IGF1dG8gZml0IGlmIGFsbCBmaWx0ZXJzIGFyZSBhdXRvZml0XG4gICAgICAgICAgICBhdXRvRml0ID0gYXV0b0ZpdCAmJiBmaWx0ZXIuYXV0b0ZpdDtcbiAgICAgICAgICAgIGxlZ2FjeSA9IGxlZ2FjeSB8fCAoKF9iID0gZmlsdGVyLmxlZ2FjeSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpbHRlclN0YWNrLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgdGhpcy5kZWZhdWx0RmlsdGVyU3RhY2tbMF0ucmVuZGVyVGV4dHVyZSA9IHJlbmRlclRleHR1cmVTeXN0ZW0uY3VycmVudDtcbiAgICAgICAgfVxuICAgICAgICBmaWx0ZXJTdGFjay5wdXNoKHN0YXRlKTtcbiAgICAgICAgc3RhdGUucmVzb2x1dGlvbiA9IHJlc29sdXRpb247XG4gICAgICAgIHN0YXRlLm11bHRpc2FtcGxlID0gbXVsdGlzYW1wbGU7XG4gICAgICAgIHN0YXRlLmxlZ2FjeSA9IGxlZ2FjeTtcbiAgICAgICAgc3RhdGUudGFyZ2V0ID0gdGFyZ2V0O1xuICAgICAgICBzdGF0ZS5zb3VyY2VGcmFtZS5jb3B5RnJvbSh0YXJnZXQuZmlsdGVyQXJlYSB8fCB0YXJnZXQuZ2V0Qm91bmRzKHRydWUpKTtcbiAgICAgICAgc3RhdGUuc291cmNlRnJhbWUucGFkKHBhZGRpbmcpO1xuICAgICAgICB2YXIgc291cmNlRnJhbWVQcm9qZWN0ZWQgPSB0aGlzLnRlbXBSZWN0LmNvcHlGcm9tKHJlbmRlclRleHR1cmVTeXN0ZW0uc291cmNlRnJhbWUpO1xuICAgICAgICAvLyBQcm9qZWN0IHNvdXJjZSBmcmFtZSBpbnRvIHdvcmxkIHNwYWNlIChpZiBwcm9qZWN0aW9uIGlzIGFwcGxpZWQpXG4gICAgICAgIGlmIChyZW5kZXJlci5wcm9qZWN0aW9uLnRyYW5zZm9ybSkge1xuICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm1BQUJCKHRlbXBNYXRyaXgkMi5jb3B5RnJvbShyZW5kZXJlci5wcm9qZWN0aW9uLnRyYW5zZm9ybSkuaW52ZXJ0KCksIHNvdXJjZUZyYW1lUHJvamVjdGVkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXV0b0ZpdCkge1xuICAgICAgICAgICAgc3RhdGUuc291cmNlRnJhbWUuZml0KHNvdXJjZUZyYW1lUHJvamVjdGVkKTtcbiAgICAgICAgICAgIGlmIChzdGF0ZS5zb3VyY2VGcmFtZS53aWR0aCA8PSAwIHx8IHN0YXRlLnNvdXJjZUZyYW1lLmhlaWdodCA8PSAwKSB7XG4gICAgICAgICAgICAgICAgc3RhdGUuc291cmNlRnJhbWUud2lkdGggPSAwO1xuICAgICAgICAgICAgICAgIHN0YXRlLnNvdXJjZUZyYW1lLmhlaWdodCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIXN0YXRlLnNvdXJjZUZyYW1lLmludGVyc2VjdHMoc291cmNlRnJhbWVQcm9qZWN0ZWQpKSB7XG4gICAgICAgICAgICBzdGF0ZS5zb3VyY2VGcmFtZS53aWR0aCA9IDA7XG4gICAgICAgICAgICBzdGF0ZS5zb3VyY2VGcmFtZS5oZWlnaHQgPSAwO1xuICAgICAgICB9XG4gICAgICAgIC8vIFJvdW5kIHNvdXJjZUZyYW1lIGluIHNjcmVlbiBzcGFjZSBiYXNlZCBvbiByZW5kZXItdGV4dHVyZS5cbiAgICAgICAgdGhpcy5yb3VuZEZyYW1lKHN0YXRlLnNvdXJjZUZyYW1lLCByZW5kZXJUZXh0dXJlU3lzdGVtLmN1cnJlbnQgPyByZW5kZXJUZXh0dXJlU3lzdGVtLmN1cnJlbnQucmVzb2x1dGlvbiA6IHJlbmRlcmVyLnJlc29sdXRpb24sIHJlbmRlclRleHR1cmVTeXN0ZW0uc291cmNlRnJhbWUsIHJlbmRlclRleHR1cmVTeXN0ZW0uZGVzdGluYXRpb25GcmFtZSwgcmVuZGVyZXIucHJvamVjdGlvbi50cmFuc2Zvcm0pO1xuICAgICAgICBzdGF0ZS5yZW5kZXJUZXh0dXJlID0gdGhpcy5nZXRPcHRpbWFsRmlsdGVyVGV4dHVyZShzdGF0ZS5zb3VyY2VGcmFtZS53aWR0aCwgc3RhdGUuc291cmNlRnJhbWUuaGVpZ2h0LCByZXNvbHV0aW9uLCBtdWx0aXNhbXBsZSk7XG4gICAgICAgIHN0YXRlLmZpbHRlcnMgPSBmaWx0ZXJzO1xuICAgICAgICBzdGF0ZS5kZXN0aW5hdGlvbkZyYW1lLndpZHRoID0gc3RhdGUucmVuZGVyVGV4dHVyZS53aWR0aDtcbiAgICAgICAgc3RhdGUuZGVzdGluYXRpb25GcmFtZS5oZWlnaHQgPSBzdGF0ZS5yZW5kZXJUZXh0dXJlLmhlaWdodDtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uRnJhbWUgPSB0aGlzLnRlbXBSZWN0O1xuICAgICAgICBkZXN0aW5hdGlvbkZyYW1lLnggPSAwO1xuICAgICAgICBkZXN0aW5hdGlvbkZyYW1lLnkgPSAwO1xuICAgICAgICBkZXN0aW5hdGlvbkZyYW1lLndpZHRoID0gc3RhdGUuc291cmNlRnJhbWUud2lkdGg7XG4gICAgICAgIGRlc3RpbmF0aW9uRnJhbWUuaGVpZ2h0ID0gc3RhdGUuc291cmNlRnJhbWUuaGVpZ2h0O1xuICAgICAgICBzdGF0ZS5yZW5kZXJUZXh0dXJlLmZpbHRlckZyYW1lID0gc3RhdGUuc291cmNlRnJhbWU7XG4gICAgICAgIHN0YXRlLmJpbmRpbmdTb3VyY2VGcmFtZS5jb3B5RnJvbShyZW5kZXJUZXh0dXJlU3lzdGVtLnNvdXJjZUZyYW1lKTtcbiAgICAgICAgc3RhdGUuYmluZGluZ0Rlc3RpbmF0aW9uRnJhbWUuY29weUZyb20ocmVuZGVyVGV4dHVyZVN5c3RlbS5kZXN0aW5hdGlvbkZyYW1lKTtcbiAgICAgICAgc3RhdGUudHJhbnNmb3JtID0gcmVuZGVyZXIucHJvamVjdGlvbi50cmFuc2Zvcm07XG4gICAgICAgIHJlbmRlcmVyLnByb2plY3Rpb24udHJhbnNmb3JtID0gbnVsbDtcbiAgICAgICAgcmVuZGVyVGV4dHVyZVN5c3RlbS5iaW5kKHN0YXRlLnJlbmRlclRleHR1cmUsIHN0YXRlLnNvdXJjZUZyYW1lLCBkZXN0aW5hdGlvbkZyYW1lKTtcbiAgICAgICAgcmVuZGVyZXIuZnJhbWVidWZmZXIuY2xlYXIoMCwgMCwgMCwgMCk7XG4gICAgfTtcbiAgICAvKiogUG9wcyBvZmYgdGhlIGZpbHRlciBhbmQgYXBwbGllcyBpdC4gKi9cbiAgICBGaWx0ZXJTeXN0ZW0ucHJvdG90eXBlLnBvcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGZpbHRlclN0YWNrID0gdGhpcy5kZWZhdWx0RmlsdGVyU3RhY2s7XG4gICAgICAgIHZhciBzdGF0ZSA9IGZpbHRlclN0YWNrLnBvcCgpO1xuICAgICAgICB2YXIgZmlsdGVycyA9IHN0YXRlLmZpbHRlcnM7XG4gICAgICAgIHRoaXMuYWN0aXZlU3RhdGUgPSBzdGF0ZTtcbiAgICAgICAgdmFyIGdsb2JhbFVuaWZvcm1zID0gdGhpcy5nbG9iYWxVbmlmb3Jtcy51bmlmb3JtcztcbiAgICAgICAgZ2xvYmFsVW5pZm9ybXMub3V0cHV0RnJhbWUgPSBzdGF0ZS5zb3VyY2VGcmFtZTtcbiAgICAgICAgZ2xvYmFsVW5pZm9ybXMucmVzb2x1dGlvbiA9IHN0YXRlLnJlc29sdXRpb247XG4gICAgICAgIHZhciBpbnB1dFNpemUgPSBnbG9iYWxVbmlmb3Jtcy5pbnB1dFNpemU7XG4gICAgICAgIHZhciBpbnB1dFBpeGVsID0gZ2xvYmFsVW5pZm9ybXMuaW5wdXRQaXhlbDtcbiAgICAgICAgdmFyIGlucHV0Q2xhbXAgPSBnbG9iYWxVbmlmb3Jtcy5pbnB1dENsYW1wO1xuICAgICAgICBpbnB1dFNpemVbMF0gPSBzdGF0ZS5kZXN0aW5hdGlvbkZyYW1lLndpZHRoO1xuICAgICAgICBpbnB1dFNpemVbMV0gPSBzdGF0ZS5kZXN0aW5hdGlvbkZyYW1lLmhlaWdodDtcbiAgICAgICAgaW5wdXRTaXplWzJdID0gMS4wIC8gaW5wdXRTaXplWzBdO1xuICAgICAgICBpbnB1dFNpemVbM10gPSAxLjAgLyBpbnB1dFNpemVbMV07XG4gICAgICAgIGlucHV0UGl4ZWxbMF0gPSBNYXRoLnJvdW5kKGlucHV0U2l6ZVswXSAqIHN0YXRlLnJlc29sdXRpb24pO1xuICAgICAgICBpbnB1dFBpeGVsWzFdID0gTWF0aC5yb3VuZChpbnB1dFNpemVbMV0gKiBzdGF0ZS5yZXNvbHV0aW9uKTtcbiAgICAgICAgaW5wdXRQaXhlbFsyXSA9IDEuMCAvIGlucHV0UGl4ZWxbMF07XG4gICAgICAgIGlucHV0UGl4ZWxbM10gPSAxLjAgLyBpbnB1dFBpeGVsWzFdO1xuICAgICAgICBpbnB1dENsYW1wWzBdID0gMC41ICogaW5wdXRQaXhlbFsyXTtcbiAgICAgICAgaW5wdXRDbGFtcFsxXSA9IDAuNSAqIGlucHV0UGl4ZWxbM107XG4gICAgICAgIGlucHV0Q2xhbXBbMl0gPSAoc3RhdGUuc291cmNlRnJhbWUud2lkdGggKiBpbnB1dFNpemVbMl0pIC0gKDAuNSAqIGlucHV0UGl4ZWxbMl0pO1xuICAgICAgICBpbnB1dENsYW1wWzNdID0gKHN0YXRlLnNvdXJjZUZyYW1lLmhlaWdodCAqIGlucHV0U2l6ZVszXSkgLSAoMC41ICogaW5wdXRQaXhlbFszXSk7XG4gICAgICAgIC8vIG9ubHkgdXBkYXRlIHRoZSByZWN0IGlmIGl0cyBsZWdhY3kuLlxuICAgICAgICBpZiAoc3RhdGUubGVnYWN5KSB7XG4gICAgICAgICAgICB2YXIgZmlsdGVyQXJlYSA9IGdsb2JhbFVuaWZvcm1zLmZpbHRlckFyZWE7XG4gICAgICAgICAgICBmaWx0ZXJBcmVhWzBdID0gc3RhdGUuZGVzdGluYXRpb25GcmFtZS53aWR0aDtcbiAgICAgICAgICAgIGZpbHRlckFyZWFbMV0gPSBzdGF0ZS5kZXN0aW5hdGlvbkZyYW1lLmhlaWdodDtcbiAgICAgICAgICAgIGZpbHRlckFyZWFbMl0gPSBzdGF0ZS5zb3VyY2VGcmFtZS54O1xuICAgICAgICAgICAgZmlsdGVyQXJlYVszXSA9IHN0YXRlLnNvdXJjZUZyYW1lLnk7XG4gICAgICAgICAgICBnbG9iYWxVbmlmb3Jtcy5maWx0ZXJDbGFtcCA9IGdsb2JhbFVuaWZvcm1zLmlucHV0Q2xhbXA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5nbG9iYWxVbmlmb3Jtcy51cGRhdGUoKTtcbiAgICAgICAgdmFyIGxhc3RTdGF0ZSA9IGZpbHRlclN0YWNrW2ZpbHRlclN0YWNrLmxlbmd0aCAtIDFdO1xuICAgICAgICB0aGlzLnJlbmRlcmVyLmZyYW1lYnVmZmVyLmJsaXQoKTtcbiAgICAgICAgaWYgKGZpbHRlcnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICBmaWx0ZXJzWzBdLmFwcGx5KHRoaXMsIHN0YXRlLnJlbmRlclRleHR1cmUsIGxhc3RTdGF0ZS5yZW5kZXJUZXh0dXJlLCBjb25zdGFudHMuQ0xFQVJfTU9ERVMuQkxFTkQsIHN0YXRlKTtcbiAgICAgICAgICAgIHRoaXMucmV0dXJuRmlsdGVyVGV4dHVyZShzdGF0ZS5yZW5kZXJUZXh0dXJlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBmbGlwID0gc3RhdGUucmVuZGVyVGV4dHVyZTtcbiAgICAgICAgICAgIHZhciBmbG9wID0gdGhpcy5nZXRPcHRpbWFsRmlsdGVyVGV4dHVyZShmbGlwLndpZHRoLCBmbGlwLmhlaWdodCwgc3RhdGUucmVzb2x1dGlvbik7XG4gICAgICAgICAgICBmbG9wLmZpbHRlckZyYW1lID0gZmxpcC5maWx0ZXJGcmFtZTtcbiAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBmaWx0ZXJzLmxlbmd0aCAtIDE7ICsraSkge1xuICAgICAgICAgICAgICAgIGlmIChpID09PSAxICYmIHN0YXRlLm11bHRpc2FtcGxlID4gMSkge1xuICAgICAgICAgICAgICAgICAgICBmbG9wID0gdGhpcy5nZXRPcHRpbWFsRmlsdGVyVGV4dHVyZShmbGlwLndpZHRoLCBmbGlwLmhlaWdodCwgc3RhdGUucmVzb2x1dGlvbik7XG4gICAgICAgICAgICAgICAgICAgIGZsb3AuZmlsdGVyRnJhbWUgPSBmbGlwLmZpbHRlckZyYW1lO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmaWx0ZXJzW2ldLmFwcGx5KHRoaXMsIGZsaXAsIGZsb3AsIGNvbnN0YW50cy5DTEVBUl9NT0RFUy5DTEVBUiwgc3RhdGUpO1xuICAgICAgICAgICAgICAgIHZhciB0ID0gZmxpcDtcbiAgICAgICAgICAgICAgICBmbGlwID0gZmxvcDtcbiAgICAgICAgICAgICAgICBmbG9wID0gdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbHRlcnNbaV0uYXBwbHkodGhpcywgZmxpcCwgbGFzdFN0YXRlLnJlbmRlclRleHR1cmUsIGNvbnN0YW50cy5DTEVBUl9NT0RFUy5CTEVORCwgc3RhdGUpO1xuICAgICAgICAgICAgaWYgKGkgPiAxICYmIHN0YXRlLm11bHRpc2FtcGxlID4gMSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmV0dXJuRmlsdGVyVGV4dHVyZShzdGF0ZS5yZW5kZXJUZXh0dXJlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmV0dXJuRmlsdGVyVGV4dHVyZShmbGlwKTtcbiAgICAgICAgICAgIHRoaXMucmV0dXJuRmlsdGVyVGV4dHVyZShmbG9wKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBsYXN0U3RhdGUucmVuZGVyVGV4dHVyZSBpcyBibGl0dGVkIHdoZW4gbGFzdFN0YXRlIGlzIHBvcHBlZFxuICAgICAgICBzdGF0ZS5jbGVhcigpO1xuICAgICAgICB0aGlzLnN0YXRlUG9vbC5wdXNoKHN0YXRlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEJpbmRzIGEgcmVuZGVyVGV4dHVyZSB3aXRoIGNvcnJlc3BvbmRpbmcgYGZpbHRlckZyYW1lYCwgY2xlYXJzIGl0IGlmIG1vZGUgY29ycmVzcG9uZHMuXG4gICAgICogQHBhcmFtIGZpbHRlclRleHR1cmUgLSByZW5kZXJUZXh0dXJlIHRvIGJpbmQsIHNob3VsZCBiZWxvbmcgdG8gZmlsdGVyIHBvb2wgb3IgZmlsdGVyIHN0YWNrXG4gICAgICogQHBhcmFtIGNsZWFyTW9kZSAtIGNsZWFyTW9kZSwgYnkgZGVmYXVsdCBpdHMgQ0xFQVIvWUVTLiBTZWUge0BsaW5rIFBJWEkuQ0xFQVJfTU9ERVN9XG4gICAgICovXG4gICAgRmlsdGVyU3lzdGVtLnByb3RvdHlwZS5iaW5kQW5kQ2xlYXIgPSBmdW5jdGlvbiAoZmlsdGVyVGV4dHVyZSwgY2xlYXJNb2RlKSB7XG4gICAgICAgIGlmIChjbGVhck1vZGUgPT09IHZvaWQgMCkgeyBjbGVhck1vZGUgPSBjb25zdGFudHMuQ0xFQVJfTU9ERVMuQ0xFQVI7IH1cbiAgICAgICAgdmFyIF9hID0gdGhpcy5yZW5kZXJlciwgcmVuZGVyVGV4dHVyZVN5c3RlbSA9IF9hLnJlbmRlclRleHR1cmUsIHN0YXRlU3lzdGVtID0gX2Euc3RhdGU7XG4gICAgICAgIGlmIChmaWx0ZXJUZXh0dXJlID09PSB0aGlzLmRlZmF1bHRGaWx0ZXJTdGFja1t0aGlzLmRlZmF1bHRGaWx0ZXJTdGFjay5sZW5ndGggLSAxXS5yZW5kZXJUZXh0dXJlKSB7XG4gICAgICAgICAgICAvLyBSZXN0b3JlIHByb2plY3Rpb24gdHJhbnNmb3JtIGlmIHJlbmRlcmluZyBpbnRvIHRoZSBvdXRwdXQgcmVuZGVyLXRhcmdldC5cbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIucHJvamVjdGlvbi50cmFuc2Zvcm0gPSB0aGlzLmFjdGl2ZVN0YXRlLnRyYW5zZm9ybTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIFByZXZlbnQgcHJvamVjdGlvbiB3aXRoaW4gZmlsdGVyaW5nIHBpcGVsaW5lLlxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5wcm9qZWN0aW9uLnRyYW5zZm9ybSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpbHRlclRleHR1cmUgJiYgZmlsdGVyVGV4dHVyZS5maWx0ZXJGcmFtZSkge1xuICAgICAgICAgICAgdmFyIGRlc3RpbmF0aW9uRnJhbWUgPSB0aGlzLnRlbXBSZWN0O1xuICAgICAgICAgICAgZGVzdGluYXRpb25GcmFtZS54ID0gMDtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uRnJhbWUueSA9IDA7XG4gICAgICAgICAgICBkZXN0aW5hdGlvbkZyYW1lLndpZHRoID0gZmlsdGVyVGV4dHVyZS5maWx0ZXJGcmFtZS53aWR0aDtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uRnJhbWUuaGVpZ2h0ID0gZmlsdGVyVGV4dHVyZS5maWx0ZXJGcmFtZS5oZWlnaHQ7XG4gICAgICAgICAgICByZW5kZXJUZXh0dXJlU3lzdGVtLmJpbmQoZmlsdGVyVGV4dHVyZSwgZmlsdGVyVGV4dHVyZS5maWx0ZXJGcmFtZSwgZGVzdGluYXRpb25GcmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZmlsdGVyVGV4dHVyZSAhPT0gdGhpcy5kZWZhdWx0RmlsdGVyU3RhY2tbdGhpcy5kZWZhdWx0RmlsdGVyU3RhY2subGVuZ3RoIC0gMV0ucmVuZGVyVGV4dHVyZSkge1xuICAgICAgICAgICAgcmVuZGVyVGV4dHVyZVN5c3RlbS5iaW5kKGZpbHRlclRleHR1cmUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gUmVzdG9yZSBiaW5kaW5nIGZvciBvdXRwdXQgcmVuZGVyLXRhcmdldC5cbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIucmVuZGVyVGV4dHVyZS5iaW5kKGZpbHRlclRleHR1cmUsIHRoaXMuYWN0aXZlU3RhdGUuYmluZGluZ1NvdXJjZUZyYW1lLCB0aGlzLmFjdGl2ZVN0YXRlLmJpbmRpbmdEZXN0aW5hdGlvbkZyYW1lKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBDbGVhciB0aGUgdGV4dHVyZSBpbiBCTElUIG1vZGUgaWYgYmxlbmRpbmcgaXMgZGlzYWJsZWQgb3IgdGhlIGZvcmNlQ2xlYXIgZmxhZyBpcyBzZXQuIFRoZSBibGVuZGluZ1xuICAgICAgICAvLyBpcyBzdG9yZWQgaW4gdGhlIDB0aCBiaXQgb2YgdGhlIHN0YXRlLlxuICAgICAgICB2YXIgYXV0b0NsZWFyID0gKHN0YXRlU3lzdGVtLnN0YXRlSWQgJiAxKSB8fCB0aGlzLmZvcmNlQ2xlYXI7XG4gICAgICAgIGlmIChjbGVhck1vZGUgPT09IGNvbnN0YW50cy5DTEVBUl9NT0RFUy5DTEVBUlxuICAgICAgICAgICAgfHwgKGNsZWFyTW9kZSA9PT0gY29uc3RhbnRzLkNMRUFSX01PREVTLkJMSVQgJiYgYXV0b0NsZWFyKSkge1xuICAgICAgICAgICAgLy8gVXNlIGZyYW1lYnVmZmVyLmNsZWFyIGJlY2F1c2Ugd2Ugd2FudCB0byBjbGVhciB0aGUgd2hvbGUgZmlsdGVyIHRleHR1cmUsIG5vdCBqdXN0IHRoZSBmaWx0ZXJpbmdcbiAgICAgICAgICAgIC8vIGFyZWEgb3ZlciB3aGljaCB0aGUgc2hhZGVycyBhcmUgcnVuLiBUaGlzIGlzIGJlY2F1c2UgZmlsdGVycyBtYXkgc2FtcGxpbmcgb3V0c2lkZSBvZiBpdCAoZS5nLiBibHVyKVxuICAgICAgICAgICAgLy8gaW5zdGVhZCBvZiBjbGFtcGluZyB0aGVpciBhcml0aG1ldGljLlxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5mcmFtZWJ1ZmZlci5jbGVhcigwLCAwLCAwLCAwKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogRHJhd3MgYSBmaWx0ZXIgdXNpbmcgdGhlIGRlZmF1bHQgcmVuZGVyaW5nIHByb2Nlc3MuXG4gICAgICpcbiAgICAgKiBUaGlzIHNob3VsZCBiZSBjYWxsZWQgb25seSBieSB7QGxpbmsgRmlsdGVyI2FwcGx5fS5cbiAgICAgKiBAcGFyYW0gZmlsdGVyIC0gVGhlIGZpbHRlciB0byBkcmF3LlxuICAgICAqIEBwYXJhbSBpbnB1dCAtIFRoZSBpbnB1dCByZW5kZXIgdGFyZ2V0LlxuICAgICAqIEBwYXJhbSBvdXRwdXQgLSBUaGUgdGFyZ2V0IHRvIG91dHB1dCB0by5cbiAgICAgKiBAcGFyYW0gY2xlYXJNb2RlIC0gU2hvdWxkIHRoZSBvdXRwdXQgYmUgY2xlYXJlZCBiZWZvcmUgcmVuZGVyaW5nIHRvIGl0XG4gICAgICovXG4gICAgRmlsdGVyU3lzdGVtLnByb3RvdHlwZS5hcHBseUZpbHRlciA9IGZ1bmN0aW9uIChmaWx0ZXIsIGlucHV0LCBvdXRwdXQsIGNsZWFyTW9kZSkge1xuICAgICAgICB2YXIgcmVuZGVyZXIgPSB0aGlzLnJlbmRlcmVyO1xuICAgICAgICAvLyBTZXQgc3RhdGUgYmVmb3JlIGJpbmRpbmcsIHNvIGJpbmRBbmRDbGVhciBnZXRzIHRoZSBibGVuZCBtb2RlLlxuICAgICAgICByZW5kZXJlci5zdGF0ZS5zZXQoZmlsdGVyLnN0YXRlKTtcbiAgICAgICAgdGhpcy5iaW5kQW5kQ2xlYXIob3V0cHV0LCBjbGVhck1vZGUpO1xuICAgICAgICAvLyBzZXQgdGhlIHVuaWZvcm1zLi5cbiAgICAgICAgZmlsdGVyLnVuaWZvcm1zLnVTYW1wbGVyID0gaW5wdXQ7XG4gICAgICAgIGZpbHRlci51bmlmb3Jtcy5maWx0ZXJHbG9iYWxzID0gdGhpcy5nbG9iYWxVbmlmb3JtcztcbiAgICAgICAgLy8gVE9ETyBtYWtlIGl0IHNvIHRoYXQgdGhlIG9yZGVyIG9mIHRoaXMgZG9lcyBub3QgbWF0dGVyLi5cbiAgICAgICAgLy8gYmVjYXVzZSBpdCBkb2VzIGF0IHRoZSBtb21lbnQgY29zIG9mIGdsb2JhbCB1bmlmb3Jtcy5cbiAgICAgICAgLy8gdGhleSBuZWVkIHRvIGdldCByZXN5bmNlZFxuICAgICAgICByZW5kZXJlci5zaGFkZXIuYmluZChmaWx0ZXIpO1xuICAgICAgICAvLyBjaGVjayB0byBzZWUgaWYgdGhlIGZpbHRlciBpcyBhIGxlZ2FjeSBvbmUuLlxuICAgICAgICBmaWx0ZXIubGVnYWN5ID0gISFmaWx0ZXIucHJvZ3JhbS5hdHRyaWJ1dGVEYXRhLmFUZXh0dXJlQ29vcmQ7XG4gICAgICAgIGlmIChmaWx0ZXIubGVnYWN5KSB7XG4gICAgICAgICAgICB0aGlzLnF1YWRVdi5tYXAoaW5wdXQuX2ZyYW1lLCBpbnB1dC5maWx0ZXJGcmFtZSk7XG4gICAgICAgICAgICByZW5kZXJlci5nZW9tZXRyeS5iaW5kKHRoaXMucXVhZFV2KTtcbiAgICAgICAgICAgIHJlbmRlcmVyLmdlb21ldHJ5LmRyYXcoY29uc3RhbnRzLkRSQVdfTU9ERVMuVFJJQU5HTEVTKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlbmRlcmVyLmdlb21ldHJ5LmJpbmQodGhpcy5xdWFkKTtcbiAgICAgICAgICAgIHJlbmRlcmVyLmdlb21ldHJ5LmRyYXcoY29uc3RhbnRzLkRSQVdfTU9ERVMuVFJJQU5HTEVfU1RSSVApO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBNdWx0aXBseSBfaW5wdXQgbm9ybWFsaXplZCBjb29yZGluYXRlc18gdG8gdGhpcyBtYXRyaXggdG8gZ2V0IF9zcHJpdGUgdGV4dHVyZSBub3JtYWxpemVkIGNvb3JkaW5hdGVzXy5cbiAgICAgKlxuICAgICAqIFVzZSBgb3V0cHV0TWF0cml4ICogdlRleHR1cmVDb29yZGAgaW4gdGhlIHNoYWRlci5cbiAgICAgKiBAcGFyYW0gb3V0cHV0TWF0cml4IC0gVGhlIG1hdHJpeCB0byBvdXRwdXQgdG8uXG4gICAgICogQHBhcmFtIHtQSVhJLlNwcml0ZX0gc3ByaXRlIC0gVGhlIHNwcml0ZSB0byBtYXAgdG8uXG4gICAgICogQHJldHVybnMgVGhlIG1hcHBlZCBtYXRyaXguXG4gICAgICovXG4gICAgRmlsdGVyU3lzdGVtLnByb3RvdHlwZS5jYWxjdWxhdGVTcHJpdGVNYXRyaXggPSBmdW5jdGlvbiAob3V0cHV0TWF0cml4LCBzcHJpdGUpIHtcbiAgICAgICAgdmFyIF9hID0gdGhpcy5hY3RpdmVTdGF0ZSwgc291cmNlRnJhbWUgPSBfYS5zb3VyY2VGcmFtZSwgZGVzdGluYXRpb25GcmFtZSA9IF9hLmRlc3RpbmF0aW9uRnJhbWU7XG4gICAgICAgIHZhciBvcmlnID0gc3ByaXRlLl90ZXh0dXJlLm9yaWc7XG4gICAgICAgIHZhciBtYXBwZWRNYXRyaXggPSBvdXRwdXRNYXRyaXguc2V0KGRlc3RpbmF0aW9uRnJhbWUud2lkdGgsIDAsIDAsIGRlc3RpbmF0aW9uRnJhbWUuaGVpZ2h0LCBzb3VyY2VGcmFtZS54LCBzb3VyY2VGcmFtZS55KTtcbiAgICAgICAgdmFyIHdvcmxkVHJhbnNmb3JtID0gc3ByaXRlLndvcmxkVHJhbnNmb3JtLmNvcHlUbyhtYXRoLk1hdHJpeC5URU1QX01BVFJJWCk7XG4gICAgICAgIHdvcmxkVHJhbnNmb3JtLmludmVydCgpO1xuICAgICAgICBtYXBwZWRNYXRyaXgucHJlcGVuZCh3b3JsZFRyYW5zZm9ybSk7XG4gICAgICAgIG1hcHBlZE1hdHJpeC5zY2FsZSgxLjAgLyBvcmlnLndpZHRoLCAxLjAgLyBvcmlnLmhlaWdodCk7XG4gICAgICAgIG1hcHBlZE1hdHJpeC50cmFuc2xhdGUoc3ByaXRlLmFuY2hvci54LCBzcHJpdGUuYW5jaG9yLnkpO1xuICAgICAgICByZXR1cm4gbWFwcGVkTWF0cml4O1xuICAgIH07XG4gICAgLyoqIERlc3Ryb3lzIHRoaXMgRmlsdGVyIFN5c3RlbS4gKi9cbiAgICBGaWx0ZXJTeXN0ZW0ucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSBudWxsO1xuICAgICAgICAvLyBUaG9zZSB0ZXh0dXJlcyBoYXMgdG8gYmUgZGVzdHJveWVkIGJ5IFJlbmRlclRleHR1cmVTeXN0ZW0gb3IgRnJhbWVidWZmZXJTeXN0ZW1cbiAgICAgICAgdGhpcy50ZXh0dXJlUG9vbC5jbGVhcihmYWxzZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXRzIGEgUG93ZXItb2YtVHdvIHJlbmRlciB0ZXh0dXJlIG9yIGZ1bGxTY3JlZW4gdGV4dHVyZVxuICAgICAqIEBwYXJhbSBtaW5XaWR0aCAtIFRoZSBtaW5pbXVtIHdpZHRoIG9mIHRoZSByZW5kZXIgdGV4dHVyZSBpbiByZWFsIHBpeGVscy5cbiAgICAgKiBAcGFyYW0gbWluSGVpZ2h0IC0gVGhlIG1pbmltdW0gaGVpZ2h0IG9mIHRoZSByZW5kZXIgdGV4dHVyZSBpbiByZWFsIHBpeGVscy5cbiAgICAgKiBAcGFyYW0gcmVzb2x1dGlvbiAtIFRoZSByZXNvbHV0aW9uIG9mIHRoZSByZW5kZXIgdGV4dHVyZS5cbiAgICAgKiBAcGFyYW0gbXVsdGlzYW1wbGUgLSBOdW1iZXIgb2Ygc2FtcGxlcyBvZiB0aGUgcmVuZGVyIHRleHR1cmUuXG4gICAgICogQHJldHVybnMgLSBUaGUgbmV3IHJlbmRlciB0ZXh0dXJlLlxuICAgICAqL1xuICAgIEZpbHRlclN5c3RlbS5wcm90b3R5cGUuZ2V0T3B0aW1hbEZpbHRlclRleHR1cmUgPSBmdW5jdGlvbiAobWluV2lkdGgsIG1pbkhlaWdodCwgcmVzb2x1dGlvbiwgbXVsdGlzYW1wbGUpIHtcbiAgICAgICAgaWYgKHJlc29sdXRpb24gPT09IHZvaWQgMCkgeyByZXNvbHV0aW9uID0gMTsgfVxuICAgICAgICBpZiAobXVsdGlzYW1wbGUgPT09IHZvaWQgMCkgeyBtdWx0aXNhbXBsZSA9IGNvbnN0YW50cy5NU0FBX1FVQUxJVFkuTk9ORTsgfVxuICAgICAgICByZXR1cm4gdGhpcy50ZXh0dXJlUG9vbC5nZXRPcHRpbWFsVGV4dHVyZShtaW5XaWR0aCwgbWluSGVpZ2h0LCByZXNvbHV0aW9uLCBtdWx0aXNhbXBsZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXRzIGV4dHJhIHJlbmRlciB0ZXh0dXJlIHRvIHVzZSBpbnNpZGUgY3VycmVudCBmaWx0ZXJcbiAgICAgKiBUbyBiZSBjb21wbGlhbnQgd2l0aCBvbGRlciBmaWx0ZXJzLCB5b3UgY2FuIHVzZSBwYXJhbXMgaW4gYW55IG9yZGVyXG4gICAgICogQHBhcmFtIGlucHV0IC0gcmVuZGVyVGV4dHVyZSBmcm9tIHdoaWNoIHNpemUgYW5kIHJlc29sdXRpb24gd2lsbCBiZSBjb3BpZWRcbiAgICAgKiBAcGFyYW0gcmVzb2x1dGlvbiAtIG92ZXJyaWRlIHJlc29sdXRpb24gb2YgdGhlIHJlbmRlclRleHR1cmVcbiAgICAgKiBAcGFyYW0gbXVsdGlzYW1wbGUgLSBudW1iZXIgb2Ygc2FtcGxlcyBvZiB0aGUgcmVuZGVyVGV4dHVyZVxuICAgICAqL1xuICAgIEZpbHRlclN5c3RlbS5wcm90b3R5cGUuZ2V0RmlsdGVyVGV4dHVyZSA9IGZ1bmN0aW9uIChpbnB1dCwgcmVzb2x1dGlvbiwgbXVsdGlzYW1wbGUpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHZhciBzd2FwID0gaW5wdXQ7XG4gICAgICAgICAgICBpbnB1dCA9IHJlc29sdXRpb247XG4gICAgICAgICAgICByZXNvbHV0aW9uID0gc3dhcDtcbiAgICAgICAgfVxuICAgICAgICBpbnB1dCA9IGlucHV0IHx8IHRoaXMuYWN0aXZlU3RhdGUucmVuZGVyVGV4dHVyZTtcbiAgICAgICAgdmFyIGZpbHRlclRleHR1cmUgPSB0aGlzLnRleHR1cmVQb29sLmdldE9wdGltYWxUZXh0dXJlKGlucHV0LndpZHRoLCBpbnB1dC5oZWlnaHQsIHJlc29sdXRpb24gfHwgaW5wdXQucmVzb2x1dGlvbiwgbXVsdGlzYW1wbGUgfHwgY29uc3RhbnRzLk1TQUFfUVVBTElUWS5OT05FKTtcbiAgICAgICAgZmlsdGVyVGV4dHVyZS5maWx0ZXJGcmFtZSA9IGlucHV0LmZpbHRlckZyYW1lO1xuICAgICAgICByZXR1cm4gZmlsdGVyVGV4dHVyZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEZyZWVzIGEgcmVuZGVyIHRleHR1cmUgYmFjayBpbnRvIHRoZSBwb29sLlxuICAgICAqIEBwYXJhbSByZW5kZXJUZXh0dXJlIC0gVGhlIHJlbmRlclRhcmdldCB0byBmcmVlXG4gICAgICovXG4gICAgRmlsdGVyU3lzdGVtLnByb3RvdHlwZS5yZXR1cm5GaWx0ZXJUZXh0dXJlID0gZnVuY3Rpb24gKHJlbmRlclRleHR1cmUpIHtcbiAgICAgICAgdGhpcy50ZXh0dXJlUG9vbC5yZXR1cm5UZXh0dXJlKHJlbmRlclRleHR1cmUpO1xuICAgIH07XG4gICAgLyoqIEVtcHRpZXMgdGhlIHRleHR1cmUgcG9vbC4gKi9cbiAgICBGaWx0ZXJTeXN0ZW0ucHJvdG90eXBlLmVtcHR5UG9vbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy50ZXh0dXJlUG9vbC5jbGVhcih0cnVlKTtcbiAgICB9O1xuICAgIC8qKiBDYWxscyBgdGV4dHVyZVBvb2wucmVzaXplKClgLCBhZmZlY3RzIGZ1bGxTY3JlZW4gcmVuZGVyVGV4dHVyZXMuICovXG4gICAgRmlsdGVyU3lzdGVtLnByb3RvdHlwZS5yZXNpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMudGV4dHVyZVBvb2wuc2V0U2NyZWVuU2l6ZSh0aGlzLnJlbmRlcmVyLnZpZXcpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIG1hdHJpeCAtIGZpcnN0IHBhcmFtXG4gICAgICogQHBhcmFtIHJlY3QgLSBzZWNvbmQgcGFyYW1cbiAgICAgKi9cbiAgICBGaWx0ZXJTeXN0ZW0ucHJvdG90eXBlLnRyYW5zZm9ybUFBQkIgPSBmdW5jdGlvbiAobWF0cml4LCByZWN0KSB7XG4gICAgICAgIHZhciBsdCA9IHRlbXBQb2ludHNbMF07XG4gICAgICAgIHZhciBsYiA9IHRlbXBQb2ludHNbMV07XG4gICAgICAgIHZhciBydCA9IHRlbXBQb2ludHNbMl07XG4gICAgICAgIHZhciByYiA9IHRlbXBQb2ludHNbM107XG4gICAgICAgIGx0LnNldChyZWN0LmxlZnQsIHJlY3QudG9wKTtcbiAgICAgICAgbGIuc2V0KHJlY3QubGVmdCwgcmVjdC5ib3R0b20pO1xuICAgICAgICBydC5zZXQocmVjdC5yaWdodCwgcmVjdC50b3ApO1xuICAgICAgICByYi5zZXQocmVjdC5yaWdodCwgcmVjdC5ib3R0b20pO1xuICAgICAgICBtYXRyaXguYXBwbHkobHQsIGx0KTtcbiAgICAgICAgbWF0cml4LmFwcGx5KGxiLCBsYik7XG4gICAgICAgIG1hdHJpeC5hcHBseShydCwgcnQpO1xuICAgICAgICBtYXRyaXguYXBwbHkocmIsIHJiKTtcbiAgICAgICAgdmFyIHgwID0gTWF0aC5taW4obHQueCwgbGIueCwgcnQueCwgcmIueCk7XG4gICAgICAgIHZhciB5MCA9IE1hdGgubWluKGx0LnksIGxiLnksIHJ0LnksIHJiLnkpO1xuICAgICAgICB2YXIgeDEgPSBNYXRoLm1heChsdC54LCBsYi54LCBydC54LCByYi54KTtcbiAgICAgICAgdmFyIHkxID0gTWF0aC5tYXgobHQueSwgbGIueSwgcnQueSwgcmIueSk7XG4gICAgICAgIHJlY3QueCA9IHgwO1xuICAgICAgICByZWN0LnkgPSB5MDtcbiAgICAgICAgcmVjdC53aWR0aCA9IHgxIC0geDA7XG4gICAgICAgIHJlY3QuaGVpZ2h0ID0geTEgLSB5MDtcbiAgICB9O1xuICAgIEZpbHRlclN5c3RlbS5wcm90b3R5cGUucm91bmRGcmFtZSA9IGZ1bmN0aW9uIChmcmFtZSwgcmVzb2x1dGlvbiwgYmluZGluZ1NvdXJjZUZyYW1lLCBiaW5kaW5nRGVzdGluYXRpb25GcmFtZSwgdHJhbnNmb3JtKSB7XG4gICAgICAgIGlmIChmcmFtZS53aWR0aCA8PSAwIHx8IGZyYW1lLmhlaWdodCA8PSAwIHx8IGJpbmRpbmdTb3VyY2VGcmFtZS53aWR0aCA8PSAwIHx8IGJpbmRpbmdTb3VyY2VGcmFtZS5oZWlnaHQgPD0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0cmFuc2Zvcm0pIHtcbiAgICAgICAgICAgIHZhciBhID0gdHJhbnNmb3JtLmEsIGIgPSB0cmFuc2Zvcm0uYiwgYyA9IHRyYW5zZm9ybS5jLCBkID0gdHJhbnNmb3JtLmQ7XG4gICAgICAgICAgICAvLyBTa2lwIGlmIHNrZXcvcm90YXRpb24gcHJlc2VudCBpbiBtYXRyaXgsIGV4Y2VwdCBmb3IgbXVsdGlwbGUgb2YgOTDCsCByb3RhdGlvbi4gSWYgcm90YXRpb25cbiAgICAgICAgICAgIC8vIGlzIGEgbXVsdGlwbGUgb2YgOTDCsCwgdGhlbiBlaXRoZXIgcGFpciBvZiAoYixjKSBvciAoYSxkKSB3aWxsIGJlICgwLDApLlxuICAgICAgICAgICAgaWYgKChNYXRoLmFicyhiKSA+IDFlLTQgfHwgTWF0aC5hYnMoYykgPiAxZS00KVxuICAgICAgICAgICAgICAgICYmIChNYXRoLmFicyhhKSA+IDFlLTQgfHwgTWF0aC5hYnMoZCkgPiAxZS00KSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0cmFuc2Zvcm0gPSB0cmFuc2Zvcm0gPyB0ZW1wTWF0cml4JDIuY29weUZyb20odHJhbnNmb3JtKSA6IHRlbXBNYXRyaXgkMi5pZGVudGl0eSgpO1xuICAgICAgICAvLyBHZXQgZm9yd2FyZCB0cmFuc2Zvcm0gZnJvbSB3b3JsZCBzcGFjZSB0byBzY3JlZW4gc3BhY2VcbiAgICAgICAgdHJhbnNmb3JtXG4gICAgICAgICAgICAudHJhbnNsYXRlKC1iaW5kaW5nU291cmNlRnJhbWUueCwgLWJpbmRpbmdTb3VyY2VGcmFtZS55KVxuICAgICAgICAgICAgLnNjYWxlKGJpbmRpbmdEZXN0aW5hdGlvbkZyYW1lLndpZHRoIC8gYmluZGluZ1NvdXJjZUZyYW1lLndpZHRoLCBiaW5kaW5nRGVzdGluYXRpb25GcmFtZS5oZWlnaHQgLyBiaW5kaW5nU291cmNlRnJhbWUuaGVpZ2h0KVxuICAgICAgICAgICAgLnRyYW5zbGF0ZShiaW5kaW5nRGVzdGluYXRpb25GcmFtZS54LCBiaW5kaW5nRGVzdGluYXRpb25GcmFtZS55KTtcbiAgICAgICAgLy8gQ29udmVydCBmcmFtZSB0byBzY3JlZW4gc3BhY2VcbiAgICAgICAgdGhpcy50cmFuc2Zvcm1BQUJCKHRyYW5zZm9ybSwgZnJhbWUpO1xuICAgICAgICAvLyBSb3VuZCBmcmFtZSBpbiBzY3JlZW4gc3BhY2VcbiAgICAgICAgZnJhbWUuY2VpbChyZXNvbHV0aW9uKTtcbiAgICAgICAgLy8gUHJvamVjdCBiYWNrIGludG8gd29ybGQgc3BhY2UuXG4gICAgICAgIHRoaXMudHJhbnNmb3JtQUFCQih0cmFuc2Zvcm0uaW52ZXJ0KCksIGZyYW1lKTtcbiAgICB9O1xuICAgIHJldHVybiBGaWx0ZXJTeXN0ZW07XG59KCkpO1xuXG4vKipcbiAqIEJhc2UgZm9yIGEgY29tbW9uIG9iamVjdCByZW5kZXJlciB0aGF0IGNhbiBiZSB1c2VkIGFzIGFcbiAqIHN5c3RlbSByZW5kZXJlciBwbHVnaW4uXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG52YXIgT2JqZWN0UmVuZGVyZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHJlbmRlcmVyIC0gVGhlIHJlbmRlcmVyIHRoaXMgbWFuYWdlciB3b3JrcyBmb3IuXG4gICAgICovXG4gICAgZnVuY3Rpb24gT2JqZWN0UmVuZGVyZXIocmVuZGVyZXIpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIH1cbiAgICAvKiogU3R1YiBtZXRob2QgdGhhdCBzaG91bGQgYmUgdXNlZCB0byBlbXB0eSB0aGUgY3VycmVudCBiYXRjaCBieSByZW5kZXJpbmcgb2JqZWN0cyBub3cuICovXG4gICAgT2JqZWN0UmVuZGVyZXIucHJvdG90eXBlLmZsdXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBmbHVzaCFcbiAgICB9O1xuICAgIC8qKiBHZW5lcmljIGRlc3RydWN0aW9uIG1ldGhvZCB0aGF0IGZyZWVzIGFsbCByZXNvdXJjZXMuIFRoaXMgc2hvdWxkIGJlIGNhbGxlZCBieSBzdWJjbGFzc2VzLiAqL1xuICAgIE9iamVjdFJlbmRlcmVyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gbnVsbDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFN0dWIgbWV0aG9kIHRoYXQgaW5pdGlhbGl6ZXMgYW55IHN0YXRlIHJlcXVpcmVkIGJlZm9yZVxuICAgICAqIHJlbmRlcmluZyBzdGFydHMuIEl0IGlzIGRpZmZlcmVudCBmcm9tIHRoZSBgcHJlcmVuZGVyYFxuICAgICAqIHNpZ25hbCwgd2hpY2ggb2NjdXJzIGV2ZXJ5IGZyYW1lLCBpbiB0aGF0IGl0IGlzIGNhbGxlZFxuICAgICAqIHdoZW5ldmVyIGFuIG9iamVjdCByZXF1ZXN0cyBfdGhpc18gcmVuZGVyZXIgc3BlY2lmaWNhbGx5LlxuICAgICAqL1xuICAgIE9iamVjdFJlbmRlcmVyLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gc2V0IHRoZSBzaGFkZXIuLlxuICAgIH07XG4gICAgLyoqIFN0b3BzIHRoZSByZW5kZXJlci4gSXQgc2hvdWxkIGZyZWUgdXAgYW55IHN0YXRlIGFuZCBiZWNvbWUgZG9ybWFudC4gKi9cbiAgICBPYmplY3RSZW5kZXJlci5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5mbHVzaCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogS2VlcHMgdGhlIG9iamVjdCB0byByZW5kZXIuIEl0IGRvZXNuJ3QgaGF2ZSB0byBiZVxuICAgICAqIHJlbmRlcmVkIGltbWVkaWF0ZWx5LlxuICAgICAqIEBwYXJhbSB7UElYSS5EaXNwbGF5T2JqZWN0fSBfb2JqZWN0IC0gVGhlIG9iamVjdCB0byByZW5kZXIuXG4gICAgICovXG4gICAgT2JqZWN0UmVuZGVyZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChfb2JqZWN0KSB7XG4gICAgICAgIC8vIHJlbmRlciB0aGUgb2JqZWN0XG4gICAgfTtcbiAgICByZXR1cm4gT2JqZWN0UmVuZGVyZXI7XG59KCkpO1xuXG4vKipcbiAqIFN5c3RlbSBwbHVnaW4gdG8gdGhlIHJlbmRlcmVyIHRvIG1hbmFnZSBiYXRjaGluZy5cbiAqIEBtZW1iZXJvZiBQSVhJXG4gKi9cbnZhciBCYXRjaFN5c3RlbSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gcmVuZGVyZXIgLSBUaGUgcmVuZGVyZXIgdGhpcyBTeXN0ZW0gd29ya3MgZm9yLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEJhdGNoU3lzdGVtKHJlbmRlcmVyKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgdGhpcy5lbXB0eVJlbmRlcmVyID0gbmV3IE9iamVjdFJlbmRlcmVyKHJlbmRlcmVyKTtcbiAgICAgICAgdGhpcy5jdXJyZW50UmVuZGVyZXIgPSB0aGlzLmVtcHR5UmVuZGVyZXI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoYW5nZXMgdGhlIGN1cnJlbnQgcmVuZGVyZXIgdG8gdGhlIG9uZSBnaXZlbiBpbiBwYXJhbWV0ZXJcbiAgICAgKiBAcGFyYW0gb2JqZWN0UmVuZGVyZXIgLSBUaGUgb2JqZWN0IHJlbmRlcmVyIHRvIHVzZS5cbiAgICAgKi9cbiAgICBCYXRjaFN5c3RlbS5wcm90b3R5cGUuc2V0T2JqZWN0UmVuZGVyZXIgPSBmdW5jdGlvbiAob2JqZWN0UmVuZGVyZXIpIHtcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFJlbmRlcmVyID09PSBvYmplY3RSZW5kZXJlcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY3VycmVudFJlbmRlcmVyLnN0b3AoKTtcbiAgICAgICAgdGhpcy5jdXJyZW50UmVuZGVyZXIgPSBvYmplY3RSZW5kZXJlcjtcbiAgICAgICAgdGhpcy5jdXJyZW50UmVuZGVyZXIuc3RhcnQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRoaXMgc2hvdWxkIGJlIGNhbGxlZCBpZiB5b3Ugd2lzaCB0byBkbyBzb21lIGN1c3RvbSByZW5kZXJpbmdcbiAgICAgKiBJdCB3aWxsIGJhc2ljYWxseSByZW5kZXIgYW55dGhpbmcgdGhhdCBtYXkgYmUgYmF0Y2hlZCB1cCBzdWNoIGFzIHNwcml0ZXNcbiAgICAgKi9cbiAgICBCYXRjaFN5c3RlbS5wcm90b3R5cGUuZmx1c2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc2V0T2JqZWN0UmVuZGVyZXIodGhpcy5lbXB0eVJlbmRlcmVyKTtcbiAgICB9O1xuICAgIC8qKiBSZXNldCB0aGUgc3lzdGVtIHRvIGFuIGVtcHR5IHJlbmRlcmVyICovXG4gICAgQmF0Y2hTeXN0ZW0ucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnNldE9iamVjdFJlbmRlcmVyKHRoaXMuZW1wdHlSZW5kZXJlcik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBIYW5keSBmdW5jdGlvbiBmb3IgYmF0Y2ggcmVuZGVyZXJzOiBjb3BpZXMgYm91bmQgdGV4dHVyZXMgaW4gZmlyc3QgbWF4VGV4dHVyZXMgbG9jYXRpb25zIHRvIGFycmF5XG4gICAgICogc2V0cyBhY3R1YWwgX2JhdGNoTG9jYXRpb24gZm9yIHRoZW1cbiAgICAgKiBAcGFyYW0gYXJyIC0gYXJyIGNvcHkgZGVzdGluYXRpb25cbiAgICAgKiBAcGFyYW0gbWF4VGV4dHVyZXMgLSBudW1iZXIgb2YgY29waWVkIGVsZW1lbnRzXG4gICAgICovXG4gICAgQmF0Y2hTeXN0ZW0ucHJvdG90eXBlLmNvcHlCb3VuZFRleHR1cmVzID0gZnVuY3Rpb24gKGFyciwgbWF4VGV4dHVyZXMpIHtcbiAgICAgICAgdmFyIGJvdW5kVGV4dHVyZXMgPSB0aGlzLnJlbmRlcmVyLnRleHR1cmUuYm91bmRUZXh0dXJlcztcbiAgICAgICAgZm9yICh2YXIgaSA9IG1heFRleHR1cmVzIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgICAgIGFycltpXSA9IGJvdW5kVGV4dHVyZXNbaV0gfHwgbnVsbDtcbiAgICAgICAgICAgIGlmIChhcnJbaV0pIHtcbiAgICAgICAgICAgICAgICBhcnJbaV0uX2JhdGNoTG9jYXRpb24gPSBpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBc3NpZ25zIGJhdGNoIGxvY2F0aW9ucyB0byB0ZXh0dXJlcyBpbiBhcnJheSBiYXNlZCBvbiBib3VuZFRleHR1cmVzIHN0YXRlLlxuICAgICAqIEFsbCB0ZXh0dXJlcyBpbiB0ZXhBcnJheSBzaG91bGQgaGF2ZSBgX2JhdGNoRW5hYmxlZCA9IF9iYXRjaElkYCxcbiAgICAgKiBhbmQgdGhlaXIgY291bnQgc2hvdWxkIGJlIGxlc3MgdGhhbiBgbWF4VGV4dHVyZXNgLlxuICAgICAqIEBwYXJhbSB0ZXhBcnJheSAtIHRleHR1cmVzIHRvIGJvdW5kXG4gICAgICogQHBhcmFtIGJvdW5kVGV4dHVyZXMgLSBjdXJyZW50IHN0YXRlIG9mIGJvdW5kIHRleHR1cmVzXG4gICAgICogQHBhcmFtIGJhdGNoSWQgLSBtYXJrZXIgZm9yIF9iYXRjaEVuYWJsZWQgcGFyYW0gb2YgdGV4dHVyZXMgaW4gdGV4QXJyYXlcbiAgICAgKiBAcGFyYW0gbWF4VGV4dHVyZXMgLSBudW1iZXIgb2YgdGV4dHVyZSBsb2NhdGlvbnMgdG8gbWFuaXB1bGF0ZVxuICAgICAqL1xuICAgIEJhdGNoU3lzdGVtLnByb3RvdHlwZS5ib3VuZEFycmF5ID0gZnVuY3Rpb24gKHRleEFycmF5LCBib3VuZFRleHR1cmVzLCBiYXRjaElkLCBtYXhUZXh0dXJlcykge1xuICAgICAgICB2YXIgZWxlbWVudHMgPSB0ZXhBcnJheS5lbGVtZW50cywgaWRzID0gdGV4QXJyYXkuaWRzLCBjb3VudCA9IHRleEFycmF5LmNvdW50O1xuICAgICAgICB2YXIgaiA9IDA7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xuICAgICAgICAgICAgdmFyIHRleCA9IGVsZW1lbnRzW2ldO1xuICAgICAgICAgICAgdmFyIGxvYyA9IHRleC5fYmF0Y2hMb2NhdGlvbjtcbiAgICAgICAgICAgIGlmIChsb2MgPj0gMCAmJiBsb2MgPCBtYXhUZXh0dXJlc1xuICAgICAgICAgICAgICAgICYmIGJvdW5kVGV4dHVyZXNbbG9jXSA9PT0gdGV4KSB7XG4gICAgICAgICAgICAgICAgaWRzW2ldID0gbG9jO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2hpbGUgKGogPCBtYXhUZXh0dXJlcykge1xuICAgICAgICAgICAgICAgIHZhciBib3VuZCA9IGJvdW5kVGV4dHVyZXNbal07XG4gICAgICAgICAgICAgICAgaWYgKGJvdW5kICYmIGJvdW5kLl9iYXRjaEVuYWJsZWQgPT09IGJhdGNoSWRcbiAgICAgICAgICAgICAgICAgICAgJiYgYm91bmQuX2JhdGNoTG9jYXRpb24gPT09IGopIHtcbiAgICAgICAgICAgICAgICAgICAgaisrO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWRzW2ldID0gajtcbiAgICAgICAgICAgICAgICB0ZXguX2JhdGNoTG9jYXRpb24gPSBqO1xuICAgICAgICAgICAgICAgIGJvdW5kVGV4dHVyZXNbal0gPSB0ZXg7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBpZ25vcmVcbiAgICAgKi9cbiAgICBCYXRjaFN5c3RlbS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IG51bGw7XG4gICAgfTtcbiAgICByZXR1cm4gQmF0Y2hTeXN0ZW07XG59KCkpO1xuXG52YXIgQ09OVEVYVF9VSURfQ09VTlRFUiA9IDA7XG4vKipcbiAqIFN5c3RlbSBwbHVnaW4gdG8gdGhlIHJlbmRlcmVyIHRvIG1hbmFnZSB0aGUgY29udGV4dC5cbiAqIEBtZW1iZXJvZiBQSVhJXG4gKi9cbnZhciBDb250ZXh0U3lzdGVtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKiBAcGFyYW0gcmVuZGVyZXIgLSBUaGUgcmVuZGVyZXIgdGhpcyBTeXN0ZW0gd29ya3MgZm9yLiAqL1xuICAgIGZ1bmN0aW9uIENvbnRleHRTeXN0ZW0ocmVuZGVyZXIpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICB0aGlzLndlYkdMVmVyc2lvbiA9IDE7XG4gICAgICAgIHRoaXMuZXh0ZW5zaW9ucyA9IHt9O1xuICAgICAgICB0aGlzLnN1cHBvcnRzID0ge1xuICAgICAgICAgICAgdWludDMySW5kaWNlczogZmFsc2UsXG4gICAgICAgIH07XG4gICAgICAgIC8vIEJpbmQgZnVuY3Rpb25zXG4gICAgICAgIHRoaXMuaGFuZGxlQ29udGV4dExvc3QgPSB0aGlzLmhhbmRsZUNvbnRleHRMb3N0LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaGFuZGxlQ29udGV4dFJlc3RvcmVkID0gdGhpcy5oYW5kbGVDb250ZXh0UmVzdG9yZWQuYmluZCh0aGlzKTtcbiAgICAgICAgcmVuZGVyZXIudmlldy5hZGRFdmVudExpc3RlbmVyKCd3ZWJnbGNvbnRleHRsb3N0JywgdGhpcy5oYW5kbGVDb250ZXh0TG9zdCwgZmFsc2UpO1xuICAgICAgICByZW5kZXJlci52aWV3LmFkZEV2ZW50TGlzdGVuZXIoJ3dlYmdsY29udGV4dHJlc3RvcmVkJywgdGhpcy5oYW5kbGVDb250ZXh0UmVzdG9yZWQsIGZhbHNlKTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnRleHRTeXN0ZW0ucHJvdG90eXBlLCBcImlzTG9zdFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBgdHJ1ZWAgaWYgdGhlIGNvbnRleHQgaXMgbG9zdFxuICAgICAgICAgKiBAcmVhZG9ubHlcbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICghdGhpcy5nbCB8fCB0aGlzLmdsLmlzQ29udGV4dExvc3QoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIHRoZSBjb250ZXh0IGNoYW5nZSBldmVudC5cbiAgICAgKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgLSBOZXcgV2ViR0wgY29udGV4dC5cbiAgICAgKi9cbiAgICBDb250ZXh0U3lzdGVtLnByb3RvdHlwZS5jb250ZXh0Q2hhbmdlID0gZnVuY3Rpb24gKGdsKSB7XG4gICAgICAgIHRoaXMuZ2wgPSBnbDtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5nbCA9IGdsO1xuICAgICAgICB0aGlzLnJlbmRlcmVyLkNPTlRFWFRfVUlEID0gQ09OVEVYVF9VSURfQ09VTlRFUisrO1xuICAgICAgICAvLyByZXN0b3JlIGEgY29udGV4dCBpZiBpdCB3YXMgcHJldmlvdXNseSBsb3N0XG4gICAgICAgIGlmIChnbC5pc0NvbnRleHRMb3N0KCkgJiYgZ2wuZ2V0RXh0ZW5zaW9uKCdXRUJHTF9sb3NlX2NvbnRleHQnKSkge1xuICAgICAgICAgICAgZ2wuZ2V0RXh0ZW5zaW9uKCdXRUJHTF9sb3NlX2NvbnRleHQnKS5yZXN0b3JlQ29udGV4dCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplcyB0aGUgY29udGV4dC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHBhcmFtIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGdsIC0gV2ViR0wgY29udGV4dFxuICAgICAqL1xuICAgIENvbnRleHRTeXN0ZW0ucHJvdG90eXBlLmluaXRGcm9tQ29udGV4dCA9IGZ1bmN0aW9uIChnbCkge1xuICAgICAgICB0aGlzLmdsID0gZ2w7XG4gICAgICAgIHRoaXMudmFsaWRhdGVDb250ZXh0KGdsKTtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5nbCA9IGdsO1xuICAgICAgICB0aGlzLnJlbmRlcmVyLkNPTlRFWFRfVUlEID0gQ09OVEVYVF9VSURfQ09VTlRFUisrO1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnJ1bm5lcnMuY29udGV4dENoYW5nZS5lbWl0KGdsKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgZnJvbSBjb250ZXh0IG9wdGlvbnNcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvSFRNTENhbnZhc0VsZW1lbnQvZ2V0Q29udGV4dFxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0gY29udGV4dCBhdHRyaWJ1dGVzXG4gICAgICovXG4gICAgQ29udGV4dFN5c3RlbS5wcm90b3R5cGUuaW5pdEZyb21PcHRpb25zID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIGdsID0gdGhpcy5jcmVhdGVDb250ZXh0KHRoaXMucmVuZGVyZXIudmlldywgb3B0aW9ucyk7XG4gICAgICAgIHRoaXMuaW5pdEZyb21Db250ZXh0KGdsKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhlbHBlciBjbGFzcyB0byBjcmVhdGUgYSBXZWJHTCBDb250ZXh0XG4gICAgICogQHBhcmFtIGNhbnZhcyAtIHRoZSBjYW52YXMgZWxlbWVudCB0aGF0IHdlIHdpbGwgZ2V0IHRoZSBjb250ZXh0IGZyb21cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIEFuIG9wdGlvbnMgb2JqZWN0IHRoYXQgZ2V0cyBwYXNzZWQgaW4gdG8gdGhlIGNhbnZhcyBlbGVtZW50IGNvbnRhaW5pbmcgdGhlXG4gICAgICogICAgY29udGV4dCBhdHRyaWJ1dGVzXG4gICAgICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9kb2NzL1dlYi9BUEkvSFRNTENhbnZhc0VsZW1lbnQvZ2V0Q29udGV4dFxuICAgICAqIEByZXR1cm5zIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IHRoZSBXZWJHTCBjb250ZXh0XG4gICAgICovXG4gICAgQ29udGV4dFN5c3RlbS5wcm90b3R5cGUuY3JlYXRlQ29udGV4dCA9IGZ1bmN0aW9uIChjYW52YXMsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIGdsO1xuICAgICAgICBpZiAoc2V0dGluZ3Muc2V0dGluZ3MuUFJFRkVSX0VOViA+PSBjb25zdGFudHMuRU5WLldFQkdMMikge1xuICAgICAgICAgICAgZ2wgPSBjYW52YXMuZ2V0Q29udGV4dCgnd2ViZ2wyJywgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGdsKSB7XG4gICAgICAgICAgICB0aGlzLndlYkdMVmVyc2lvbiA9IDI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLndlYkdMVmVyc2lvbiA9IDE7XG4gICAgICAgICAgICBnbCA9IGNhbnZhcy5nZXRDb250ZXh0KCd3ZWJnbCcsIG9wdGlvbnMpXG4gICAgICAgICAgICAgICAgfHwgY2FudmFzLmdldENvbnRleHQoJ2V4cGVyaW1lbnRhbC13ZWJnbCcsIG9wdGlvbnMpO1xuICAgICAgICAgICAgaWYgKCFnbCkge1xuICAgICAgICAgICAgICAgIC8vIGZhaWwsIG5vdCBhYmxlIHRvIGdldCBhIGNvbnRleHRcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoaXMgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IFdlYkdMLiBUcnkgdXNpbmcgdGhlIGNhbnZhcyByZW5kZXJlcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuZ2wgPSBnbDtcbiAgICAgICAgdGhpcy5nZXRFeHRlbnNpb25zKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmdsO1xuICAgIH07XG4gICAgLyoqIEF1dG8tcG9wdWxhdGUgdGhlIHtAbGluayBQSVhJLkNvbnRleHRTeXN0ZW0uZXh0ZW5zaW9ucyBleHRlbnNpb25zfS4gKi9cbiAgICBDb250ZXh0U3lzdGVtLnByb3RvdHlwZS5nZXRFeHRlbnNpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyB0aW1lIHRvIHNldCB1cCBkZWZhdWx0IGV4dGVuc2lvbnMgdGhhdCBQaXhpIHVzZXMuXG4gICAgICAgIHZhciBnbCA9IHRoaXMuZ2w7XG4gICAgICAgIHZhciBjb21tb24gPSB7XG4gICAgICAgICAgICBhbmlzb3Ryb3BpY0ZpbHRlcmluZzogZ2wuZ2V0RXh0ZW5zaW9uKCdFWFRfdGV4dHVyZV9maWx0ZXJfYW5pc290cm9waWMnKSxcbiAgICAgICAgICAgIGZsb2F0VGV4dHVyZUxpbmVhcjogZ2wuZ2V0RXh0ZW5zaW9uKCdPRVNfdGV4dHVyZV9mbG9hdF9saW5lYXInKSxcbiAgICAgICAgICAgIHMzdGM6IGdsLmdldEV4dGVuc2lvbignV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGMnKSxcbiAgICAgICAgICAgIHMzdGNfc1JHQjogZ2wuZ2V0RXh0ZW5zaW9uKCdXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0Y19zcmdiJyksXG4gICAgICAgICAgICBldGM6IGdsLmdldEV4dGVuc2lvbignV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX2V0YycpLFxuICAgICAgICAgICAgZXRjMTogZ2wuZ2V0RXh0ZW5zaW9uKCdXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfZXRjMScpLFxuICAgICAgICAgICAgcHZydGM6IGdsLmdldEV4dGVuc2lvbignV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3B2cnRjJylcbiAgICAgICAgICAgICAgICB8fCBnbC5nZXRFeHRlbnNpb24oJ1dFQktJVF9XRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfcHZydGMnKSxcbiAgICAgICAgICAgIGF0YzogZ2wuZ2V0RXh0ZW5zaW9uKCdXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfYXRjJyksXG4gICAgICAgICAgICBhc3RjOiBnbC5nZXRFeHRlbnNpb24oJ1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9hc3RjJylcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMud2ViR0xWZXJzaW9uID09PSAxKSB7XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMuZXh0ZW5zaW9ucywgY29tbW9uLCB7XG4gICAgICAgICAgICAgICAgZHJhd0J1ZmZlcnM6IGdsLmdldEV4dGVuc2lvbignV0VCR0xfZHJhd19idWZmZXJzJyksXG4gICAgICAgICAgICAgICAgZGVwdGhUZXh0dXJlOiBnbC5nZXRFeHRlbnNpb24oJ1dFQkdMX2RlcHRoX3RleHR1cmUnKSxcbiAgICAgICAgICAgICAgICBsb3NlQ29udGV4dDogZ2wuZ2V0RXh0ZW5zaW9uKCdXRUJHTF9sb3NlX2NvbnRleHQnKSxcbiAgICAgICAgICAgICAgICB2ZXJ0ZXhBcnJheU9iamVjdDogZ2wuZ2V0RXh0ZW5zaW9uKCdPRVNfdmVydGV4X2FycmF5X29iamVjdCcpXG4gICAgICAgICAgICAgICAgICAgIHx8IGdsLmdldEV4dGVuc2lvbignTU9aX09FU192ZXJ0ZXhfYXJyYXlfb2JqZWN0JylcbiAgICAgICAgICAgICAgICAgICAgfHwgZ2wuZ2V0RXh0ZW5zaW9uKCdXRUJLSVRfT0VTX3ZlcnRleF9hcnJheV9vYmplY3QnKSxcbiAgICAgICAgICAgICAgICB1aW50MzJFbGVtZW50SW5kZXg6IGdsLmdldEV4dGVuc2lvbignT0VTX2VsZW1lbnRfaW5kZXhfdWludCcpLFxuICAgICAgICAgICAgICAgIC8vIEZsb2F0cyBhbmQgaGFsZi1mbG9hdHNcbiAgICAgICAgICAgICAgICBmbG9hdFRleHR1cmU6IGdsLmdldEV4dGVuc2lvbignT0VTX3RleHR1cmVfZmxvYXQnKSxcbiAgICAgICAgICAgICAgICBmbG9hdFRleHR1cmVMaW5lYXI6IGdsLmdldEV4dGVuc2lvbignT0VTX3RleHR1cmVfZmxvYXRfbGluZWFyJyksXG4gICAgICAgICAgICAgICAgdGV4dHVyZUhhbGZGbG9hdDogZ2wuZ2V0RXh0ZW5zaW9uKCdPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0JyksXG4gICAgICAgICAgICAgICAgdGV4dHVyZUhhbGZGbG9hdExpbmVhcjogZ2wuZ2V0RXh0ZW5zaW9uKCdPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0X2xpbmVhcicpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy53ZWJHTFZlcnNpb24gPT09IDIpIHtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5leHRlbnNpb25zLCBjb21tb24sIHtcbiAgICAgICAgICAgICAgICAvLyBGbG9hdHMgYW5kIGhhbGYtZmxvYXRzXG4gICAgICAgICAgICAgICAgY29sb3JCdWZmZXJGbG9hdDogZ2wuZ2V0RXh0ZW5zaW9uKCdFWFRfY29sb3JfYnVmZmVyX2Zsb2F0JylcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIGEgbG9zdCB3ZWJnbCBjb250ZXh0XG4gICAgICogQHBhcmFtIHtXZWJHTENvbnRleHRFdmVudH0gZXZlbnQgLSBUaGUgY29udGV4dCBsb3N0IGV2ZW50LlxuICAgICAqL1xuICAgIENvbnRleHRTeXN0ZW0ucHJvdG90eXBlLmhhbmRsZUNvbnRleHRMb3N0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfTtcbiAgICAvKiogSGFuZGxlcyBhIHJlc3RvcmVkIHdlYmdsIGNvbnRleHQuICovXG4gICAgQ29udGV4dFN5c3RlbS5wcm90b3R5cGUuaGFuZGxlQ29udGV4dFJlc3RvcmVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnJ1bm5lcnMuY29udGV4dENoYW5nZS5lbWl0KHRoaXMuZ2wpO1xuICAgIH07XG4gICAgQ29udGV4dFN5c3RlbS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHZpZXcgPSB0aGlzLnJlbmRlcmVyLnZpZXc7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSBudWxsO1xuICAgICAgICAvLyByZW1vdmUgbGlzdGVuZXJzXG4gICAgICAgIHZpZXcucmVtb3ZlRXZlbnRMaXN0ZW5lcignd2ViZ2xjb250ZXh0bG9zdCcsIHRoaXMuaGFuZGxlQ29udGV4dExvc3QpO1xuICAgICAgICB2aWV3LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3dlYmdsY29udGV4dHJlc3RvcmVkJywgdGhpcy5oYW5kbGVDb250ZXh0UmVzdG9yZWQpO1xuICAgICAgICB0aGlzLmdsLnVzZVByb2dyYW0obnVsbCk7XG4gICAgICAgIGlmICh0aGlzLmV4dGVuc2lvbnMubG9zZUNvbnRleHQpIHtcbiAgICAgICAgICAgIHRoaXMuZXh0ZW5zaW9ucy5sb3NlQ29udGV4dC5sb3NlQ29udGV4dCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKiogSGFuZGxlIHRoZSBwb3N0LXJlbmRlciBydW5uZXIgZXZlbnQuICovXG4gICAgQ29udGV4dFN5c3RlbS5wcm90b3R5cGUucG9zdHJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMucmVuZGVyZXIucmVuZGVyaW5nVG9TY3JlZW4pIHtcbiAgICAgICAgICAgIHRoaXMuZ2wuZmx1c2goKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogVmFsaWRhdGUgY29udGV4dC5cbiAgICAgKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgLSBSZW5kZXIgY29udGV4dC5cbiAgICAgKi9cbiAgICBDb250ZXh0U3lzdGVtLnByb3RvdHlwZS52YWxpZGF0ZUNvbnRleHQgPSBmdW5jdGlvbiAoZ2wpIHtcbiAgICAgICAgdmFyIGF0dHJpYnV0ZXMgPSBnbC5nZXRDb250ZXh0QXR0cmlidXRlcygpO1xuICAgICAgICB2YXIgaXNXZWJHbDIgPSAnV2ViR0wyUmVuZGVyaW5nQ29udGV4dCcgaW4gZ2xvYmFsVGhpcyAmJiBnbCBpbnN0YW5jZW9mIGdsb2JhbFRoaXMuV2ViR0wyUmVuZGVyaW5nQ29udGV4dDtcbiAgICAgICAgaWYgKGlzV2ViR2wyKSB7XG4gICAgICAgICAgICB0aGlzLndlYkdMVmVyc2lvbiA9IDI7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdGhpcyBpcyBnb2luZyB0byBiZSBmYWlybHkgc2ltcGxlIGZvciBub3cuLiBidXQgYXQgbGVhc3Qgd2UgaGF2ZSByb29tIHRvIGdyb3chXG4gICAgICAgIGlmIChhdHRyaWJ1dGVzICYmICFhdHRyaWJ1dGVzLnN0ZW5jaWwpIHtcbiAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG1heC1sZW4sIG5vLWNvbnNvbGUgKi9cbiAgICAgICAgICAgIGNvbnNvbGUud2FybignUHJvdmlkZWQgV2ViR0wgY29udGV4dCBkb2VzIG5vdCBoYXZlIGEgc3RlbmNpbCBidWZmZXIsIG1hc2tzIG1heSBub3QgcmVuZGVyIGNvcnJlY3RseScpO1xuICAgICAgICAgICAgLyogZXNsaW50LWVuYWJsZSBtYXgtbGVuLCBuby1jb25zb2xlICovXG4gICAgICAgIH1cbiAgICAgICAgdmFyIGhhc3VpbnQzMiA9IGlzV2ViR2wyIHx8ICEhZ2wuZ2V0RXh0ZW5zaW9uKCdPRVNfZWxlbWVudF9pbmRleF91aW50Jyk7XG4gICAgICAgIHRoaXMuc3VwcG9ydHMudWludDMySW5kaWNlcyA9IGhhc3VpbnQzMjtcbiAgICAgICAgaWYgKCFoYXN1aW50MzIpIHtcbiAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG1heC1sZW4sIG5vLWNvbnNvbGUgKi9cbiAgICAgICAgICAgIGNvbnNvbGUud2FybignUHJvdmlkZWQgV2ViR0wgY29udGV4dCBkb2VzIG5vdCBzdXBwb3J0IDMyIGluZGV4IGJ1ZmZlciwgY29tcGxleCBncmFwaGljcyBtYXkgbm90IHJlbmRlciBjb3JyZWN0bHknKTtcbiAgICAgICAgICAgIC8qIGVzbGludC1lbmFibGUgbWF4LWxlbiwgbm8tY29uc29sZSAqL1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gQ29udGV4dFN5c3RlbTtcbn0oKSk7XG5cbi8qKlxuICogSW50ZXJuYWwgZnJhbWVidWZmZXIgZm9yIFdlYkdMIGNvbnRleHQuXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG52YXIgR0xGcmFtZWJ1ZmZlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBHTEZyYW1lYnVmZmVyKGZyYW1lYnVmZmVyKSB7XG4gICAgICAgIHRoaXMuZnJhbWVidWZmZXIgPSBmcmFtZWJ1ZmZlcjtcbiAgICAgICAgdGhpcy5zdGVuY2lsID0gbnVsbDtcbiAgICAgICAgdGhpcy5kaXJ0eUlkID0gLTE7XG4gICAgICAgIHRoaXMuZGlydHlGb3JtYXQgPSAtMTtcbiAgICAgICAgdGhpcy5kaXJ0eVNpemUgPSAtMTtcbiAgICAgICAgdGhpcy5tdWx0aXNhbXBsZSA9IGNvbnN0YW50cy5NU0FBX1FVQUxJVFkuTk9ORTtcbiAgICAgICAgdGhpcy5tc2FhQnVmZmVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5ibGl0RnJhbWVidWZmZXIgPSBudWxsO1xuICAgICAgICB0aGlzLm1pcExldmVsID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIEdMRnJhbWVidWZmZXI7XG59KCkpO1xuXG52YXIgdGVtcFJlY3RhbmdsZSA9IG5ldyBtYXRoLlJlY3RhbmdsZSgpO1xuLyoqXG4gKiBTeXN0ZW0gcGx1Z2luIHRvIHRoZSByZW5kZXJlciB0byBtYW5hZ2UgZnJhbWVidWZmZXJzLlxuICogQG1lbWJlcm9mIFBJWElcbiAqL1xudmFyIEZyYW1lYnVmZmVyU3lzdGVtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSByZW5kZXJlciAtIFRoZSByZW5kZXJlciB0aGlzIFN5c3RlbSB3b3JrcyBmb3IuXG4gICAgICovXG4gICAgZnVuY3Rpb24gRnJhbWVidWZmZXJTeXN0ZW0ocmVuZGVyZXIpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICB0aGlzLm1hbmFnZWRGcmFtZWJ1ZmZlcnMgPSBbXTtcbiAgICAgICAgdGhpcy51bmtub3duRnJhbWVidWZmZXIgPSBuZXcgRnJhbWVidWZmZXIoMTAsIDEwKTtcbiAgICAgICAgdGhpcy5tc2FhU2FtcGxlcyA9IG51bGw7XG4gICAgfVxuICAgIC8qKiBTZXRzIHVwIHRoZSByZW5kZXJlciBjb250ZXh0IGFuZCBuZWNlc3NhcnkgYnVmZmVycy4gKi9cbiAgICBGcmFtZWJ1ZmZlclN5c3RlbS5wcm90b3R5cGUuY29udGV4dENoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGdsID0gdGhpcy5nbCA9IHRoaXMucmVuZGVyZXIuZ2w7XG4gICAgICAgIHRoaXMuQ09OVEVYVF9VSUQgPSB0aGlzLnJlbmRlcmVyLkNPTlRFWFRfVUlEO1xuICAgICAgICB0aGlzLmN1cnJlbnQgPSB0aGlzLnVua25vd25GcmFtZWJ1ZmZlcjtcbiAgICAgICAgdGhpcy52aWV3cG9ydCA9IG5ldyBtYXRoLlJlY3RhbmdsZSgpO1xuICAgICAgICB0aGlzLmhhc01SVCA9IHRydWU7XG4gICAgICAgIHRoaXMud3JpdGVEZXB0aFRleHR1cmUgPSB0cnVlO1xuICAgICAgICB0aGlzLmRpc3Bvc2VBbGwodHJ1ZSk7XG4gICAgICAgIC8vIHdlYmdsMlxuICAgICAgICBpZiAodGhpcy5yZW5kZXJlci5jb250ZXh0LndlYkdMVmVyc2lvbiA9PT0gMSkge1xuICAgICAgICAgICAgLy8gd2ViZ2wgMSFcbiAgICAgICAgICAgIHZhciBuYXRpdmVEcmF3QnVmZmVyc0V4dGVuc2lvbl8xID0gdGhpcy5yZW5kZXJlci5jb250ZXh0LmV4dGVuc2lvbnMuZHJhd0J1ZmZlcnM7XG4gICAgICAgICAgICB2YXIgbmF0aXZlRGVwdGhUZXh0dXJlRXh0ZW5zaW9uID0gdGhpcy5yZW5kZXJlci5jb250ZXh0LmV4dGVuc2lvbnMuZGVwdGhUZXh0dXJlO1xuICAgICAgICAgICAgaWYgKHNldHRpbmdzLnNldHRpbmdzLlBSRUZFUl9FTlYgPT09IGNvbnN0YW50cy5FTlYuV0VCR0xfTEVHQUNZKSB7XG4gICAgICAgICAgICAgICAgbmF0aXZlRHJhd0J1ZmZlcnNFeHRlbnNpb25fMSA9IG51bGw7XG4gICAgICAgICAgICAgICAgbmF0aXZlRGVwdGhUZXh0dXJlRXh0ZW5zaW9uID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChuYXRpdmVEcmF3QnVmZmVyc0V4dGVuc2lvbl8xKSB7XG4gICAgICAgICAgICAgICAgZ2wuZHJhd0J1ZmZlcnMgPSBmdW5jdGlvbiAoYWN0aXZlVGV4dHVyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5hdGl2ZURyYXdCdWZmZXJzRXh0ZW5zaW9uXzEuZHJhd0J1ZmZlcnNXRUJHTChhY3RpdmVUZXh0dXJlcyk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFzTVJUID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgZ2wuZHJhd0J1ZmZlcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVtcHR5XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghbmF0aXZlRGVwdGhUZXh0dXJlRXh0ZW5zaW9uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy53cml0ZURlcHRoVGV4dHVyZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gV2ViR0wyXG4gICAgICAgICAgICAvLyBjYWNoZSBwb3NzaWJsZSBNU0FBIHNhbXBsZXNcbiAgICAgICAgICAgIHRoaXMubXNhYVNhbXBsZXMgPSBnbC5nZXRJbnRlcm5hbGZvcm1hdFBhcmFtZXRlcihnbC5SRU5ERVJCVUZGRVIsIGdsLlJHQkE4LCBnbC5TQU1QTEVTKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQmluZCBhIGZyYW1lYnVmZmVyLlxuICAgICAqIEBwYXJhbSBmcmFtZWJ1ZmZlclxuICAgICAqIEBwYXJhbSBmcmFtZSAtIGZyYW1lLCBkZWZhdWx0IGlzIGZyYW1lYnVmZmVyIHNpemVcbiAgICAgKiBAcGFyYW0gbWlwTGV2ZWwgLSBvcHRpb25hbCBtaXAgbGV2ZWwgdG8gc2V0IG9uIHRoZSBmcmFtZWJ1ZmZlciAtIGRlZmF1bHRzIHRvIDBcbiAgICAgKi9cbiAgICBGcmFtZWJ1ZmZlclN5c3RlbS5wcm90b3R5cGUuYmluZCA9IGZ1bmN0aW9uIChmcmFtZWJ1ZmZlciwgZnJhbWUsIG1pcExldmVsKSB7XG4gICAgICAgIGlmIChtaXBMZXZlbCA9PT0gdm9pZCAwKSB7IG1pcExldmVsID0gMDsgfVxuICAgICAgICB2YXIgZ2wgPSB0aGlzLmdsO1xuICAgICAgICBpZiAoZnJhbWVidWZmZXIpIHtcbiAgICAgICAgICAgIC8vIFRPRE8gY2FjaGluZyBsYXllciFcbiAgICAgICAgICAgIHZhciBmYm8gPSBmcmFtZWJ1ZmZlci5nbEZyYW1lYnVmZmVyc1t0aGlzLkNPTlRFWFRfVUlEXSB8fCB0aGlzLmluaXRGcmFtZWJ1ZmZlcihmcmFtZWJ1ZmZlcik7XG4gICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50ICE9PSBmcmFtZWJ1ZmZlcikge1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudCA9IGZyYW1lYnVmZmVyO1xuICAgICAgICAgICAgICAgIGdsLmJpbmRGcmFtZWJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgZmJvLmZyYW1lYnVmZmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIG1ha2Ugc3VyZSBhbGwgdGV4dHVyZXMgYXJlIHVuYm91bmQuLlxuICAgICAgICAgICAgaWYgKGZiby5taXBMZXZlbCAhPT0gbWlwTGV2ZWwpIHtcbiAgICAgICAgICAgICAgICBmcmFtZWJ1ZmZlci5kaXJ0eUlkKys7XG4gICAgICAgICAgICAgICAgZnJhbWVidWZmZXIuZGlydHlGb3JtYXQrKztcbiAgICAgICAgICAgICAgICBmYm8ubWlwTGV2ZWwgPSBtaXBMZXZlbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIG5vdyBjaGVjayBmb3IgdXBkYXRlcy4uLlxuICAgICAgICAgICAgaWYgKGZiby5kaXJ0eUlkICE9PSBmcmFtZWJ1ZmZlci5kaXJ0eUlkKSB7XG4gICAgICAgICAgICAgICAgZmJvLmRpcnR5SWQgPSBmcmFtZWJ1ZmZlci5kaXJ0eUlkO1xuICAgICAgICAgICAgICAgIGlmIChmYm8uZGlydHlGb3JtYXQgIT09IGZyYW1lYnVmZmVyLmRpcnR5Rm9ybWF0KSB7XG4gICAgICAgICAgICAgICAgICAgIGZiby5kaXJ0eUZvcm1hdCA9IGZyYW1lYnVmZmVyLmRpcnR5Rm9ybWF0O1xuICAgICAgICAgICAgICAgICAgICBmYm8uZGlydHlTaXplID0gZnJhbWVidWZmZXIuZGlydHlTaXplO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUZyYW1lYnVmZmVyKGZyYW1lYnVmZmVyLCBtaXBMZXZlbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGZiby5kaXJ0eVNpemUgIT09IGZyYW1lYnVmZmVyLmRpcnR5U2l6ZSkge1xuICAgICAgICAgICAgICAgICAgICBmYm8uZGlydHlTaXplID0gZnJhbWVidWZmZXIuZGlydHlTaXplO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc2l6ZUZyYW1lYnVmZmVyKGZyYW1lYnVmZmVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZyYW1lYnVmZmVyLmNvbG9yVGV4dHVyZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgdGV4ID0gZnJhbWVidWZmZXIuY29sb3JUZXh0dXJlc1tpXTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnRleHR1cmUudW5iaW5kKHRleC5wYXJlbnRUZXh0dXJlQXJyYXkgfHwgdGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChmcmFtZWJ1ZmZlci5kZXB0aFRleHR1cmUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnRleHR1cmUudW5iaW5kKGZyYW1lYnVmZmVyLmRlcHRoVGV4dHVyZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZnJhbWUpIHtcbiAgICAgICAgICAgICAgICB2YXIgbWlwV2lkdGggPSAoZnJhbWUud2lkdGggPj4gbWlwTGV2ZWwpO1xuICAgICAgICAgICAgICAgIHZhciBtaXBIZWlnaHQgPSAoZnJhbWUuaGVpZ2h0ID4+IG1pcExldmVsKTtcbiAgICAgICAgICAgICAgICB2YXIgc2NhbGUgPSBtaXBXaWR0aCAvIGZyYW1lLndpZHRoO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Vmlld3BvcnQoZnJhbWUueCAqIHNjYWxlLCBmcmFtZS55ICogc2NhbGUsIG1pcFdpZHRoLCBtaXBIZWlnaHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIG1pcFdpZHRoID0gKGZyYW1lYnVmZmVyLndpZHRoID4+IG1pcExldmVsKTtcbiAgICAgICAgICAgICAgICB2YXIgbWlwSGVpZ2h0ID0gKGZyYW1lYnVmZmVyLmhlaWdodCA+PiBtaXBMZXZlbCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRWaWV3cG9ydCgwLCAwLCBtaXBXaWR0aCwgbWlwSGVpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnQgPSBudWxsO1xuICAgICAgICAgICAgICAgIGdsLmJpbmRGcmFtZWJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgbnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZnJhbWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFZpZXdwb3J0KGZyYW1lLngsIGZyYW1lLnksIGZyYW1lLndpZHRoLCBmcmFtZS5oZWlnaHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRWaWV3cG9ydCgwLCAwLCB0aGlzLnJlbmRlcmVyLndpZHRoLCB0aGlzLnJlbmRlcmVyLmhlaWdodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0J3Mgdmlld3BvcnQuXG4gICAgICogQHBhcmFtIHggLSBYIHBvc2l0aW9uIG9mIHZpZXdwb3J0XG4gICAgICogQHBhcmFtIHkgLSBZIHBvc2l0aW9uIG9mIHZpZXdwb3J0XG4gICAgICogQHBhcmFtIHdpZHRoIC0gV2lkdGggb2Ygdmlld3BvcnRcbiAgICAgKiBAcGFyYW0gaGVpZ2h0IC0gSGVpZ2h0IG9mIHZpZXdwb3J0XG4gICAgICovXG4gICAgRnJhbWVidWZmZXJTeXN0ZW0ucHJvdG90eXBlLnNldFZpZXdwb3J0ID0gZnVuY3Rpb24gKHgsIHksIHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgICAgdmFyIHYgPSB0aGlzLnZpZXdwb3J0O1xuICAgICAgICB4ID0gTWF0aC5yb3VuZCh4KTtcbiAgICAgICAgeSA9IE1hdGgucm91bmQoeSk7XG4gICAgICAgIHdpZHRoID0gTWF0aC5yb3VuZCh3aWR0aCk7XG4gICAgICAgIGhlaWdodCA9IE1hdGgucm91bmQoaGVpZ2h0KTtcbiAgICAgICAgaWYgKHYud2lkdGggIT09IHdpZHRoIHx8IHYuaGVpZ2h0ICE9PSBoZWlnaHQgfHwgdi54ICE9PSB4IHx8IHYueSAhPT0geSkge1xuICAgICAgICAgICAgdi54ID0geDtcbiAgICAgICAgICAgIHYueSA9IHk7XG4gICAgICAgICAgICB2LndpZHRoID0gd2lkdGg7XG4gICAgICAgICAgICB2LmhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgICAgIHRoaXMuZ2wudmlld3BvcnQoeCwgeSwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGcmFtZWJ1ZmZlclN5c3RlbS5wcm90b3R5cGUsIFwic2l6ZVwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXQgdGhlIHNpemUgb2YgdGhlIGN1cnJlbnQgd2lkdGggYW5kIGhlaWdodC4gUmV0dXJucyBvYmplY3Qgd2l0aCBgd2lkdGhgIGFuZCBgaGVpZ2h0YCB2YWx1ZXMuXG4gICAgICAgICAqIEByZWFkb25seVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgLy8gVE9ETyBzdG9yZSB0ZW1wXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgeDogMCwgeTogMCwgd2lkdGg6IHRoaXMuY3VycmVudC53aWR0aCwgaGVpZ2h0OiB0aGlzLmN1cnJlbnQuaGVpZ2h0IH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyB4OiAwLCB5OiAwLCB3aWR0aDogdGhpcy5yZW5kZXJlci53aWR0aCwgaGVpZ2h0OiB0aGlzLnJlbmRlcmVyLmhlaWdodCB9O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgLyoqXG4gICAgICogQ2xlYXIgdGhlIGNvbG9yIG9mIHRoZSBjb250ZXh0XG4gICAgICogQHBhcmFtIHIgLSBSZWQgdmFsdWUgZnJvbSAwIHRvIDFcbiAgICAgKiBAcGFyYW0gZyAtIEdyZWVuIHZhbHVlIGZyb20gMCB0byAxXG4gICAgICogQHBhcmFtIGIgLSBCbHVlIHZhbHVlIGZyb20gMCB0byAxXG4gICAgICogQHBhcmFtIGEgLSBBbHBoYSB2YWx1ZSBmcm9tIDAgdG8gMVxuICAgICAqIEBwYXJhbSB7UElYSS5CVUZGRVJfQklUU30gW21hc2s9QlVGRkVSX0JJVFMuQ09MT1IgfCBCVUZGRVJfQklUUy5ERVBUSF0gLSBCaXR3aXNlIE9SIG9mIG1hc2tzXG4gICAgICogIHRoYXQgaW5kaWNhdGUgdGhlIGJ1ZmZlcnMgdG8gYmUgY2xlYXJlZCwgYnkgZGVmYXVsdCBDT0xPUiBhbmQgREVQVEggYnVmZmVycy5cbiAgICAgKi9cbiAgICBGcmFtZWJ1ZmZlclN5c3RlbS5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAociwgZywgYiwgYSwgbWFzaykge1xuICAgICAgICBpZiAobWFzayA9PT0gdm9pZCAwKSB7IG1hc2sgPSBjb25zdGFudHMuQlVGRkVSX0JJVFMuQ09MT1IgfCBjb25zdGFudHMuQlVGRkVSX0JJVFMuREVQVEg7IH1cbiAgICAgICAgdmFyIGdsID0gdGhpcy5nbDtcbiAgICAgICAgLy8gVE9ETyBjbGVhciBjb2xvciBjYW4gYmUgc2V0IG9ubHkgb25lIHJpZ2h0P1xuICAgICAgICBnbC5jbGVhckNvbG9yKHIsIGcsIGIsIGEpO1xuICAgICAgICBnbC5jbGVhcihtYXNrKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgZnJhbWVidWZmZXIgZm9yIHRoaXMgY29udGV4dFxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAcGFyYW0gZnJhbWVidWZmZXJcbiAgICAgKiBAcmV0dXJucyAtIGNyZWF0ZWQgR0xGcmFtZWJ1ZmZlclxuICAgICAqL1xuICAgIEZyYW1lYnVmZmVyU3lzdGVtLnByb3RvdHlwZS5pbml0RnJhbWVidWZmZXIgPSBmdW5jdGlvbiAoZnJhbWVidWZmZXIpIHtcbiAgICAgICAgdmFyIGdsID0gdGhpcy5nbDtcbiAgICAgICAgdmFyIGZibyA9IG5ldyBHTEZyYW1lYnVmZmVyKGdsLmNyZWF0ZUZyYW1lYnVmZmVyKCkpO1xuICAgICAgICBmYm8ubXVsdGlzYW1wbGUgPSB0aGlzLmRldGVjdFNhbXBsZXMoZnJhbWVidWZmZXIubXVsdGlzYW1wbGUpO1xuICAgICAgICBmcmFtZWJ1ZmZlci5nbEZyYW1lYnVmZmVyc1t0aGlzLkNPTlRFWFRfVUlEXSA9IGZibztcbiAgICAgICAgdGhpcy5tYW5hZ2VkRnJhbWVidWZmZXJzLnB1c2goZnJhbWVidWZmZXIpO1xuICAgICAgICBmcmFtZWJ1ZmZlci5kaXNwb3NlUnVubmVyLmFkZCh0aGlzKTtcbiAgICAgICAgcmV0dXJuIGZibztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlc2l6ZSB0aGUgZnJhbWVidWZmZXJcbiAgICAgKiBAcGFyYW0gZnJhbWVidWZmZXJcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgRnJhbWVidWZmZXJTeXN0ZW0ucHJvdG90eXBlLnJlc2l6ZUZyYW1lYnVmZmVyID0gZnVuY3Rpb24gKGZyYW1lYnVmZmVyKSB7XG4gICAgICAgIHZhciBnbCA9IHRoaXMuZ2w7XG4gICAgICAgIHZhciBmYm8gPSBmcmFtZWJ1ZmZlci5nbEZyYW1lYnVmZmVyc1t0aGlzLkNPTlRFWFRfVUlEXTtcbiAgICAgICAgaWYgKGZiby5tc2FhQnVmZmVyKSB7XG4gICAgICAgICAgICBnbC5iaW5kUmVuZGVyYnVmZmVyKGdsLlJFTkRFUkJVRkZFUiwgZmJvLm1zYWFCdWZmZXIpO1xuICAgICAgICAgICAgZ2wucmVuZGVyYnVmZmVyU3RvcmFnZU11bHRpc2FtcGxlKGdsLlJFTkRFUkJVRkZFUiwgZmJvLm11bHRpc2FtcGxlLCBnbC5SR0JBOCwgZnJhbWVidWZmZXIud2lkdGgsIGZyYW1lYnVmZmVyLmhlaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZiby5zdGVuY2lsKSB7XG4gICAgICAgICAgICBnbC5iaW5kUmVuZGVyYnVmZmVyKGdsLlJFTkRFUkJVRkZFUiwgZmJvLnN0ZW5jaWwpO1xuICAgICAgICAgICAgaWYgKGZiby5tc2FhQnVmZmVyKSB7XG4gICAgICAgICAgICAgICAgZ2wucmVuZGVyYnVmZmVyU3RvcmFnZU11bHRpc2FtcGxlKGdsLlJFTkRFUkJVRkZFUiwgZmJvLm11bHRpc2FtcGxlLCBnbC5ERVBUSDI0X1NURU5DSUw4LCBmcmFtZWJ1ZmZlci53aWR0aCwgZnJhbWVidWZmZXIuaGVpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGdsLnJlbmRlcmJ1ZmZlclN0b3JhZ2UoZ2wuUkVOREVSQlVGRkVSLCBnbC5ERVBUSF9TVEVOQ0lMLCBmcmFtZWJ1ZmZlci53aWR0aCwgZnJhbWVidWZmZXIuaGVpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgY29sb3JUZXh0dXJlcyA9IGZyYW1lYnVmZmVyLmNvbG9yVGV4dHVyZXM7XG4gICAgICAgIHZhciBjb3VudCA9IGNvbG9yVGV4dHVyZXMubGVuZ3RoO1xuICAgICAgICBpZiAoIWdsLmRyYXdCdWZmZXJzKSB7XG4gICAgICAgICAgICBjb3VudCA9IE1hdGgubWluKGNvdW50LCAxKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcbiAgICAgICAgICAgIHZhciB0ZXh0dXJlID0gY29sb3JUZXh0dXJlc1tpXTtcbiAgICAgICAgICAgIHZhciBwYXJlbnRUZXh0dXJlID0gdGV4dHVyZS5wYXJlbnRUZXh0dXJlQXJyYXkgfHwgdGV4dHVyZTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIudGV4dHVyZS5iaW5kKHBhcmVudFRleHR1cmUsIDApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmcmFtZWJ1ZmZlci5kZXB0aFRleHR1cmUgJiYgdGhpcy53cml0ZURlcHRoVGV4dHVyZSkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci50ZXh0dXJlLmJpbmQoZnJhbWVidWZmZXIuZGVwdGhUZXh0dXJlLCAwKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBmcmFtZWJ1ZmZlclxuICAgICAqIEBwYXJhbSBmcmFtZWJ1ZmZlclxuICAgICAqIEBwYXJhbSBtaXBMZXZlbFxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBGcmFtZWJ1ZmZlclN5c3RlbS5wcm90b3R5cGUudXBkYXRlRnJhbWVidWZmZXIgPSBmdW5jdGlvbiAoZnJhbWVidWZmZXIsIG1pcExldmVsKSB7XG4gICAgICAgIHZhciBnbCA9IHRoaXMuZ2w7XG4gICAgICAgIHZhciBmYm8gPSBmcmFtZWJ1ZmZlci5nbEZyYW1lYnVmZmVyc1t0aGlzLkNPTlRFWFRfVUlEXTtcbiAgICAgICAgLy8gYmluZCB0aGUgY29sb3IgdGV4dHVyZVxuICAgICAgICB2YXIgY29sb3JUZXh0dXJlcyA9IGZyYW1lYnVmZmVyLmNvbG9yVGV4dHVyZXM7XG4gICAgICAgIHZhciBjb3VudCA9IGNvbG9yVGV4dHVyZXMubGVuZ3RoO1xuICAgICAgICBpZiAoIWdsLmRyYXdCdWZmZXJzKSB7XG4gICAgICAgICAgICBjb3VudCA9IE1hdGgubWluKGNvdW50LCAxKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmJvLm11bHRpc2FtcGxlID4gMSAmJiB0aGlzLmNhbk11bHRpc2FtcGxlRnJhbWVidWZmZXIoZnJhbWVidWZmZXIpKSB7XG4gICAgICAgICAgICBmYm8ubXNhYUJ1ZmZlciA9IGZiby5tc2FhQnVmZmVyIHx8IGdsLmNyZWF0ZVJlbmRlcmJ1ZmZlcigpO1xuICAgICAgICAgICAgZ2wuYmluZFJlbmRlcmJ1ZmZlcihnbC5SRU5ERVJCVUZGRVIsIGZiby5tc2FhQnVmZmVyKTtcbiAgICAgICAgICAgIGdsLnJlbmRlcmJ1ZmZlclN0b3JhZ2VNdWx0aXNhbXBsZShnbC5SRU5ERVJCVUZGRVIsIGZiby5tdWx0aXNhbXBsZSwgZ2wuUkdCQTgsIGZyYW1lYnVmZmVyLndpZHRoLCBmcmFtZWJ1ZmZlci5oZWlnaHQpO1xuICAgICAgICAgICAgZ2wuZnJhbWVidWZmZXJSZW5kZXJidWZmZXIoZ2wuRlJBTUVCVUZGRVIsIGdsLkNPTE9SX0FUVEFDSE1FTlQwLCBnbC5SRU5ERVJCVUZGRVIsIGZiby5tc2FhQnVmZmVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChmYm8ubXNhYUJ1ZmZlcikge1xuICAgICAgICAgICAgZ2wuZGVsZXRlUmVuZGVyYnVmZmVyKGZiby5tc2FhQnVmZmVyKTtcbiAgICAgICAgICAgIGZiby5tc2FhQnVmZmVyID0gbnVsbDtcbiAgICAgICAgICAgIGlmIChmYm8uYmxpdEZyYW1lYnVmZmVyKSB7XG4gICAgICAgICAgICAgICAgZmJvLmJsaXRGcmFtZWJ1ZmZlci5kaXNwb3NlKCk7XG4gICAgICAgICAgICAgICAgZmJvLmJsaXRGcmFtZWJ1ZmZlciA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGFjdGl2ZVRleHR1cmVzID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xuICAgICAgICAgICAgdmFyIHRleHR1cmUgPSBjb2xvclRleHR1cmVzW2ldO1xuICAgICAgICAgICAgdmFyIHBhcmVudFRleHR1cmUgPSB0ZXh0dXJlLnBhcmVudFRleHR1cmVBcnJheSB8fCB0ZXh0dXJlO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci50ZXh0dXJlLmJpbmQocGFyZW50VGV4dHVyZSwgMCk7XG4gICAgICAgICAgICBpZiAoaSA9PT0gMCAmJiBmYm8ubXNhYUJ1ZmZlcikge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ2wuZnJhbWVidWZmZXJUZXh0dXJlMkQoZ2wuRlJBTUVCVUZGRVIsIGdsLkNPTE9SX0FUVEFDSE1FTlQwICsgaSwgdGV4dHVyZS50YXJnZXQsIHBhcmVudFRleHR1cmUuX2dsVGV4dHVyZXNbdGhpcy5DT05URVhUX1VJRF0udGV4dHVyZSwgbWlwTGV2ZWwpO1xuICAgICAgICAgICAgYWN0aXZlVGV4dHVyZXMucHVzaChnbC5DT0xPUl9BVFRBQ0hNRU5UMCArIGkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhY3RpdmVUZXh0dXJlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICBnbC5kcmF3QnVmZmVycyhhY3RpdmVUZXh0dXJlcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZyYW1lYnVmZmVyLmRlcHRoVGV4dHVyZSkge1xuICAgICAgICAgICAgdmFyIHdyaXRlRGVwdGhUZXh0dXJlID0gdGhpcy53cml0ZURlcHRoVGV4dHVyZTtcbiAgICAgICAgICAgIGlmICh3cml0ZURlcHRoVGV4dHVyZSkge1xuICAgICAgICAgICAgICAgIHZhciBkZXB0aFRleHR1cmUgPSBmcmFtZWJ1ZmZlci5kZXB0aFRleHR1cmU7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci50ZXh0dXJlLmJpbmQoZGVwdGhUZXh0dXJlLCAwKTtcbiAgICAgICAgICAgICAgICBnbC5mcmFtZWJ1ZmZlclRleHR1cmUyRChnbC5GUkFNRUJVRkZFUiwgZ2wuREVQVEhfQVRUQUNITUVOVCwgZ2wuVEVYVFVSRV8yRCwgZGVwdGhUZXh0dXJlLl9nbFRleHR1cmVzW3RoaXMuQ09OVEVYVF9VSURdLnRleHR1cmUsIG1pcExldmVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoKGZyYW1lYnVmZmVyLnN0ZW5jaWwgfHwgZnJhbWVidWZmZXIuZGVwdGgpICYmICEoZnJhbWVidWZmZXIuZGVwdGhUZXh0dXJlICYmIHRoaXMud3JpdGVEZXB0aFRleHR1cmUpKSB7XG4gICAgICAgICAgICBmYm8uc3RlbmNpbCA9IGZiby5zdGVuY2lsIHx8IGdsLmNyZWF0ZVJlbmRlcmJ1ZmZlcigpO1xuICAgICAgICAgICAgZ2wuYmluZFJlbmRlcmJ1ZmZlcihnbC5SRU5ERVJCVUZGRVIsIGZiby5zdGVuY2lsKTtcbiAgICAgICAgICAgIGlmIChmYm8ubXNhYUJ1ZmZlcikge1xuICAgICAgICAgICAgICAgIGdsLnJlbmRlcmJ1ZmZlclN0b3JhZ2VNdWx0aXNhbXBsZShnbC5SRU5ERVJCVUZGRVIsIGZiby5tdWx0aXNhbXBsZSwgZ2wuREVQVEgyNF9TVEVOQ0lMOCwgZnJhbWVidWZmZXIud2lkdGgsIGZyYW1lYnVmZmVyLmhlaWdodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBnbC5yZW5kZXJidWZmZXJTdG9yYWdlKGdsLlJFTkRFUkJVRkZFUiwgZ2wuREVQVEhfU1RFTkNJTCwgZnJhbWVidWZmZXIud2lkdGgsIGZyYW1lYnVmZmVyLmhlaWdodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnbC5mcmFtZWJ1ZmZlclJlbmRlcmJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgZ2wuREVQVEhfU1RFTkNJTF9BVFRBQ0hNRU5ULCBnbC5SRU5ERVJCVUZGRVIsIGZiby5zdGVuY2lsKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChmYm8uc3RlbmNpbCkge1xuICAgICAgICAgICAgZ2wuZGVsZXRlUmVuZGVyYnVmZmVyKGZiby5zdGVuY2lsKTtcbiAgICAgICAgICAgIGZiby5zdGVuY2lsID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBmcmFtZSBidWZmZXIgY2FuIGJlIG11bHRpc2FtcGxlZC5cbiAgICAgKiBAcGFyYW0gZnJhbWVidWZmZXJcbiAgICAgKi9cbiAgICBGcmFtZWJ1ZmZlclN5c3RlbS5wcm90b3R5cGUuY2FuTXVsdGlzYW1wbGVGcmFtZWJ1ZmZlciA9IGZ1bmN0aW9uIChmcmFtZWJ1ZmZlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJlci5jb250ZXh0LndlYkdMVmVyc2lvbiAhPT0gMVxuICAgICAgICAgICAgJiYgZnJhbWVidWZmZXIuY29sb3JUZXh0dXJlcy5sZW5ndGggPD0gMSAmJiAhZnJhbWVidWZmZXIuZGVwdGhUZXh0dXJlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGV0ZWN0cyBudW1iZXIgb2Ygc2FtcGxlcyB0aGF0IGlzIG5vdCBtb3JlIHRoYW4gYSBwYXJhbSBidXQgYXMgY2xvc2UgdG8gaXQgYXMgcG9zc2libGVcbiAgICAgKiBAcGFyYW0gc2FtcGxlcyAtIG51bWJlciBvZiBzYW1wbGVzXG4gICAgICogQHJldHVybnMgLSByZWNvbW1lbmRlZCBudW1iZXIgb2Ygc2FtcGxlc1xuICAgICAqL1xuICAgIEZyYW1lYnVmZmVyU3lzdGVtLnByb3RvdHlwZS5kZXRlY3RTYW1wbGVzID0gZnVuY3Rpb24gKHNhbXBsZXMpIHtcbiAgICAgICAgdmFyIG1zYWFTYW1wbGVzID0gdGhpcy5tc2FhU2FtcGxlcztcbiAgICAgICAgdmFyIHJlcyA9IGNvbnN0YW50cy5NU0FBX1FVQUxJVFkuTk9ORTtcbiAgICAgICAgaWYgKHNhbXBsZXMgPD0gMSB8fCBtc2FhU2FtcGxlcyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1zYWFTYW1wbGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAobXNhYVNhbXBsZXNbaV0gPD0gc2FtcGxlcykge1xuICAgICAgICAgICAgICAgIHJlcyA9IG1zYWFTYW1wbGVzW2ldO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChyZXMgPT09IDEpIHtcbiAgICAgICAgICAgIHJlcyA9IGNvbnN0YW50cy5NU0FBX1FVQUxJVFkuTk9ORTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogT25seSB3b3JrcyB3aXRoIFdlYkdMMlxuICAgICAqXG4gICAgICogYmxpdHMgZnJhbWVidWZmZXIgdG8gYW5vdGhlciBvZiB0aGUgc2FtZSBvciBiaWdnZXIgc2l6ZVxuICAgICAqIGFmdGVyIHRoYXQgdGFyZ2V0IGZyYW1lYnVmZmVyIGlzIGJvdW5kXG4gICAgICpcbiAgICAgKiBGYWlscyB3aXRoIFdlYkdMIHdhcm5pbmcgaWYgYmxpdHMgbXVsdGlzYW1wbGUgZnJhbWVidWZmZXIgdG8gZGlmZmVyZW50IHNpemVcbiAgICAgKiBAcGFyYW0gZnJhbWVidWZmZXIgLSBieSBkZWZhdWx0IGl0IGJsaXRzIFwiaW50byBpdHNlbGZcIiwgZnJvbSByZW5kZXJCdWZmZXIgdG8gdGV4dHVyZS5cbiAgICAgKiBAcGFyYW0gc291cmNlUGl4ZWxzIC0gc291cmNlIHJlY3RhbmdsZSBpbiBwaXhlbHNcbiAgICAgKiBAcGFyYW0gZGVzdFBpeGVscyAtIGRlc3QgcmVjdGFuZ2xlIGluIHBpeGVscywgYXNzdW1lZCB0byBiZSB0aGUgc2FtZSBhcyBzb3VyY2VQaXhlbHNcbiAgICAgKi9cbiAgICBGcmFtZWJ1ZmZlclN5c3RlbS5wcm90b3R5cGUuYmxpdCA9IGZ1bmN0aW9uIChmcmFtZWJ1ZmZlciwgc291cmNlUGl4ZWxzLCBkZXN0UGl4ZWxzKSB7XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIGN1cnJlbnQgPSBfYS5jdXJyZW50LCByZW5kZXJlciA9IF9hLnJlbmRlcmVyLCBnbCA9IF9hLmdsLCBDT05URVhUX1VJRCA9IF9hLkNPTlRFWFRfVUlEO1xuICAgICAgICBpZiAocmVuZGVyZXIuY29udGV4dC53ZWJHTFZlcnNpb24gIT09IDIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWN1cnJlbnQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZmJvID0gY3VycmVudC5nbEZyYW1lYnVmZmVyc1tDT05URVhUX1VJRF07XG4gICAgICAgIGlmICghZmJvKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFmcmFtZWJ1ZmZlcikge1xuICAgICAgICAgICAgaWYgKCFmYm8ubXNhYUJ1ZmZlcikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjb2xvclRleHR1cmUgPSBjdXJyZW50LmNvbG9yVGV4dHVyZXNbMF07XG4gICAgICAgICAgICBpZiAoIWNvbG9yVGV4dHVyZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZmJvLmJsaXRGcmFtZWJ1ZmZlcikge1xuICAgICAgICAgICAgICAgIGZiby5ibGl0RnJhbWVidWZmZXIgPSBuZXcgRnJhbWVidWZmZXIoY3VycmVudC53aWR0aCwgY3VycmVudC5oZWlnaHQpO1xuICAgICAgICAgICAgICAgIGZiby5ibGl0RnJhbWVidWZmZXIuYWRkQ29sb3JUZXh0dXJlKDAsIGNvbG9yVGV4dHVyZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmcmFtZWJ1ZmZlciA9IGZiby5ibGl0RnJhbWVidWZmZXI7XG4gICAgICAgICAgICBpZiAoZnJhbWVidWZmZXIuY29sb3JUZXh0dXJlc1swXSAhPT0gY29sb3JUZXh0dXJlKSB7XG4gICAgICAgICAgICAgICAgZnJhbWVidWZmZXIuY29sb3JUZXh0dXJlc1swXSA9IGNvbG9yVGV4dHVyZTtcbiAgICAgICAgICAgICAgICBmcmFtZWJ1ZmZlci5kaXJ0eUlkKys7XG4gICAgICAgICAgICAgICAgZnJhbWVidWZmZXIuZGlydHlGb3JtYXQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChmcmFtZWJ1ZmZlci53aWR0aCAhPT0gY3VycmVudC53aWR0aCB8fCBmcmFtZWJ1ZmZlci5oZWlnaHQgIT09IGN1cnJlbnQuaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgZnJhbWVidWZmZXIud2lkdGggPSBjdXJyZW50LndpZHRoO1xuICAgICAgICAgICAgICAgIGZyYW1lYnVmZmVyLmhlaWdodCA9IGN1cnJlbnQuaGVpZ2h0O1xuICAgICAgICAgICAgICAgIGZyYW1lYnVmZmVyLmRpcnR5SWQrKztcbiAgICAgICAgICAgICAgICBmcmFtZWJ1ZmZlci5kaXJ0eVNpemUrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIXNvdXJjZVBpeGVscykge1xuICAgICAgICAgICAgc291cmNlUGl4ZWxzID0gdGVtcFJlY3RhbmdsZTtcbiAgICAgICAgICAgIHNvdXJjZVBpeGVscy53aWR0aCA9IGN1cnJlbnQud2lkdGg7XG4gICAgICAgICAgICBzb3VyY2VQaXhlbHMuaGVpZ2h0ID0gY3VycmVudC5oZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFkZXN0UGl4ZWxzKSB7XG4gICAgICAgICAgICBkZXN0UGl4ZWxzID0gc291cmNlUGl4ZWxzO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzYW1lU2l6ZSA9IHNvdXJjZVBpeGVscy53aWR0aCA9PT0gZGVzdFBpeGVscy53aWR0aCAmJiBzb3VyY2VQaXhlbHMuaGVpZ2h0ID09PSBkZXN0UGl4ZWxzLmhlaWdodDtcbiAgICAgICAgdGhpcy5iaW5kKGZyYW1lYnVmZmVyKTtcbiAgICAgICAgZ2wuYmluZEZyYW1lYnVmZmVyKGdsLlJFQURfRlJBTUVCVUZGRVIsIGZiby5mcmFtZWJ1ZmZlcik7XG4gICAgICAgIGdsLmJsaXRGcmFtZWJ1ZmZlcihzb3VyY2VQaXhlbHMubGVmdCwgc291cmNlUGl4ZWxzLnRvcCwgc291cmNlUGl4ZWxzLnJpZ2h0LCBzb3VyY2VQaXhlbHMuYm90dG9tLCBkZXN0UGl4ZWxzLmxlZnQsIGRlc3RQaXhlbHMudG9wLCBkZXN0UGl4ZWxzLnJpZ2h0LCBkZXN0UGl4ZWxzLmJvdHRvbSwgZ2wuQ09MT1JfQlVGRkVSX0JJVCwgc2FtZVNpemUgPyBnbC5ORUFSRVNUIDogZ2wuTElORUFSKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERpc3Bvc2VzIGZyYW1lYnVmZmVyLlxuICAgICAqIEBwYXJhbSBmcmFtZWJ1ZmZlciAtIGZyYW1lYnVmZmVyIHRoYXQgaGFzIHRvIGJlIGRpc3Bvc2VkIG9mXG4gICAgICogQHBhcmFtIGNvbnRleHRMb3N0IC0gSWYgY29udGV4dCB3YXMgbG9zdCwgd2Ugc3VwcHJlc3MgYWxsIGRlbGV0ZSBmdW5jdGlvbiBjYWxsc1xuICAgICAqL1xuICAgIEZyYW1lYnVmZmVyU3lzdGVtLnByb3RvdHlwZS5kaXNwb3NlRnJhbWVidWZmZXIgPSBmdW5jdGlvbiAoZnJhbWVidWZmZXIsIGNvbnRleHRMb3N0KSB7XG4gICAgICAgIHZhciBmYm8gPSBmcmFtZWJ1ZmZlci5nbEZyYW1lYnVmZmVyc1t0aGlzLkNPTlRFWFRfVUlEXTtcbiAgICAgICAgdmFyIGdsID0gdGhpcy5nbDtcbiAgICAgICAgaWYgKCFmYm8pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBkZWxldGUgZnJhbWVidWZmZXIuZ2xGcmFtZWJ1ZmZlcnNbdGhpcy5DT05URVhUX1VJRF07XG4gICAgICAgIHZhciBpbmRleCA9IHRoaXMubWFuYWdlZEZyYW1lYnVmZmVycy5pbmRleE9mKGZyYW1lYnVmZmVyKTtcbiAgICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgICAgIHRoaXMubWFuYWdlZEZyYW1lYnVmZmVycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgICAgIGZyYW1lYnVmZmVyLmRpc3Bvc2VSdW5uZXIucmVtb3ZlKHRoaXMpO1xuICAgICAgICBpZiAoIWNvbnRleHRMb3N0KSB7XG4gICAgICAgICAgICBnbC5kZWxldGVGcmFtZWJ1ZmZlcihmYm8uZnJhbWVidWZmZXIpO1xuICAgICAgICAgICAgaWYgKGZiby5tc2FhQnVmZmVyKSB7XG4gICAgICAgICAgICAgICAgZ2wuZGVsZXRlUmVuZGVyYnVmZmVyKGZiby5tc2FhQnVmZmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChmYm8uc3RlbmNpbCkge1xuICAgICAgICAgICAgICAgIGdsLmRlbGV0ZVJlbmRlcmJ1ZmZlcihmYm8uc3RlbmNpbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZiby5ibGl0RnJhbWVidWZmZXIpIHtcbiAgICAgICAgICAgIGZiby5ibGl0RnJhbWVidWZmZXIuZGlzcG9zZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEaXNwb3NlcyBhbGwgZnJhbWVidWZmZXJzLCBidXQgbm90IHRleHR1cmVzIGJvdW5kIHRvIHRoZW0uXG4gICAgICogQHBhcmFtIFtjb250ZXh0TG9zdD1mYWxzZV0gLSBJZiBjb250ZXh0IHdhcyBsb3N0LCB3ZSBzdXBwcmVzcyBhbGwgZGVsZXRlIGZ1bmN0aW9uIGNhbGxzXG4gICAgICovXG4gICAgRnJhbWVidWZmZXJTeXN0ZW0ucHJvdG90eXBlLmRpc3Bvc2VBbGwgPSBmdW5jdGlvbiAoY29udGV4dExvc3QpIHtcbiAgICAgICAgdmFyIGxpc3QgPSB0aGlzLm1hbmFnZWRGcmFtZWJ1ZmZlcnM7XG4gICAgICAgIHRoaXMubWFuYWdlZEZyYW1lYnVmZmVycyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuZGlzcG9zZUZyYW1lYnVmZmVyKGxpc3RbaV0sIGNvbnRleHRMb3N0KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogRm9yY2luZyBjcmVhdGlvbiBvZiBzdGVuY2lsIGJ1ZmZlciBmb3IgY3VycmVudCBmcmFtZWJ1ZmZlciwgaWYgaXQgd2Fzbid0IGRvbmUgYmVmb3JlLlxuICAgICAqIFVzZWQgYnkgTWFza1N5c3RlbSwgd2hlbiBpdHMgdGltZSB0byB1c2Ugc3RlbmNpbCBtYXNrIGZvciBHcmFwaGljcyBlbGVtZW50LlxuICAgICAqXG4gICAgICogSXRzIGFuIGFsdGVybmF0aXZlIGZvciBwdWJsaWMgbGF6eSBgZnJhbWVidWZmZXIuZW5hYmxlU3RlbmNpbGAsIGluIGNhc2Ugd2UgbmVlZCBzdGVuY2lsIHdpdGhvdXQgcmViaW5kLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgRnJhbWVidWZmZXJTeXN0ZW0ucHJvdG90eXBlLmZvcmNlU3RlbmNpbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGZyYW1lYnVmZmVyID0gdGhpcy5jdXJyZW50O1xuICAgICAgICBpZiAoIWZyYW1lYnVmZmVyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGZibyA9IGZyYW1lYnVmZmVyLmdsRnJhbWVidWZmZXJzW3RoaXMuQ09OVEVYVF9VSURdO1xuICAgICAgICBpZiAoIWZibyB8fCBmYm8uc3RlbmNpbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGZyYW1lYnVmZmVyLnN0ZW5jaWwgPSB0cnVlO1xuICAgICAgICB2YXIgdyA9IGZyYW1lYnVmZmVyLndpZHRoO1xuICAgICAgICB2YXIgaCA9IGZyYW1lYnVmZmVyLmhlaWdodDtcbiAgICAgICAgdmFyIGdsID0gdGhpcy5nbDtcbiAgICAgICAgdmFyIHN0ZW5jaWwgPSBnbC5jcmVhdGVSZW5kZXJidWZmZXIoKTtcbiAgICAgICAgZ2wuYmluZFJlbmRlcmJ1ZmZlcihnbC5SRU5ERVJCVUZGRVIsIHN0ZW5jaWwpO1xuICAgICAgICBpZiAoZmJvLm1zYWFCdWZmZXIpIHtcbiAgICAgICAgICAgIGdsLnJlbmRlcmJ1ZmZlclN0b3JhZ2VNdWx0aXNhbXBsZShnbC5SRU5ERVJCVUZGRVIsIGZiby5tdWx0aXNhbXBsZSwgZ2wuREVQVEgyNF9TVEVOQ0lMOCwgdywgaCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBnbC5yZW5kZXJidWZmZXJTdG9yYWdlKGdsLlJFTkRFUkJVRkZFUiwgZ2wuREVQVEhfU1RFTkNJTCwgdywgaCk7XG4gICAgICAgIH1cbiAgICAgICAgZmJvLnN0ZW5jaWwgPSBzdGVuY2lsO1xuICAgICAgICBnbC5mcmFtZWJ1ZmZlclJlbmRlcmJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgZ2wuREVQVEhfU1RFTkNJTF9BVFRBQ0hNRU5ULCBnbC5SRU5ERVJCVUZGRVIsIHN0ZW5jaWwpO1xuICAgIH07XG4gICAgLyoqIFJlc2V0cyBmcmFtZWJ1ZmZlciBzdG9yZWQgc3RhdGUsIGJpbmRzIHNjcmVlbiBmcmFtZWJ1ZmZlci4gU2hvdWxkIGJlIGNhbGxlZCBiZWZvcmUgcmVuZGVyVGV4dHVyZSByZXNldCgpLiAqL1xuICAgIEZyYW1lYnVmZmVyU3lzdGVtLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50ID0gdGhpcy51bmtub3duRnJhbWVidWZmZXI7XG4gICAgICAgIHRoaXMudmlld3BvcnQgPSBuZXcgbWF0aC5SZWN0YW5nbGUoKTtcbiAgICB9O1xuICAgIEZyYW1lYnVmZmVyU3lzdGVtLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gbnVsbDtcbiAgICB9O1xuICAgIHJldHVybiBGcmFtZWJ1ZmZlclN5c3RlbTtcbn0oKSk7XG5cbnZhciBieXRlU2l6ZU1hcCA9IHsgNTEyNjogNCwgNTEyMzogMiwgNTEyMTogMSB9O1xuLyoqXG4gKiBTeXN0ZW0gcGx1Z2luIHRvIHRoZSByZW5kZXJlciB0byBtYW5hZ2UgZ2VvbWV0cnkuXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG52YXIgR2VvbWV0cnlTeXN0ZW0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqIEBwYXJhbSByZW5kZXJlciAtIFRoZSByZW5kZXJlciB0aGlzIFN5c3RlbSB3b3JrcyBmb3IuICovXG4gICAgZnVuY3Rpb24gR2VvbWV0cnlTeXN0ZW0ocmVuZGVyZXIpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICB0aGlzLl9hY3RpdmVHZW9tZXRyeSA9IG51bGw7XG4gICAgICAgIHRoaXMuX2FjdGl2ZVZhbyA9IG51bGw7XG4gICAgICAgIHRoaXMuaGFzVmFvID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5oYXNJbnN0YW5jZSA9IHRydWU7XG4gICAgICAgIHRoaXMuY2FuVXNlVUludDMyRWxlbWVudEluZGV4ID0gZmFsc2U7XG4gICAgICAgIHRoaXMubWFuYWdlZEdlb21ldHJpZXMgPSB7fTtcbiAgICB9XG4gICAgLyoqIFNldHMgdXAgdGhlIHJlbmRlcmVyIGNvbnRleHQgYW5kIG5lY2Vzc2FyeSBidWZmZXJzLiAqL1xuICAgIEdlb21ldHJ5U3lzdGVtLnByb3RvdHlwZS5jb250ZXh0Q2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmRpc3Bvc2VBbGwodHJ1ZSk7XG4gICAgICAgIHZhciBnbCA9IHRoaXMuZ2wgPSB0aGlzLnJlbmRlcmVyLmdsO1xuICAgICAgICB2YXIgY29udGV4dCA9IHRoaXMucmVuZGVyZXIuY29udGV4dDtcbiAgICAgICAgdGhpcy5DT05URVhUX1VJRCA9IHRoaXMucmVuZGVyZXIuQ09OVEVYVF9VSUQ7XG4gICAgICAgIC8vIHdlYmdsMlxuICAgICAgICBpZiAoY29udGV4dC53ZWJHTFZlcnNpb24gIT09IDIpIHtcbiAgICAgICAgICAgIC8vIHdlYmdsIDEhXG4gICAgICAgICAgICB2YXIgbmF0aXZlVmFvRXh0ZW5zaW9uXzEgPSB0aGlzLnJlbmRlcmVyLmNvbnRleHQuZXh0ZW5zaW9ucy52ZXJ0ZXhBcnJheU9iamVjdDtcbiAgICAgICAgICAgIGlmIChzZXR0aW5ncy5zZXR0aW5ncy5QUkVGRVJfRU5WID09PSBjb25zdGFudHMuRU5WLldFQkdMX0xFR0FDWSkge1xuICAgICAgICAgICAgICAgIG5hdGl2ZVZhb0V4dGVuc2lvbl8xID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChuYXRpdmVWYW9FeHRlbnNpb25fMSkge1xuICAgICAgICAgICAgICAgIGdsLmNyZWF0ZVZlcnRleEFycmF5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmF0aXZlVmFvRXh0ZW5zaW9uXzEuY3JlYXRlVmVydGV4QXJyYXlPRVMoKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGdsLmJpbmRWZXJ0ZXhBcnJheSA9IGZ1bmN0aW9uICh2YW8pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5hdGl2ZVZhb0V4dGVuc2lvbl8xLmJpbmRWZXJ0ZXhBcnJheU9FUyh2YW8pO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgZ2wuZGVsZXRlVmVydGV4QXJyYXkgPSBmdW5jdGlvbiAodmFvKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuYXRpdmVWYW9FeHRlbnNpb25fMS5kZWxldGVWZXJ0ZXhBcnJheU9FUyh2YW8pO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhc1ZhbyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGdsLmNyZWF0ZVZlcnRleEFycmF5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGdsLmJpbmRWZXJ0ZXhBcnJheSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBnbC5kZWxldGVWZXJ0ZXhBcnJheSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoY29udGV4dC53ZWJHTFZlcnNpb24gIT09IDIpIHtcbiAgICAgICAgICAgIHZhciBpbnN0YW5jZUV4dF8xID0gZ2wuZ2V0RXh0ZW5zaW9uKCdBTkdMRV9pbnN0YW5jZWRfYXJyYXlzJyk7XG4gICAgICAgICAgICBpZiAoaW5zdGFuY2VFeHRfMSkge1xuICAgICAgICAgICAgICAgIGdsLnZlcnRleEF0dHJpYkRpdmlzb3IgPSBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5zdGFuY2VFeHRfMS52ZXJ0ZXhBdHRyaWJEaXZpc29yQU5HTEUoYSwgYik7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBnbC5kcmF3RWxlbWVudHNJbnN0YW5jZWQgPSBmdW5jdGlvbiAoYSwgYiwgYywgZCwgZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5zdGFuY2VFeHRfMS5kcmF3RWxlbWVudHNJbnN0YW5jZWRBTkdMRShhLCBiLCBjLCBkLCBlKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGdsLmRyYXdBcnJheXNJbnN0YW5jZWQgPSBmdW5jdGlvbiAoYSwgYiwgYywgZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5zdGFuY2VFeHRfMS5kcmF3QXJyYXlzSW5zdGFuY2VkQU5HTEUoYSwgYiwgYywgZCk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFzSW5zdGFuY2UgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNhblVzZVVJbnQzMkVsZW1lbnRJbmRleCA9IGNvbnRleHQud2ViR0xWZXJzaW9uID09PSAyIHx8ICEhY29udGV4dC5leHRlbnNpb25zLnVpbnQzMkVsZW1lbnRJbmRleDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEJpbmRzIGdlb21ldHJ5IHNvIHRoYXQgaXMgY2FuIGJlIGRyYXduLiBDcmVhdGluZyBhIFZhbyBpZiByZXF1aXJlZFxuICAgICAqIEBwYXJhbSBnZW9tZXRyeSAtIEluc3RhbmNlIG9mIGdlb21ldHJ5IHRvIGJpbmQuXG4gICAgICogQHBhcmFtIHNoYWRlciAtIEluc3RhbmNlIG9mIHNoYWRlciB0byB1c2UgdmFvIGZvci5cbiAgICAgKi9cbiAgICBHZW9tZXRyeVN5c3RlbS5wcm90b3R5cGUuYmluZCA9IGZ1bmN0aW9uIChnZW9tZXRyeSwgc2hhZGVyKSB7XG4gICAgICAgIHNoYWRlciA9IHNoYWRlciB8fCB0aGlzLnJlbmRlcmVyLnNoYWRlci5zaGFkZXI7XG4gICAgICAgIHZhciBnbCA9IHRoaXMuZ2w7XG4gICAgICAgIC8vIG5vdCBzdXJlIHRoZSBiZXN0IHdheSB0byBhZGRyZXNzIHRoaXMuLlxuICAgICAgICAvLyBjdXJyZW50bHkgZGlmZmVyZW50IHNoYWRlcnMgcmVxdWlyZSBkaWZmZXJlbnQgVkFPcyBmb3IgdGhlIHNhbWUgZ2VvbWV0cnlcbiAgICAgICAgLy8gU3RpbGwgbXVsbGluZyBvdmVyIHRoZSBiZXN0IHdheSB0byBzb2x2ZSB0aGlzIG9uZS4uXG4gICAgICAgIC8vIHdpbGwgbGlrZWx5IG5lZWQgdG8gbW9kaWZ5IHRoZSBzaGFkZXIgYXR0cmlidXRlIGxvY2F0aW9ucyBhdCBydW4gdGltZSFcbiAgICAgICAgdmFyIHZhb3MgPSBnZW9tZXRyeS5nbFZlcnRleEFycmF5T2JqZWN0c1t0aGlzLkNPTlRFWFRfVUlEXTtcbiAgICAgICAgdmFyIGluY1JlZkNvdW50ID0gZmFsc2U7XG4gICAgICAgIGlmICghdmFvcykge1xuICAgICAgICAgICAgdGhpcy5tYW5hZ2VkR2VvbWV0cmllc1tnZW9tZXRyeS5pZF0gPSBnZW9tZXRyeTtcbiAgICAgICAgICAgIGdlb21ldHJ5LmRpc3Bvc2VSdW5uZXIuYWRkKHRoaXMpO1xuICAgICAgICAgICAgZ2VvbWV0cnkuZ2xWZXJ0ZXhBcnJheU9iamVjdHNbdGhpcy5DT05URVhUX1VJRF0gPSB2YW9zID0ge307XG4gICAgICAgICAgICBpbmNSZWZDb3VudCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHZhbyA9IHZhb3Nbc2hhZGVyLnByb2dyYW0uaWRdIHx8IHRoaXMuaW5pdEdlb21ldHJ5VmFvKGdlb21ldHJ5LCBzaGFkZXIsIGluY1JlZkNvdW50KTtcbiAgICAgICAgdGhpcy5fYWN0aXZlR2VvbWV0cnkgPSBnZW9tZXRyeTtcbiAgICAgICAgaWYgKHRoaXMuX2FjdGl2ZVZhbyAhPT0gdmFvKSB7XG4gICAgICAgICAgICB0aGlzLl9hY3RpdmVWYW8gPSB2YW87XG4gICAgICAgICAgICBpZiAodGhpcy5oYXNWYW8pIHtcbiAgICAgICAgICAgICAgICBnbC5iaW5kVmVydGV4QXJyYXkodmFvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZhdGVWYW8oZ2VvbWV0cnksIHNoYWRlci5wcm9ncmFtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBUT0RPIC0gb3B0aW1pc2UgbGF0ZXIhXG4gICAgICAgIC8vIGRvbid0IG5lZWQgdG8gbG9vcCB0aHJvdWdoIGlmIG5vdGhpbmcgY2hhbmdlZCFcbiAgICAgICAgLy8gbWF5YmUgbG9vayB0byBhZGQgYW4gJ2F1dG91cGRhdGUnIHRvIGdlb21ldHJ5P1xuICAgICAgICB0aGlzLnVwZGF0ZUJ1ZmZlcnMoKTtcbiAgICB9O1xuICAgIC8qKiBSZXNldCBhbmQgdW5iaW5kIGFueSBhY3RpdmUgVkFPIGFuZCBnZW9tZXRyeS4gKi9cbiAgICBHZW9tZXRyeVN5c3RlbS5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMudW5iaW5kKCk7XG4gICAgfTtcbiAgICAvKiogVXBkYXRlIGJ1ZmZlcnMgb2YgdGhlIGN1cnJlbnRseSBib3VuZCBnZW9tZXRyeS4gKi9cbiAgICBHZW9tZXRyeVN5c3RlbS5wcm90b3R5cGUudXBkYXRlQnVmZmVycyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGdlb21ldHJ5ID0gdGhpcy5fYWN0aXZlR2VvbWV0cnk7XG4gICAgICAgIHZhciBidWZmZXJTeXN0ZW0gPSB0aGlzLnJlbmRlcmVyLmJ1ZmZlcjtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBnZW9tZXRyeS5idWZmZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgYnVmZmVyID0gZ2VvbWV0cnkuYnVmZmVyc1tpXTtcbiAgICAgICAgICAgIGJ1ZmZlclN5c3RlbS51cGRhdGUoYnVmZmVyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2hlY2sgY29tcGF0aWJpbGl0eSBiZXR3ZWVuIGEgZ2VvbWV0cnkgYW5kIGEgcHJvZ3JhbVxuICAgICAqIEBwYXJhbSBnZW9tZXRyeSAtIEdlb21ldHJ5IGluc3RhbmNlLlxuICAgICAqIEBwYXJhbSBwcm9ncmFtIC0gUHJvZ3JhbSBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBHZW9tZXRyeVN5c3RlbS5wcm90b3R5cGUuY2hlY2tDb21wYXRpYmlsaXR5ID0gZnVuY3Rpb24gKGdlb21ldHJ5LCBwcm9ncmFtKSB7XG4gICAgICAgIC8vIGdlb21ldHJ5IG11c3QgaGF2ZSBhdCBsZWFzdCBhbGwgdGhlIGF0dHJpYnV0ZXMgdGhhdCB0aGUgc2hhZGVyIHJlcXVpcmVzLlxuICAgICAgICB2YXIgZ2VvbWV0cnlBdHRyaWJ1dGVzID0gZ2VvbWV0cnkuYXR0cmlidXRlcztcbiAgICAgICAgdmFyIHNoYWRlckF0dHJpYnV0ZXMgPSBwcm9ncmFtLmF0dHJpYnV0ZURhdGE7XG4gICAgICAgIGZvciAodmFyIGogaW4gc2hhZGVyQXR0cmlidXRlcykge1xuICAgICAgICAgICAgaWYgKCFnZW9tZXRyeUF0dHJpYnV0ZXNbal0pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJzaGFkZXIgYW5kIGdlb21ldHJ5IGluY29tcGF0aWJsZSwgZ2VvbWV0cnkgbWlzc2luZyB0aGUgXFxcIlwiICsgaiArIFwiXFxcIiBhdHRyaWJ1dGVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRha2VzIGEgZ2VvbWV0cnkgYW5kIHByb2dyYW0gYW5kIGdlbmVyYXRlcyBhIHVuaXF1ZSBzaWduYXR1cmUgZm9yIHRoZW0uXG4gICAgICogQHBhcmFtIGdlb21ldHJ5IC0gVG8gZ2V0IHNpZ25hdHVyZSBmcm9tLlxuICAgICAqIEBwYXJhbSBwcm9ncmFtIC0gVG8gdGVzdCBnZW9tZXRyeSBhZ2FpbnN0LlxuICAgICAqIEByZXR1cm5zIC0gVW5pcXVlIHNpZ25hdHVyZSBvZiB0aGUgZ2VvbWV0cnkgYW5kIHByb2dyYW1cbiAgICAgKi9cbiAgICBHZW9tZXRyeVN5c3RlbS5wcm90b3R5cGUuZ2V0U2lnbmF0dXJlID0gZnVuY3Rpb24gKGdlb21ldHJ5LCBwcm9ncmFtKSB7XG4gICAgICAgIHZhciBhdHRyaWJzID0gZ2VvbWV0cnkuYXR0cmlidXRlcztcbiAgICAgICAgdmFyIHNoYWRlckF0dHJpYnV0ZXMgPSBwcm9ncmFtLmF0dHJpYnV0ZURhdGE7XG4gICAgICAgIHZhciBzdHJpbmdzID0gWydnJywgZ2VvbWV0cnkuaWRdO1xuICAgICAgICBmb3IgKHZhciBpIGluIGF0dHJpYnMpIHtcbiAgICAgICAgICAgIGlmIChzaGFkZXJBdHRyaWJ1dGVzW2ldKSB7XG4gICAgICAgICAgICAgICAgc3RyaW5ncy5wdXNoKGksIHNoYWRlckF0dHJpYnV0ZXNbaV0ubG9jYXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdHJpbmdzLmpvaW4oJy0nKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgb3IgZ2V0cyBWYW8gd2l0aCB0aGUgc2FtZSBzdHJ1Y3R1cmUgYXMgdGhlIGdlb21ldHJ5IGFuZCBzdG9yZXMgaXQgb24gdGhlIGdlb21ldHJ5LlxuICAgICAqIElmIHZhbyBpcyBjcmVhdGVkLCBpdCBpcyBib3VuZCBhdXRvbWF0aWNhbGx5LiBXZSB1c2UgYSBzaGFkZXIgdG8gaW5mZXIgd2hhdCBhbmQgaG93IHRvIHNldCB1cCB0aGVcbiAgICAgKiBhdHRyaWJ1dGUgbG9jYXRpb25zLlxuICAgICAqIEBwYXJhbSBnZW9tZXRyeSAtIEluc3RhbmNlIG9mIGdlb21ldHJ5IHRvIHRvIGdlbmVyYXRlIFZhbyBmb3IuXG4gICAgICogQHBhcmFtIHNoYWRlciAtIEluc3RhbmNlIG9mIHRoZSBzaGFkZXIuXG4gICAgICogQHBhcmFtIGluY1JlZkNvdW50IC0gSW5jcmVtZW50IHJlZkNvdW50IG9mIGFsbCBnZW9tZXRyeSBidWZmZXJzLlxuICAgICAqL1xuICAgIEdlb21ldHJ5U3lzdGVtLnByb3RvdHlwZS5pbml0R2VvbWV0cnlWYW8gPSBmdW5jdGlvbiAoZ2VvbWV0cnksIHNoYWRlciwgaW5jUmVmQ291bnQpIHtcbiAgICAgICAgaWYgKGluY1JlZkNvdW50ID09PSB2b2lkIDApIHsgaW5jUmVmQ291bnQgPSB0cnVlOyB9XG4gICAgICAgIHZhciBnbCA9IHRoaXMuZ2w7XG4gICAgICAgIHZhciBDT05URVhUX1VJRCA9IHRoaXMuQ09OVEVYVF9VSUQ7XG4gICAgICAgIHZhciBidWZmZXJTeXN0ZW0gPSB0aGlzLnJlbmRlcmVyLmJ1ZmZlcjtcbiAgICAgICAgdmFyIHByb2dyYW0gPSBzaGFkZXIucHJvZ3JhbTtcbiAgICAgICAgaWYgKCFwcm9ncmFtLmdsUHJvZ3JhbXNbQ09OVEVYVF9VSURdKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNoYWRlci5nZW5lcmF0ZVByb2dyYW0oc2hhZGVyKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNoZWNrQ29tcGF0aWJpbGl0eShnZW9tZXRyeSwgcHJvZ3JhbSk7XG4gICAgICAgIHZhciBzaWduYXR1cmUgPSB0aGlzLmdldFNpZ25hdHVyZShnZW9tZXRyeSwgcHJvZ3JhbSk7XG4gICAgICAgIHZhciB2YW9PYmplY3RIYXNoID0gZ2VvbWV0cnkuZ2xWZXJ0ZXhBcnJheU9iamVjdHNbdGhpcy5DT05URVhUX1VJRF07XG4gICAgICAgIHZhciB2YW8gPSB2YW9PYmplY3RIYXNoW3NpZ25hdHVyZV07XG4gICAgICAgIGlmICh2YW8pIHtcbiAgICAgICAgICAgIC8vIHRoaXMgd2lsbCBnaXZlIHVzIGVhc3kgYWNjZXNzIHRvIHRoZSB2YW9cbiAgICAgICAgICAgIHZhb09iamVjdEhhc2hbcHJvZ3JhbS5pZF0gPSB2YW87XG4gICAgICAgICAgICByZXR1cm4gdmFvO1xuICAgICAgICB9XG4gICAgICAgIHZhciBidWZmZXJzID0gZ2VvbWV0cnkuYnVmZmVycztcbiAgICAgICAgdmFyIGF0dHJpYnV0ZXMgPSBnZW9tZXRyeS5hdHRyaWJ1dGVzO1xuICAgICAgICB2YXIgdGVtcFN0cmlkZSA9IHt9O1xuICAgICAgICB2YXIgdGVtcFN0YXJ0ID0ge307XG4gICAgICAgIGZvciAodmFyIGogaW4gYnVmZmVycykge1xuICAgICAgICAgICAgdGVtcFN0cmlkZVtqXSA9IDA7XG4gICAgICAgICAgICB0ZW1wU3RhcnRbal0gPSAwO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGogaW4gYXR0cmlidXRlcykge1xuICAgICAgICAgICAgaWYgKCFhdHRyaWJ1dGVzW2pdLnNpemUgJiYgcHJvZ3JhbS5hdHRyaWJ1dGVEYXRhW2pdKSB7XG4gICAgICAgICAgICAgICAgYXR0cmlidXRlc1tqXS5zaXplID0gcHJvZ3JhbS5hdHRyaWJ1dGVEYXRhW2pdLnNpemU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghYXR0cmlidXRlc1tqXS5zaXplKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiUElYSSBHZW9tZXRyeSBhdHRyaWJ1dGUgJ1wiICsgaiArIFwiJyBzaXplIGNhbm5vdCBiZSBkZXRlcm1pbmVkIChsaWtlbHkgdGhlIGJvdW5kIHNoYWRlciBkb2VzIG5vdCBoYXZlIHRoZSBhdHRyaWJ1dGUpXCIpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0ZW1wU3RyaWRlW2F0dHJpYnV0ZXNbal0uYnVmZmVyXSArPSBhdHRyaWJ1dGVzW2pdLnNpemUgKiBieXRlU2l6ZU1hcFthdHRyaWJ1dGVzW2pdLnR5cGVdO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGogaW4gYXR0cmlidXRlcykge1xuICAgICAgICAgICAgdmFyIGF0dHJpYnV0ZSA9IGF0dHJpYnV0ZXNbal07XG4gICAgICAgICAgICB2YXIgYXR0cmliU2l6ZSA9IGF0dHJpYnV0ZS5zaXplO1xuICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZS5zdHJpZGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGlmICh0ZW1wU3RyaWRlW2F0dHJpYnV0ZS5idWZmZXJdID09PSBhdHRyaWJTaXplICogYnl0ZVNpemVNYXBbYXR0cmlidXRlLnR5cGVdKSB7XG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZS5zdHJpZGUgPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlLnN0cmlkZSA9IHRlbXBTdHJpZGVbYXR0cmlidXRlLmJ1ZmZlcl07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZS5zdGFydCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgYXR0cmlidXRlLnN0YXJ0ID0gdGVtcFN0YXJ0W2F0dHJpYnV0ZS5idWZmZXJdO1xuICAgICAgICAgICAgICAgIHRlbXBTdGFydFthdHRyaWJ1dGUuYnVmZmVyXSArPSBhdHRyaWJTaXplICogYnl0ZVNpemVNYXBbYXR0cmlidXRlLnR5cGVdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhbyA9IGdsLmNyZWF0ZVZlcnRleEFycmF5KCk7XG4gICAgICAgIGdsLmJpbmRWZXJ0ZXhBcnJheSh2YW8pO1xuICAgICAgICAvLyBmaXJzdCB1cGRhdGUgLSBhbmQgY3JlYXRlIHRoZSBidWZmZXJzIVxuICAgICAgICAvLyBvbmx5IGNyZWF0ZSBhIGdsIGJ1ZmZlciBpZiBpdCBhY3R1YWxseSBnZXRzXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYnVmZmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGJ1ZmZlciA9IGJ1ZmZlcnNbaV07XG4gICAgICAgICAgICBidWZmZXJTeXN0ZW0uYmluZChidWZmZXIpO1xuICAgICAgICAgICAgaWYgKGluY1JlZkNvdW50KSB7XG4gICAgICAgICAgICAgICAgYnVmZmVyLl9nbEJ1ZmZlcnNbQ09OVEVYVF9VSURdLnJlZkNvdW50Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gVE9ETyAtIG1heWJlIG1ha2UgdGhpcyBhIGRhdGEgb2JqZWN0P1xuICAgICAgICAvLyBsZXRzIHdhaXQgdG8gc2VlIGlmIHdlIG5lZWQgdG8gZmlyc3QhXG4gICAgICAgIHRoaXMuYWN0aXZhdGVWYW8oZ2VvbWV0cnksIHByb2dyYW0pO1xuICAgICAgICB0aGlzLl9hY3RpdmVWYW8gPSB2YW87XG4gICAgICAgIC8vIGFkZCBpdCB0byB0aGUgY2FjaGUhXG4gICAgICAgIHZhb09iamVjdEhhc2hbcHJvZ3JhbS5pZF0gPSB2YW87XG4gICAgICAgIHZhb09iamVjdEhhc2hbc2lnbmF0dXJlXSA9IHZhbztcbiAgICAgICAgcmV0dXJuIHZhbztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERpc3Bvc2VzIGdlb21ldHJ5LlxuICAgICAqIEBwYXJhbSBnZW9tZXRyeSAtIEdlb21ldHJ5IHdpdGggYnVmZmVycy4gT25seSBWQU8gd2lsbCBiZSBkaXNwb3NlZFxuICAgICAqIEBwYXJhbSBbY29udGV4dExvc3Q9ZmFsc2VdIC0gSWYgY29udGV4dCB3YXMgbG9zdCwgd2Ugc3VwcHJlc3MgZGVsZXRlVmVydGV4QXJyYXlcbiAgICAgKi9cbiAgICBHZW9tZXRyeVN5c3RlbS5wcm90b3R5cGUuZGlzcG9zZUdlb21ldHJ5ID0gZnVuY3Rpb24gKGdlb21ldHJ5LCBjb250ZXh0TG9zdCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmICghdGhpcy5tYW5hZ2VkR2VvbWV0cmllc1tnZW9tZXRyeS5pZF0pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBkZWxldGUgdGhpcy5tYW5hZ2VkR2VvbWV0cmllc1tnZW9tZXRyeS5pZF07XG4gICAgICAgIHZhciB2YW9zID0gZ2VvbWV0cnkuZ2xWZXJ0ZXhBcnJheU9iamVjdHNbdGhpcy5DT05URVhUX1VJRF07XG4gICAgICAgIHZhciBnbCA9IHRoaXMuZ2w7XG4gICAgICAgIHZhciBidWZmZXJzID0gZ2VvbWV0cnkuYnVmZmVycztcbiAgICAgICAgdmFyIGJ1ZmZlclN5c3RlbSA9IChfYSA9IHRoaXMucmVuZGVyZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5idWZmZXI7XG4gICAgICAgIGdlb21ldHJ5LmRpc3Bvc2VSdW5uZXIucmVtb3ZlKHRoaXMpO1xuICAgICAgICBpZiAoIXZhb3MpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBidWZmZXJTeXN0ZW0gbWF5IGhhdmUgYWxyZWFkeSBiZWVuIGRlc3Ryb3llZC4uXG4gICAgICAgIC8vIGlmIHRoaXMgaXMgdGhlIGNhc2UsIHRoZXJlIGlzIG5vIG5lZWQgdG8gZGVzdHJveSB0aGUgZ2VvbWV0cnkgYnVmZmVycy4uLlxuICAgICAgICAvLyB0aGV5IGFscmVhZHkgaGF2ZSBiZWVuIVxuICAgICAgICBpZiAoYnVmZmVyU3lzdGVtKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJ1ZmZlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgYnVmID0gYnVmZmVyc1tpXS5fZ2xCdWZmZXJzW3RoaXMuQ09OVEVYVF9VSURdO1xuICAgICAgICAgICAgICAgIC8vIG15IGJlIG51bGwgYXMgY29udGV4dCBtYXkgaGF2ZSBjaGFuZ2VkIHJpZ2h0IGJlZm9yZSB0aGUgZGlzcG9zZSBpcyBjYWxsZWRcbiAgICAgICAgICAgICAgICBpZiAoYnVmKSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1Zi5yZWZDb3VudC0tO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYnVmLnJlZkNvdW50ID09PSAwICYmICFjb250ZXh0TG9zdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyU3lzdGVtLmRpc3Bvc2UoYnVmZmVyc1tpXSwgY29udGV4dExvc3QpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghY29udGV4dExvc3QpIHtcbiAgICAgICAgICAgIGZvciAodmFyIHZhb0lkIGluIHZhb3MpIHtcbiAgICAgICAgICAgICAgICAvLyBkZWxldGUgb25seSBzaWduYXR1cmVzLCBldmVyeXRoaW5nIGVsc2UgYXJlIGNvcGllc1xuICAgICAgICAgICAgICAgIGlmICh2YW9JZFswXSA9PT0gJ2cnKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB2YW8gPSB2YW9zW3Zhb0lkXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2FjdGl2ZVZhbyA9PT0gdmFvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVuYmluZCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGdsLmRlbGV0ZVZlcnRleEFycmF5KHZhbyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGRlbGV0ZSBnZW9tZXRyeS5nbFZlcnRleEFycmF5T2JqZWN0c1t0aGlzLkNPTlRFWFRfVUlEXTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERpc3Bvc2UgYWxsIFdlYkdMIHJlc291cmNlcyBvZiBhbGwgbWFuYWdlZCBnZW9tZXRyaWVzLlxuICAgICAqIEBwYXJhbSBbY29udGV4dExvc3Q9ZmFsc2VdIC0gSWYgY29udGV4dCB3YXMgbG9zdCwgd2Ugc3VwcHJlc3MgYGdsLmRlbGV0ZWAgY2FsbHNcbiAgICAgKi9cbiAgICBHZW9tZXRyeVN5c3RlbS5wcm90b3R5cGUuZGlzcG9zZUFsbCA9IGZ1bmN0aW9uIChjb250ZXh0TG9zdCkge1xuICAgICAgICB2YXIgYWxsID0gT2JqZWN0LmtleXModGhpcy5tYW5hZ2VkR2VvbWV0cmllcyk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYWxsLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLmRpc3Bvc2VHZW9tZXRyeSh0aGlzLm1hbmFnZWRHZW9tZXRyaWVzW2FsbFtpXV0sIGNvbnRleHRMb3N0KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQWN0aXZhdGUgdmVydGV4IGFycmF5IG9iamVjdC5cbiAgICAgKiBAcGFyYW0gZ2VvbWV0cnkgLSBHZW9tZXRyeSBpbnN0YW5jZS5cbiAgICAgKiBAcGFyYW0gcHJvZ3JhbSAtIFNoYWRlciBwcm9ncmFtIGluc3RhbmNlLlxuICAgICAqL1xuICAgIEdlb21ldHJ5U3lzdGVtLnByb3RvdHlwZS5hY3RpdmF0ZVZhbyA9IGZ1bmN0aW9uIChnZW9tZXRyeSwgcHJvZ3JhbSkge1xuICAgICAgICB2YXIgZ2wgPSB0aGlzLmdsO1xuICAgICAgICB2YXIgQ09OVEVYVF9VSUQgPSB0aGlzLkNPTlRFWFRfVUlEO1xuICAgICAgICB2YXIgYnVmZmVyU3lzdGVtID0gdGhpcy5yZW5kZXJlci5idWZmZXI7XG4gICAgICAgIHZhciBidWZmZXJzID0gZ2VvbWV0cnkuYnVmZmVycztcbiAgICAgICAgdmFyIGF0dHJpYnV0ZXMgPSBnZW9tZXRyeS5hdHRyaWJ1dGVzO1xuICAgICAgICBpZiAoZ2VvbWV0cnkuaW5kZXhCdWZmZXIpIHtcbiAgICAgICAgICAgIC8vIGZpcnN0IHVwZGF0ZSB0aGUgaW5kZXggYnVmZmVyIGlmIHdlIGhhdmUgb25lLi5cbiAgICAgICAgICAgIGJ1ZmZlclN5c3RlbS5iaW5kKGdlb21ldHJ5LmluZGV4QnVmZmVyKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbGFzdEJ1ZmZlciA9IG51bGw7XG4gICAgICAgIC8vIGFkZCBhIG5ldyBvbmUhXG4gICAgICAgIGZvciAodmFyIGogaW4gYXR0cmlidXRlcykge1xuICAgICAgICAgICAgdmFyIGF0dHJpYnV0ZSA9IGF0dHJpYnV0ZXNbal07XG4gICAgICAgICAgICB2YXIgYnVmZmVyID0gYnVmZmVyc1thdHRyaWJ1dGUuYnVmZmVyXTtcbiAgICAgICAgICAgIHZhciBnbEJ1ZmZlciA9IGJ1ZmZlci5fZ2xCdWZmZXJzW0NPTlRFWFRfVUlEXTtcbiAgICAgICAgICAgIGlmIChwcm9ncmFtLmF0dHJpYnV0ZURhdGFbal0pIHtcbiAgICAgICAgICAgICAgICBpZiAobGFzdEJ1ZmZlciAhPT0gZ2xCdWZmZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyU3lzdGVtLmJpbmQoYnVmZmVyKTtcbiAgICAgICAgICAgICAgICAgICAgbGFzdEJ1ZmZlciA9IGdsQnVmZmVyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgbG9jYXRpb24gPSBwcm9ncmFtLmF0dHJpYnV0ZURhdGFbal0ubG9jYXRpb247XG4gICAgICAgICAgICAgICAgLy8gVE9ETyBpbnRyb2R1Y2Ugc3RhdGUgYWdhaW5cbiAgICAgICAgICAgICAgICAvLyB3ZSBjYW4gb3B0aW1pc2UgdGhpcyBmb3Igb2xkZXIgZGV2aWNlcyB0aGF0IGhhdmUgbm8gVkFPc1xuICAgICAgICAgICAgICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGxvY2F0aW9uKTtcbiAgICAgICAgICAgICAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKGxvY2F0aW9uLCBhdHRyaWJ1dGUuc2l6ZSwgYXR0cmlidXRlLnR5cGUgfHwgZ2wuRkxPQVQsIGF0dHJpYnV0ZS5ub3JtYWxpemVkLCBhdHRyaWJ1dGUuc3RyaWRlLCBhdHRyaWJ1dGUuc3RhcnQpO1xuICAgICAgICAgICAgICAgIGlmIChhdHRyaWJ1dGUuaW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyBjYWxjdWxhdGUgaW5zdGFuY2UgY291bnQgYmFzZWQgb2YgdGhpcy4uLlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5oYXNJbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2wudmVydGV4QXR0cmliRGl2aXNvcihsb2NhdGlvbiwgMSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2dlb21ldHJ5IGVycm9yLCBHUFUgSW5zdGFuY2luZyBpcyBub3Qgc3VwcG9ydGVkIG9uIHRoaXMgZGV2aWNlJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERyYXdzIHRoZSBjdXJyZW50bHkgYm91bmQgZ2VvbWV0cnkuXG4gICAgICogQHBhcmFtIHR5cGUgLSBUaGUgdHlwZSBwcmltaXRpdmUgdG8gcmVuZGVyLlxuICAgICAqIEBwYXJhbSBzaXplIC0gVGhlIG51bWJlciBvZiBlbGVtZW50cyB0byBiZSByZW5kZXJlZC4gSWYgbm90IHNwZWNpZmllZCwgYWxsIHZlcnRpY2VzIGFmdGVyIHRoZVxuICAgICAqICBzdGFydGluZyB2ZXJ0ZXggd2lsbCBiZSBkcmF3bi5cbiAgICAgKiBAcGFyYW0gc3RhcnQgLSBUaGUgc3RhcnRpbmcgdmVydGV4IGluIHRoZSBnZW9tZXRyeSB0byBzdGFydCBkcmF3aW5nIGZyb20uIElmIG5vdCBzcGVjaWZpZWQsXG4gICAgICogIGRyYXdpbmcgd2lsbCBzdGFydCBmcm9tIHRoZSBmaXJzdCB2ZXJ0ZXguXG4gICAgICogQHBhcmFtIGluc3RhbmNlQ291bnQgLSBUaGUgbnVtYmVyIG9mIGluc3RhbmNlcyBvZiB0aGUgc2V0IG9mIGVsZW1lbnRzIHRvIGV4ZWN1dGUuIElmIG5vdCBzcGVjaWZpZWQsXG4gICAgICogIGFsbCBpbnN0YW5jZXMgd2lsbCBiZSBkcmF3bi5cbiAgICAgKi9cbiAgICBHZW9tZXRyeVN5c3RlbS5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uICh0eXBlLCBzaXplLCBzdGFydCwgaW5zdGFuY2VDb3VudCkge1xuICAgICAgICB2YXIgZ2wgPSB0aGlzLmdsO1xuICAgICAgICB2YXIgZ2VvbWV0cnkgPSB0aGlzLl9hY3RpdmVHZW9tZXRyeTtcbiAgICAgICAgLy8gVE9ETy4uIHRoaXMgc2hvdWxkIG5vdCBjaGFuZ2Ugc28gbWF5YmUgY2FjaGUgdGhlIGZ1bmN0aW9uP1xuICAgICAgICBpZiAoZ2VvbWV0cnkuaW5kZXhCdWZmZXIpIHtcbiAgICAgICAgICAgIHZhciBieXRlU2l6ZSA9IGdlb21ldHJ5LmluZGV4QnVmZmVyLmRhdGEuQllURVNfUEVSX0VMRU1FTlQ7XG4gICAgICAgICAgICB2YXIgZ2xUeXBlID0gYnl0ZVNpemUgPT09IDIgPyBnbC5VTlNJR05FRF9TSE9SVCA6IGdsLlVOU0lHTkVEX0lOVDtcbiAgICAgICAgICAgIGlmIChieXRlU2l6ZSA9PT0gMiB8fCAoYnl0ZVNpemUgPT09IDQgJiYgdGhpcy5jYW5Vc2VVSW50MzJFbGVtZW50SW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGdlb21ldHJ5Lmluc3RhbmNlZCkge1xuICAgICAgICAgICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBtYXgtbGVuICovXG4gICAgICAgICAgICAgICAgICAgIGdsLmRyYXdFbGVtZW50c0luc3RhbmNlZCh0eXBlLCBzaXplIHx8IGdlb21ldHJ5LmluZGV4QnVmZmVyLmRhdGEubGVuZ3RoLCBnbFR5cGUsIChzdGFydCB8fCAwKSAqIGJ5dGVTaXplLCBpbnN0YW5jZUNvdW50IHx8IDEpO1xuICAgICAgICAgICAgICAgICAgICAvKiBlc2xpbnQtZW5hYmxlIG1heC1sZW4gKi9cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG1heC1sZW4gKi9cbiAgICAgICAgICAgICAgICAgICAgZ2wuZHJhd0VsZW1lbnRzKHR5cGUsIHNpemUgfHwgZ2VvbWV0cnkuaW5kZXhCdWZmZXIuZGF0YS5sZW5ndGgsIGdsVHlwZSwgKHN0YXJ0IHx8IDApICogYnl0ZVNpemUpO1xuICAgICAgICAgICAgICAgICAgICAvKiBlc2xpbnQtZW5hYmxlIG1heC1sZW4gKi9cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ3Vuc3VwcG9ydGVkIGluZGV4IGJ1ZmZlciB0eXBlOiB1aW50MzInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChnZW9tZXRyeS5pbnN0YW5jZWQpIHtcbiAgICAgICAgICAgIC8vIFRPRE8gbmVlZCBhIGJldHRlciB3YXkgdG8gY2FsY3VsYXRlIHNpemUuLlxuICAgICAgICAgICAgZ2wuZHJhd0FycmF5c0luc3RhbmNlZCh0eXBlLCBzdGFydCwgc2l6ZSB8fCBnZW9tZXRyeS5nZXRTaXplKCksIGluc3RhbmNlQ291bnQgfHwgMSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBnbC5kcmF3QXJyYXlzKHR5cGUsIHN0YXJ0LCBzaXplIHx8IGdlb21ldHJ5LmdldFNpemUoKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKiogVW5iaW5kL3Jlc2V0IGV2ZXJ5dGhpbmcuICovXG4gICAgR2VvbWV0cnlTeXN0ZW0ucHJvdG90eXBlLnVuYmluZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5nbC5iaW5kVmVydGV4QXJyYXkobnVsbCk7XG4gICAgICAgIHRoaXMuX2FjdGl2ZVZhbyA9IG51bGw7XG4gICAgICAgIHRoaXMuX2FjdGl2ZUdlb21ldHJ5ID0gbnVsbDtcbiAgICB9O1xuICAgIEdlb21ldHJ5U3lzdGVtLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gbnVsbDtcbiAgICB9O1xuICAgIHJldHVybiBHZW9tZXRyeVN5c3RlbTtcbn0oKSk7XG5cbi8qKlxuICogQ29tcG9uZW50IGZvciBtYXNrZWQgZWxlbWVudHMuXG4gKlxuICogSG9sZHMgbWFzayBtb2RlIGFuZCB0ZW1wb3JhcnkgZGF0YSBhYm91dCBjdXJyZW50IG1hc2suXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG52YXIgTWFza0RhdGEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIE1hc2tEYXRhXG4gICAgICogQHBhcmFtIHtQSVhJLkRpc3BsYXlPYmplY3R9IFttYXNrT2JqZWN0PW51bGxdIC0gb2JqZWN0IHRoYXQgZGVzY3JpYmVzIHRoZSBtYXNrXG4gICAgICovXG4gICAgZnVuY3Rpb24gTWFza0RhdGEobWFza09iamVjdCkge1xuICAgICAgICBpZiAobWFza09iamVjdCA9PT0gdm9pZCAwKSB7IG1hc2tPYmplY3QgPSBudWxsOyB9XG4gICAgICAgIHRoaXMudHlwZSA9IGNvbnN0YW50cy5NQVNLX1RZUEVTLk5PTkU7XG4gICAgICAgIHRoaXMuYXV0b0RldGVjdCA9IHRydWU7XG4gICAgICAgIHRoaXMubWFza09iamVjdCA9IG1hc2tPYmplY3QgfHwgbnVsbDtcbiAgICAgICAgdGhpcy5wb29sZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pc01hc2tEYXRhID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5yZXNvbHV0aW9uID0gbnVsbDtcbiAgICAgICAgdGhpcy5tdWx0aXNhbXBsZSA9IHNldHRpbmdzLnNldHRpbmdzLkZJTFRFUl9NVUxUSVNBTVBMRTtcbiAgICAgICAgdGhpcy5lbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fZmlsdGVycyA9IG51bGw7XG4gICAgICAgIHRoaXMuX3N0ZW5jaWxDb3VudGVyID0gMDtcbiAgICAgICAgdGhpcy5fc2Npc3NvckNvdW50ZXIgPSAwO1xuICAgICAgICB0aGlzLl9zY2lzc29yUmVjdCA9IG51bGw7XG4gICAgICAgIHRoaXMuX3NjaXNzb3JSZWN0TG9jYWwgPSBudWxsO1xuICAgICAgICB0aGlzLl90YXJnZXQgPSBudWxsO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWFza0RhdGEucHJvdG90eXBlLCBcImZpbHRlclwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgc3ByaXRlIG1hc2sgZmlsdGVyLlxuICAgICAgICAgKiBJZiBzZXQgdG8gYG51bGxgLCB0aGUgZGVmYXVsdCBzcHJpdGUgbWFzayBmaWx0ZXIgaXMgdXNlZC5cbiAgICAgICAgICogQGRlZmF1bHQgbnVsbFxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZmlsdGVycyA/IHRoaXMuX2ZpbHRlcnNbMF0gOiBudWxsO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2ZpbHRlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZmlsdGVyc1swXSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZmlsdGVycyA9IFt2YWx1ZV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fZmlsdGVycyA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICAvKiogUmVzZXRzIHRoZSBtYXNrIGRhdGEgYWZ0ZXIgcG9wTWFzaygpLiAqL1xuICAgIE1hc2tEYXRhLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMucG9vbGVkKSB7XG4gICAgICAgICAgICB0aGlzLm1hc2tPYmplY3QgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy50eXBlID0gY29uc3RhbnRzLk1BU0tfVFlQRVMuTk9ORTtcbiAgICAgICAgICAgIHRoaXMuYXV0b0RldGVjdCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fdGFyZ2V0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5fc2Npc3NvclJlY3RMb2NhbCA9IG51bGw7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDb3BpZXMgY291bnRlcnMgZnJvbSBtYXNrRGF0YSBhYm92ZSwgY2FsbGVkIGZyb20gcHVzaE1hc2soKS5cbiAgICAgKiBAcGFyYW0gbWFza0Fib3ZlXG4gICAgICovXG4gICAgTWFza0RhdGEucHJvdG90eXBlLmNvcHlDb3VudGVyc09yUmVzZXQgPSBmdW5jdGlvbiAobWFza0Fib3ZlKSB7XG4gICAgICAgIGlmIChtYXNrQWJvdmUpIHtcbiAgICAgICAgICAgIHRoaXMuX3N0ZW5jaWxDb3VudGVyID0gbWFza0Fib3ZlLl9zdGVuY2lsQ291bnRlcjtcbiAgICAgICAgICAgIHRoaXMuX3NjaXNzb3JDb3VudGVyID0gbWFza0Fib3ZlLl9zY2lzc29yQ291bnRlcjtcbiAgICAgICAgICAgIHRoaXMuX3NjaXNzb3JSZWN0ID0gbWFza0Fib3ZlLl9zY2lzc29yUmVjdDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3N0ZW5jaWxDb3VudGVyID0gMDtcbiAgICAgICAgICAgIHRoaXMuX3NjaXNzb3JDb3VudGVyID0gMDtcbiAgICAgICAgICAgIHRoaXMuX3NjaXNzb3JSZWN0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIE1hc2tEYXRhO1xufSgpKTtcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGdsIC0gVGhlIGN1cnJlbnQgV2ViR0wgY29udGV4dCB7V2ViR0xQcm9ncmFtfVxuICogQHBhcmFtIHtudW1iZXJ9IHR5cGUgLSB0aGUgdHlwZSwgY2FuIGJlIGVpdGhlciBWRVJURVhfU0hBREVSIG9yIEZSQUdNRU5UX1NIQURFUlxuICogQHBhcmFtIHtzdHJpbmd9IHNyYyAtIFRoZSB2ZXJ0ZXggc2hhZGVyIHNvdXJjZSBhcyBhbiBhcnJheSBvZiBzdHJpbmdzLlxuICogQHJldHVybnMge1dlYkdMU2hhZGVyfSB0aGUgc2hhZGVyXG4gKi9cbmZ1bmN0aW9uIGNvbXBpbGVTaGFkZXIoZ2wsIHR5cGUsIHNyYykge1xuICAgIHZhciBzaGFkZXIgPSBnbC5jcmVhdGVTaGFkZXIodHlwZSk7XG4gICAgZ2wuc2hhZGVyU291cmNlKHNoYWRlciwgc3JjKTtcbiAgICBnbC5jb21waWxlU2hhZGVyKHNoYWRlcik7XG4gICAgcmV0dXJuIHNoYWRlcjtcbn1cblxuLyoqXG4gKiB3aWxsIGxvZyBhIHNoYWRlciBlcnJvciBoaWdobGlnaHRpbmcgdGhlIGxpbmVzIHdpdGggdGhlIGVycm9yXG4gKiBhbHNvIHdpbGwgYWRkIG51bWJlcnMgYWxvbmcgdGhlIHNpZGUuXG4gKiBAcGFyYW0gZ2wgLSB0aGUgV2ViR0xDb250ZXh0XG4gKiBAcGFyYW0gc2hhZGVyIC0gdGhlIHNoYWRlciB0byBsb2cgZXJyb3JzIGZvclxuICovXG5mdW5jdGlvbiBsb2dQcmV0dHlTaGFkZXJFcnJvcihnbCwgc2hhZGVyKSB7XG4gICAgdmFyIHNoYWRlclNyYyA9IGdsLmdldFNoYWRlclNvdXJjZShzaGFkZXIpXG4gICAgICAgIC5zcGxpdCgnXFxuJylcbiAgICAgICAgLm1hcChmdW5jdGlvbiAobGluZSwgaW5kZXgpIHsgcmV0dXJuIGluZGV4ICsgXCI6IFwiICsgbGluZTsgfSk7XG4gICAgdmFyIHNoYWRlckxvZyA9IGdsLmdldFNoYWRlckluZm9Mb2coc2hhZGVyKTtcbiAgICB2YXIgc3BsaXRTaGFkZXIgPSBzaGFkZXJMb2cuc3BsaXQoJ1xcbicpO1xuICAgIHZhciBkZWR1cGUgPSB7fTtcbiAgICB2YXIgbGluZU51bWJlcnMgPSBzcGxpdFNoYWRlci5tYXAoZnVuY3Rpb24gKGxpbmUpIHsgcmV0dXJuIHBhcnNlRmxvYXQobGluZS5yZXBsYWNlKC9eRVJST1JcXDogMFxcOihbXFxkXSspXFw6LiokLywgJyQxJykpOyB9KVxuICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChuKSB7XG4gICAgICAgIGlmIChuICYmICFkZWR1cGVbbl0pIHtcbiAgICAgICAgICAgIGRlZHVwZVtuXSA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG4gICAgdmFyIGxvZ0FyZ3MgPSBbJyddO1xuICAgIGxpbmVOdW1iZXJzLmZvckVhY2goZnVuY3Rpb24gKG51bWJlcikge1xuICAgICAgICBzaGFkZXJTcmNbbnVtYmVyIC0gMV0gPSBcIiVjXCIgKyBzaGFkZXJTcmNbbnVtYmVyIC0gMV0gKyBcIiVjXCI7XG4gICAgICAgIGxvZ0FyZ3MucHVzaCgnYmFja2dyb3VuZDogI0ZGMDAwMDsgY29sb3I6I0ZGRkZGRjsgZm9udC1zaXplOiAxMHB4JywgJ2ZvbnQtc2l6ZTogMTBweCcpO1xuICAgIH0pO1xuICAgIHZhciBmcmFnbWVudFNvdXJjZVRvTG9nID0gc2hhZGVyU3JjXG4gICAgICAgIC5qb2luKCdcXG4nKTtcbiAgICBsb2dBcmdzWzBdID0gZnJhZ21lbnRTb3VyY2VUb0xvZztcbiAgICBjb25zb2xlLmVycm9yKHNoYWRlckxvZyk7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICBjb25zb2xlLmdyb3VwQ29sbGFwc2VkKCdjbGljayB0byB2aWV3IGZ1bGwgc2hhZGVyIGNvZGUnKTtcbiAgICBjb25zb2xlLndhcm4uYXBwbHkoY29uc29sZSwgbG9nQXJncyk7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICBjb25zb2xlLmdyb3VwRW5kKCk7XG59XG4vKipcbiAqXG4gKiBsb2dzIG91dCBhbnkgcHJvZ3JhbSBlcnJvcnNcbiAqIEBwYXJhbSBnbCAtIFRoZSBjdXJyZW50IFdlYkdMIGNvbnRleHRcbiAqIEBwYXJhbSBwcm9ncmFtIC0gdGhlIFdlYkdMIHByb2dyYW0gdG8gZGlzcGxheSBlcnJvcnMgZm9yXG4gKiBAcGFyYW0gdmVydGV4U2hhZGVyICAtIHRoZSBmcmFnbWVudCBXZWJHTCBzaGFkZXIgcHJvZ3JhbVxuICogQHBhcmFtIGZyYWdtZW50U2hhZGVyIC0gdGhlIHZlcnRleCBXZWJHTCBzaGFkZXIgcHJvZ3JhbVxuICovXG5mdW5jdGlvbiBsb2dQcm9ncmFtRXJyb3IoZ2wsIHByb2dyYW0sIHZlcnRleFNoYWRlciwgZnJhZ21lbnRTaGFkZXIpIHtcbiAgICAvLyBpZiBsaW5raW5nIGZhaWxzLCB0aGVuIGxvZyBhbmQgY2xlYW51cFxuICAgIGlmICghZ2wuZ2V0UHJvZ3JhbVBhcmFtZXRlcihwcm9ncmFtLCBnbC5MSU5LX1NUQVRVUykpIHtcbiAgICAgICAgaWYgKCFnbC5nZXRTaGFkZXJQYXJhbWV0ZXIodmVydGV4U2hhZGVyLCBnbC5DT01QSUxFX1NUQVRVUykpIHtcbiAgICAgICAgICAgIGxvZ1ByZXR0eVNoYWRlckVycm9yKGdsLCB2ZXJ0ZXhTaGFkZXIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZ2wuZ2V0U2hhZGVyUGFyYW1ldGVyKGZyYWdtZW50U2hhZGVyLCBnbC5DT01QSUxFX1NUQVRVUykpIHtcbiAgICAgICAgICAgIGxvZ1ByZXR0eVNoYWRlckVycm9yKGdsLCBmcmFnbWVudFNoYWRlcik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5lcnJvcignUGl4aUpTIEVycm9yOiBDb3VsZCBub3QgaW5pdGlhbGl6ZSBzaGFkZXIuJyk7XG4gICAgICAgIC8vIGlmIHRoZXJlIGlzIGEgcHJvZ3JhbSBpbmZvIGxvZywgbG9nIGl0XG4gICAgICAgIGlmIChnbC5nZXRQcm9ncmFtSW5mb0xvZyhwcm9ncmFtKSAhPT0gJycpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignUGl4aUpTIFdhcm5pbmc6IGdsLmdldFByb2dyYW1JbmZvTG9nKCknLCBnbC5nZXRQcm9ncmFtSW5mb0xvZyhwcm9ncmFtKSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGJvb2xlYW5BcnJheShzaXplKSB7XG4gICAgdmFyIGFycmF5ID0gbmV3IEFycmF5KHNpemUpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYXJyYXlbaV0gPSBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIGFycmF5O1xufVxuLyoqXG4gKiBAbWV0aG9kIGRlZmF1bHRWYWx1ZVxuICogQG1lbWJlcm9mIFBJWEkuZ2xDb3JlLnNoYWRlclxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgLSBUeXBlIG9mIHZhbHVlXG4gKiBAcGFyYW0ge251bWJlcn0gc2l6ZVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gZGVmYXVsdFZhbHVlKHR5cGUsIHNpemUpIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSAnZmxvYXQnOlxuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIGNhc2UgJ3ZlYzInOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkoMiAqIHNpemUpO1xuICAgICAgICBjYXNlICd2ZWMzJzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgRmxvYXQzMkFycmF5KDMgKiBzaXplKTtcbiAgICAgICAgY2FzZSAndmVjNCc6XG4gICAgICAgICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheSg0ICogc2l6ZSk7XG4gICAgICAgIGNhc2UgJ2ludCc6XG4gICAgICAgIGNhc2UgJ3VpbnQnOlxuICAgICAgICBjYXNlICdzYW1wbGVyMkQnOlxuICAgICAgICBjYXNlICdzYW1wbGVyMkRBcnJheSc6XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgY2FzZSAnaXZlYzInOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBJbnQzMkFycmF5KDIgKiBzaXplKTtcbiAgICAgICAgY2FzZSAnaXZlYzMnOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBJbnQzMkFycmF5KDMgKiBzaXplKTtcbiAgICAgICAgY2FzZSAnaXZlYzQnOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBJbnQzMkFycmF5KDQgKiBzaXplKTtcbiAgICAgICAgY2FzZSAndXZlYzInOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBVaW50MzJBcnJheSgyICogc2l6ZSk7XG4gICAgICAgIGNhc2UgJ3V2ZWMzJzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgVWludDMyQXJyYXkoMyAqIHNpemUpO1xuICAgICAgICBjYXNlICd1dmVjNCc6XG4gICAgICAgICAgICByZXR1cm4gbmV3IFVpbnQzMkFycmF5KDQgKiBzaXplKTtcbiAgICAgICAgY2FzZSAnYm9vbCc6XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGNhc2UgJ2J2ZWMyJzpcbiAgICAgICAgICAgIHJldHVybiBib29sZWFuQXJyYXkoMiAqIHNpemUpO1xuICAgICAgICBjYXNlICdidmVjMyc6XG4gICAgICAgICAgICByZXR1cm4gYm9vbGVhbkFycmF5KDMgKiBzaXplKTtcbiAgICAgICAgY2FzZSAnYnZlYzQnOlxuICAgICAgICAgICAgcmV0dXJuIGJvb2xlYW5BcnJheSg0ICogc2l6ZSk7XG4gICAgICAgIGNhc2UgJ21hdDInOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkoWzEsIDAsXG4gICAgICAgICAgICAgICAgMCwgMV0pO1xuICAgICAgICBjYXNlICdtYXQzJzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgRmxvYXQzMkFycmF5KFsxLCAwLCAwLFxuICAgICAgICAgICAgICAgIDAsIDEsIDAsXG4gICAgICAgICAgICAgICAgMCwgMCwgMV0pO1xuICAgICAgICBjYXNlICdtYXQ0JzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgRmxvYXQzMkFycmF5KFsxLCAwLCAwLCAwLFxuICAgICAgICAgICAgICAgIDAsIDEsIDAsIDAsXG4gICAgICAgICAgICAgICAgMCwgMCwgMSwgMCxcbiAgICAgICAgICAgICAgICAwLCAwLCAwLCAxXSk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuXG52YXIgdW5rbm93bkNvbnRleHQgPSB7fTtcbnZhciBjb250ZXh0ID0gdW5rbm93bkNvbnRleHQ7XG4vKipcbiAqIHJldHVybnMgYSBsaXR0bGUgV2ViR0wgY29udGV4dCB0byB1c2UgZm9yIHByb2dyYW0gaW5zcGVjdGlvbi5cbiAqIEBzdGF0aWNcbiAqIEBwcml2YXRlXG4gKiBAcmV0dXJucyB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBhIGdsIGNvbnRleHQgdG8gdGVzdCB3aXRoXG4gKi9cbmZ1bmN0aW9uIGdldFRlc3RDb250ZXh0KCkge1xuICAgIGlmIChjb250ZXh0ID09PSB1bmtub3duQ29udGV4dCB8fCAoY29udGV4dCAmJiBjb250ZXh0LmlzQ29udGV4dExvc3QoKSkpIHtcbiAgICAgICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgICB2YXIgZ2wgPSB2b2lkIDA7XG4gICAgICAgIGlmIChzZXR0aW5ncy5zZXR0aW5ncy5QUkVGRVJfRU5WID49IGNvbnN0YW50cy5FTlYuV0VCR0wyKSB7XG4gICAgICAgICAgICBnbCA9IGNhbnZhcy5nZXRDb250ZXh0KCd3ZWJnbDInLCB7fSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFnbCkge1xuICAgICAgICAgICAgZ2wgPSBjYW52YXMuZ2V0Q29udGV4dCgnd2ViZ2wnLCB7fSlcbiAgICAgICAgICAgICAgICB8fCBjYW52YXMuZ2V0Q29udGV4dCgnZXhwZXJpbWVudGFsLXdlYmdsJywge30pO1xuICAgICAgICAgICAgaWYgKCFnbCkge1xuICAgICAgICAgICAgICAgIC8vIGZhaWwsIG5vdCBhYmxlIHRvIGdldCBhIGNvbnRleHRcbiAgICAgICAgICAgICAgICBnbCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBmb3Igc2hhZGVyIHRlc3RpbmcuLlxuICAgICAgICAgICAgICAgIGdsLmdldEV4dGVuc2lvbignV0VCR0xfZHJhd19idWZmZXJzJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29udGV4dCA9IGdsO1xuICAgIH1cbiAgICByZXR1cm4gY29udGV4dDtcbn1cblxudmFyIG1heEZyYWdtZW50UHJlY2lzaW9uO1xuZnVuY3Rpb24gZ2V0TWF4RnJhZ21lbnRQcmVjaXNpb24oKSB7XG4gICAgaWYgKCFtYXhGcmFnbWVudFByZWNpc2lvbikge1xuICAgICAgICBtYXhGcmFnbWVudFByZWNpc2lvbiA9IGNvbnN0YW50cy5QUkVDSVNJT04uTUVESVVNO1xuICAgICAgICB2YXIgZ2wgPSBnZXRUZXN0Q29udGV4dCgpO1xuICAgICAgICBpZiAoZ2wpIHtcbiAgICAgICAgICAgIGlmIChnbC5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2hhZGVyRnJhZ21lbnQgPSBnbC5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQoZ2wuRlJBR01FTlRfU0hBREVSLCBnbC5ISUdIX0ZMT0FUKTtcbiAgICAgICAgICAgICAgICBtYXhGcmFnbWVudFByZWNpc2lvbiA9IHNoYWRlckZyYWdtZW50LnByZWNpc2lvbiA/IGNvbnN0YW50cy5QUkVDSVNJT04uSElHSCA6IGNvbnN0YW50cy5QUkVDSVNJT04uTUVESVVNO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtYXhGcmFnbWVudFByZWNpc2lvbjtcbn1cblxuLyoqXG4gKiBTZXRzIHRoZSBmbG9hdCBwcmVjaXNpb24gb24gdGhlIHNoYWRlciwgZW5zdXJpbmcgdGhlIGRldmljZSBzdXBwb3J0cyB0aGUgcmVxdWVzdCBwcmVjaXNpb24uXG4gKiBJZiB0aGUgcHJlY2lzaW9uIGlzIGFscmVhZHkgcHJlc2VudCwgaXQganVzdCBlbnN1cmVzIHRoYXQgdGhlIGRldmljZSBpcyBhYmxlIHRvIGhhbmRsZSBpdC5cbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge3N0cmluZ30gc3JjIC0gVGhlIHNoYWRlciBzb3VyY2VcbiAqIEBwYXJhbSB7UElYSS5QUkVDSVNJT059IHJlcXVlc3RlZFByZWNpc2lvbiAtIFRoZSByZXF1ZXN0IGZsb2F0IHByZWNpc2lvbiBvZiB0aGUgc2hhZGVyLlxuICogQHBhcmFtIHtQSVhJLlBSRUNJU0lPTn0gbWF4U3VwcG9ydGVkUHJlY2lzaW9uIC0gVGhlIG1heGltdW0gcHJlY2lzaW9uIHRoZSBzaGFkZXIgc3VwcG9ydHMuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBtb2RpZmllZCBzaGFkZXIgc291cmNlXG4gKi9cbmZ1bmN0aW9uIHNldFByZWNpc2lvbihzcmMsIHJlcXVlc3RlZFByZWNpc2lvbiwgbWF4U3VwcG9ydGVkUHJlY2lzaW9uKSB7XG4gICAgaWYgKHNyYy5zdWJzdHJpbmcoMCwgOSkgIT09ICdwcmVjaXNpb24nKSB7XG4gICAgICAgIC8vIG5vIHByZWNpc2lvbiBzdXBwbGllZCwgc28gUGl4aUpTIHdpbGwgYWRkIHRoZSByZXF1ZXN0ZWQgbGV2ZWwuXG4gICAgICAgIHZhciBwcmVjaXNpb24gPSByZXF1ZXN0ZWRQcmVjaXNpb247XG4gICAgICAgIC8vIElmIGhpZ2hwIGlzIHJlcXVlc3RlZCBidXQgbm90IHN1cHBvcnRlZCwgZG93bmdyYWRlIHByZWNpc2lvbiB0byBhIGxldmVsIGFsbCBkZXZpY2VzIHN1cHBvcnQuXG4gICAgICAgIGlmIChyZXF1ZXN0ZWRQcmVjaXNpb24gPT09IGNvbnN0YW50cy5QUkVDSVNJT04uSElHSCAmJiBtYXhTdXBwb3J0ZWRQcmVjaXNpb24gIT09IGNvbnN0YW50cy5QUkVDSVNJT04uSElHSCkge1xuICAgICAgICAgICAgcHJlY2lzaW9uID0gY29uc3RhbnRzLlBSRUNJU0lPTi5NRURJVU07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFwicHJlY2lzaW9uIFwiICsgcHJlY2lzaW9uICsgXCIgZmxvYXQ7XFxuXCIgKyBzcmM7XG4gICAgfVxuICAgIGVsc2UgaWYgKG1heFN1cHBvcnRlZFByZWNpc2lvbiAhPT0gY29uc3RhbnRzLlBSRUNJU0lPTi5ISUdIICYmIHNyYy5zdWJzdHJpbmcoMCwgMTUpID09PSAncHJlY2lzaW9uIGhpZ2hwJykge1xuICAgICAgICAvLyBwcmVjaXNpb24gd2FzIHN1cHBsaWVkLCBidXQgYXQgYSBsZXZlbCB0aGlzIGRldmljZSBkb2VzIG5vdCBzdXBwb3J0LCBzbyBkb3duZ3JhZGluZyB0byBtZWRpdW1wLlxuICAgICAgICByZXR1cm4gc3JjLnJlcGxhY2UoJ3ByZWNpc2lvbiBoaWdocCcsICdwcmVjaXNpb24gbWVkaXVtcCcpO1xuICAgIH1cbiAgICByZXR1cm4gc3JjO1xufVxuXG52YXIgR0xTTF9UT19TSVpFID0ge1xuICAgIGZsb2F0OiAxLFxuICAgIHZlYzI6IDIsXG4gICAgdmVjMzogMyxcbiAgICB2ZWM0OiA0LFxuICAgIGludDogMSxcbiAgICBpdmVjMjogMixcbiAgICBpdmVjMzogMyxcbiAgICBpdmVjNDogNCxcbiAgICB1aW50OiAxLFxuICAgIHV2ZWMyOiAyLFxuICAgIHV2ZWMzOiAzLFxuICAgIHV2ZWM0OiA0LFxuICAgIGJvb2w6IDEsXG4gICAgYnZlYzI6IDIsXG4gICAgYnZlYzM6IDMsXG4gICAgYnZlYzQ6IDQsXG4gICAgbWF0MjogNCxcbiAgICBtYXQzOiA5LFxuICAgIG1hdDQ6IDE2LFxuICAgIHNhbXBsZXIyRDogMSxcbn07XG4vKipcbiAqIEBwcml2YXRlXG4gKiBAbWV0aG9kIG1hcFNpemVcbiAqIEBtZW1iZXJvZiBQSVhJLmdsQ29yZS5zaGFkZXJcbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlXG4gKi9cbmZ1bmN0aW9uIG1hcFNpemUodHlwZSkge1xuICAgIHJldHVybiBHTFNMX1RPX1NJWkVbdHlwZV07XG59XG5cbnZhciBHTF9UQUJMRSA9IG51bGw7XG52YXIgR0xfVE9fR0xTTF9UWVBFUyA9IHtcbiAgICBGTE9BVDogJ2Zsb2F0JyxcbiAgICBGTE9BVF9WRUMyOiAndmVjMicsXG4gICAgRkxPQVRfVkVDMzogJ3ZlYzMnLFxuICAgIEZMT0FUX1ZFQzQ6ICd2ZWM0JyxcbiAgICBJTlQ6ICdpbnQnLFxuICAgIElOVF9WRUMyOiAnaXZlYzInLFxuICAgIElOVF9WRUMzOiAnaXZlYzMnLFxuICAgIElOVF9WRUM0OiAnaXZlYzQnLFxuICAgIFVOU0lHTkVEX0lOVDogJ3VpbnQnLFxuICAgIFVOU0lHTkVEX0lOVF9WRUMyOiAndXZlYzInLFxuICAgIFVOU0lHTkVEX0lOVF9WRUMzOiAndXZlYzMnLFxuICAgIFVOU0lHTkVEX0lOVF9WRUM0OiAndXZlYzQnLFxuICAgIEJPT0w6ICdib29sJyxcbiAgICBCT09MX1ZFQzI6ICdidmVjMicsXG4gICAgQk9PTF9WRUMzOiAnYnZlYzMnLFxuICAgIEJPT0xfVkVDNDogJ2J2ZWM0JyxcbiAgICBGTE9BVF9NQVQyOiAnbWF0MicsXG4gICAgRkxPQVRfTUFUMzogJ21hdDMnLFxuICAgIEZMT0FUX01BVDQ6ICdtYXQ0JyxcbiAgICBTQU1QTEVSXzJEOiAnc2FtcGxlcjJEJyxcbiAgICBJTlRfU0FNUExFUl8yRDogJ3NhbXBsZXIyRCcsXG4gICAgVU5TSUdORURfSU5UX1NBTVBMRVJfMkQ6ICdzYW1wbGVyMkQnLFxuICAgIFNBTVBMRVJfQ1VCRTogJ3NhbXBsZXJDdWJlJyxcbiAgICBJTlRfU0FNUExFUl9DVUJFOiAnc2FtcGxlckN1YmUnLFxuICAgIFVOU0lHTkVEX0lOVF9TQU1QTEVSX0NVQkU6ICdzYW1wbGVyQ3ViZScsXG4gICAgU0FNUExFUl8yRF9BUlJBWTogJ3NhbXBsZXIyREFycmF5JyxcbiAgICBJTlRfU0FNUExFUl8yRF9BUlJBWTogJ3NhbXBsZXIyREFycmF5JyxcbiAgICBVTlNJR05FRF9JTlRfU0FNUExFUl8yRF9BUlJBWTogJ3NhbXBsZXIyREFycmF5Jyxcbn07XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2V4cGxpY2l0LW1vZHVsZS1ib3VuZGFyeS10eXBlc1xuZnVuY3Rpb24gbWFwVHlwZShnbCwgdHlwZSkge1xuICAgIGlmICghR0xfVEFCTEUpIHtcbiAgICAgICAgdmFyIHR5cGVOYW1lcyA9IE9iamVjdC5rZXlzKEdMX1RPX0dMU0xfVFlQRVMpO1xuICAgICAgICBHTF9UQUJMRSA9IHt9O1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHR5cGVOYW1lcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdmFyIHRuID0gdHlwZU5hbWVzW2ldO1xuICAgICAgICAgICAgR0xfVEFCTEVbZ2xbdG5dXSA9IEdMX1RPX0dMU0xfVFlQRVNbdG5dO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBHTF9UQUJMRVt0eXBlXTtcbn1cblxuLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L2V4cGxpY2l0LW1vZHVsZS1ib3VuZGFyeS10eXBlcyAqL1xuLy8gUGFyc2VycywgZWFjaCBvbmUgb2YgdGhlc2Ugd2lsbCB0YWtlIGEgbG9vayBhdCB0aGUgdHlwZSBvZiBzaGFkZXIgcHJvcGVydHkgYW5kIHVuaWZvcm0uXG4vLyBpZiB0aGV5IHBhc3MgdGhlIHRlc3QgZnVuY3Rpb24gdGhlbiB0aGUgY29kZSBmdW5jdGlvbiBpcyBjYWxsZWQgdGhhdCByZXR1cm5zIGEgdGhlIHNoYWRlciB1cGxvYWQgY29kZSBmb3IgdGhhdCB1bmlmb3JtLlxuLy8gU2hhZGVyIHVwbG9hZCBjb2RlIGlzIGF1dG9tYWdpY2FsbHkgZ2VuZXJhdGVkIHdpdGggdGhlc2UgcGFyc2Vycy5cbi8vIElmIG5vIHBhcnNlciBpcyB2YWxpZCB0aGVuIHRoZSBkZWZhdWx0IHVwbG9hZCBmdW5jdGlvbnMgYXJlIHVzZWQuXG4vLyBleHBvc2luZyBQYXJzZXJzIG1lYW5zIHRoYXQgY3VzdG9tIHVwbG9hZCBsb2dpYyBjYW4gYmUgYWRkZWQgdG8gcGl4aSdzIHNoYWRlcnMuXG4vLyBBIGdvb2QgZXhhbXBsZSB3b3VsZCBiZSBhIHBpeGkgcmVjdGFuZ2xlIGNhbiBiZSBkaXJlY3RseSBzZXQgb24gYSB1bmlmb3JtLlxuLy8gSWYgdGhlIHNoYWRlciBzZWVzIGl0IGl0IGtub3dzIGhvdyB0byB1cGxvYWQgdGhlIHJlY3RhbmdsZSBzdHJ1Y3R1cmUgYXMgYSB2ZWM0XG4vLyBmb3JtYXQgaXMgYXMgZm9sbG93czpcbi8vXG4vLyB7XG4vLyAgICAgdGVzdDogKGRhdGEsIHVuaWZvcm0pID0+IHt9IDwtLS0gdGVzdCBpcyB0aGlzIGNvZGUgc2hvdWxkIGJlIHVzZWQgZm9yIHRoaXMgdW5pZm9ybVxuLy8gICAgIGNvZGU6IChuYW1lLCB1bmlmb3JtKSA9PiB7fSA8LS0tIHJldHVybnMgdGhlIHN0cmluZyBvZiB0aGUgcGllY2Ugb2YgY29kZSB0aGF0IHVwbG9hZHMgdGhlIHVuaWZvcm1cbi8vICAgICBjb2RlVWJvOiAobmFtZSwgdW5pZm9ybSkgPT4ge30gPC0tLSByZXR1cm5zIHRoZSBzdHJpbmcgb2YgdGhlIHBpZWNlIG9mIGNvZGUgdGhhdCB1cGxvYWRzIHRoZVxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaWZvcm0gdG8gYSB1bmlmb3JtIGJ1ZmZlclxuLy8gfVxudmFyIHVuaWZvcm1QYXJzZXJzID0gW1xuICAgIC8vIGEgZmxvYXQgY2FjaGUgbGF5ZXJcbiAgICB7XG4gICAgICAgIHRlc3Q6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gZGF0YS50eXBlID09PSAnZmxvYXQnICYmIGRhdGEuc2l6ZSA9PT0gMTtcbiAgICAgICAgfSxcbiAgICAgICAgY29kZTogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBcIlxcbiAgICAgICAgICAgIGlmKHV2W1xcXCJcIiArIG5hbWUgKyBcIlxcXCJdICE9PSB1ZFtcXFwiXCIgKyBuYW1lICsgXCJcXFwiXS52YWx1ZSlcXG4gICAgICAgICAgICB7XFxuICAgICAgICAgICAgICAgIHVkW1xcXCJcIiArIG5hbWUgKyBcIlxcXCJdLnZhbHVlID0gdXZbXFxcIlwiICsgbmFtZSArIFwiXFxcIl1cXG4gICAgICAgICAgICAgICAgZ2wudW5pZm9ybTFmKHVkW1xcXCJcIiArIG5hbWUgKyBcIlxcXCJdLmxvY2F0aW9uLCB1dltcXFwiXCIgKyBuYW1lICsgXCJcXFwiXSlcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgXCI7XG4gICAgICAgIH0sXG4gICAgfSxcbiAgICAvLyBoYW5kbGluZyBzYW1wbGVyc1xuICAgIHtcbiAgICAgICAgdGVzdDogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBtYXgtbGVuXG4gICAgICAgICAgICByZXR1cm4gKGRhdGEudHlwZSA9PT0gJ3NhbXBsZXIyRCcgfHwgZGF0YS50eXBlID09PSAnc2FtcGxlckN1YmUnIHx8IGRhdGEudHlwZSA9PT0gJ3NhbXBsZXIyREFycmF5JykgJiYgZGF0YS5zaXplID09PSAxICYmICFkYXRhLmlzQXJyYXk7XG4gICAgICAgIH0sXG4gICAgICAgIGNvZGU6IGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBcInQgPSBzeW5jRGF0YS50ZXh0dXJlQ291bnQrKztcXG5cXG4gICAgICAgICAgICByZW5kZXJlci50ZXh0dXJlLmJpbmQodXZbXFxcIlwiICsgbmFtZSArIFwiXFxcIl0sIHQpO1xcblxcbiAgICAgICAgICAgIGlmKHVkW1xcXCJcIiArIG5hbWUgKyBcIlxcXCJdLnZhbHVlICE9PSB0KVxcbiAgICAgICAgICAgIHtcXG4gICAgICAgICAgICAgICAgdWRbXFxcIlwiICsgbmFtZSArIFwiXFxcIl0udmFsdWUgPSB0O1xcbiAgICAgICAgICAgICAgICBnbC51bmlmb3JtMWkodWRbXFxcIlwiICsgbmFtZSArIFwiXFxcIl0ubG9jYXRpb24sIHQpO1xcbjsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBtYXgtbGVuXFxuICAgICAgICAgICAgfVwiOyB9LFxuICAgIH0sXG4gICAgLy8gdXBsb2FkaW5nIHBpeGkgbWF0cml4IG9iamVjdCB0byBtYXQzXG4gICAge1xuICAgICAgICB0ZXN0OiBmdW5jdGlvbiAoZGF0YSwgdW5pZm9ybSkge1xuICAgICAgICAgICAgcmV0dXJuIGRhdGEudHlwZSA9PT0gJ21hdDMnICYmIGRhdGEuc2l6ZSA9PT0gMSAmJiB1bmlmb3JtLmEgIT09IHVuZGVmaW5lZDtcbiAgICAgICAgfSxcbiAgICAgICAgY29kZTogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgIC8vIFRPRE8gYW5kIHNvbWUgc21hcnQgY2FjaGluZyBkaXJ0eSBpZHMgaGVyZSFcbiAgICAgICAgICAgIHJldHVybiBcIlxcbiAgICAgICAgICAgIGdsLnVuaWZvcm1NYXRyaXgzZnYodWRbXFxcIlwiICsgbmFtZSArIFwiXFxcIl0ubG9jYXRpb24sIGZhbHNlLCB1dltcXFwiXCIgKyBuYW1lICsgXCJcXFwiXS50b0FycmF5KHRydWUpKTtcXG4gICAgICAgICAgICBcIjtcbiAgICAgICAgfSxcbiAgICAgICAgY29kZVVibzogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBcIlxcbiAgICAgICAgICAgICAgICB2YXIgXCIgKyBuYW1lICsgXCJfbWF0cml4ID0gdXYuXCIgKyBuYW1lICsgXCIudG9BcnJheSh0cnVlKTtcXG5cXG4gICAgICAgICAgICAgICAgZGF0YVtvZmZzZXRdID0gXCIgKyBuYW1lICsgXCJfbWF0cml4WzBdO1xcbiAgICAgICAgICAgICAgICBkYXRhW29mZnNldCsxXSA9IFwiICsgbmFtZSArIFwiX21hdHJpeFsxXTtcXG4gICAgICAgICAgICAgICAgZGF0YVtvZmZzZXQrMl0gPSBcIiArIG5hbWUgKyBcIl9tYXRyaXhbMl07XFxuICAgICAgICBcXG4gICAgICAgICAgICAgICAgZGF0YVtvZmZzZXQgKyA0XSA9IFwiICsgbmFtZSArIFwiX21hdHJpeFszXTtcXG4gICAgICAgICAgICAgICAgZGF0YVtvZmZzZXQgKyA1XSA9IFwiICsgbmFtZSArIFwiX21hdHJpeFs0XTtcXG4gICAgICAgICAgICAgICAgZGF0YVtvZmZzZXQgKyA2XSA9IFwiICsgbmFtZSArIFwiX21hdHJpeFs1XTtcXG4gICAgICAgIFxcbiAgICAgICAgICAgICAgICBkYXRhW29mZnNldCArIDhdID0gXCIgKyBuYW1lICsgXCJfbWF0cml4WzZdO1xcbiAgICAgICAgICAgICAgICBkYXRhW29mZnNldCArIDldID0gXCIgKyBuYW1lICsgXCJfbWF0cml4WzddO1xcbiAgICAgICAgICAgICAgICBkYXRhW29mZnNldCArIDEwXSA9IFwiICsgbmFtZSArIFwiX21hdHJpeFs4XTtcXG4gICAgICAgICAgICBcIjtcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIC8vIHVwbG9hZGluZyBhIHBpeGkgcG9pbnQgYXMgYSB2ZWMyIHdpdGggY2FjaGluZyBsYXllclxuICAgIHtcbiAgICAgICAgdGVzdDogZnVuY3Rpb24gKGRhdGEsIHVuaWZvcm0pIHtcbiAgICAgICAgICAgIHJldHVybiBkYXRhLnR5cGUgPT09ICd2ZWMyJyAmJiBkYXRhLnNpemUgPT09IDEgJiYgdW5pZm9ybS54ICE9PSB1bmRlZmluZWQ7XG4gICAgICAgIH0sXG4gICAgICAgIGNvZGU6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gXCJcXG4gICAgICAgICAgICAgICAgY3YgPSB1ZFtcXFwiXCIgKyBuYW1lICsgXCJcXFwiXS52YWx1ZTtcXG4gICAgICAgICAgICAgICAgdiA9IHV2W1xcXCJcIiArIG5hbWUgKyBcIlxcXCJdO1xcblxcbiAgICAgICAgICAgICAgICBpZihjdlswXSAhPT0gdi54IHx8IGN2WzFdICE9PSB2LnkpXFxuICAgICAgICAgICAgICAgIHtcXG4gICAgICAgICAgICAgICAgICAgIGN2WzBdID0gdi54O1xcbiAgICAgICAgICAgICAgICAgICAgY3ZbMV0gPSB2Lnk7XFxuICAgICAgICAgICAgICAgICAgICBnbC51bmlmb3JtMmYodWRbXFxcIlwiICsgbmFtZSArIFwiXFxcIl0ubG9jYXRpb24sIHYueCwgdi55KTtcXG4gICAgICAgICAgICAgICAgfVwiO1xuICAgICAgICB9LFxuICAgICAgICBjb2RlVWJvOiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIFwiXFxuICAgICAgICAgICAgICAgIHYgPSB1di5cIiArIG5hbWUgKyBcIjtcXG5cXG4gICAgICAgICAgICAgICAgZGF0YVtvZmZzZXRdID0gdi54O1xcbiAgICAgICAgICAgICAgICBkYXRhW29mZnNldCsxXSA9IHYueTtcXG4gICAgICAgICAgICBcIjtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgLy8gY2FjaGluZyBsYXllciBmb3IgYSB2ZWMyXG4gICAge1xuICAgICAgICB0ZXN0OiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuIGRhdGEudHlwZSA9PT0gJ3ZlYzInICYmIGRhdGEuc2l6ZSA9PT0gMTtcbiAgICAgICAgfSxcbiAgICAgICAgY29kZTogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBcIlxcbiAgICAgICAgICAgICAgICBjdiA9IHVkW1xcXCJcIiArIG5hbWUgKyBcIlxcXCJdLnZhbHVlO1xcbiAgICAgICAgICAgICAgICB2ID0gdXZbXFxcIlwiICsgbmFtZSArIFwiXFxcIl07XFxuXFxuICAgICAgICAgICAgICAgIGlmKGN2WzBdICE9PSB2WzBdIHx8IGN2WzFdICE9PSB2WzFdKVxcbiAgICAgICAgICAgICAgICB7XFxuICAgICAgICAgICAgICAgICAgICBjdlswXSA9IHZbMF07XFxuICAgICAgICAgICAgICAgICAgICBjdlsxXSA9IHZbMV07XFxuICAgICAgICAgICAgICAgICAgICBnbC51bmlmb3JtMmYodWRbXFxcIlwiICsgbmFtZSArIFwiXFxcIl0ubG9jYXRpb24sIHZbMF0sIHZbMV0pO1xcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgXCI7XG4gICAgICAgIH0sXG4gICAgfSxcbiAgICAvLyB1cGxvYWQgYSBwaXhpIHJlY3RhbmdsZSBhcyBhIHZlYzQgd2l0aCBjYWNoaW5nIGxheWVyXG4gICAge1xuICAgICAgICB0ZXN0OiBmdW5jdGlvbiAoZGF0YSwgdW5pZm9ybSkge1xuICAgICAgICAgICAgcmV0dXJuIGRhdGEudHlwZSA9PT0gJ3ZlYzQnICYmIGRhdGEuc2l6ZSA9PT0gMSAmJiB1bmlmb3JtLndpZHRoICE9PSB1bmRlZmluZWQ7XG4gICAgICAgIH0sXG4gICAgICAgIGNvZGU6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gXCJcXG4gICAgICAgICAgICAgICAgY3YgPSB1ZFtcXFwiXCIgKyBuYW1lICsgXCJcXFwiXS52YWx1ZTtcXG4gICAgICAgICAgICAgICAgdiA9IHV2W1xcXCJcIiArIG5hbWUgKyBcIlxcXCJdO1xcblxcbiAgICAgICAgICAgICAgICBpZihjdlswXSAhPT0gdi54IHx8IGN2WzFdICE9PSB2LnkgfHwgY3ZbMl0gIT09IHYud2lkdGggfHwgY3ZbM10gIT09IHYuaGVpZ2h0KVxcbiAgICAgICAgICAgICAgICB7XFxuICAgICAgICAgICAgICAgICAgICBjdlswXSA9IHYueDtcXG4gICAgICAgICAgICAgICAgICAgIGN2WzFdID0gdi55O1xcbiAgICAgICAgICAgICAgICAgICAgY3ZbMl0gPSB2LndpZHRoO1xcbiAgICAgICAgICAgICAgICAgICAgY3ZbM10gPSB2LmhlaWdodDtcXG4gICAgICAgICAgICAgICAgICAgIGdsLnVuaWZvcm00Zih1ZFtcXFwiXCIgKyBuYW1lICsgXCJcXFwiXS5sb2NhdGlvbiwgdi54LCB2LnksIHYud2lkdGgsIHYuaGVpZ2h0KVxcbiAgICAgICAgICAgICAgICB9XCI7XG4gICAgICAgIH0sXG4gICAgICAgIGNvZGVVYm86IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gXCJcXG4gICAgICAgICAgICAgICAgICAgIHYgPSB1di5cIiArIG5hbWUgKyBcIjtcXG5cXG4gICAgICAgICAgICAgICAgICAgIGRhdGFbb2Zmc2V0XSA9IHYueDtcXG4gICAgICAgICAgICAgICAgICAgIGRhdGFbb2Zmc2V0KzFdID0gdi55O1xcbiAgICAgICAgICAgICAgICAgICAgZGF0YVtvZmZzZXQrMl0gPSB2LndpZHRoO1xcbiAgICAgICAgICAgICAgICAgICAgZGF0YVtvZmZzZXQrM10gPSB2LmhlaWdodDtcXG4gICAgICAgICAgICAgICAgXCI7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIC8vIGEgY2FjaGluZyBsYXllciBmb3IgdmVjNCB1cGxvYWRpbmdcbiAgICB7XG4gICAgICAgIHRlc3Q6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gZGF0YS50eXBlID09PSAndmVjNCcgJiYgZGF0YS5zaXplID09PSAxO1xuICAgICAgICB9LFxuICAgICAgICBjb2RlOiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIFwiXFxuICAgICAgICAgICAgICAgIGN2ID0gdWRbXFxcIlwiICsgbmFtZSArIFwiXFxcIl0udmFsdWU7XFxuICAgICAgICAgICAgICAgIHYgPSB1dltcXFwiXCIgKyBuYW1lICsgXCJcXFwiXTtcXG5cXG4gICAgICAgICAgICAgICAgaWYoY3ZbMF0gIT09IHZbMF0gfHwgY3ZbMV0gIT09IHZbMV0gfHwgY3ZbMl0gIT09IHZbMl0gfHwgY3ZbM10gIT09IHZbM10pXFxuICAgICAgICAgICAgICAgIHtcXG4gICAgICAgICAgICAgICAgICAgIGN2WzBdID0gdlswXTtcXG4gICAgICAgICAgICAgICAgICAgIGN2WzFdID0gdlsxXTtcXG4gICAgICAgICAgICAgICAgICAgIGN2WzJdID0gdlsyXTtcXG4gICAgICAgICAgICAgICAgICAgIGN2WzNdID0gdlszXTtcXG5cXG4gICAgICAgICAgICAgICAgICAgIGdsLnVuaWZvcm00Zih1ZFtcXFwiXCIgKyBuYW1lICsgXCJcXFwiXS5sb2NhdGlvbiwgdlswXSwgdlsxXSwgdlsyXSwgdlszXSlcXG4gICAgICAgICAgICAgICAgfVwiO1xuICAgICAgICB9LFxuICAgIH0gXTtcblxuLy8gY3UgPSBDYWNoZWQgdmFsdWUncyB1bmlmb3JtIGRhdGEgZmllbGRcbi8vIGN2ID0gQ2FjaGVkIHZhbHVlXG4vLyB2ID0gdmFsdWUgdG8gdXBsb2FkXG4vLyB1ZCA9IHVuaWZvcm1EYXRhXG4vLyB1diA9IHVuaWZvcm1WYWx1ZVxuLy8gbCA9IGxvY2F0aW9uXG52YXIgR0xTTF9UT19TSU5HTEVfU0VUVEVSU19DQUNIRUQgPSB7XG4gICAgZmxvYXQ6IFwiXFxuICAgIGlmIChjdiAhPT0gdilcXG4gICAge1xcbiAgICAgICAgY3UudmFsdWUgPSB2O1xcbiAgICAgICAgZ2wudW5pZm9ybTFmKGxvY2F0aW9uLCB2KTtcXG4gICAgfVwiLFxuICAgIHZlYzI6IFwiXFxuICAgIGlmIChjdlswXSAhPT0gdlswXSB8fCBjdlsxXSAhPT0gdlsxXSlcXG4gICAge1xcbiAgICAgICAgY3ZbMF0gPSB2WzBdO1xcbiAgICAgICAgY3ZbMV0gPSB2WzFdO1xcblxcbiAgICAgICAgZ2wudW5pZm9ybTJmKGxvY2F0aW9uLCB2WzBdLCB2WzFdKVxcbiAgICB9XCIsXG4gICAgdmVjMzogXCJcXG4gICAgaWYgKGN2WzBdICE9PSB2WzBdIHx8IGN2WzFdICE9PSB2WzFdIHx8IGN2WzJdICE9PSB2WzJdKVxcbiAgICB7XFxuICAgICAgICBjdlswXSA9IHZbMF07XFxuICAgICAgICBjdlsxXSA9IHZbMV07XFxuICAgICAgICBjdlsyXSA9IHZbMl07XFxuXFxuICAgICAgICBnbC51bmlmb3JtM2YobG9jYXRpb24sIHZbMF0sIHZbMV0sIHZbMl0pXFxuICAgIH1cIixcbiAgICB2ZWM0OiBcIlxcbiAgICBpZiAoY3ZbMF0gIT09IHZbMF0gfHwgY3ZbMV0gIT09IHZbMV0gfHwgY3ZbMl0gIT09IHZbMl0gfHwgY3ZbM10gIT09IHZbM10pXFxuICAgIHtcXG4gICAgICAgIGN2WzBdID0gdlswXTtcXG4gICAgICAgIGN2WzFdID0gdlsxXTtcXG4gICAgICAgIGN2WzJdID0gdlsyXTtcXG4gICAgICAgIGN2WzNdID0gdlszXTtcXG5cXG4gICAgICAgIGdsLnVuaWZvcm00Zihsb2NhdGlvbiwgdlswXSwgdlsxXSwgdlsyXSwgdlszXSk7XFxuICAgIH1cIixcbiAgICBpbnQ6IFwiXFxuICAgIGlmIChjdiAhPT0gdilcXG4gICAge1xcbiAgICAgICAgY3UudmFsdWUgPSB2O1xcblxcbiAgICAgICAgZ2wudW5pZm9ybTFpKGxvY2F0aW9uLCB2KTtcXG4gICAgfVwiLFxuICAgIGl2ZWMyOiBcIlxcbiAgICBpZiAoY3ZbMF0gIT09IHZbMF0gfHwgY3ZbMV0gIT09IHZbMV0pXFxuICAgIHtcXG4gICAgICAgIGN2WzBdID0gdlswXTtcXG4gICAgICAgIGN2WzFdID0gdlsxXTtcXG5cXG4gICAgICAgIGdsLnVuaWZvcm0yaShsb2NhdGlvbiwgdlswXSwgdlsxXSk7XFxuICAgIH1cIixcbiAgICBpdmVjMzogXCJcXG4gICAgaWYgKGN2WzBdICE9PSB2WzBdIHx8IGN2WzFdICE9PSB2WzFdIHx8IGN2WzJdICE9PSB2WzJdKVxcbiAgICB7XFxuICAgICAgICBjdlswXSA9IHZbMF07XFxuICAgICAgICBjdlsxXSA9IHZbMV07XFxuICAgICAgICBjdlsyXSA9IHZbMl07XFxuXFxuICAgICAgICBnbC51bmlmb3JtM2kobG9jYXRpb24sIHZbMF0sIHZbMV0sIHZbMl0pO1xcbiAgICB9XCIsXG4gICAgaXZlYzQ6IFwiXFxuICAgIGlmIChjdlswXSAhPT0gdlswXSB8fCBjdlsxXSAhPT0gdlsxXSB8fCBjdlsyXSAhPT0gdlsyXSB8fCBjdlszXSAhPT0gdlszXSlcXG4gICAge1xcbiAgICAgICAgY3ZbMF0gPSB2WzBdO1xcbiAgICAgICAgY3ZbMV0gPSB2WzFdO1xcbiAgICAgICAgY3ZbMl0gPSB2WzJdO1xcbiAgICAgICAgY3ZbM10gPSB2WzNdO1xcblxcbiAgICAgICAgZ2wudW5pZm9ybTRpKGxvY2F0aW9uLCB2WzBdLCB2WzFdLCB2WzJdLCB2WzNdKTtcXG4gICAgfVwiLFxuICAgIHVpbnQ6IFwiXFxuICAgIGlmIChjdiAhPT0gdilcXG4gICAge1xcbiAgICAgICAgY3UudmFsdWUgPSB2O1xcblxcbiAgICAgICAgZ2wudW5pZm9ybTF1aShsb2NhdGlvbiwgdik7XFxuICAgIH1cIixcbiAgICB1dmVjMjogXCJcXG4gICAgaWYgKGN2WzBdICE9PSB2WzBdIHx8IGN2WzFdICE9PSB2WzFdKVxcbiAgICB7XFxuICAgICAgICBjdlswXSA9IHZbMF07XFxuICAgICAgICBjdlsxXSA9IHZbMV07XFxuXFxuICAgICAgICBnbC51bmlmb3JtMnVpKGxvY2F0aW9uLCB2WzBdLCB2WzFdKTtcXG4gICAgfVwiLFxuICAgIHV2ZWMzOiBcIlxcbiAgICBpZiAoY3ZbMF0gIT09IHZbMF0gfHwgY3ZbMV0gIT09IHZbMV0gfHwgY3ZbMl0gIT09IHZbMl0pXFxuICAgIHtcXG4gICAgICAgIGN2WzBdID0gdlswXTtcXG4gICAgICAgIGN2WzFdID0gdlsxXTtcXG4gICAgICAgIGN2WzJdID0gdlsyXTtcXG5cXG4gICAgICAgIGdsLnVuaWZvcm0zdWkobG9jYXRpb24sIHZbMF0sIHZbMV0sIHZbMl0pO1xcbiAgICB9XCIsXG4gICAgdXZlYzQ6IFwiXFxuICAgIGlmIChjdlswXSAhPT0gdlswXSB8fCBjdlsxXSAhPT0gdlsxXSB8fCBjdlsyXSAhPT0gdlsyXSB8fCBjdlszXSAhPT0gdlszXSlcXG4gICAge1xcbiAgICAgICAgY3ZbMF0gPSB2WzBdO1xcbiAgICAgICAgY3ZbMV0gPSB2WzFdO1xcbiAgICAgICAgY3ZbMl0gPSB2WzJdO1xcbiAgICAgICAgY3ZbM10gPSB2WzNdO1xcblxcbiAgICAgICAgZ2wudW5pZm9ybTR1aShsb2NhdGlvbiwgdlswXSwgdlsxXSwgdlsyXSwgdlszXSk7XFxuICAgIH1cIixcbiAgICBib29sOiBcIlxcbiAgICBpZiAoY3YgIT09IHYpXFxuICAgIHtcXG4gICAgICAgIGN1LnZhbHVlID0gdjtcXG4gICAgICAgIGdsLnVuaWZvcm0xaShsb2NhdGlvbiwgdik7XFxuICAgIH1cIixcbiAgICBidmVjMjogXCJcXG4gICAgaWYgKGN2WzBdICE9IHZbMF0gfHwgY3ZbMV0gIT0gdlsxXSlcXG4gICAge1xcbiAgICAgICAgY3ZbMF0gPSB2WzBdO1xcbiAgICAgICAgY3ZbMV0gPSB2WzFdO1xcblxcbiAgICAgICAgZ2wudW5pZm9ybTJpKGxvY2F0aW9uLCB2WzBdLCB2WzFdKTtcXG4gICAgfVwiLFxuICAgIGJ2ZWMzOiBcIlxcbiAgICBpZiAoY3ZbMF0gIT09IHZbMF0gfHwgY3ZbMV0gIT09IHZbMV0gfHwgY3ZbMl0gIT09IHZbMl0pXFxuICAgIHtcXG4gICAgICAgIGN2WzBdID0gdlswXTtcXG4gICAgICAgIGN2WzFdID0gdlsxXTtcXG4gICAgICAgIGN2WzJdID0gdlsyXTtcXG5cXG4gICAgICAgIGdsLnVuaWZvcm0zaShsb2NhdGlvbiwgdlswXSwgdlsxXSwgdlsyXSk7XFxuICAgIH1cIixcbiAgICBidmVjNDogXCJcXG4gICAgaWYgKGN2WzBdICE9PSB2WzBdIHx8IGN2WzFdICE9PSB2WzFdIHx8IGN2WzJdICE9PSB2WzJdIHx8IGN2WzNdICE9PSB2WzNdKVxcbiAgICB7XFxuICAgICAgICBjdlswXSA9IHZbMF07XFxuICAgICAgICBjdlsxXSA9IHZbMV07XFxuICAgICAgICBjdlsyXSA9IHZbMl07XFxuICAgICAgICBjdlszXSA9IHZbM107XFxuXFxuICAgICAgICBnbC51bmlmb3JtNGkobG9jYXRpb24sIHZbMF0sIHZbMV0sIHZbMl0sIHZbM10pO1xcbiAgICB9XCIsXG4gICAgbWF0MjogJ2dsLnVuaWZvcm1NYXRyaXgyZnYobG9jYXRpb24sIGZhbHNlLCB2KScsXG4gICAgbWF0MzogJ2dsLnVuaWZvcm1NYXRyaXgzZnYobG9jYXRpb24sIGZhbHNlLCB2KScsXG4gICAgbWF0NDogJ2dsLnVuaWZvcm1NYXRyaXg0ZnYobG9jYXRpb24sIGZhbHNlLCB2KScsXG4gICAgc2FtcGxlcjJEOiAnZ2wudW5pZm9ybTFpKGxvY2F0aW9uLCB2KScsXG4gICAgc2FtcGxlckN1YmU6ICdnbC51bmlmb3JtMWkobG9jYXRpb24sIHYpJyxcbiAgICBzYW1wbGVyMkRBcnJheTogJ2dsLnVuaWZvcm0xaShsb2NhdGlvbiwgdiknLFxufTtcbnZhciBHTFNMX1RPX0FSUkFZX1NFVFRFUlMgPSB7XG4gICAgZmxvYXQ6IFwiZ2wudW5pZm9ybTFmdihsb2NhdGlvbiwgdilcIixcbiAgICB2ZWMyOiBcImdsLnVuaWZvcm0yZnYobG9jYXRpb24sIHYpXCIsXG4gICAgdmVjMzogXCJnbC51bmlmb3JtM2Z2KGxvY2F0aW9uLCB2KVwiLFxuICAgIHZlYzQ6ICdnbC51bmlmb3JtNGZ2KGxvY2F0aW9uLCB2KScsXG4gICAgbWF0NDogJ2dsLnVuaWZvcm1NYXRyaXg0ZnYobG9jYXRpb24sIGZhbHNlLCB2KScsXG4gICAgbWF0MzogJ2dsLnVuaWZvcm1NYXRyaXgzZnYobG9jYXRpb24sIGZhbHNlLCB2KScsXG4gICAgbWF0MjogJ2dsLnVuaWZvcm1NYXRyaXgyZnYobG9jYXRpb24sIGZhbHNlLCB2KScsXG4gICAgaW50OiAnZ2wudW5pZm9ybTFpdihsb2NhdGlvbiwgdiknLFxuICAgIGl2ZWMyOiAnZ2wudW5pZm9ybTJpdihsb2NhdGlvbiwgdiknLFxuICAgIGl2ZWMzOiAnZ2wudW5pZm9ybTNpdihsb2NhdGlvbiwgdiknLFxuICAgIGl2ZWM0OiAnZ2wudW5pZm9ybTRpdihsb2NhdGlvbiwgdiknLFxuICAgIHVpbnQ6ICdnbC51bmlmb3JtMXVpdihsb2NhdGlvbiwgdiknLFxuICAgIHV2ZWMyOiAnZ2wudW5pZm9ybTJ1aXYobG9jYXRpb24sIHYpJyxcbiAgICB1dmVjMzogJ2dsLnVuaWZvcm0zdWl2KGxvY2F0aW9uLCB2KScsXG4gICAgdXZlYzQ6ICdnbC51bmlmb3JtNHVpdihsb2NhdGlvbiwgdiknLFxuICAgIGJvb2w6ICdnbC51bmlmb3JtMWl2KGxvY2F0aW9uLCB2KScsXG4gICAgYnZlYzI6ICdnbC51bmlmb3JtMml2KGxvY2F0aW9uLCB2KScsXG4gICAgYnZlYzM6ICdnbC51bmlmb3JtM2l2KGxvY2F0aW9uLCB2KScsXG4gICAgYnZlYzQ6ICdnbC51bmlmb3JtNGl2KGxvY2F0aW9uLCB2KScsXG4gICAgc2FtcGxlcjJEOiAnZ2wudW5pZm9ybTFpdihsb2NhdGlvbiwgdiknLFxuICAgIHNhbXBsZXJDdWJlOiAnZ2wudW5pZm9ybTFpdihsb2NhdGlvbiwgdiknLFxuICAgIHNhbXBsZXIyREFycmF5OiAnZ2wudW5pZm9ybTFpdihsb2NhdGlvbiwgdiknLFxufTtcbmZ1bmN0aW9uIGdlbmVyYXRlVW5pZm9ybXNTeW5jKGdyb3VwLCB1bmlmb3JtRGF0YSkge1xuICAgIHZhciBfYTtcbiAgICB2YXIgZnVuY0ZyYWdtZW50cyA9IFtcIlxcbiAgICAgICAgdmFyIHYgPSBudWxsO1xcbiAgICAgICAgdmFyIGN2ID0gbnVsbDtcXG4gICAgICAgIHZhciBjdSA9IG51bGw7XFxuICAgICAgICB2YXIgdCA9IDA7XFxuICAgICAgICB2YXIgZ2wgPSByZW5kZXJlci5nbDtcXG4gICAgXCJdO1xuICAgIGZvciAodmFyIGkgaW4gZ3JvdXAudW5pZm9ybXMpIHtcbiAgICAgICAgdmFyIGRhdGEgPSB1bmlmb3JtRGF0YVtpXTtcbiAgICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgICBpZiAoKF9hID0gZ3JvdXAudW5pZm9ybXNbaV0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5ncm91cCkge1xuICAgICAgICAgICAgICAgIGlmIChncm91cC51bmlmb3Jtc1tpXS51Ym8pIHtcbiAgICAgICAgICAgICAgICAgICAgZnVuY0ZyYWdtZW50cy5wdXNoKFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyZXIuc2hhZGVyLnN5bmNVbmlmb3JtQnVmZmVyR3JvdXAodXYuXCIgKyBpICsgXCIsICdcIiArIGkgKyBcIicpO1xcbiAgICAgICAgICAgICAgICAgICAgXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZnVuY0ZyYWdtZW50cy5wdXNoKFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyZXIuc2hhZGVyLnN5bmNVbmlmb3JtR3JvdXAodXYuXCIgKyBpICsgXCIsIHN5bmNEYXRhKTtcXG4gICAgICAgICAgICAgICAgICAgIFwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdW5pZm9ybSA9IGdyb3VwLnVuaWZvcm1zW2ldO1xuICAgICAgICB2YXIgcGFyc2VkID0gZmFsc2U7XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdW5pZm9ybVBhcnNlcnMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIGlmICh1bmlmb3JtUGFyc2Vyc1tqXS50ZXN0KGRhdGEsIHVuaWZvcm0pKSB7XG4gICAgICAgICAgICAgICAgZnVuY0ZyYWdtZW50cy5wdXNoKHVuaWZvcm1QYXJzZXJzW2pdLmNvZGUoaSwgdW5pZm9ybSkpO1xuICAgICAgICAgICAgICAgIHBhcnNlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFwYXJzZWQpIHtcbiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZVR5cGUgPSAoZGF0YS5zaXplID09PSAxKSA/IEdMU0xfVE9fU0lOR0xFX1NFVFRFUlNfQ0FDSEVEIDogR0xTTF9UT19BUlJBWV9TRVRURVJTO1xuICAgICAgICAgICAgdmFyIHRlbXBsYXRlID0gdGVtcGxhdGVUeXBlW2RhdGEudHlwZV0ucmVwbGFjZSgnbG9jYXRpb24nLCBcInVkW1xcXCJcIiArIGkgKyBcIlxcXCJdLmxvY2F0aW9uXCIpO1xuICAgICAgICAgICAgZnVuY0ZyYWdtZW50cy5wdXNoKFwiXFxuICAgICAgICAgICAgY3UgPSB1ZFtcXFwiXCIgKyBpICsgXCJcXFwiXTtcXG4gICAgICAgICAgICBjdiA9IGN1LnZhbHVlO1xcbiAgICAgICAgICAgIHYgPSB1dltcXFwiXCIgKyBpICsgXCJcXFwiXTtcXG4gICAgICAgICAgICBcIiArIHRlbXBsYXRlICsgXCI7XCIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qXG4gICAgICogdGhlIGludHJvZHVjdGlvbiBvZiBzeW5jRGF0YSBpcyB0byBzb2x2ZSBhbiBpc3N1ZSB3aGVyZSB0ZXh0dXJlcyBpbiB1bmlmb3JtIGdyb3VwcyBhcmUgbm90IHNldCBjb3JyZWN0bHlcbiAgICAgKiB0aGUgdGV4dHVyZSBjb3VudCB3YXMgYWx3YXlzIHN0YXJ0aW5nIGZyb20gMCBpbiBlYWNoIGdyb3VwLiBUaGlzIG5lZWRzIHRvIGluY3JlbWVudCBlYWNoIHRpbWUgYSB0ZXh0dXJlIGlzIHVzZWRcbiAgICAgKiBubyBtYXR0ZXIgd2hpY2ggZ3JvdXAgaXMgYmVpbmcgdXNlZFxuICAgICAqXG4gICAgICovXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLW5ldy1mdW5jXG4gICAgcmV0dXJuIG5ldyBGdW5jdGlvbigndWQnLCAndXYnLCAncmVuZGVyZXInLCAnc3luY0RhdGEnLCBmdW5jRnJhZ21lbnRzLmpvaW4oJ1xcbicpKTtcbn1cblxudmFyIGZyYWdUZW1wbGF0ZSA9IFtcbiAgICAncHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7JyxcbiAgICAndm9pZCBtYWluKHZvaWQpeycsXG4gICAgJ2Zsb2F0IHRlc3QgPSAwLjE7JyxcbiAgICAnJWZvcmxvb3AlJyxcbiAgICAnZ2xfRnJhZ0NvbG9yID0gdmVjNCgwLjApOycsXG4gICAgJ30nIF0uam9pbignXFxuJyk7XG5mdW5jdGlvbiBnZW5lcmF0ZUlmVGVzdFNyYyhtYXhJZnMpIHtcbiAgICB2YXIgc3JjID0gJyc7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXhJZnM7ICsraSkge1xuICAgICAgICBpZiAoaSA+IDApIHtcbiAgICAgICAgICAgIHNyYyArPSAnXFxuZWxzZSAnO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpIDwgbWF4SWZzIC0gMSkge1xuICAgICAgICAgICAgc3JjICs9IFwiaWYodGVzdCA9PSBcIiArIGkgKyBcIi4wKXt9XCI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHNyYztcbn1cbmZ1bmN0aW9uIGNoZWNrTWF4SWZTdGF0ZW1lbnRzSW5TaGFkZXIobWF4SWZzLCBnbCkge1xuICAgIGlmIChtYXhJZnMgPT09IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHZhbHVlIG9mIGAwYCBwYXNzZWQgdG8gYGNoZWNrTWF4SWZTdGF0ZW1lbnRzSW5TaGFkZXJgJyk7XG4gICAgfVxuICAgIHZhciBzaGFkZXIgPSBnbC5jcmVhdGVTaGFkZXIoZ2wuRlJBR01FTlRfU0hBREVSKTtcbiAgICB3aGlsZSAodHJ1ZSkgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zdGFudC1jb25kaXRpb25cbiAgICAge1xuICAgICAgICB2YXIgZnJhZ21lbnRTcmMgPSBmcmFnVGVtcGxhdGUucmVwbGFjZSgvJWZvcmxvb3AlL2dpLCBnZW5lcmF0ZUlmVGVzdFNyYyhtYXhJZnMpKTtcbiAgICAgICAgZ2wuc2hhZGVyU291cmNlKHNoYWRlciwgZnJhZ21lbnRTcmMpO1xuICAgICAgICBnbC5jb21waWxlU2hhZGVyKHNoYWRlcik7XG4gICAgICAgIGlmICghZ2wuZ2V0U2hhZGVyUGFyYW1ldGVyKHNoYWRlciwgZ2wuQ09NUElMRV9TVEFUVVMpKSB7XG4gICAgICAgICAgICBtYXhJZnMgPSAobWF4SWZzIC8gMikgfCAwO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gdmFsaWQhXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWF4SWZzO1xufVxuXG4vLyBDYWNoZSB0aGUgcmVzdWx0IHRvIHByZXZlbnQgcnVubmluZyB0aGlzIG92ZXIgYW5kIG92ZXJcbnZhciB1bnNhZmVFdmFsO1xuLyoqXG4gKiBOb3QgYWxsIHBsYXRmb3JtcyBhbGxvdyB0byBnZW5lcmF0ZSBmdW5jdGlvbiBjb2RlIChlLmcuLCBgbmV3IEZ1bmN0aW9uYCkuXG4gKiB0aGlzIHByb3ZpZGVzIHRoZSBwbGF0Zm9ybS1sZXZlbCBkZXRlY3Rpb24uXG4gKiBAcHJpdmF0ZVxuICogQHJldHVybnMge2Jvb2xlYW59IGB0cnVlYCBpZiBgbmV3IEZ1bmN0aW9uYCBpcyBzdXBwb3J0ZWQuXG4gKi9cbmZ1bmN0aW9uIHVuc2FmZUV2YWxTdXBwb3J0ZWQoKSB7XG4gICAgaWYgKHR5cGVvZiB1bnNhZmVFdmFsID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgcmV0dXJuIHVuc2FmZUV2YWw7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLW5ldy1mdW5jICovXG4gICAgICAgIHZhciBmdW5jID0gbmV3IEZ1bmN0aW9uKCdwYXJhbTEnLCAncGFyYW0yJywgJ3BhcmFtMycsICdyZXR1cm4gcGFyYW0xW3BhcmFtMl0gPT09IHBhcmFtMzsnKTtcbiAgICAgICAgLyogZXNsaW50LWVuYWJsZSBuby1uZXctZnVuYyAqL1xuICAgICAgICB1bnNhZmVFdmFsID0gZnVuYyh7IGE6ICdiJyB9LCAnYScsICdiJykgPT09IHRydWU7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIHVuc2FmZUV2YWwgPSBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHVuc2FmZUV2YWw7XG59XG5cbnZhciBkZWZhdWx0RnJhZ21lbnQkMiA9IFwidmFyeWluZyB2ZWMyIHZUZXh0dXJlQ29vcmQ7XFxuXFxudW5pZm9ybSBzYW1wbGVyMkQgdVNhbXBsZXI7XFxuXFxudm9pZCBtYWluKHZvaWQpe1xcbiAgIGdsX0ZyYWdDb2xvciAqPSB0ZXh0dXJlMkQodVNhbXBsZXIsIHZUZXh0dXJlQ29vcmQpO1xcbn1cIjtcblxudmFyIGRlZmF1bHRWZXJ0ZXgkMyA9IFwiYXR0cmlidXRlIHZlYzIgYVZlcnRleFBvc2l0aW9uO1xcbmF0dHJpYnV0ZSB2ZWMyIGFUZXh0dXJlQ29vcmQ7XFxuXFxudW5pZm9ybSBtYXQzIHByb2plY3Rpb25NYXRyaXg7XFxuXFxudmFyeWluZyB2ZWMyIHZUZXh0dXJlQ29vcmQ7XFxuXFxudm9pZCBtYWluKHZvaWQpe1xcbiAgIGdsX1Bvc2l0aW9uID0gdmVjNCgocHJvamVjdGlvbk1hdHJpeCAqIHZlYzMoYVZlcnRleFBvc2l0aW9uLCAxLjApKS54eSwgMC4wLCAxLjApO1xcbiAgIHZUZXh0dXJlQ29vcmQgPSBhVGV4dHVyZUNvb3JkO1xcbn1cXG5cIjtcblxudmFyIFVJRCQxID0gMDtcbnZhciBuYW1lQ2FjaGUgPSB7fTtcbi8qKlxuICogSGVscGVyIGNsYXNzIHRvIGNyZWF0ZSBhIHNoYWRlciBwcm9ncmFtLlxuICogQG1lbWJlcm9mIFBJWElcbiAqL1xudmFyIFByb2dyYW0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHZlcnRleFNyYyAtIFRoZSBzb3VyY2Ugb2YgdGhlIHZlcnRleCBzaGFkZXIuXG4gICAgICogQHBhcmFtIGZyYWdtZW50U3JjIC0gVGhlIHNvdXJjZSBvZiB0aGUgZnJhZ21lbnQgc2hhZGVyLlxuICAgICAqIEBwYXJhbSBuYW1lIC0gTmFtZSBmb3Igc2hhZGVyXG4gICAgICovXG4gICAgZnVuY3Rpb24gUHJvZ3JhbSh2ZXJ0ZXhTcmMsIGZyYWdtZW50U3JjLCBuYW1lKSB7XG4gICAgICAgIGlmIChuYW1lID09PSB2b2lkIDApIHsgbmFtZSA9ICdwaXhpLXNoYWRlcic7IH1cbiAgICAgICAgdGhpcy5pZCA9IFVJRCQxKys7XG4gICAgICAgIHRoaXMudmVydGV4U3JjID0gdmVydGV4U3JjIHx8IFByb2dyYW0uZGVmYXVsdFZlcnRleFNyYztcbiAgICAgICAgdGhpcy5mcmFnbWVudFNyYyA9IGZyYWdtZW50U3JjIHx8IFByb2dyYW0uZGVmYXVsdEZyYWdtZW50U3JjO1xuICAgICAgICB0aGlzLnZlcnRleFNyYyA9IHRoaXMudmVydGV4U3JjLnRyaW0oKTtcbiAgICAgICAgdGhpcy5mcmFnbWVudFNyYyA9IHRoaXMuZnJhZ21lbnRTcmMudHJpbSgpO1xuICAgICAgICBpZiAodGhpcy52ZXJ0ZXhTcmMuc3Vic3RyaW5nKDAsIDgpICE9PSAnI3ZlcnNpb24nKSB7XG4gICAgICAgICAgICBuYW1lID0gbmFtZS5yZXBsYWNlKC9cXHMrL2csICctJyk7XG4gICAgICAgICAgICBpZiAobmFtZUNhY2hlW25hbWVdKSB7XG4gICAgICAgICAgICAgICAgbmFtZUNhY2hlW25hbWVdKys7XG4gICAgICAgICAgICAgICAgbmFtZSArPSBcIi1cIiArIG5hbWVDYWNoZVtuYW1lXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG5hbWVDYWNoZVtuYW1lXSA9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnZlcnRleFNyYyA9IFwiI2RlZmluZSBTSEFERVJfTkFNRSBcIiArIG5hbWUgKyBcIlxcblwiICsgdGhpcy52ZXJ0ZXhTcmM7XG4gICAgICAgICAgICB0aGlzLmZyYWdtZW50U3JjID0gXCIjZGVmaW5lIFNIQURFUl9OQU1FIFwiICsgbmFtZSArIFwiXFxuXCIgKyB0aGlzLmZyYWdtZW50U3JjO1xuICAgICAgICAgICAgdGhpcy52ZXJ0ZXhTcmMgPSBzZXRQcmVjaXNpb24odGhpcy52ZXJ0ZXhTcmMsIHNldHRpbmdzLnNldHRpbmdzLlBSRUNJU0lPTl9WRVJURVgsIGNvbnN0YW50cy5QUkVDSVNJT04uSElHSCk7XG4gICAgICAgICAgICB0aGlzLmZyYWdtZW50U3JjID0gc2V0UHJlY2lzaW9uKHRoaXMuZnJhZ21lbnRTcmMsIHNldHRpbmdzLnNldHRpbmdzLlBSRUNJU0lPTl9GUkFHTUVOVCwgZ2V0TWF4RnJhZ21lbnRQcmVjaXNpb24oKSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gY3VycmVudGx5IHRoaXMgZG9lcyBub3QgZXh0cmFjdCBzdHJ1Y3RzIG9ubHkgZGVmYXVsdCB0eXBlc1xuICAgICAgICAvLyB0aGlzIGlzIHdoZXJlIHdlIHN0b3JlIHNoYWRlciByZWZlcmVuY2VzLi5cbiAgICAgICAgdGhpcy5nbFByb2dyYW1zID0ge307XG4gICAgICAgIHRoaXMuc3luY1VuaWZvcm1zID0gbnVsbDtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFByb2dyYW0sIFwiZGVmYXVsdFZlcnRleFNyY1wiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgZGVmYXVsdCB2ZXJ0ZXggc2hhZGVyIHNvdXJjZS5cbiAgICAgICAgICogQGNvbnN0YW50XG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBkZWZhdWx0VmVydGV4JDM7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUHJvZ3JhbSwgXCJkZWZhdWx0RnJhZ21lbnRTcmNcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGRlZmF1bHQgZnJhZ21lbnQgc2hhZGVyIHNvdXJjZS5cbiAgICAgICAgICogQGNvbnN0YW50XG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBkZWZhdWx0RnJhZ21lbnQkMjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIC8qKlxuICAgICAqIEEgc2hvcnQgaGFuZCBmdW5jdGlvbiB0byBjcmVhdGUgYSBwcm9ncmFtIGJhc2VkIG9mIGEgdmVydGV4IGFuZCBmcmFnbWVudCBzaGFkZXIuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCB3aWxsIGFsc28gY2hlY2sgdG8gc2VlIGlmIHRoZXJlIGlzIGEgY2FjaGVkIHByb2dyYW0uXG4gICAgICogQHBhcmFtIHZlcnRleFNyYyAtIFRoZSBzb3VyY2Ugb2YgdGhlIHZlcnRleCBzaGFkZXIuXG4gICAgICogQHBhcmFtIGZyYWdtZW50U3JjIC0gVGhlIHNvdXJjZSBvZiB0aGUgZnJhZ21lbnQgc2hhZGVyLlxuICAgICAqIEBwYXJhbSBuYW1lIC0gTmFtZSBmb3Igc2hhZGVyXG4gICAgICogQHJldHVybnMgQSBzaGlueSBuZXcgUGl4aUpTIHNoYWRlciBwcm9ncmFtIVxuICAgICAqL1xuICAgIFByb2dyYW0uZnJvbSA9IGZ1bmN0aW9uICh2ZXJ0ZXhTcmMsIGZyYWdtZW50U3JjLCBuYW1lKSB7XG4gICAgICAgIHZhciBrZXkgPSB2ZXJ0ZXhTcmMgKyBmcmFnbWVudFNyYztcbiAgICAgICAgdmFyIHByb2dyYW0gPSB1dGlscy5Qcm9ncmFtQ2FjaGVba2V5XTtcbiAgICAgICAgaWYgKCFwcm9ncmFtKSB7XG4gICAgICAgICAgICB1dGlscy5Qcm9ncmFtQ2FjaGVba2V5XSA9IHByb2dyYW0gPSBuZXcgUHJvZ3JhbSh2ZXJ0ZXhTcmMsIGZyYWdtZW50U3JjLCBuYW1lKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcHJvZ3JhbTtcbiAgICB9O1xuICAgIHJldHVybiBQcm9ncmFtO1xufSgpKTtcblxuLyoqXG4gKiBBIGhlbHBlciBjbGFzcyBmb3Igc2hhZGVycy5cbiAqIEBtZW1iZXJvZiBQSVhJXG4gKi9cbnZhciBTaGFkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHByb2dyYW0gLSBUaGUgcHJvZ3JhbSB0aGUgc2hhZGVyIHdpbGwgdXNlLlxuICAgICAqIEBwYXJhbSB1bmlmb3JtcyAtIEN1c3RvbSB1bmlmb3JtcyB0byB1c2UgdG8gYXVnbWVudCB0aGUgYnVpbHQtaW4gb25lcy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBTaGFkZXIocHJvZ3JhbSwgdW5pZm9ybXMpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFVzZWQgaW50ZXJuYWxseSB0byBiaW5kIHVuaWZvcm0gYnVmZmVyIG9iamVjdHMuXG4gICAgICAgICAqIEBpZ25vcmVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudW5pZm9ybUJpbmRDb3VudCA9IDA7XG4gICAgICAgIHRoaXMucHJvZ3JhbSA9IHByb2dyYW07XG4gICAgICAgIC8vIGxldHMgc2VlIHdoYXRzIGJlZW4gcGFzc2VkIGluXG4gICAgICAgIC8vIHVuaWZvcm1zIHNob3VsZCBiZSBjb252ZXJ0ZWQgdG8gYSB1bmlmb3JtIGdyb3VwXG4gICAgICAgIGlmICh1bmlmb3Jtcykge1xuICAgICAgICAgICAgaWYgKHVuaWZvcm1zIGluc3RhbmNlb2YgVW5pZm9ybUdyb3VwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51bmlmb3JtR3JvdXAgPSB1bmlmb3JtcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMudW5pZm9ybUdyb3VwID0gbmV3IFVuaWZvcm1Hcm91cCh1bmlmb3Jtcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnVuaWZvcm1Hcm91cCA9IG5ldyBVbmlmb3JtR3JvdXAoe30pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIFRPRE8gbW92ZSB0byBzaGFkZXIgc3lzdGVtLi5cbiAgICBTaGFkZXIucHJvdG90eXBlLmNoZWNrVW5pZm9ybUV4aXN0cyA9IGZ1bmN0aW9uIChuYW1lLCBncm91cCkge1xuICAgICAgICBpZiAoZ3JvdXAudW5pZm9ybXNbbmFtZV0pIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgaW4gZ3JvdXAudW5pZm9ybXMpIHtcbiAgICAgICAgICAgIHZhciB1bmlmb3JtID0gZ3JvdXAudW5pZm9ybXNbaV07XG4gICAgICAgICAgICBpZiAodW5pZm9ybS5ncm91cCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrVW5pZm9ybUV4aXN0cyhuYW1lLCB1bmlmb3JtKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgU2hhZGVyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyB1c2FnZSBjb3VudCBvbiBwcm9ncmFtcz9cbiAgICAgICAgLy8gcmVtb3ZlIGlmIG5vdCB1c2VkIVxuICAgICAgICB0aGlzLnVuaWZvcm1Hcm91cCA9IG51bGw7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU2hhZGVyLnByb3RvdHlwZSwgXCJ1bmlmb3Jtc1wiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTaGFkZXIgdW5pZm9ybSB2YWx1ZXMsIHNob3J0Y3V0IGZvciBgdW5pZm9ybUdyb3VwLnVuaWZvcm1zYC5cbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnVuaWZvcm1Hcm91cC51bmlmb3JtcztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIC8qKlxuICAgICAqIEEgc2hvcnQgaGFuZCBmdW5jdGlvbiB0byBjcmVhdGUgYSBzaGFkZXIgYmFzZWQgb2YgYSB2ZXJ0ZXggYW5kIGZyYWdtZW50IHNoYWRlci5cbiAgICAgKiBAcGFyYW0gdmVydGV4U3JjIC0gVGhlIHNvdXJjZSBvZiB0aGUgdmVydGV4IHNoYWRlci5cbiAgICAgKiBAcGFyYW0gZnJhZ21lbnRTcmMgLSBUaGUgc291cmNlIG9mIHRoZSBmcmFnbWVudCBzaGFkZXIuXG4gICAgICogQHBhcmFtIHVuaWZvcm1zIC0gQ3VzdG9tIHVuaWZvcm1zIHRvIHVzZSB0byBhdWdtZW50IHRoZSBidWlsdC1pbiBvbmVzLlxuICAgICAqIEByZXR1cm5zIEEgc2hpbnkgbmV3IFBpeGlKUyBzaGFkZXIhXG4gICAgICovXG4gICAgU2hhZGVyLmZyb20gPSBmdW5jdGlvbiAodmVydGV4U3JjLCBmcmFnbWVudFNyYywgdW5pZm9ybXMpIHtcbiAgICAgICAgdmFyIHByb2dyYW0gPSBQcm9ncmFtLmZyb20odmVydGV4U3JjLCBmcmFnbWVudFNyYyk7XG4gICAgICAgIHJldHVybiBuZXcgU2hhZGVyKHByb2dyYW0sIHVuaWZvcm1zKTtcbiAgICB9O1xuICAgIHJldHVybiBTaGFkZXI7XG59KCkpO1xuXG4vKiBlc2xpbnQtZGlzYWJsZSBtYXgtbGVuICovXG52YXIgQkxFTkQkMSA9IDA7XG52YXIgT0ZGU0VUJDEgPSAxO1xudmFyIENVTExJTkckMSA9IDI7XG52YXIgREVQVEhfVEVTVCQxID0gMztcbnZhciBXSU5ESU5HJDEgPSA0O1xudmFyIERFUFRIX01BU0skMSA9IDU7XG4vKipcbiAqIFRoaXMgaXMgYSBXZWJHTCBzdGF0ZSwgYW5kIGlzIGlzIHBhc3NlZCB0byB7QGxpbmsgUElYSS5TdGF0ZVN5c3RlbX0uXG4gKlxuICogRWFjaCBtZXNoIHJlbmRlcmVkIG1heSByZXF1aXJlIFdlYkdMIHRvIGJlIGluIGEgZGlmZmVyZW50IHN0YXRlLlxuICogRm9yIGV4YW1wbGUgeW91IG1heSB3YW50IGRpZmZlcmVudCBibGVuZCBtb2RlIG9yIHRvIGVuYWJsZSBwb2x5Z29uIG9mZnNldHNcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKi9cbnZhciBTdGF0ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTdGF0ZSgpIHtcbiAgICAgICAgdGhpcy5kYXRhID0gMDtcbiAgICAgICAgdGhpcy5ibGVuZE1vZGUgPSBjb25zdGFudHMuQkxFTkRfTU9ERVMuTk9STUFMO1xuICAgICAgICB0aGlzLnBvbHlnb25PZmZzZXQgPSAwO1xuICAgICAgICB0aGlzLmJsZW5kID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5kZXB0aE1hc2sgPSB0cnVlO1xuICAgICAgICAvLyAgdGhpcy5kZXB0aFRlc3QgPSB0cnVlO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3RhdGUucHJvdG90eXBlLCBcImJsZW5kXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFjdGl2YXRlcyBibGVuZGluZyBvZiB0aGUgY29tcHV0ZWQgZnJhZ21lbnQgY29sb3IgdmFsdWVzLlxuICAgICAgICAgKiBAZGVmYXVsdCB0cnVlXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAhISh0aGlzLmRhdGEgJiAoMSA8PCBCTEVORCQxKSk7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoISEodGhpcy5kYXRhICYgKDEgPDwgQkxFTkQkMSkpICE9PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0YSBePSAoMSA8PCBCTEVORCQxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdGF0ZS5wcm90b3R5cGUsIFwib2Zmc2V0c1wiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBY3RpdmF0ZXMgYWRkaW5nIGFuIG9mZnNldCB0byBkZXB0aCB2YWx1ZXMgb2YgcG9seWdvbidzIGZyYWdtZW50c1xuICAgICAgICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gISEodGhpcy5kYXRhICYgKDEgPDwgT0ZGU0VUJDEpKTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIGlmICghISh0aGlzLmRhdGEgJiAoMSA8PCBPRkZTRVQkMSkpICE9PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0YSBePSAoMSA8PCBPRkZTRVQkMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3RhdGUucHJvdG90eXBlLCBcImN1bGxpbmdcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogQWN0aXZhdGVzIGN1bGxpbmcgb2YgcG9seWdvbnMuXG4gICAgICAgICAqIEBkZWZhdWx0IGZhbHNlXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAhISh0aGlzLmRhdGEgJiAoMSA8PCBDVUxMSU5HJDEpKTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIGlmICghISh0aGlzLmRhdGEgJiAoMSA8PCBDVUxMSU5HJDEpKSAhPT0gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGEgXj0gKDEgPDwgQ1VMTElORyQxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdGF0ZS5wcm90b3R5cGUsIFwiZGVwdGhUZXN0XCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFjdGl2YXRlcyBkZXB0aCBjb21wYXJpc29ucyBhbmQgdXBkYXRlcyB0byB0aGUgZGVwdGggYnVmZmVyLlxuICAgICAgICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gISEodGhpcy5kYXRhICYgKDEgPDwgREVQVEhfVEVTVCQxKSk7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoISEodGhpcy5kYXRhICYgKDEgPDwgREVQVEhfVEVTVCQxKSkgIT09IHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhIF49ICgxIDw8IERFUFRIX1RFU1QkMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3RhdGUucHJvdG90eXBlLCBcImRlcHRoTWFza1wiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFbmFibGVzIG9yIGRpc2FibGVzIHdyaXRpbmcgdG8gdGhlIGRlcHRoIGJ1ZmZlci5cbiAgICAgICAgICogQGRlZmF1bHQgdHJ1ZVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gISEodGhpcy5kYXRhICYgKDEgPDwgREVQVEhfTUFTSyQxKSk7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoISEodGhpcy5kYXRhICYgKDEgPDwgREVQVEhfTUFTSyQxKSkgIT09IHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhIF49ICgxIDw8IERFUFRIX01BU0skMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3RhdGUucHJvdG90eXBlLCBcImNsb2Nrd2lzZUZyb250RmFjZVwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgd2hldGhlciBvciBub3QgZnJvbnQgb3IgYmFjay1mYWNpbmcgcG9seWdvbnMgY2FuIGJlIGN1bGxlZC5cbiAgICAgICAgICogQGRlZmF1bHQgZmFsc2VcbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICEhKHRoaXMuZGF0YSAmICgxIDw8IFdJTkRJTkckMSkpO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKCEhKHRoaXMuZGF0YSAmICgxIDw8IFdJTkRJTkckMSkpICE9PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0YSBePSAoMSA8PCBXSU5ESU5HJDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0YXRlLnByb3RvdHlwZSwgXCJibGVuZE1vZGVcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGJsZW5kIG1vZGUgdG8gYmUgYXBwbGllZCB3aGVuIHRoaXMgc3RhdGUgaXMgc2V0LiBBcHBseSBhIHZhbHVlIG9mIGBQSVhJLkJMRU5EX01PREVTLk5PUk1BTGAgdG8gcmVzZXQgdGhlIGJsZW5kIG1vZGUuXG4gICAgICAgICAqIFNldHRpbmcgdGhpcyBtb2RlIHRvIGFueXRoaW5nIG90aGVyIHRoYW4gTk9fQkxFTkQgd2lsbCBhdXRvbWF0aWNhbGx5IHN3aXRjaCBibGVuZGluZyBvbi5cbiAgICAgICAgICogQGRlZmF1bHQgUElYSS5CTEVORF9NT0RFUy5OT1JNQUxcbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2JsZW5kTW9kZTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuYmxlbmQgPSAodmFsdWUgIT09IGNvbnN0YW50cy5CTEVORF9NT0RFUy5OT05FKTtcbiAgICAgICAgICAgIHRoaXMuX2JsZW5kTW9kZSA9IHZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0YXRlLnByb3RvdHlwZSwgXCJwb2x5Z29uT2Zmc2V0XCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBwb2x5Z29uIG9mZnNldC4gU2V0dGluZyB0aGlzIHByb3BlcnR5IHRvIGFueXRoaW5nIG90aGVyIHRoYW4gMCB3aWxsIGF1dG9tYXRpY2FsbHkgZW5hYmxlIHBvbHlnb24gb2Zmc2V0IGZpbGwuXG4gICAgICAgICAqIEBkZWZhdWx0IDBcbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3BvbHlnb25PZmZzZXQ7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLm9mZnNldHMgPSAhIXZhbHVlO1xuICAgICAgICAgICAgdGhpcy5fcG9seWdvbk9mZnNldCA9IHZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgU3RhdGUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gXCJbQHBpeGkvY29yZTpTdGF0ZSBcIlxuICAgICAgICAgICAgKyAoXCJibGVuZE1vZGU9XCIgKyB0aGlzLmJsZW5kTW9kZSArIFwiIFwiKVxuICAgICAgICAgICAgKyAoXCJjbG9ja3dpc2VGcm9udEZhY2U9XCIgKyB0aGlzLmNsb2Nrd2lzZUZyb250RmFjZSArIFwiIFwiKVxuICAgICAgICAgICAgKyAoXCJjdWxsaW5nPVwiICsgdGhpcy5jdWxsaW5nICsgXCIgXCIpXG4gICAgICAgICAgICArIChcImRlcHRoTWFzaz1cIiArIHRoaXMuZGVwdGhNYXNrICsgXCIgXCIpXG4gICAgICAgICAgICArIChcInBvbHlnb25PZmZzZXQ9XCIgKyB0aGlzLnBvbHlnb25PZmZzZXQpXG4gICAgICAgICAgICArIFwiXVwiO1xuICAgIH07XG4gICAgU3RhdGUuZm9yMmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzdGF0ZSA9IG5ldyBTdGF0ZSgpO1xuICAgICAgICBzdGF0ZS5kZXB0aFRlc3QgPSBmYWxzZTtcbiAgICAgICAgc3RhdGUuYmxlbmQgPSB0cnVlO1xuICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgfTtcbiAgICByZXR1cm4gU3RhdGU7XG59KCkpO1xuXG52YXIgZGVmYXVsdFZlcnRleCQyID0gXCJhdHRyaWJ1dGUgdmVjMiBhVmVydGV4UG9zaXRpb247XFxuXFxudW5pZm9ybSBtYXQzIHByb2plY3Rpb25NYXRyaXg7XFxuXFxudmFyeWluZyB2ZWMyIHZUZXh0dXJlQ29vcmQ7XFxuXFxudW5pZm9ybSB2ZWM0IGlucHV0U2l6ZTtcXG51bmlmb3JtIHZlYzQgb3V0cHV0RnJhbWU7XFxuXFxudmVjNCBmaWx0ZXJWZXJ0ZXhQb3NpdGlvbiggdm9pZCApXFxue1xcbiAgICB2ZWMyIHBvc2l0aW9uID0gYVZlcnRleFBvc2l0aW9uICogbWF4KG91dHB1dEZyYW1lLnp3LCB2ZWMyKDAuKSkgKyBvdXRwdXRGcmFtZS54eTtcXG5cXG4gICAgcmV0dXJuIHZlYzQoKHByb2plY3Rpb25NYXRyaXggKiB2ZWMzKHBvc2l0aW9uLCAxLjApKS54eSwgMC4wLCAxLjApO1xcbn1cXG5cXG52ZWMyIGZpbHRlclRleHR1cmVDb29yZCggdm9pZCApXFxue1xcbiAgICByZXR1cm4gYVZlcnRleFBvc2l0aW9uICogKG91dHB1dEZyYW1lLnp3ICogaW5wdXRTaXplLnp3KTtcXG59XFxuXFxudm9pZCBtYWluKHZvaWQpXFxue1xcbiAgICBnbF9Qb3NpdGlvbiA9IGZpbHRlclZlcnRleFBvc2l0aW9uKCk7XFxuICAgIHZUZXh0dXJlQ29vcmQgPSBmaWx0ZXJUZXh0dXJlQ29vcmQoKTtcXG59XFxuXCI7XG5cbnZhciBkZWZhdWx0RnJhZ21lbnQkMSA9IFwidmFyeWluZyB2ZWMyIHZUZXh0dXJlQ29vcmQ7XFxuXFxudW5pZm9ybSBzYW1wbGVyMkQgdVNhbXBsZXI7XFxuXFxudm9pZCBtYWluKHZvaWQpe1xcbiAgIGdsX0ZyYWdDb2xvciA9IHRleHR1cmUyRCh1U2FtcGxlciwgdlRleHR1cmVDb29yZCk7XFxufVxcblwiO1xuXG4vKipcbiAqIEEgZmlsdGVyIGlzIGEgc3BlY2lhbCBzaGFkZXIgdGhhdCBhcHBsaWVzIHBvc3QtcHJvY2Vzc2luZyBlZmZlY3RzIHRvIGFuIGlucHV0IHRleHR1cmUgYW5kIHdyaXRlcyBpbnRvIGFuIG91dHB1dFxuICogcmVuZGVyLXRhcmdldC5cbiAqXG4gKiB7QGxpbmsgaHR0cDovL3BpeGlqcy5pby9leGFtcGxlcy8jL2ZpbHRlcnMvYmx1ci1maWx0ZXIuanMgRXhhbXBsZX0gb2YgdGhlXG4gKiB7QGxpbmsgUElYSS5maWx0ZXJzLkJsdXJGaWx0ZXIgQmx1ckZpbHRlcn0uXG4gKlxuICogIyMjIFVzYWdlXG4gKiBGaWx0ZXJzIGNhbiBiZSBhcHBsaWVkIHRvIGFueSBEaXNwbGF5T2JqZWN0IG9yIENvbnRhaW5lci5cbiAqIFBpeGlKUycgYEZpbHRlclN5c3RlbWAgcmVuZGVycyB0aGUgY29udGFpbmVyIGludG8gdGVtcG9yYXJ5IEZyYW1lYnVmZmVyLFxuICogdGhlbiBmaWx0ZXIgcmVuZGVycyBpdCB0byB0aGUgc2NyZWVuLlxuICogTXVsdGlwbGUgZmlsdGVycyBjYW4gYmUgYWRkZWQgdG8gdGhlIGBmaWx0ZXJzYCBhcnJheSBwcm9wZXJ0eSBhbmQgc3RhY2tlZCBvbiBlYWNoIG90aGVyLlxuICpcbiAqIGBgYFxuICogY29uc3QgZmlsdGVyID0gbmV3IFBJWEkuRmlsdGVyKG15U2hhZGVyVmVydCwgbXlTaGFkZXJGcmFnLCB7IG15VW5pZm9ybTogMC41IH0pO1xuICogY29uc3QgY29udGFpbmVyID0gbmV3IFBJWEkuQ29udGFpbmVyKCk7XG4gKiBjb250YWluZXIuZmlsdGVycyA9IFtmaWx0ZXJdO1xuICogYGBgXG4gKlxuICogIyMjIFByZXZpb3VzIFZlcnNpb24gRGlmZmVyZW5jZXNcbiAqXG4gKiBJbiBQaXhpSlMgKip2MyoqLCBhIGZpbHRlciB3YXMgYWx3YXlzIGFwcGxpZWQgdG8gX3dob2xlIHNjcmVlbl8uXG4gKlxuICogSW4gUGl4aUpTICoqdjQqKiwgYSBmaWx0ZXIgY2FuIGJlIGFwcGxpZWQgX29ubHkgcGFydCBvZiB0aGUgc2NyZWVuXy5cbiAqIERldmVsb3BlcnMgaGFkIHRvIGNyZWF0ZSBhIHNldCBvZiB1bmlmb3JtcyB0byBkZWFsIHdpdGggY29vcmRpbmF0ZXMuXG4gKlxuICogSW4gUGl4aUpTICoqdjUqKiBjb21iaW5lcyBfYm90aCBhcHByb2FjaGVzXy5cbiAqIERldmVsb3BlcnMgY2FuIHVzZSBub3JtYWwgY29vcmRpbmF0ZXMgb2YgdjMgYW5kIHRoZW4gYWxsb3cgZmlsdGVyIHRvIHVzZSBwYXJ0aWFsIEZyYW1lYnVmZmVycyxcbiAqIGJyaW5naW5nIHRob3NlIGV4dHJhIHVuaWZvcm1zIGludG8gYWNjb3VudC5cbiAqXG4gKiBBbHNvIGJlIGF3YXJlIHRoYXQgd2UgaGF2ZSBjaGFuZ2VkIGRlZmF1bHQgdmVydGV4IHNoYWRlciwgcGxlYXNlIGNvbnN1bHRcbiAqIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vcGl4aWpzL3BpeGkuanMvd2lraS92NS1DcmVhdGluZy1maWx0ZXJzIFdpa2l9LlxuICpcbiAqICMjIyBGcmFtZXNcbiAqXG4gKiBUaGUgZm9sbG93aW5nIHRhYmxlIHN1bW1hcml6ZXMgdGhlIGNvb3JkaW5hdGUgc3BhY2VzIHVzZWQgaW4gdGhlIGZpbHRlcmluZyBwaXBlbGluZTpcbiAqXG4gKiA8dGFibGU+XG4gKiA8dGhlYWQ+XG4gKiAgIDx0cj5cbiAqICAgICA8dGg+Q29vcmRpbmF0ZSBTcGFjZTwvdGg+XG4gKiAgICAgPHRoPkRlc2NyaXB0aW9uPC90aD5cbiAqICAgPC90cj5cbiAqIDwvdGhlYWQ+XG4gKiA8dGJvZHk+XG4gKiAgIDx0cj5cbiAqICAgICA8dGQ+VGV4dHVyZSBDb29yZGluYXRlczwvdGQ+XG4gKiAgICAgPHRkPlxuICogICAgICAgICBUaGUgdGV4dHVyZSAob3IgVVYpIGNvb3JkaW5hdGVzIGluIHRoZSBpbnB1dCBiYXNlLXRleHR1cmUncyBzcGFjZS4gVGhlc2UgYXJlIG5vcm1hbGl6ZWQgaW50byB0aGUgKDAsMSkgcmFuZ2UgYWxvbmdcbiAqICAgICAgICAgYm90aCBheGVzLlxuICogICAgIDwvdGQ+XG4gKiAgIDwvdHI+XG4gKiAgIDx0cj5cbiAqICAgICA8dGQ+V29ybGQgU3BhY2U8L3RkPlxuICogICAgIDx0ZD5cbiAqICAgICAgICAgQSBwb2ludCBpbiB0aGUgc2FtZSBzcGFjZSBhcyB0aGUgd29ybGQgYm91bmRzIG9mIGFueSBkaXNwbGF5LW9iamVjdCAoaS5lLiBpbiB0aGUgc2NlbmUgZ3JhcGgncyBzcGFjZSkuXG4gKiAgICAgPC90ZD5cbiAqICAgPC90cj5cbiAqICAgPHRyPlxuICogICAgIDx0ZD5QaHlzaWNhbCBQaXhlbHM8L3RkPlxuICogICAgIDx0ZD5cbiAqICAgICAgICAgVGhpcyBpcyBiYXNlLXRleHR1cmUncyBzcGFjZSB3aXRoIHRoZSBvcmlnaW4gb24gdGhlIHRvcC1sZWZ0LiBZb3UgY2FuIGNhbGN1bGF0ZSB0aGVzZSBieSBtdWx0aXBseWluZyB0aGUgdGV4dHVyZVxuICogICAgICAgICBjb29yZGluYXRlcyBieSB0aGUgZGltZW5zaW9ucyBvZiB0aGUgdGV4dHVyZS5cbiAqICAgICA8L3RkPlxuICogICA8L3RyPlxuICogPC90Ym9keT5cbiAqIDwvdGFibGU+XG4gKlxuICogIyMjIEJ1aWx0LWluIFVuaWZvcm1zXG4gKlxuICogUGl4aUpTIHZpZXdwb3J0IHVzZXMgc2NyZWVuIChDU1MpIGNvb3JkaW5hdGVzLCBgKDAsIDAsIHJlbmRlcmVyLnNjcmVlbi53aWR0aCwgcmVuZGVyZXIuc2NyZWVuLmhlaWdodClgLFxuICogYW5kIGBwcm9qZWN0aW9uTWF0cml4YCB1bmlmb3JtIG1hcHMgaXQgdG8gdGhlIGdsIHZpZXdwb3J0LlxuICpcbiAqICoqdVNhbXBsZXIqKlxuICpcbiAqIFRoZSBtb3N0IGltcG9ydGFudCB1bmlmb3JtIGlzIHRoZSBpbnB1dCB0ZXh0dXJlIHRoYXQgY29udGFpbmVyIHdhcyByZW5kZXJlZCBpbnRvLlxuICogX0ltcG9ydGFudCBub3RlOiBhcyB3aXRoIGFsbCBGcmFtZWJ1ZmZlcnMgaW4gUGl4aUpTLCBib3RoIGlucHV0IGFuZCBvdXRwdXQgYXJlXG4gKiBwcmVtdWx0aXBsaWVkIGJ5IGFscGhhLl9cbiAqXG4gKiBCeSBkZWZhdWx0LCBpbnB1dCBub3JtYWxpemVkIGNvb3JkaW5hdGVzIGFyZSBwYXNzZWQgdG8gZnJhZ21lbnQgc2hhZGVyIHdpdGggYHZUZXh0dXJlQ29vcmRgLlxuICogVXNlIGl0IHRvIHNhbXBsZSB0aGUgaW5wdXQuXG4gKlxuICogYGBgXG4gKiBjb25zdCBmcmFnbWVudCA9IGBcbiAqIHZhcnlpbmcgdmVjMiB2VGV4dHVyZUNvb3JkO1xuICogdW5pZm9ybSBzYW1wbGVyMkQgdVNhbXBsZXI7XG4gKiB2b2lkIG1haW4odm9pZClcbiAqIHtcbiAqICAgIGdsX0ZyYWdDb2xvciA9IHRleHR1cmUyRCh1U2FtcGxlciwgdlRleHR1cmVDb29yZCk7XG4gKiB9XG4gKiBgO1xuICpcbiAqIGNvbnN0IG15RmlsdGVyID0gbmV3IFBJWEkuRmlsdGVyKG51bGwsIGZyYWdtZW50KTtcbiAqIGBgYFxuICpcbiAqIFRoaXMgZmlsdGVyIGlzIGp1c3Qgb25lIHVuaWZvcm0gbGVzcyB0aGFuIHtAbGluayBQSVhJLmZpbHRlcnMuQWxwaGFGaWx0ZXIgQWxwaGFGaWx0ZXJ9LlxuICpcbiAqICoqb3V0cHV0RnJhbWUqKlxuICpcbiAqIFRoZSBgb3V0cHV0RnJhbWVgIGhvbGRzIHRoZSByZWN0YW5nbGUgd2hlcmUgZmlsdGVyIGlzIGFwcGxpZWQgaW4gc2NyZWVuIChDU1MpIGNvb3JkaW5hdGVzLlxuICogSXQncyB0aGUgc2FtZSBhcyBgcmVuZGVyZXIuc2NyZWVuYCBmb3IgYSBmdWxsc2NyZWVuIGZpbHRlci5cbiAqIE9ubHkgYSBwYXJ0IG9mICBgb3V0cHV0RnJhbWUuendgIHNpemUgb2YgdGVtcG9yYXJ5IEZyYW1lYnVmZmVyIGlzIHVzZWQsXG4gKiBgKDAsIDAsIG91dHB1dEZyYW1lLndpZHRoLCBvdXRwdXRGcmFtZS5oZWlnaHQpYCxcbiAqXG4gKiBGaWx0ZXJzIHVzZXMgdGhpcyBxdWFkIHRvIG5vcm1hbGl6ZWQgKDAtMSkgc3BhY2UsIGl0cyBwYXNzZWQgaW50byBgYVZlcnRleFBvc2l0aW9uYCBhdHRyaWJ1dGUuXG4gKiBUbyBjYWxjdWxhdGUgdmVydGV4IHBvc2l0aW9uIGluIHNjcmVlbiBzcGFjZSB1c2luZyBub3JtYWxpemVkICgwLTEpIHNwYWNlOlxuICpcbiAqIGBgYFxuICogdmVjNCBmaWx0ZXJWZXJ0ZXhQb3NpdGlvbiggdm9pZCApXG4gKiB7XG4gKiAgICAgdmVjMiBwb3NpdGlvbiA9IGFWZXJ0ZXhQb3NpdGlvbiAqIG1heChvdXRwdXRGcmFtZS56dywgdmVjMigwLikpICsgb3V0cHV0RnJhbWUueHk7XG4gKiAgICAgcmV0dXJuIHZlYzQoKHByb2plY3Rpb25NYXRyaXggKiB2ZWMzKHBvc2l0aW9uLCAxLjApKS54eSwgMC4wLCAxLjApO1xuICogfVxuICogYGBgXG4gKlxuICogKippbnB1dFNpemUqKlxuICpcbiAqIFRlbXBvcmFyeSBmcmFtZWJ1ZmZlciBpcyBkaWZmZXJlbnQsIGl0IGNhbiBiZSBlaXRoZXIgdGhlIHNpemUgb2Ygc2NyZWVuLCBlaXRoZXIgcG93ZXItb2YtdHdvLlxuICogVGhlIGBpbnB1dFNpemUueHlgIGFyZSBzaXplIG9mIHRlbXBvcmFyeSBmcmFtZWJ1ZmZlciB0aGF0IGhvbGRzIGlucHV0LlxuICogVGhlIGBpbnB1dFNpemUuendgIGlzIGludmVydGVkLCBpdCdzIGEgc2hvcnRjdXQgdG8gZXZhZGUgZGl2aXNpb24gaW5zaWRlIHRoZSBzaGFkZXIuXG4gKlxuICogU2V0IGBpbnB1dFNpemUueHkgPSBvdXRwdXRGcmFtZS56d2AgZm9yIGEgZnVsbHNjcmVlbiBmaWx0ZXIuXG4gKlxuICogVG8gY2FsY3VsYXRlIGlucHV0IG5vcm1hbGl6ZWQgY29vcmRpbmF0ZSwgeW91IGhhdmUgdG8gbWFwIGl0IHRvIGZpbHRlciBub3JtYWxpemVkIHNwYWNlLlxuICogTXVsdGlwbHkgYnkgYG91dHB1dEZyYW1lLnp3YCB0byBnZXQgaW5wdXQgY29vcmRpbmF0ZS5cbiAqIERpdmlkZSBieSBgaW5wdXRTaXplLnh5YCB0byBnZXQgaW5wdXQgbm9ybWFsaXplZCBjb29yZGluYXRlLlxuICpcbiAqIGBgYFxuICogdmVjMiBmaWx0ZXJUZXh0dXJlQ29vcmQoIHZvaWQgKVxuICoge1xuICogICAgIHJldHVybiBhVmVydGV4UG9zaXRpb24gKiAob3V0cHV0RnJhbWUuencgKiBpbnB1dFNpemUuencpOyAvLyBzYW1lIGFzIC9pbnB1dFNpemUueHlcbiAqIH1cbiAqIGBgYFxuICogKipyZXNvbHV0aW9uKipcbiAqXG4gKiBUaGUgYHJlc29sdXRpb25gIGlzIHRoZSByYXRpbyBvZiBzY3JlZW4gKENTUykgcGl4ZWxzIHRvIHJlYWwgcGl4ZWxzLlxuICpcbiAqICoqaW5wdXRQaXhlbCoqXG4gKlxuICogYGlucHV0UGl4ZWwueHlgIGlzIHRoZSBzaXplIG9mIGZyYW1lYnVmZmVyIGluIHJlYWwgcGl4ZWxzLCBzYW1lIGFzIGBpbnB1dFNpemUueHkgKiByZXNvbHV0aW9uYFxuICogYGlucHV0UGl4ZWwuendgIGlzIGludmVydGVkIGBpbnB1dFBpeGVsLnh5YC5cbiAqXG4gKiBJdCdzIGhhbmR5IGZvciBmaWx0ZXJzIHRoYXQgdXNlIG5laWdoYm91ciBwaXhlbHMsIGxpa2Uge0BsaW5rIFBJWEkuZmlsdGVycy5GWEFBRmlsdGVyIEZYQUFGaWx0ZXJ9LlxuICpcbiAqICoqaW5wdXRDbGFtcCoqXG4gKlxuICogSWYgeW91IHRyeSB0byBnZXQgaW5mbyBmcm9tIG91dHNpZGUgb2YgdXNlZCBwYXJ0IG9mIEZyYW1lYnVmZmVyIC0geW91J2xsIGdldCB1bmRlZmluZWQgYmVoYXZpb3VyLlxuICogRm9yIGRpc3BsYWNlbWVudHMsIGNvb3JkaW5hdGVzIGhhcyB0byBiZSBjbGFtcGVkLlxuICpcbiAqIFRoZSBgaW5wdXRDbGFtcC54eWAgaXMgbGVmdC10b3AgcGl4ZWwgY2VudGVyLCB5b3UgbWF5IGlnbm9yZSBpdCwgYmVjYXVzZSB3ZSB1c2UgbGVmdC10b3AgcGFydCBvZiBGcmFtZWJ1ZmZlclxuICogYGlucHV0Q2xhbXAuendgIGlzIGJvdHRvbS1yaWdodCBwaXhlbCBjZW50ZXIuXG4gKlxuICogYGBgXG4gKiB2ZWM0IGNvbG9yID0gdGV4dHVyZTJEKHVTYW1wbGVyLCBjbGFtcChtb2RpZmllZFRleHR1cmVDb29yZCwgaW5wdXRDbGFtcC54eSwgaW5wdXRDbGFtcC56dykpXG4gKiBgYGBcbiAqIE9SXG4gKiBgYGBcbiAqIHZlYzQgY29sb3IgPSB0ZXh0dXJlMkQodVNhbXBsZXIsIG1pbihtb2RpZmlnZWRUZXh0dXJlQ29vcmQsIGlucHV0Q2xhbXAuencpKVxuICogYGBgXG4gKlxuICogIyMjIEFkZGl0aW9uYWwgSW5mb3JtYXRpb25cbiAqXG4gKiBDb21wbGV0ZSBkb2N1bWVudGF0aW9uIG9uIEZpbHRlciB1c2FnZSBpcyBsb2NhdGVkIGluIHRoZVxuICoge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9waXhpanMvcGl4aS5qcy93aWtpL3Y1LUNyZWF0aW5nLWZpbHRlcnMgV2lraX0uXG4gKlxuICogU2luY2UgUGl4aUpTIG9ubHkgaGFkIGEgaGFuZGZ1bCBvZiBidWlsdC1pbiBmaWx0ZXJzLCBhZGRpdGlvbmFsIGZpbHRlcnMgY2FuIGJlIGRvd25sb2FkZWRcbiAqIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vcGl4aWpzL3BpeGktZmlsdGVycyBoZXJlfSBmcm9tIHRoZSBQaXhpSlMgRmlsdGVycyByZXBvc2l0b3J5LlxuICogQG1lbWJlcm9mIFBJWElcbiAqL1xudmFyIEZpbHRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRmlsdGVyLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB2ZXJ0ZXhTcmMgLSBUaGUgc291cmNlIG9mIHRoZSB2ZXJ0ZXggc2hhZGVyLlxuICAgICAqIEBwYXJhbSBmcmFnbWVudFNyYyAtIFRoZSBzb3VyY2Ugb2YgdGhlIGZyYWdtZW50IHNoYWRlci5cbiAgICAgKiBAcGFyYW0gdW5pZm9ybXMgLSBDdXN0b20gdW5pZm9ybXMgdG8gdXNlIHRvIGF1Z21lbnQgdGhlIGJ1aWx0LWluIG9uZXMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gRmlsdGVyKHZlcnRleFNyYywgZnJhZ21lbnRTcmMsIHVuaWZvcm1zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBwcm9ncmFtID0gUHJvZ3JhbS5mcm9tKHZlcnRleFNyYyB8fCBGaWx0ZXIuZGVmYXVsdFZlcnRleFNyYywgZnJhZ21lbnRTcmMgfHwgRmlsdGVyLmRlZmF1bHRGcmFnbWVudFNyYyk7XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcHJvZ3JhbSwgdW5pZm9ybXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnBhZGRpbmcgPSAwO1xuICAgICAgICBfdGhpcy5yZXNvbHV0aW9uID0gc2V0dGluZ3Muc2V0dGluZ3MuRklMVEVSX1JFU09MVVRJT047XG4gICAgICAgIF90aGlzLm11bHRpc2FtcGxlID0gc2V0dGluZ3Muc2V0dGluZ3MuRklMVEVSX01VTFRJU0FNUExFO1xuICAgICAgICBfdGhpcy5lbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgX3RoaXMuYXV0b0ZpdCA9IHRydWU7XG4gICAgICAgIF90aGlzLnN0YXRlID0gbmV3IFN0YXRlKCk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyB0aGUgZmlsdGVyXG4gICAgICogQHBhcmFtIHtQSVhJLkZpbHRlclN5c3RlbX0gZmlsdGVyTWFuYWdlciAtIFRoZSByZW5kZXJlciB0byByZXRyaWV2ZSB0aGUgZmlsdGVyIGZyb21cbiAgICAgKiBAcGFyYW0ge1BJWEkuUmVuZGVyVGV4dHVyZX0gaW5wdXQgLSBUaGUgaW5wdXQgcmVuZGVyIHRhcmdldC5cbiAgICAgKiBAcGFyYW0ge1BJWEkuUmVuZGVyVGV4dHVyZX0gb3V0cHV0IC0gVGhlIHRhcmdldCB0byBvdXRwdXQgdG8uXG4gICAgICogQHBhcmFtIHtQSVhJLkNMRUFSX01PREVTfSBbY2xlYXJNb2RlXSAtIFNob3VsZCB0aGUgb3V0cHV0IGJlIGNsZWFyZWQgYmVmb3JlIHJlbmRlcmluZyB0byBpdC5cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gW19jdXJyZW50U3RhdGVdIC0gSXQncyBjdXJyZW50IHN0YXRlIG9mIGZpbHRlci5cbiAgICAgKiAgICAgICAgVGhlcmUgYXJlIHNvbWUgdXNlZnVsIHByb3BlcnRpZXMgaW4gdGhlIGN1cnJlbnRTdGF0ZSA6XG4gICAgICogICAgICAgIHRhcmdldCwgZmlsdGVycywgc291cmNlRnJhbWUsIGRlc3RpbmF0aW9uRnJhbWUsIHJlbmRlclRhcmdldCwgcmVzb2x1dGlvblxuICAgICAqL1xuICAgIEZpbHRlci5wcm90b3R5cGUuYXBwbHkgPSBmdW5jdGlvbiAoZmlsdGVyTWFuYWdlciwgaW5wdXQsIG91dHB1dCwgY2xlYXJNb2RlLCBfY3VycmVudFN0YXRlKSB7XG4gICAgICAgIC8vIGRvIGFzIHlvdSBwbGVhc2UhXG4gICAgICAgIGZpbHRlck1hbmFnZXIuYXBwbHlGaWx0ZXIodGhpcywgaW5wdXQsIG91dHB1dCwgY2xlYXJNb2RlKTtcbiAgICAgICAgLy8gb3IganVzdCBkbyBhIHJlZ3VsYXIgcmVuZGVyLi5cbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGaWx0ZXIucHJvdG90eXBlLCBcImJsZW5kTW9kZVwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXRzIHRoZSBibGVuZCBtb2RlIG9mIHRoZSBmaWx0ZXIuXG4gICAgICAgICAqIEBkZWZhdWx0IFBJWEkuQkxFTkRfTU9ERVMuTk9STUFMXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXRlLmJsZW5kTW9kZTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuYmxlbmRNb2RlID0gdmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRmlsdGVyLnByb3RvdHlwZSwgXCJyZXNvbHV0aW9uXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSByZXNvbHV0aW9uIG9mIHRoZSBmaWx0ZXIuIFNldHRpbmcgdGhpcyB0byBiZSBsb3dlciB3aWxsIGxvd2VyIHRoZSBxdWFsaXR5IGJ1dFxuICAgICAgICAgKiBpbmNyZWFzZSB0aGUgcGVyZm9ybWFuY2Ugb2YgdGhlIGZpbHRlci5cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Jlc29sdXRpb247XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLl9yZXNvbHV0aW9uID0gdmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRmlsdGVyLCBcImRlZmF1bHRWZXJ0ZXhTcmNcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGRlZmF1bHQgdmVydGV4IHNoYWRlciBzb3VyY2VcbiAgICAgICAgICogQGNvbnN0YW50XG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBkZWZhdWx0VmVydGV4JDI7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRmlsdGVyLCBcImRlZmF1bHRGcmFnbWVudFNyY1wiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgZGVmYXVsdCBmcmFnbWVudCBzaGFkZXIgc291cmNlXG4gICAgICAgICAqIEBjb25zdGFudFxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gZGVmYXVsdEZyYWdtZW50JDE7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gRmlsdGVyO1xufShTaGFkZXIpKTtcblxudmFyIHZlcnRleCA9IFwiYXR0cmlidXRlIHZlYzIgYVZlcnRleFBvc2l0aW9uO1xcbmF0dHJpYnV0ZSB2ZWMyIGFUZXh0dXJlQ29vcmQ7XFxuXFxudW5pZm9ybSBtYXQzIHByb2plY3Rpb25NYXRyaXg7XFxudW5pZm9ybSBtYXQzIG90aGVyTWF0cml4O1xcblxcbnZhcnlpbmcgdmVjMiB2TWFza0Nvb3JkO1xcbnZhcnlpbmcgdmVjMiB2VGV4dHVyZUNvb3JkO1xcblxcbnZvaWQgbWFpbih2b2lkKVxcbntcXG4gICAgZ2xfUG9zaXRpb24gPSB2ZWM0KChwcm9qZWN0aW9uTWF0cml4ICogdmVjMyhhVmVydGV4UG9zaXRpb24sIDEuMCkpLnh5LCAwLjAsIDEuMCk7XFxuXFxuICAgIHZUZXh0dXJlQ29vcmQgPSBhVGV4dHVyZUNvb3JkO1xcbiAgICB2TWFza0Nvb3JkID0gKCBvdGhlck1hdHJpeCAqIHZlYzMoIGFUZXh0dXJlQ29vcmQsIDEuMCkgICkueHk7XFxufVxcblwiO1xuXG52YXIgZnJhZ21lbnQgPSBcInZhcnlpbmcgdmVjMiB2TWFza0Nvb3JkO1xcbnZhcnlpbmcgdmVjMiB2VGV4dHVyZUNvb3JkO1xcblxcbnVuaWZvcm0gc2FtcGxlcjJEIHVTYW1wbGVyO1xcbnVuaWZvcm0gc2FtcGxlcjJEIG1hc2s7XFxudW5pZm9ybSBmbG9hdCBhbHBoYTtcXG51bmlmb3JtIGZsb2F0IG5wbUFscGhhO1xcbnVuaWZvcm0gdmVjNCBtYXNrQ2xhbXA7XFxuXFxudm9pZCBtYWluKHZvaWQpXFxue1xcbiAgICBmbG9hdCBjbGlwID0gc3RlcCgzLjUsXFxuICAgICAgICBzdGVwKG1hc2tDbGFtcC54LCB2TWFza0Nvb3JkLngpICtcXG4gICAgICAgIHN0ZXAobWFza0NsYW1wLnksIHZNYXNrQ29vcmQueSkgK1xcbiAgICAgICAgc3RlcCh2TWFza0Nvb3JkLngsIG1hc2tDbGFtcC56KSArXFxuICAgICAgICBzdGVwKHZNYXNrQ29vcmQueSwgbWFza0NsYW1wLncpKTtcXG5cXG4gICAgdmVjNCBvcmlnaW5hbCA9IHRleHR1cmUyRCh1U2FtcGxlciwgdlRleHR1cmVDb29yZCk7XFxuICAgIHZlYzQgbWFza3kgPSB0ZXh0dXJlMkQobWFzaywgdk1hc2tDb29yZCk7XFxuICAgIGZsb2F0IGFscGhhTXVsID0gMS4wIC0gbnBtQWxwaGEgKiAoMS4wIC0gbWFza3kuYSk7XFxuXFxuICAgIG9yaWdpbmFsICo9IChhbHBoYU11bCAqIG1hc2t5LnIgKiBhbHBoYSAqIGNsaXApO1xcblxcbiAgICBnbF9GcmFnQ29sb3IgPSBvcmlnaW5hbDtcXG59XFxuXCI7XG5cbnZhciB0ZW1wTWF0ID0gbmV3IG1hdGguTWF0cml4KCk7XG4vKipcbiAqIENsYXNzIGNvbnRyb2xzIHV2IG1hcHBpbmcgZnJvbSBUZXh0dXJlIG5vcm1hbCBzcGFjZSB0byBCYXNlVGV4dHVyZSBub3JtYWwgc3BhY2UuXG4gKlxuICogVGFrZXMgYHRyaW1gIGFuZCBgcm90YXRlYCBpbnRvIGFjY291bnQuIE1heSBjb250YWluIGNsYW1wIHNldHRpbmdzIGZvciBNZXNoZXMgYW5kIFRpbGluZ1Nwcml0ZS5cbiAqXG4gKiBDYW4gYmUgdXNlZCBpbiBUZXh0dXJlIGB1dk1hdHJpeGAgZmllbGQsIG9yIHNlcGFyYXRlbHksIHlvdSBjYW4gdXNlIGRpZmZlcmVudCBjbGFtcCBzZXR0aW5ncyBvbiB0aGUgc2FtZSB0ZXh0dXJlLlxuICogSWYgeW91IHdhbnQgdG8gYWRkIHN1cHBvcnQgZm9yIHRleHR1cmUgcmVnaW9uIG9mIGNlcnRhaW4gZmVhdHVyZSBvciBmaWx0ZXIsIHRoYXQncyB3aGF0IHlvdSdyZSBsb29raW5nIGZvci5cbiAqXG4gKiBUYWtlcyB0cmFjayBvZiBUZXh0dXJlIGNoYW5nZXMgdGhyb3VnaCBgX2xhc3RUZXh0dXJlSURgIHByaXZhdGUgZmllbGQuXG4gKiBVc2UgYHVwZGF0ZSgpYCBtZXRob2QgY2FsbCB0byB0cmFjayBpdCBmcm9tIG91dHNpZGUuXG4gKiBAc2VlIFBJWEkuVGV4dHVyZVxuICogQHNlZSBQSVhJLk1lc2hcbiAqIEBzZWUgUElYSS5UaWxpbmdTcHJpdGVcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKi9cbnZhciBUZXh0dXJlTWF0cml4ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB0ZXh0dXJlIC0gb2JzZXJ2ZWQgdGV4dHVyZVxuICAgICAqIEBwYXJhbSBjbGFtcE1hcmdpbiAtIENoYW5nZXMgZnJhbWUgY2xhbXBpbmcsIDAuNSBieSBkZWZhdWx0LiBVc2UgLTAuNSBmb3IgZXh0cmEgYm9yZGVyLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFRleHR1cmVNYXRyaXgodGV4dHVyZSwgY2xhbXBNYXJnaW4pIHtcbiAgICAgICAgdGhpcy5fdGV4dHVyZSA9IHRleHR1cmU7XG4gICAgICAgIHRoaXMubWFwQ29vcmQgPSBuZXcgbWF0aC5NYXRyaXgoKTtcbiAgICAgICAgdGhpcy51Q2xhbXBGcmFtZSA9IG5ldyBGbG9hdDMyQXJyYXkoNCk7XG4gICAgICAgIHRoaXMudUNsYW1wT2Zmc2V0ID0gbmV3IEZsb2F0MzJBcnJheSgyKTtcbiAgICAgICAgdGhpcy5fdGV4dHVyZUlEID0gLTE7XG4gICAgICAgIHRoaXMuX3VwZGF0ZUlEID0gMDtcbiAgICAgICAgdGhpcy5jbGFtcE9mZnNldCA9IDA7XG4gICAgICAgIHRoaXMuY2xhbXBNYXJnaW4gPSAodHlwZW9mIGNsYW1wTWFyZ2luID09PSAndW5kZWZpbmVkJykgPyAwLjUgOiBjbGFtcE1hcmdpbjtcbiAgICAgICAgdGhpcy5pc1NpbXBsZSA9IGZhbHNlO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVGV4dHVyZU1hdHJpeC5wcm90b3R5cGUsIFwidGV4dHVyZVwiLCB7XG4gICAgICAgIC8qKiBUZXh0dXJlIHByb3BlcnR5LiAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl90ZXh0dXJlO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5fdGV4dHVyZSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5fdGV4dHVyZUlEID0gLTE7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICAvKipcbiAgICAgKiBNdWx0aXBsaWVzIHV2cyBhcnJheSB0byB0cmFuc2Zvcm1cbiAgICAgKiBAcGFyYW0gdXZzIC0gbWVzaCB1dnNcbiAgICAgKiBAcGFyYW0gW291dD11dnNdIC0gb3V0cHV0XG4gICAgICogQHJldHVybnMgLSBvdXRwdXRcbiAgICAgKi9cbiAgICBUZXh0dXJlTWF0cml4LnByb3RvdHlwZS5tdWx0aXBseVV2cyA9IGZ1bmN0aW9uICh1dnMsIG91dCkge1xuICAgICAgICBpZiAob3V0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG91dCA9IHV2cztcbiAgICAgICAgfVxuICAgICAgICB2YXIgbWF0ID0gdGhpcy5tYXBDb29yZDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB1dnMubGVuZ3RoOyBpICs9IDIpIHtcbiAgICAgICAgICAgIHZhciB4ID0gdXZzW2ldO1xuICAgICAgICAgICAgdmFyIHkgPSB1dnNbaSArIDFdO1xuICAgICAgICAgICAgb3V0W2ldID0gKHggKiBtYXQuYSkgKyAoeSAqIG1hdC5jKSArIG1hdC50eDtcbiAgICAgICAgICAgIG91dFtpICsgMV0gPSAoeCAqIG1hdC5iKSArICh5ICogbWF0LmQpICsgbWF0LnR5O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIG1hdHJpY2VzIGlmIHRleHR1cmUgd2FzIGNoYW5nZWQuXG4gICAgICogQHBhcmFtIFtmb3JjZVVwZGF0ZT1mYWxzZV0gLSBpZiB0cnVlLCBtYXRyaWNlcyB3aWxsIGJlIHVwZGF0ZWQgYW55IGNhc2VcbiAgICAgKiBAcmV0dXJucyAtIFdoZXRoZXIgb3Igbm90IGl0IHdhcyB1cGRhdGVkXG4gICAgICovXG4gICAgVGV4dHVyZU1hdHJpeC5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGZvcmNlVXBkYXRlKSB7XG4gICAgICAgIHZhciB0ZXggPSB0aGlzLl90ZXh0dXJlO1xuICAgICAgICBpZiAoIXRleCB8fCAhdGV4LnZhbGlkKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFmb3JjZVVwZGF0ZVxuICAgICAgICAgICAgJiYgdGhpcy5fdGV4dHVyZUlEID09PSB0ZXguX3VwZGF0ZUlEKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fdGV4dHVyZUlEID0gdGV4Ll91cGRhdGVJRDtcbiAgICAgICAgdGhpcy5fdXBkYXRlSUQrKztcbiAgICAgICAgdmFyIHV2cyA9IHRleC5fdXZzO1xuICAgICAgICB0aGlzLm1hcENvb3JkLnNldCh1dnMueDEgLSB1dnMueDAsIHV2cy55MSAtIHV2cy55MCwgdXZzLngzIC0gdXZzLngwLCB1dnMueTMgLSB1dnMueTAsIHV2cy54MCwgdXZzLnkwKTtcbiAgICAgICAgdmFyIG9yaWcgPSB0ZXgub3JpZztcbiAgICAgICAgdmFyIHRyaW0gPSB0ZXgudHJpbTtcbiAgICAgICAgaWYgKHRyaW0pIHtcbiAgICAgICAgICAgIHRlbXBNYXQuc2V0KG9yaWcud2lkdGggLyB0cmltLndpZHRoLCAwLCAwLCBvcmlnLmhlaWdodCAvIHRyaW0uaGVpZ2h0LCAtdHJpbS54IC8gdHJpbS53aWR0aCwgLXRyaW0ueSAvIHRyaW0uaGVpZ2h0KTtcbiAgICAgICAgICAgIHRoaXMubWFwQ29vcmQuYXBwZW5kKHRlbXBNYXQpO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0ZXhCYXNlID0gdGV4LmJhc2VUZXh0dXJlO1xuICAgICAgICB2YXIgZnJhbWUgPSB0aGlzLnVDbGFtcEZyYW1lO1xuICAgICAgICB2YXIgbWFyZ2luID0gdGhpcy5jbGFtcE1hcmdpbiAvIHRleEJhc2UucmVzb2x1dGlvbjtcbiAgICAgICAgdmFyIG9mZnNldCA9IHRoaXMuY2xhbXBPZmZzZXQ7XG4gICAgICAgIGZyYW1lWzBdID0gKHRleC5fZnJhbWUueCArIG1hcmdpbiArIG9mZnNldCkgLyB0ZXhCYXNlLndpZHRoO1xuICAgICAgICBmcmFtZVsxXSA9ICh0ZXguX2ZyYW1lLnkgKyBtYXJnaW4gKyBvZmZzZXQpIC8gdGV4QmFzZS5oZWlnaHQ7XG4gICAgICAgIGZyYW1lWzJdID0gKHRleC5fZnJhbWUueCArIHRleC5fZnJhbWUud2lkdGggLSBtYXJnaW4gKyBvZmZzZXQpIC8gdGV4QmFzZS53aWR0aDtcbiAgICAgICAgZnJhbWVbM10gPSAodGV4Ll9mcmFtZS55ICsgdGV4Ll9mcmFtZS5oZWlnaHQgLSBtYXJnaW4gKyBvZmZzZXQpIC8gdGV4QmFzZS5oZWlnaHQ7XG4gICAgICAgIHRoaXMudUNsYW1wT2Zmc2V0WzBdID0gb2Zmc2V0IC8gdGV4QmFzZS5yZWFsV2lkdGg7XG4gICAgICAgIHRoaXMudUNsYW1wT2Zmc2V0WzFdID0gb2Zmc2V0IC8gdGV4QmFzZS5yZWFsSGVpZ2h0O1xuICAgICAgICB0aGlzLmlzU2ltcGxlID0gdGV4Ll9mcmFtZS53aWR0aCA9PT0gdGV4QmFzZS53aWR0aFxuICAgICAgICAgICAgJiYgdGV4Ll9mcmFtZS5oZWlnaHQgPT09IHRleEJhc2UuaGVpZ2h0XG4gICAgICAgICAgICAmJiB0ZXgucm90YXRlID09PSAwO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIHJldHVybiBUZXh0dXJlTWF0cml4O1xufSgpKTtcblxuLyoqXG4gKiBUaGlzIGhhbmRsZXMgYSBTcHJpdGUgYWN0aW5nIGFzIGEgbWFzaywgYXMgb3Bwb3NlZCB0byBhIEdyYXBoaWMuXG4gKlxuICogV2ViR0wgb25seS5cbiAqIEBtZW1iZXJvZiBQSVhJXG4gKi9cbnZhciBTcHJpdGVNYXNrRmlsdGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTcHJpdGVNYXNrRmlsdGVyLCBfc3VwZXIpO1xuICAgIC8qKiBAaWdub3JlICovXG4gICAgZnVuY3Rpb24gU3ByaXRlTWFza0ZpbHRlcih2ZXJ0ZXhTcmMsIGZyYWdtZW50U3JjLCB1bmlmb3Jtcykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgc3ByaXRlID0gbnVsbDtcbiAgICAgICAgaWYgKHR5cGVvZiB2ZXJ0ZXhTcmMgIT09ICdzdHJpbmcnICYmIGZyYWdtZW50U3JjID09PSB1bmRlZmluZWQgJiYgdW5pZm9ybXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc3ByaXRlID0gdmVydGV4U3JjO1xuICAgICAgICAgICAgdmVydGV4U3JjID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgZnJhZ21lbnRTcmMgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB1bmlmb3JtcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHZlcnRleFNyYyB8fCB2ZXJ0ZXgsIGZyYWdtZW50U3JjIHx8IGZyYWdtZW50LCB1bmlmb3JtcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMubWFza1Nwcml0ZSA9IHNwcml0ZTtcbiAgICAgICAgX3RoaXMubWFza01hdHJpeCA9IG5ldyBtYXRoLk1hdHJpeCgpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTcHJpdGVNYXNrRmlsdGVyLnByb3RvdHlwZSwgXCJtYXNrU3ByaXRlXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwcml0ZSBtYXNrXG4gICAgICAgICAqIEB0eXBlIHtQSVhJLkRpc3BsYXlPYmplY3R9XG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9tYXNrU3ByaXRlO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5fbWFza1Nwcml0ZSA9IHZhbHVlO1xuICAgICAgICAgICAgaWYgKHRoaXMuX21hc2tTcHJpdGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXNrU3ByaXRlLnJlbmRlcmFibGUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgdGhlIGZpbHRlclxuICAgICAqIEBwYXJhbSBmaWx0ZXJNYW5hZ2VyIC0gVGhlIHJlbmRlcmVyIHRvIHJldHJpZXZlIHRoZSBmaWx0ZXIgZnJvbVxuICAgICAqIEBwYXJhbSBpbnB1dCAtIFRoZSBpbnB1dCByZW5kZXIgdGFyZ2V0LlxuICAgICAqIEBwYXJhbSBvdXRwdXQgLSBUaGUgdGFyZ2V0IHRvIG91dHB1dCB0by5cbiAgICAgKiBAcGFyYW0gY2xlYXJNb2RlIC0gU2hvdWxkIHRoZSBvdXRwdXQgYmUgY2xlYXJlZCBiZWZvcmUgcmVuZGVyaW5nIHRvIGl0LlxuICAgICAqL1xuICAgIFNwcml0ZU1hc2tGaWx0ZXIucHJvdG90eXBlLmFwcGx5ID0gZnVuY3Rpb24gKGZpbHRlck1hbmFnZXIsIGlucHV0LCBvdXRwdXQsIGNsZWFyTW9kZSkge1xuICAgICAgICB2YXIgbWFza1Nwcml0ZSA9IHRoaXMuX21hc2tTcHJpdGU7XG4gICAgICAgIHZhciB0ZXggPSBtYXNrU3ByaXRlLl90ZXh0dXJlO1xuICAgICAgICBpZiAoIXRleC52YWxpZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGV4LnV2TWF0cml4KSB7XG4gICAgICAgICAgICAvLyBtYXJnaW4gPSAwLjAsIGxldCBpdCBibGVlZCBhIGJpdCwgc2hhZGVyIGNvZGUgYmVjb21lcyBlYXNpZXJcbiAgICAgICAgICAgIC8vIGFzc3VtaW5nIHRoYXQgYXRsYXMgdGV4dHVyZXMgd2VyZSBtYWRlIHdpdGggMS1waXhlbCBwYWRkaW5nXG4gICAgICAgICAgICB0ZXgudXZNYXRyaXggPSBuZXcgVGV4dHVyZU1hdHJpeCh0ZXgsIDAuMCk7XG4gICAgICAgIH1cbiAgICAgICAgdGV4LnV2TWF0cml4LnVwZGF0ZSgpO1xuICAgICAgICB0aGlzLnVuaWZvcm1zLm5wbUFscGhhID0gdGV4LmJhc2VUZXh0dXJlLmFscGhhTW9kZSA/IDAuMCA6IDEuMDtcbiAgICAgICAgdGhpcy51bmlmb3Jtcy5tYXNrID0gdGV4O1xuICAgICAgICAvLyBnZXQgX25vcm1hbGl6ZWQgc3ByaXRlIHRleHR1cmUgY29vcmRzXyBhbmQgY29udmVydCB0aGVtIHRvIF9ub3JtYWxpemVkIGF0bGFzIHRleHR1cmUgY29vcmRzXyB3aXRoIGBwcmVwZW5kYFxuICAgICAgICB0aGlzLnVuaWZvcm1zLm90aGVyTWF0cml4ID0gZmlsdGVyTWFuYWdlci5jYWxjdWxhdGVTcHJpdGVNYXRyaXgodGhpcy5tYXNrTWF0cml4LCBtYXNrU3ByaXRlKVxuICAgICAgICAgICAgLnByZXBlbmQodGV4LnV2TWF0cml4Lm1hcENvb3JkKTtcbiAgICAgICAgdGhpcy51bmlmb3Jtcy5hbHBoYSA9IG1hc2tTcHJpdGUud29ybGRBbHBoYTtcbiAgICAgICAgdGhpcy51bmlmb3Jtcy5tYXNrQ2xhbXAgPSB0ZXgudXZNYXRyaXgudUNsYW1wRnJhbWU7XG4gICAgICAgIGZpbHRlck1hbmFnZXIuYXBwbHlGaWx0ZXIodGhpcywgaW5wdXQsIG91dHB1dCwgY2xlYXJNb2RlKTtcbiAgICB9O1xuICAgIHJldHVybiBTcHJpdGVNYXNrRmlsdGVyO1xufShGaWx0ZXIpKTtcblxuLyoqXG4gKiBTeXN0ZW0gcGx1Z2luIHRvIHRoZSByZW5kZXJlciB0byBtYW5hZ2UgbWFza3MuXG4gKlxuICogVGhlcmUgYXJlIHRocmVlIGJ1aWx0LWluIHR5cGVzIG9mIG1hc2tpbmc6XG4gKiAqKlNjaXNzb3IgTWFza2luZyoqOiBTY2lzc29yIG1hc2tpbmcgZGlzY2FyZHMgcGl4ZWxzIHRoYXQgYXJlIG91dHNpZGUgb2YgYSByZWN0YW5nbGUgY2FsbGVkIHRoZSBzY2lzc29yIGJveC4gSXQgaXNcbiAqICB0aGUgbW9zdCBwZXJmb3JtYW50IGFzIHRoZSBzY2lzc29yIHRlc3QgaXMgaW5leHBlbnNpdmUuIEhvd2V2ZXIsIGl0IGNhbiBvbmx5IGJlIHVzZWQgd2hlbiB0aGUgbWFzayBpcyByZWN0YW5ndWxhci5cbiAqICoqU3RlbmNpbCBNYXNraW5nKio6IFN0ZW5jaWwgbWFza2luZyBkaXNjYXJkcyBwaXhlbHMgdGhhdCBkb24ndCBvdmVybGFwIHdpdGggdGhlIHBpeGVscyByZW5kZXJlZCBpbnRvIHRoZSBzdGVuY2lsXG4gKiAgYnVmZmVyLiBJdCBpcyB0aGUgbmV4dCBmYXN0ZXN0IG9wdGlvbiBhcyBpdCBkb2VzIG5vdCByZXF1aXJlIHJlbmRlcmluZyBpbnRvIGEgc2VwYXJhdGUgZnJhbWVidWZmZXIuIEhvd2V2ZXIsIGl0IGRvZXNcbiAqICBjYXVzZSB0aGUgbWFzayB0byBiZSByZW5kZXJlZCAqKnR3aWNlKiogZm9yIGVhY2ggbWFza2luZyBvcGVyYXRpb247IGhlbmNlLCBtaW5pbWl6ZSB0aGUgcmVuZGVyaW5nIGNvc3Qgb2YgeW91ciBtYXNrcy5cbiAqICoqU3ByaXRlIE1hc2sgRmlsdGVyaW5nKio6IFNwcml0ZSBtYXNrIGZpbHRlcmluZyBkaXNjYXJkcyBwaXhlbHMgYmFzZWQgb24gdGhlIHJlZCBjaGFubmVsIG9mIHRoZSBzcHJpdGUtbWFzaydzXG4gKiAgdGV4dHVyZS4gKEdlbmVyYWxseSwgdGhlIG1hc2tpbmcgdGV4dHVyZSBpcyBncmF5c2NhbGUpLiBVc2luZyBhZHZhbmNlZCB0ZWNobmlxdWVzLCB5b3UgbWlnaHQgYmUgYWJsZSB0byBlbWJlZCB0aGlzXG4gKiAgdHlwZSBvZiBtYXNraW5nIGluIGEgY3VzdG9tIHNoYWRlciAtIGFuZCBoZW5jZSwgYnlwYXNzaW5nIHRoZSBtYXNraW5nIHN5c3RlbSBmdWxseSBmb3IgcGVyZm9ybWFuY2Ugd2lucy5cbiAqXG4gKiBUaGUgYmVzdCB0eXBlIG9mIG1hc2tpbmcgaXMgYXV0by1kZXRlY3RlZCB3aGVuIHlvdSBgcHVzaGAgb25lLiBUbyB1c2Ugc2Npc3NvciBtYXNraW5nLCB5b3UgbXVzdCBwYXNzIGluIGEgYEdyYXBoaWNzYFxuICogb2JqZWN0IHdpdGgganVzdCBhIHJlY3RhbmdsZSBkcmF3bi5cbiAqXG4gKiAjIyBNYXNrIFN0YWNrc1xuICpcbiAqIEluIHRoZSBzY2VuZSBncmFwaCwgbWFza3MgY2FuIGJlIGFwcGxpZWQgcmVjdXJzaXZlbHksIGkuZS4gYSBtYXNrIGNhbiBiZSBhcHBsaWVkIGR1cmluZyBhIG1hc2tpbmcgb3BlcmF0aW9uLiBUaGUgbWFza1xuICogc3RhY2sgc3RvcmVzIHRoZSBjdXJyZW50bHkgYXBwbGllZCBtYXNrcyBpbiBvcmRlci4gRWFjaCB7QGxpbmsgUElYSS5CYXNlUmVuZGVyVGV4dHVyZX0gaG9sZHMgaXRzIG93biBtYXNrIHN0YWNrLCBpLmUuXG4gKiB3aGVuIHlvdSBzd2l0Y2ggcmVuZGVyLXRleHR1cmVzLCB0aGUgb2xkIG1hc2tzIG9ubHkgYXBwbGllZCB3aGVuIHlvdSBzd2l0Y2ggYmFjayB0byByZW5kZXJpbmcgdG8gdGhlIG9sZCByZW5kZXItdGFyZ2V0LlxuICogQG1lbWJlcm9mIFBJWElcbiAqL1xudmFyIE1hc2tTeXN0ZW0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHJlbmRlcmVyIC0gVGhlIHJlbmRlcmVyIHRoaXMgU3lzdGVtIHdvcmtzIGZvci5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBNYXNrU3lzdGVtKHJlbmRlcmVyKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgdGhpcy5lbmFibGVTY2lzc29yID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5hbHBoYU1hc2tQb29sID0gW107XG4gICAgICAgIHRoaXMubWFza0RhdGFQb29sID0gW107XG4gICAgICAgIHRoaXMubWFza1N0YWNrID0gW107XG4gICAgICAgIHRoaXMuYWxwaGFNYXNrSW5kZXggPSAwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGFuZ2VzIHRoZSBtYXNrIHN0YWNrIHRoYXQgaXMgdXNlZCBieSB0aGlzIFN5c3RlbS5cbiAgICAgKiBAcGFyYW0gbWFza1N0YWNrIC0gVGhlIG1hc2sgc3RhY2tcbiAgICAgKi9cbiAgICBNYXNrU3lzdGVtLnByb3RvdHlwZS5zZXRNYXNrU3RhY2sgPSBmdW5jdGlvbiAobWFza1N0YWNrKSB7XG4gICAgICAgIHRoaXMubWFza1N0YWNrID0gbWFza1N0YWNrO1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnNjaXNzb3Iuc2V0TWFza1N0YWNrKG1hc2tTdGFjayk7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuc3RlbmNpbC5zZXRNYXNrU3RhY2sobWFza1N0YWNrKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEVuYWJsZXMgdGhlIG1hc2sgYW5kIGFwcGVuZHMgaXQgdG8gdGhlIGN1cnJlbnQgbWFzayBzdGFjay5cbiAgICAgKlxuICAgICAqIE5PVEU6IFRoZSBiYXRjaCByZW5kZXJlciBzaG91bGQgYmUgZmx1c2hlZCBiZWZvcmVoYW5kIHRvIHByZXZlbnQgcGVuZGluZyByZW5kZXJzIGZyb20gYmVpbmcgbWFza2VkLlxuICAgICAqIEBwYXJhbSB7UElYSS5EaXNwbGF5T2JqZWN0fSB0YXJnZXQgLSBEaXNwbGF5IE9iamVjdCB0byBwdXNoIHRoZSBtYXNrIHRvXG4gICAgICogQHBhcmFtIHtQSVhJLk1hc2tEYXRhfFBJWEkuU3ByaXRlfFBJWEkuR3JhcGhpY3N8UElYSS5EaXNwbGF5T2JqZWN0fSBtYXNrRGF0YU9yVGFyZ2V0IC0gVGhlIG1hc2tpbmcgZGF0YS5cbiAgICAgKi9cbiAgICBNYXNrU3lzdGVtLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKHRhcmdldCwgbWFza0RhdGFPclRhcmdldCkge1xuICAgICAgICB2YXIgbWFza0RhdGEgPSBtYXNrRGF0YU9yVGFyZ2V0O1xuICAgICAgICBpZiAoIW1hc2tEYXRhLmlzTWFza0RhdGEpIHtcbiAgICAgICAgICAgIHZhciBkID0gdGhpcy5tYXNrRGF0YVBvb2wucG9wKCkgfHwgbmV3IE1hc2tEYXRhKCk7XG4gICAgICAgICAgICBkLnBvb2xlZCA9IHRydWU7XG4gICAgICAgICAgICBkLm1hc2tPYmplY3QgPSBtYXNrRGF0YU9yVGFyZ2V0O1xuICAgICAgICAgICAgbWFza0RhdGEgPSBkO1xuICAgICAgICB9XG4gICAgICAgIHZhciBtYXNrQWJvdmUgPSB0aGlzLm1hc2tTdGFjay5sZW5ndGggIT09IDAgPyB0aGlzLm1hc2tTdGFja1t0aGlzLm1hc2tTdGFjay5sZW5ndGggLSAxXSA6IG51bGw7XG4gICAgICAgIG1hc2tEYXRhLmNvcHlDb3VudGVyc09yUmVzZXQobWFza0Fib3ZlKTtcbiAgICAgICAgaWYgKG1hc2tEYXRhLmF1dG9EZXRlY3QpIHtcbiAgICAgICAgICAgIHRoaXMuZGV0ZWN0KG1hc2tEYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBtYXNrRGF0YS5fdGFyZ2V0ID0gdGFyZ2V0O1xuICAgICAgICBpZiAobWFza0RhdGEudHlwZSAhPT0gY29uc3RhbnRzLk1BU0tfVFlQRVMuU1BSSVRFKSB7XG4gICAgICAgICAgICB0aGlzLm1hc2tTdGFjay5wdXNoKG1hc2tEYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWFza0RhdGEuZW5hYmxlZCkge1xuICAgICAgICAgICAgc3dpdGNoIChtYXNrRGF0YS50eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBjb25zdGFudHMuTUFTS19UWVBFUy5TQ0lTU09SOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNjaXNzb3IucHVzaChtYXNrRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgY29uc3RhbnRzLk1BU0tfVFlQRVMuU1RFTkNJTDpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zdGVuY2lsLnB1c2gobWFza0RhdGEpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIGNvbnN0YW50cy5NQVNLX1RZUEVTLlNQUklURTpcbiAgICAgICAgICAgICAgICAgICAgbWFza0RhdGEuY29weUNvdW50ZXJzT3JSZXNldChudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wdXNoU3ByaXRlTWFzayhtYXNrRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChtYXNrRGF0YS50eXBlID09PSBjb25zdGFudHMuTUFTS19UWVBFUy5TUFJJVEUpIHtcbiAgICAgICAgICAgIHRoaXMubWFza1N0YWNrLnB1c2gobWFza0RhdGEpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBsYXN0IG1hc2sgZnJvbSB0aGUgbWFzayBzdGFjayBhbmQgZG9lc24ndCByZXR1cm4gaXQuXG4gICAgICpcbiAgICAgKiBOT1RFOiBUaGUgYmF0Y2ggcmVuZGVyZXIgc2hvdWxkIGJlIGZsdXNoZWQgYmVmb3JlaGFuZCB0byByZW5kZXIgdGhlIG1hc2tlZCBjb250ZW50cyBiZWZvcmUgdGhlIG1hc2sgaXMgcmVtb3ZlZC5cbiAgICAgKiBAcGFyYW0ge1BJWEkuSU1hc2tUYXJnZXR9IHRhcmdldCAtIERpc3BsYXkgT2JqZWN0IHRvIHBvcCB0aGUgbWFzayBmcm9tXG4gICAgICovXG4gICAgTWFza1N5c3RlbS5wcm90b3R5cGUucG9wID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICB2YXIgbWFza0RhdGEgPSB0aGlzLm1hc2tTdGFjay5wb3AoKTtcbiAgICAgICAgaWYgKCFtYXNrRGF0YSB8fCBtYXNrRGF0YS5fdGFyZ2V0ICE9PSB0YXJnZXQpIHtcbiAgICAgICAgICAgIC8vIFRPRE86IGFkZCBhbiBhc3NlcnQgd2hlbiB3ZSBoYXZlIGl0XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1hc2tEYXRhLmVuYWJsZWQpIHtcbiAgICAgICAgICAgIHN3aXRjaCAobWFza0RhdGEudHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgY29uc3RhbnRzLk1BU0tfVFlQRVMuU0NJU1NPUjpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zY2lzc29yLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIGNvbnN0YW50cy5NQVNLX1RZUEVTLlNURU5DSUw6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc3RlbmNpbC5wb3AobWFza0RhdGEubWFza09iamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgY29uc3RhbnRzLk1BU0tfVFlQRVMuU1BSSVRFOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBvcFNwcml0ZU1hc2sobWFza0RhdGEpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBtYXNrRGF0YS5yZXNldCgpO1xuICAgICAgICBpZiAobWFza0RhdGEucG9vbGVkKSB7XG4gICAgICAgICAgICB0aGlzLm1hc2tEYXRhUG9vbC5wdXNoKG1hc2tEYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tYXNrU3RhY2subGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICB2YXIgbWFza0N1cnJlbnQgPSB0aGlzLm1hc2tTdGFja1t0aGlzLm1hc2tTdGFjay5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIGlmIChtYXNrQ3VycmVudC50eXBlID09PSBjb25zdGFudHMuTUFTS19UWVBFUy5TUFJJVEUgJiYgbWFza0N1cnJlbnQuX2ZpbHRlcnMpIHtcbiAgICAgICAgICAgICAgICBtYXNrQ3VycmVudC5fZmlsdGVyc1swXS5tYXNrU3ByaXRlID0gbWFza0N1cnJlbnQubWFza09iamVjdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0cyB0eXBlIG9mIE1hc2tEYXRhIGJhc2VkIG9uIGl0cyBtYXNrT2JqZWN0LlxuICAgICAqIEBwYXJhbSBtYXNrRGF0YVxuICAgICAqL1xuICAgIE1hc2tTeXN0ZW0ucHJvdG90eXBlLmRldGVjdCA9IGZ1bmN0aW9uIChtYXNrRGF0YSkge1xuICAgICAgICB2YXIgbWFza09iamVjdCA9IG1hc2tEYXRhLm1hc2tPYmplY3Q7XG4gICAgICAgIGlmIChtYXNrT2JqZWN0LmlzU3ByaXRlKSB7XG4gICAgICAgICAgICBtYXNrRGF0YS50eXBlID0gY29uc3RhbnRzLk1BU0tfVFlQRVMuU1BSSVRFO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZW5hYmxlU2Npc3NvciAmJiB0aGlzLnJlbmRlcmVyLnNjaXNzb3IudGVzdFNjaXNzb3IobWFza0RhdGEpKSB7XG4gICAgICAgICAgICBtYXNrRGF0YS50eXBlID0gY29uc3RhbnRzLk1BU0tfVFlQRVMuU0NJU1NPUjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG1hc2tEYXRhLnR5cGUgPSBjb25zdGFudHMuTUFTS19UWVBFUy5TVEVOQ0lMO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIHRoZSBNYXNrIGFuZCBhZGRzIGl0IHRvIHRoZSBjdXJyZW50IGZpbHRlciBzdGFjay5cbiAgICAgKiBAcGFyYW0gbWFza0RhdGEgLSBTcHJpdGUgdG8gYmUgdXNlZCBhcyB0aGUgbWFzay5cbiAgICAgKi9cbiAgICBNYXNrU3lzdGVtLnByb3RvdHlwZS5wdXNoU3ByaXRlTWFzayA9IGZ1bmN0aW9uIChtYXNrRGF0YSkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICB2YXIgbWFza09iamVjdCA9IG1hc2tEYXRhLm1hc2tPYmplY3Q7XG4gICAgICAgIHZhciB0YXJnZXQgPSBtYXNrRGF0YS5fdGFyZ2V0O1xuICAgICAgICB2YXIgYWxwaGFNYXNrRmlsdGVyID0gbWFza0RhdGEuX2ZpbHRlcnM7XG4gICAgICAgIGlmICghYWxwaGFNYXNrRmlsdGVyKSB7XG4gICAgICAgICAgICBhbHBoYU1hc2tGaWx0ZXIgPSB0aGlzLmFscGhhTWFza1Bvb2xbdGhpcy5hbHBoYU1hc2tJbmRleF07XG4gICAgICAgICAgICBpZiAoIWFscGhhTWFza0ZpbHRlcikge1xuICAgICAgICAgICAgICAgIGFscGhhTWFza0ZpbHRlciA9IHRoaXMuYWxwaGFNYXNrUG9vbFt0aGlzLmFscGhhTWFza0luZGV4XSA9IFtuZXcgU3ByaXRlTWFza0ZpbHRlcigpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgcmVuZGVyZXIgPSB0aGlzLnJlbmRlcmVyO1xuICAgICAgICB2YXIgcmVuZGVyVGV4dHVyZVN5c3RlbSA9IHJlbmRlcmVyLnJlbmRlclRleHR1cmU7XG4gICAgICAgIHZhciByZXNvbHV0aW9uO1xuICAgICAgICB2YXIgbXVsdGlzYW1wbGU7XG4gICAgICAgIGlmIChyZW5kZXJUZXh0dXJlU3lzdGVtLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIHZhciByZW5kZXJUZXh0dXJlID0gcmVuZGVyVGV4dHVyZVN5c3RlbS5jdXJyZW50O1xuICAgICAgICAgICAgcmVzb2x1dGlvbiA9IG1hc2tEYXRhLnJlc29sdXRpb24gfHwgcmVuZGVyVGV4dHVyZS5yZXNvbHV0aW9uO1xuICAgICAgICAgICAgbXVsdGlzYW1wbGUgPSAoX2EgPSBtYXNrRGF0YS5tdWx0aXNhbXBsZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogcmVuZGVyVGV4dHVyZS5tdWx0aXNhbXBsZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlc29sdXRpb24gPSBtYXNrRGF0YS5yZXNvbHV0aW9uIHx8IHJlbmRlcmVyLnJlc29sdXRpb247XG4gICAgICAgICAgICBtdWx0aXNhbXBsZSA9IChfYiA9IG1hc2tEYXRhLm11bHRpc2FtcGxlKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiByZW5kZXJlci5tdWx0aXNhbXBsZTtcbiAgICAgICAgfVxuICAgICAgICBhbHBoYU1hc2tGaWx0ZXJbMF0ucmVzb2x1dGlvbiA9IHJlc29sdXRpb247XG4gICAgICAgIGFscGhhTWFza0ZpbHRlclswXS5tdWx0aXNhbXBsZSA9IG11bHRpc2FtcGxlO1xuICAgICAgICBhbHBoYU1hc2tGaWx0ZXJbMF0ubWFza1Nwcml0ZSA9IG1hc2tPYmplY3Q7XG4gICAgICAgIHZhciBzdGFzaEZpbHRlckFyZWEgPSB0YXJnZXQuZmlsdGVyQXJlYTtcbiAgICAgICAgdGFyZ2V0LmZpbHRlckFyZWEgPSBtYXNrT2JqZWN0LmdldEJvdW5kcyh0cnVlKTtcbiAgICAgICAgcmVuZGVyZXIuZmlsdGVyLnB1c2godGFyZ2V0LCBhbHBoYU1hc2tGaWx0ZXIpO1xuICAgICAgICB0YXJnZXQuZmlsdGVyQXJlYSA9IHN0YXNoRmlsdGVyQXJlYTtcbiAgICAgICAgaWYgKCFtYXNrRGF0YS5fZmlsdGVycykge1xuICAgICAgICAgICAgdGhpcy5hbHBoYU1hc2tJbmRleCsrO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBsYXN0IGZpbHRlciBmcm9tIHRoZSBmaWx0ZXIgc3RhY2sgYW5kIGRvZXNuJ3QgcmV0dXJuIGl0LlxuICAgICAqIEBwYXJhbSBtYXNrRGF0YSAtIFNwcml0ZSB0byBiZSB1c2VkIGFzIHRoZSBtYXNrLlxuICAgICAqL1xuICAgIE1hc2tTeXN0ZW0ucHJvdG90eXBlLnBvcFNwcml0ZU1hc2sgPSBmdW5jdGlvbiAobWFza0RhdGEpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5maWx0ZXIucG9wKCk7XG4gICAgICAgIGlmIChtYXNrRGF0YS5fZmlsdGVycykge1xuICAgICAgICAgICAgbWFza0RhdGEuX2ZpbHRlcnNbMF0ubWFza1Nwcml0ZSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmFscGhhTWFza0luZGV4LS07XG4gICAgICAgICAgICB0aGlzLmFscGhhTWFza1Bvb2xbdGhpcy5hbHBoYU1hc2tJbmRleF1bMF0ubWFza1Nwcml0ZSA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE1hc2tTeXN0ZW0ucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSBudWxsO1xuICAgIH07XG4gICAgcmV0dXJuIE1hc2tTeXN0ZW07XG59KCkpO1xuXG4vKipcbiAqIFN5c3RlbSBwbHVnaW4gdG8gdGhlIHJlbmRlcmVyIHRvIG1hbmFnZSBzcGVjaWZpYyB0eXBlcyBvZiBtYXNraW5nIG9wZXJhdGlvbnMuXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG52YXIgQWJzdHJhY3RNYXNrU3lzdGVtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSByZW5kZXJlciAtIFRoZSByZW5kZXJlciB0aGlzIFN5c3RlbSB3b3JrcyBmb3IuXG4gICAgICovXG4gICAgZnVuY3Rpb24gQWJzdHJhY3RNYXNrU3lzdGVtKHJlbmRlcmVyKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgdGhpcy5tYXNrU3RhY2sgPSBbXTtcbiAgICAgICAgdGhpcy5nbENvbnN0ID0gMDtcbiAgICB9XG4gICAgLyoqIEdldHMgY291bnQgb2YgbWFza3Mgb2YgY2VydGFpbiB0eXBlLiAqL1xuICAgIEFic3RyYWN0TWFza1N5c3RlbS5wcm90b3R5cGUuZ2V0U3RhY2tMZW5ndGggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hc2tTdGFjay5sZW5ndGg7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDaGFuZ2VzIHRoZSBtYXNrIHN0YWNrIHRoYXQgaXMgdXNlZCBieSB0aGlzIFN5c3RlbS5cbiAgICAgKiBAcGFyYW0ge1BJWEkuTWFza0RhdGFbXX0gbWFza1N0YWNrIC0gVGhlIG1hc2sgc3RhY2tcbiAgICAgKi9cbiAgICBBYnN0cmFjdE1hc2tTeXN0ZW0ucHJvdG90eXBlLnNldE1hc2tTdGFjayA9IGZ1bmN0aW9uIChtYXNrU3RhY2spIHtcbiAgICAgICAgdmFyIGdsID0gdGhpcy5yZW5kZXJlci5nbDtcbiAgICAgICAgdmFyIGN1clN0YWNrTGVuID0gdGhpcy5nZXRTdGFja0xlbmd0aCgpO1xuICAgICAgICB0aGlzLm1hc2tTdGFjayA9IG1hc2tTdGFjaztcbiAgICAgICAgdmFyIG5ld1N0YWNrTGVuID0gdGhpcy5nZXRTdGFja0xlbmd0aCgpO1xuICAgICAgICBpZiAobmV3U3RhY2tMZW4gIT09IGN1clN0YWNrTGVuKSB7XG4gICAgICAgICAgICBpZiAobmV3U3RhY2tMZW4gPT09IDApIHtcbiAgICAgICAgICAgICAgICBnbC5kaXNhYmxlKHRoaXMuZ2xDb25zdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBnbC5lbmFibGUodGhpcy5nbENvbnN0KTtcbiAgICAgICAgICAgICAgICB0aGlzLl91c2VDdXJyZW50KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHVwIHJlbmRlcmVyIHRvIHVzZSB0aGUgY3VycmVudCBtYXNrIGRhdGEuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBBYnN0cmFjdE1hc2tTeXN0ZW0ucHJvdG90eXBlLl91c2VDdXJyZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBPVkVSV1JJVEU7XG4gICAgfTtcbiAgICAvKiogRGVzdHJveXMgdGhlIG1hc2sgc3RhY2suICovXG4gICAgQWJzdHJhY3RNYXNrU3lzdGVtLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5tYXNrU3RhY2sgPSBudWxsO1xuICAgIH07XG4gICAgcmV0dXJuIEFic3RyYWN0TWFza1N5c3RlbTtcbn0oKSk7XG5cbnZhciB0ZW1wTWF0cml4JDEgPSBuZXcgbWF0aC5NYXRyaXgoKTtcbi8qKlxuICogU3lzdGVtIHBsdWdpbiB0byB0aGUgcmVuZGVyZXIgdG8gbWFuYWdlIHNjaXNzb3IgbWFza2luZy5cbiAqXG4gKiBTY2lzc29yIG1hc2tpbmcgZGlzY2FyZHMgcGl4ZWxzIG91dHNpZGUgb2YgYSByZWN0YW5nbGUgY2FsbGVkIHRoZSBzY2lzc29yIGJveC4gVGhlIHNjaXNzb3IgYm94IGlzIGluIHRoZSBmcmFtZWJ1ZmZlclxuICogdmlld3BvcnQncyBzcGFjZTsgaG93ZXZlciwgdGhlIG1hc2sncyByZWN0YW5nbGUgaXMgcHJvamVjdGVkIGZyb20gd29ybGQtc3BhY2UgdG8gdmlld3BvcnQgc3BhY2UgYXV0b21hdGljYWxseVxuICogYnkgdGhpcyBzeXN0ZW0uXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG52YXIgU2Npc3NvclN5c3RlbSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU2Npc3NvclN5c3RlbSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1BJWEkuUmVuZGVyZXJ9IHJlbmRlcmVyIC0gVGhlIHJlbmRlcmVyIHRoaXMgU3lzdGVtIHdvcmtzIGZvci5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBTY2lzc29yU3lzdGVtKHJlbmRlcmVyKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHJlbmRlcmVyKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5nbENvbnN0ID0gV2ViR0xSZW5kZXJpbmdDb250ZXh0LlNDSVNTT1JfVEVTVDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBTY2lzc29yU3lzdGVtLnByb3RvdHlwZS5nZXRTdGFja0xlbmd0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG1hc2tEYXRhID0gdGhpcy5tYXNrU3RhY2tbdGhpcy5tYXNrU3RhY2subGVuZ3RoIC0gMV07XG4gICAgICAgIGlmIChtYXNrRGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuIG1hc2tEYXRhLl9zY2lzc29yQ291bnRlcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIGV2YWx1YXRlcyBfYm91bmRzVHJhbnNmb3JtZWQsIF9zY2lzc29yUmVjdCBmb3IgTWFza0RhdGFcbiAgICAgKiBAcGFyYW0gbWFza0RhdGFcbiAgICAgKi9cbiAgICBTY2lzc29yU3lzdGVtLnByb3RvdHlwZS5jYWxjU2Npc3NvclJlY3QgPSBmdW5jdGlvbiAobWFza0RhdGEpIHtcbiAgICAgICAgaWYgKG1hc2tEYXRhLl9zY2lzc29yUmVjdExvY2FsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHByZXZEYXRhID0gbWFza0RhdGEuX3NjaXNzb3JSZWN0O1xuICAgICAgICB2YXIgbWFza09iamVjdCA9IG1hc2tEYXRhLm1hc2tPYmplY3Q7XG4gICAgICAgIHZhciByZW5kZXJlciA9IHRoaXMucmVuZGVyZXI7XG4gICAgICAgIHZhciByZW5kZXJUZXh0dXJlU3lzdGVtID0gcmVuZGVyZXIucmVuZGVyVGV4dHVyZTtcbiAgICAgICAgbWFza09iamVjdC5yZW5kZXJhYmxlID0gdHJ1ZTtcbiAgICAgICAgdmFyIHJlY3QgPSBtYXNrT2JqZWN0LmdldEJvdW5kcygpO1xuICAgICAgICB0aGlzLnJvdW5kRnJhbWVUb1BpeGVscyhyZWN0LCByZW5kZXJUZXh0dXJlU3lzdGVtLmN1cnJlbnQgPyByZW5kZXJUZXh0dXJlU3lzdGVtLmN1cnJlbnQucmVzb2x1dGlvbiA6IHJlbmRlcmVyLnJlc29sdXRpb24sIHJlbmRlclRleHR1cmVTeXN0ZW0uc291cmNlRnJhbWUsIHJlbmRlclRleHR1cmVTeXN0ZW0uZGVzdGluYXRpb25GcmFtZSwgcmVuZGVyZXIucHJvamVjdGlvbi50cmFuc2Zvcm0pO1xuICAgICAgICBtYXNrT2JqZWN0LnJlbmRlcmFibGUgPSBmYWxzZTtcbiAgICAgICAgaWYgKHByZXZEYXRhKSB7XG4gICAgICAgICAgICByZWN0LmZpdChwcmV2RGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgbWFza0RhdGEuX3NjaXNzb3JSZWN0TG9jYWwgPSByZWN0O1xuICAgIH07XG4gICAgU2Npc3NvclN5c3RlbS5pc01hdHJpeFJvdGF0ZWQgPSBmdW5jdGlvbiAobWF0cml4KSB7XG4gICAgICAgIGlmICghbWF0cml4KSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGEgPSBtYXRyaXguYSwgYiA9IG1hdHJpeC5iLCBjID0gbWF0cml4LmMsIGQgPSBtYXRyaXguZDtcbiAgICAgICAgLy8gU2tpcCBpZiBza2V3L3JvdGF0aW9uIHByZXNlbnQgaW4gbWF0cml4LCBleGNlcHQgZm9yIG11bHRpcGxlIG9mIDkwwrAgcm90YXRpb24uIElmIHJvdGF0aW9uXG4gICAgICAgIC8vIGlzIGEgbXVsdGlwbGUgb2YgOTDCsCwgdGhlbiBlaXRoZXIgcGFpciBvZiAoYixjKSBvciAoYSxkKSB3aWxsIGJlICgwLDApLlxuICAgICAgICByZXR1cm4gKChNYXRoLmFicyhiKSA+IDFlLTQgfHwgTWF0aC5hYnMoYykgPiAxZS00KVxuICAgICAgICAgICAgJiYgKE1hdGguYWJzKGEpID4gMWUtNCB8fCBNYXRoLmFicyhkKSA+IDFlLTQpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRlc3QsIHdoZXRoZXIgdGhlIG9iamVjdCBjYW4gYmUgc2Npc3NvciBtYXNrIHdpdGggY3VycmVudCByZW5kZXJlciBwcm9qZWN0aW9uLlxuICAgICAqIENhbGxzIFwiY2FsY1NjaXNzb3JSZWN0KClcIiBpZiBpdHMgdHJ1ZS5cbiAgICAgKiBAcGFyYW0gbWFza0RhdGEgLSBtYXNrIGRhdGFcbiAgICAgKiBAcmV0dXJucyB3aGV0aGVyIFdoZXRoZXIgdGhlIG9iamVjdCBjYW4gYmUgc2Npc3NvciBtYXNrXG4gICAgICovXG4gICAgU2Npc3NvclN5c3RlbS5wcm90b3R5cGUudGVzdFNjaXNzb3IgPSBmdW5jdGlvbiAobWFza0RhdGEpIHtcbiAgICAgICAgdmFyIG1hc2tPYmplY3QgPSBtYXNrRGF0YS5tYXNrT2JqZWN0O1xuICAgICAgICBpZiAoIW1hc2tPYmplY3QuaXNGYXN0UmVjdCB8fCAhbWFza09iamVjdC5pc0Zhc3RSZWN0KCkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoU2Npc3NvclN5c3RlbS5pc01hdHJpeFJvdGF0ZWQobWFza09iamVjdC53b3JsZFRyYW5zZm9ybSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoU2Npc3NvclN5c3RlbS5pc01hdHJpeFJvdGF0ZWQodGhpcy5yZW5kZXJlci5wcm9qZWN0aW9uLnRyYW5zZm9ybSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNhbGNTY2lzc29yUmVjdChtYXNrRGF0YSk7XG4gICAgICAgIHZhciByZWN0ID0gbWFza0RhdGEuX3NjaXNzb3JSZWN0TG9jYWw7XG4gICAgICAgIHJldHVybiByZWN0LndpZHRoID4gMCAmJiByZWN0LmhlaWdodCA+IDA7XG4gICAgfTtcbiAgICBTY2lzc29yU3lzdGVtLnByb3RvdHlwZS5yb3VuZEZyYW1lVG9QaXhlbHMgPSBmdW5jdGlvbiAoZnJhbWUsIHJlc29sdXRpb24sIGJpbmRpbmdTb3VyY2VGcmFtZSwgYmluZGluZ0Rlc3RpbmF0aW9uRnJhbWUsIHRyYW5zZm9ybSkge1xuICAgICAgICBpZiAoU2Npc3NvclN5c3RlbS5pc01hdHJpeFJvdGF0ZWQodHJhbnNmb3JtKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRyYW5zZm9ybSA9IHRyYW5zZm9ybSA/IHRlbXBNYXRyaXgkMS5jb3B5RnJvbSh0cmFuc2Zvcm0pIDogdGVtcE1hdHJpeCQxLmlkZW50aXR5KCk7XG4gICAgICAgIC8vIEdldCBmb3J3YXJkIHRyYW5zZm9ybSBmcm9tIHdvcmxkIHNwYWNlIHRvIHNjcmVlbiBzcGFjZVxuICAgICAgICB0cmFuc2Zvcm1cbiAgICAgICAgICAgIC50cmFuc2xhdGUoLWJpbmRpbmdTb3VyY2VGcmFtZS54LCAtYmluZGluZ1NvdXJjZUZyYW1lLnkpXG4gICAgICAgICAgICAuc2NhbGUoYmluZGluZ0Rlc3RpbmF0aW9uRnJhbWUud2lkdGggLyBiaW5kaW5nU291cmNlRnJhbWUud2lkdGgsIGJpbmRpbmdEZXN0aW5hdGlvbkZyYW1lLmhlaWdodCAvIGJpbmRpbmdTb3VyY2VGcmFtZS5oZWlnaHQpXG4gICAgICAgICAgICAudHJhbnNsYXRlKGJpbmRpbmdEZXN0aW5hdGlvbkZyYW1lLngsIGJpbmRpbmdEZXN0aW5hdGlvbkZyYW1lLnkpO1xuICAgICAgICAvLyBDb252ZXJ0IGZyYW1lIHRvIHNjcmVlbiBzcGFjZVxuICAgICAgICB0aGlzLnJlbmRlcmVyLmZpbHRlci50cmFuc2Zvcm1BQUJCKHRyYW5zZm9ybSwgZnJhbWUpO1xuICAgICAgICBmcmFtZS5maXQoYmluZGluZ0Rlc3RpbmF0aW9uRnJhbWUpO1xuICAgICAgICBmcmFtZS54ID0gTWF0aC5yb3VuZChmcmFtZS54ICogcmVzb2x1dGlvbik7XG4gICAgICAgIGZyYW1lLnkgPSBNYXRoLnJvdW5kKGZyYW1lLnkgKiByZXNvbHV0aW9uKTtcbiAgICAgICAgZnJhbWUud2lkdGggPSBNYXRoLnJvdW5kKGZyYW1lLndpZHRoICogcmVzb2x1dGlvbik7XG4gICAgICAgIGZyYW1lLmhlaWdodCA9IE1hdGgucm91bmQoZnJhbWUuaGVpZ2h0ICogcmVzb2x1dGlvbik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIHRoZSBNYXNrIGFuZCBhZGRzIGl0IHRvIHRoZSBjdXJyZW50IHN0ZW5jaWwgc3RhY2suXG4gICAgICogQGF1dGhvciBhbHZpblxuICAgICAqIEBwYXJhbSBtYXNrRGF0YSAtIFRoZSBtYXNrIGRhdGEuXG4gICAgICovXG4gICAgU2Npc3NvclN5c3RlbS5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uIChtYXNrRGF0YSkge1xuICAgICAgICBpZiAoIW1hc2tEYXRhLl9zY2lzc29yUmVjdExvY2FsKSB7XG4gICAgICAgICAgICB0aGlzLmNhbGNTY2lzc29yUmVjdChtYXNrRGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGdsID0gdGhpcy5yZW5kZXJlci5nbDtcbiAgICAgICAgaWYgKCFtYXNrRGF0YS5fc2Npc3NvclJlY3QpIHtcbiAgICAgICAgICAgIGdsLmVuYWJsZShnbC5TQ0lTU09SX1RFU1QpO1xuICAgICAgICB9XG4gICAgICAgIG1hc2tEYXRhLl9zY2lzc29yQ291bnRlcisrO1xuICAgICAgICBtYXNrRGF0YS5fc2Npc3NvclJlY3QgPSBtYXNrRGF0YS5fc2Npc3NvclJlY3RMb2NhbDtcbiAgICAgICAgdGhpcy5fdXNlQ3VycmVudCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVGhpcyBzaG91bGQgYmUgY2FsbGVkIGFmdGVyIGEgbWFzayBpcyBwb3BwZWQgb2ZmIHRoZSBtYXNrIHN0YWNrLiBJdCB3aWxsIHJlYmluZCB0aGUgc2Npc3NvciBib3ggdG8gYmUgbGF0ZXN0IHdpdGggdGhlXG4gICAgICogbGFzdCBtYXNrIGluIHRoZSBzdGFjay5cbiAgICAgKlxuICAgICAqIFRoaXMgY2FuIGFsc28gYmUgY2FsbGVkIHdoZW4geW91IGRpcmVjdGx5IG1vZGlmeSB0aGUgc2Npc3NvciBib3ggYW5kIHdhbnQgdG8gcmVzdG9yZSBQaXhpSlMgc3RhdGUuXG4gICAgICovXG4gICAgU2Npc3NvclN5c3RlbS5wcm90b3R5cGUucG9wID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZ2wgPSB0aGlzLnJlbmRlcmVyLmdsO1xuICAgICAgICBpZiAodGhpcy5nZXRTdGFja0xlbmd0aCgpID4gMCkge1xuICAgICAgICAgICAgdGhpcy5fdXNlQ3VycmVudCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZ2wuZGlzYWJsZShnbC5TQ0lTU09SX1RFU1QpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXR1cCByZW5kZXJlciB0byB1c2UgdGhlIGN1cnJlbnQgc2Npc3NvciBkYXRhLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgU2Npc3NvclN5c3RlbS5wcm90b3R5cGUuX3VzZUN1cnJlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByZWN0ID0gdGhpcy5tYXNrU3RhY2tbdGhpcy5tYXNrU3RhY2subGVuZ3RoIC0gMV0uX3NjaXNzb3JSZWN0O1xuICAgICAgICB2YXIgeTtcbiAgICAgICAgaWYgKHRoaXMucmVuZGVyZXIucmVuZGVyVGV4dHVyZS5jdXJyZW50KSB7XG4gICAgICAgICAgICB5ID0gcmVjdC55O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gZmxpcFkuIEluIGZ1dHVyZSB3ZSdsbCBoYXZlIGl0IG92ZXIgcmVuZGVyVGV4dHVyZXMgYXMgYW4gb3B0aW9uXG4gICAgICAgICAgICB5ID0gdGhpcy5yZW5kZXJlci5oZWlnaHQgLSByZWN0LmhlaWdodCAtIHJlY3QueTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbmRlcmVyLmdsLnNjaXNzb3IocmVjdC54LCB5LCByZWN0LndpZHRoLCByZWN0LmhlaWdodCk7XG4gICAgfTtcbiAgICByZXR1cm4gU2Npc3NvclN5c3RlbTtcbn0oQWJzdHJhY3RNYXNrU3lzdGVtKSk7XG5cbi8qKlxuICogU3lzdGVtIHBsdWdpbiB0byB0aGUgcmVuZGVyZXIgdG8gbWFuYWdlIHN0ZW5jaWxzICh1c2VkIGZvciBtYXNrcykuXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG52YXIgU3RlbmNpbFN5c3RlbSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3RlbmNpbFN5c3RlbSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gcmVuZGVyZXIgLSBUaGUgcmVuZGVyZXIgdGhpcyBTeXN0ZW0gd29ya3MgZm9yLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFN0ZW5jaWxTeXN0ZW0ocmVuZGVyZXIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcmVuZGVyZXIpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLmdsQ29uc3QgPSBXZWJHTFJlbmRlcmluZ0NvbnRleHQuU1RFTkNJTF9URVNUO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIFN0ZW5jaWxTeXN0ZW0ucHJvdG90eXBlLmdldFN0YWNrTGVuZ3RoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbWFza0RhdGEgPSB0aGlzLm1hc2tTdGFja1t0aGlzLm1hc2tTdGFjay5sZW5ndGggLSAxXTtcbiAgICAgICAgaWYgKG1hc2tEYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gbWFza0RhdGEuX3N0ZW5jaWxDb3VudGVyO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQXBwbGllcyB0aGUgTWFzayBhbmQgYWRkcyBpdCB0byB0aGUgY3VycmVudCBzdGVuY2lsIHN0YWNrLlxuICAgICAqIEBwYXJhbSBtYXNrRGF0YSAtIFRoZSBtYXNrIGRhdGFcbiAgICAgKi9cbiAgICBTdGVuY2lsU3lzdGVtLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKG1hc2tEYXRhKSB7XG4gICAgICAgIHZhciBtYXNrT2JqZWN0ID0gbWFza0RhdGEubWFza09iamVjdDtcbiAgICAgICAgdmFyIGdsID0gdGhpcy5yZW5kZXJlci5nbDtcbiAgICAgICAgdmFyIHByZXZNYXNrQ291bnQgPSBtYXNrRGF0YS5fc3RlbmNpbENvdW50ZXI7XG4gICAgICAgIGlmIChwcmV2TWFza0NvdW50ID09PSAwKSB7XG4gICAgICAgICAgICAvLyBmb3JjZSB1c2Ugc3RlbmNpbCB0ZXh0dXJlIGluIGN1cnJlbnQgZnJhbWVidWZmZXJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuZnJhbWVidWZmZXIuZm9yY2VTdGVuY2lsKCk7XG4gICAgICAgICAgICBnbC5jbGVhclN0ZW5jaWwoMCk7XG4gICAgICAgICAgICBnbC5jbGVhcihnbC5TVEVOQ0lMX0JVRkZFUl9CSVQpO1xuICAgICAgICAgICAgZ2wuZW5hYmxlKGdsLlNURU5DSUxfVEVTVCk7XG4gICAgICAgIH1cbiAgICAgICAgbWFza0RhdGEuX3N0ZW5jaWxDb3VudGVyKys7XG4gICAgICAgIC8vIEluY3JlbWVudCB0aGUgcmVmZXJlbmNlIHN0ZW5jaWwgdmFsdWUgd2hlcmUgdGhlIG5ldyBtYXNrIG92ZXJsYXBzIHdpdGggdGhlIG9sZCBvbmVzLlxuICAgICAgICBnbC5jb2xvck1hc2soZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2UpO1xuICAgICAgICBnbC5zdGVuY2lsRnVuYyhnbC5FUVVBTCwgcHJldk1hc2tDb3VudCwgMHhGRkZGRkZGRik7XG4gICAgICAgIGdsLnN0ZW5jaWxPcChnbC5LRUVQLCBnbC5LRUVQLCBnbC5JTkNSKTtcbiAgICAgICAgbWFza09iamVjdC5yZW5kZXJhYmxlID0gdHJ1ZTtcbiAgICAgICAgbWFza09iamVjdC5yZW5kZXIodGhpcy5yZW5kZXJlcik7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuYmF0Y2guZmx1c2goKTtcbiAgICAgICAgbWFza09iamVjdC5yZW5kZXJhYmxlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX3VzZUN1cnJlbnQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFBvcHMgc3RlbmNpbCBtYXNrLiBNYXNrRGF0YSBpcyBhbHJlYWR5IHJlbW92ZWQgZnJvbSBzdGFja1xuICAgICAqIEBwYXJhbSB7UElYSS5EaXNwbGF5T2JqZWN0fSBtYXNrT2JqZWN0IC0gb2JqZWN0IG9mIHBvcHBlZCBtYXNrIGRhdGFcbiAgICAgKi9cbiAgICBTdGVuY2lsU3lzdGVtLnByb3RvdHlwZS5wb3AgPSBmdW5jdGlvbiAobWFza09iamVjdCkge1xuICAgICAgICB2YXIgZ2wgPSB0aGlzLnJlbmRlcmVyLmdsO1xuICAgICAgICBpZiAodGhpcy5nZXRTdGFja0xlbmd0aCgpID09PSAwKSB7XG4gICAgICAgICAgICAvLyB0aGUgc3RhY2sgaXMgZW1wdHkhXG4gICAgICAgICAgICBnbC5kaXNhYmxlKGdsLlNURU5DSUxfVEVTVCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBEZWNyZW1lbnQgdGhlIHJlZmVyZW5jZSBzdGVuY2lsIHZhbHVlIHdoZXJlIHRoZSBwb3BwZWQgbWFzayBvdmVybGFwcyB3aXRoIHRoZSBvdGhlciBvbmVzXG4gICAgICAgICAgICBnbC5jb2xvck1hc2soZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2UpO1xuICAgICAgICAgICAgZ2wuc3RlbmNpbE9wKGdsLktFRVAsIGdsLktFRVAsIGdsLkRFQ1IpO1xuICAgICAgICAgICAgbWFza09iamVjdC5yZW5kZXJhYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgIG1hc2tPYmplY3QucmVuZGVyKHRoaXMucmVuZGVyZXIpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5iYXRjaC5mbHVzaCgpO1xuICAgICAgICAgICAgbWFza09iamVjdC5yZW5kZXJhYmxlID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLl91c2VDdXJyZW50KCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHVwIHJlbmRlcmVyIHRvIHVzZSB0aGUgY3VycmVudCBzdGVuY2lsIGRhdGEuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBTdGVuY2lsU3lzdGVtLnByb3RvdHlwZS5fdXNlQ3VycmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGdsID0gdGhpcy5yZW5kZXJlci5nbDtcbiAgICAgICAgZ2wuY29sb3JNYXNrKHRydWUsIHRydWUsIHRydWUsIHRydWUpO1xuICAgICAgICBnbC5zdGVuY2lsRnVuYyhnbC5FUVVBTCwgdGhpcy5nZXRTdGFja0xlbmd0aCgpLCAweEZGRkZGRkZGKTtcbiAgICAgICAgZ2wuc3RlbmNpbE9wKGdsLktFRVAsIGdsLktFRVAsIGdsLktFRVApO1xuICAgIH07XG4gICAgcmV0dXJuIFN0ZW5jaWxTeXN0ZW07XG59KEFic3RyYWN0TWFza1N5c3RlbSkpO1xuXG4vKipcbiAqIFN5c3RlbSBwbHVnaW4gdG8gdGhlIHJlbmRlcmVyIHRvIG1hbmFnZSB0aGUgcHJvamVjdGlvbiBtYXRyaXguXG4gKlxuICogVGhlIGBwcm9qZWN0aW9uTWF0cml4YCBpcyBhIGdsb2JhbCB1bmlmb3JtIHByb3ZpZGVkIHRvIGFsbCBzaGFkZXJzLiBJdCBpcyB1c2VkIHRvIHRyYW5zZm9ybSBwb2ludHMgaW4gd29ybGQgc3BhY2UgdG9cbiAqIG5vcm1hbGl6ZWQgZGV2aWNlIGNvb3JkaW5hdGVzLlxuICogQG1lbWJlcm9mIFBJWElcbiAqL1xudmFyIFByb2plY3Rpb25TeXN0ZW0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqIEBwYXJhbSByZW5kZXJlciAtIFRoZSByZW5kZXJlciB0aGlzIFN5c3RlbSB3b3JrcyBmb3IuICovXG4gICAgZnVuY3Rpb24gUHJvamVjdGlvblN5c3RlbShyZW5kZXJlcikge1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb25GcmFtZSA9IG51bGw7XG4gICAgICAgIHRoaXMuc291cmNlRnJhbWUgPSBudWxsO1xuICAgICAgICB0aGlzLmRlZmF1bHRGcmFtZSA9IG51bGw7XG4gICAgICAgIHRoaXMucHJvamVjdGlvbk1hdHJpeCA9IG5ldyBtYXRoLk1hdHJpeCgpO1xuICAgICAgICB0aGlzLnRyYW5zZm9ybSA9IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIHByb2plY3Rpb24tbWF0cml4IGJhc2VkIG9uIHRoZSBzb3VyY2VGcmFtZSDihpIgZGVzdGluYXRpb25GcmFtZSBtYXBwaW5nIHByb3ZpZGVkLlxuICAgICAqXG4gICAgICogTk9URTogSXQgaXMgZXhwZWN0ZWQgeW91IGNhbGwgYHJlbmRlcmVyLmZyYW1lYnVmZmVyLnNldFZpZXdwb3J0KGRlc3RpbmF0aW9uRnJhbWUpYCBhZnRlciB0aGlzLiBUaGlzIGlzIGJlY2F1c2VcbiAgICAgKiB0aGUgZnJhbWVidWZmZXIgdmlld3BvcnQgY29udmVydHMgc2hhZGVyIHZlcnRleCBvdXRwdXQgaW4gbm9ybWFsaXplZCBkZXZpY2UgY29vcmRpbmF0ZXMgdG8gd2luZG93IGNvb3JkaW5hdGVzLlxuICAgICAqXG4gICAgICogTk9URS0yOiB7QGxpbmsgUmVuZGVyVGV4dHVyZVN5c3RlbSNiaW5kfSB1cGRhdGVzIHRoZSBwcm9qZWN0aW9uLW1hdHJpeCB3aGVuIHlvdSBiaW5kIGEgcmVuZGVyLXRleHR1cmUuIEl0IGlzIGV4cGVjdGVkXG4gICAgICogdGhhdCB5b3UgZGlydHkgdGhlIGN1cnJlbnQgYmluZGluZ3Mgd2hlbiBjYWxsaW5nIHRoaXMgbWFudWFsbHkuXG4gICAgICogQHBhcmFtIGRlc3RpbmF0aW9uRnJhbWUgLSBUaGUgcmVjdGFuZ2xlIGluIHRoZSByZW5kZXItdGFyZ2V0IHRvIHJlbmRlciB0aGUgY29udGVudHMgaW50by4gSWYgcmVuZGVyaW5nIHRvIHRoZSBjYW52YXMsXG4gICAgICogIHRoZSBvcmlnaW4gaXMgb24gdGhlIHRvcC1sZWZ0OyBpZiByZW5kZXJpbmcgdG8gYSByZW5kZXItdGV4dHVyZSwgdGhlIG9yaWdpbiBpcyBvbiB0aGUgYm90dG9tLWxlZnQuXG4gICAgICogQHBhcmFtIHNvdXJjZUZyYW1lIC0gVGhlIHJlY3RhbmdsZSBpbiB3b3JsZCBzcGFjZSB0aGF0IGNvbnRhaW5zIHRoZSBjb250ZW50cyBiZWluZyByZW5kZXJlZC5cbiAgICAgKiBAcGFyYW0gcmVzb2x1dGlvbiAtIFRoZSByZXNvbHV0aW9uIG9mIHRoZSByZW5kZXItdGFyZ2V0LCB3aGljaCBpcyB0aGUgcmF0aW8gb2ZcbiAgICAgKiAgd29ybGQtc3BhY2UgKG9yIENTUykgcGl4ZWxzIHRvIHBoeXNpY2FsIHBpeGVscy5cbiAgICAgKiBAcGFyYW0gcm9vdCAtIFdoZXRoZXIgdGhlIHJlbmRlci10YXJnZXQgaXMgdGhlIHNjcmVlbi4gVGhpcyBpcyByZXF1aXJlZCBiZWNhdXNlIHJlbmRlcmluZyB0byB0ZXh0dXJlc1xuICAgICAqICBpcyB5LWZsaXBwZWQgKGkuZS4gdXBzaWRlIGRvd24gcmVsYXRpdmUgdG8gdGhlIHNjcmVlbikuXG4gICAgICovXG4gICAgUHJvamVjdGlvblN5c3RlbS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGRlc3RpbmF0aW9uRnJhbWUsIHNvdXJjZUZyYW1lLCByZXNvbHV0aW9uLCByb290KSB7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb25GcmFtZSA9IGRlc3RpbmF0aW9uRnJhbWUgfHwgdGhpcy5kZXN0aW5hdGlvbkZyYW1lIHx8IHRoaXMuZGVmYXVsdEZyYW1lO1xuICAgICAgICB0aGlzLnNvdXJjZUZyYW1lID0gc291cmNlRnJhbWUgfHwgdGhpcy5zb3VyY2VGcmFtZSB8fCBkZXN0aW5hdGlvbkZyYW1lO1xuICAgICAgICAvLyBDYWxjdWxhdGUgb2JqZWN0LXNwYWNlIHRvIGNsaXAtc3BhY2UgcHJvamVjdGlvblxuICAgICAgICB0aGlzLmNhbGN1bGF0ZVByb2plY3Rpb24odGhpcy5kZXN0aW5hdGlvbkZyYW1lLCB0aGlzLnNvdXJjZUZyYW1lLCByZXNvbHV0aW9uLCByb290KTtcbiAgICAgICAgaWYgKHRoaXMudHJhbnNmb3JtKSB7XG4gICAgICAgICAgICB0aGlzLnByb2plY3Rpb25NYXRyaXguYXBwZW5kKHRoaXMudHJhbnNmb3JtKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmVuZGVyZXIgPSB0aGlzLnJlbmRlcmVyO1xuICAgICAgICByZW5kZXJlci5nbG9iYWxVbmlmb3Jtcy51bmlmb3Jtcy5wcm9qZWN0aW9uTWF0cml4ID0gdGhpcy5wcm9qZWN0aW9uTWF0cml4O1xuICAgICAgICByZW5kZXJlci5nbG9iYWxVbmlmb3Jtcy51cGRhdGUoKTtcbiAgICAgICAgLy8gdGhpcyB3aWxsIHdvcmsgZm9yIG5vd1xuICAgICAgICAvLyBidXQgd291bGQgYmUgc3dlZXQgdG8gc3RpY2sgYW5kIGV2ZW4gb24gdGhlIGdsb2JhbCB1bmlmb3Jtcy4uXG4gICAgICAgIGlmIChyZW5kZXJlci5zaGFkZXIuc2hhZGVyKSB7XG4gICAgICAgICAgICByZW5kZXJlci5zaGFkZXIuc3luY1VuaWZvcm1Hcm91cChyZW5kZXJlci5zaGFkZXIuc2hhZGVyLnVuaWZvcm1zLmdsb2JhbHMpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGVzIHRoZSBgcHJvamVjdGlvbk1hdHJpeGAgdG8gbWFwIHBvaW50cyBpbnNpZGUgYHNvdXJjZUZyYW1lYCB0byBpbnNpZGUgYGRlc3RpbmF0aW9uRnJhbWVgLlxuICAgICAqIEBwYXJhbSBfZGVzdGluYXRpb25GcmFtZSAtIFRoZSBkZXN0aW5hdGlvbiBmcmFtZSBpbiB0aGUgcmVuZGVyLXRhcmdldC5cbiAgICAgKiBAcGFyYW0gc291cmNlRnJhbWUgLSBUaGUgc291cmNlIGZyYW1lIGluIHdvcmxkIHNwYWNlLlxuICAgICAqIEBwYXJhbSBfcmVzb2x1dGlvbiAtIFRoZSByZW5kZXItdGFyZ2V0J3MgcmVzb2x1dGlvbiwgaS5lLiByYXRpbyBvZiBDU1MgdG8gcGh5c2ljYWwgcGl4ZWxzLlxuICAgICAqIEBwYXJhbSByb290IC0gV2hldGhlciByZW5kZXJpbmcgaW50byB0aGUgc2NyZWVuLiBPdGhlcndpc2UsIGlmIHJlbmRlcmluZyB0byBhIGZyYW1lYnVmZmVyLCB0aGUgcHJvamVjdGlvblxuICAgICAqICBpcyB5LWZsaXBwZWQuXG4gICAgICovXG4gICAgUHJvamVjdGlvblN5c3RlbS5wcm90b3R5cGUuY2FsY3VsYXRlUHJvamVjdGlvbiA9IGZ1bmN0aW9uIChfZGVzdGluYXRpb25GcmFtZSwgc291cmNlRnJhbWUsIF9yZXNvbHV0aW9uLCByb290KSB7XG4gICAgICAgIHZhciBwbSA9IHRoaXMucHJvamVjdGlvbk1hdHJpeDtcbiAgICAgICAgdmFyIHNpZ24gPSAhcm9vdCA/IDEgOiAtMTtcbiAgICAgICAgcG0uaWRlbnRpdHkoKTtcbiAgICAgICAgcG0uYSA9ICgxIC8gc291cmNlRnJhbWUud2lkdGggKiAyKTtcbiAgICAgICAgcG0uZCA9IHNpZ24gKiAoMSAvIHNvdXJjZUZyYW1lLmhlaWdodCAqIDIpO1xuICAgICAgICBwbS50eCA9IC0xIC0gKHNvdXJjZUZyYW1lLnggKiBwbS5hKTtcbiAgICAgICAgcG0udHkgPSAtc2lnbiAtIChzb3VyY2VGcmFtZS55ICogcG0uZCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSB0cmFuc2Zvcm0gb2YgdGhlIGFjdGl2ZSByZW5kZXIgdGFyZ2V0IHRvIHRoZSBnaXZlbiBtYXRyaXguXG4gICAgICogQHBhcmFtIF9tYXRyaXggLSBUaGUgdHJhbnNmb3JtYXRpb24gbWF0cml4XG4gICAgICovXG4gICAgUHJvamVjdGlvblN5c3RlbS5wcm90b3R5cGUuc2V0VHJhbnNmb3JtID0gZnVuY3Rpb24gKF9tYXRyaXgpIHtcbiAgICAgICAgLy8gdGhpcy5fYWN0aXZlUmVuZGVyVGFyZ2V0LnRyYW5zZm9ybSA9IG1hdHJpeDtcbiAgICB9O1xuICAgIFByb2plY3Rpb25TeXN0ZW0ucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSBudWxsO1xuICAgIH07XG4gICAgcmV0dXJuIFByb2plY3Rpb25TeXN0ZW07XG59KCkpO1xuXG4vLyBUZW1wb3JhcnkgcmVjdGFuZ2xlIGZvciBhc3NpZ25lZCBzb3VyY2VGcmFtZSBvciBkZXN0aW5hdGlvbkZyYW1lXG52YXIgdGVtcFJlY3QgPSBuZXcgbWF0aC5SZWN0YW5nbGUoKTtcbi8vIFRlbXBvcmFyeSByZWN0YW5nbGUgZm9yIHJlbmRlclRleHR1cmUgZGVzdGluYXRpb25GcmFtZVxudmFyIHRlbXBSZWN0MiA9IG5ldyBtYXRoLlJlY3RhbmdsZSgpO1xuLyogZXNsaW50LWRpc2FibGUgbWF4LWxlbiAqL1xuLyoqXG4gKiBTeXN0ZW0gcGx1Z2luIHRvIHRoZSByZW5kZXJlciB0byBtYW5hZ2UgcmVuZGVyIHRleHR1cmVzLlxuICpcbiAqIFNob3VsZCBiZSBhZGRlZCBhZnRlciBGcmFtZWJ1ZmZlclN5c3RlbVxuICpcbiAqICMjIyBGcmFtZXNcbiAqXG4gKiBUaGUgYFJlbmRlclRleHR1cmVTeXN0ZW1gIGhvbGRzIGEgc291cmNlRnJhbWUg4oaSIGRlc3RpbmF0aW9uRnJhbWUgcHJvamVjdGlvbi4gVGhlIGZvbGxvd2luZyB0YWJsZSBleHBsYWlucyB0aGUgZGlmZmVyZW50XG4gKiBjb29yZGluYXRlIHNwYWNlcyB1c2VkOlxuICpcbiAqIHwgRnJhbWUgICAgICAgICAgICAgICAgICB8IERlc2NyaXB0aW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBDb29yZGluYXRlIFN5c3RlbSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSB8IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gfCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIHxcbiAqIHwgc291cmNlRnJhbWUgICAgICAgICAgICB8IFRoZSByZWN0YW5nbGUgaW5zaWRlIG9mIHdoaWNoIGRpc3BsYXktb2JqZWN0cyBhcmUgYmVpbmcgcmVuZGVyZWQgfCAqKldvcmxkIFNwYWNlKio6IFRoZSBvcmlnaW4gb24gdGhlIHRvcC1sZWZ0ICAgICAgICAgICAgIHxcbiAqIHwgZGVzdGluYXRpb25GcmFtZSAgICAgICB8IFRoZSByZWN0YW5nbGUgaW4gdGhlIHJlbmRlci10YXJnZXQgKGNhbnZhcyBvciB0ZXh0dXJlKSBpbnRvIHdoaWNoIGNvbnRlbnRzIHNob3VsZCBiZSByZW5kZXJlZCB8IElmIHJlbmRlcmluZyB0byB0aGUgY2FudmFzLCB0aGlzIGlzIGluIHNjcmVlbiBzcGFjZSBhbmQgdGhlIG9yaWdpbiBpcyBvbiB0aGUgdG9wLWxlZnQuIElmIHJlbmRlcmluZyB0byBhIHJlbmRlci10ZXh0dXJlLCB0aGlzIGlzIGluIGl0cyBiYXNlLXRleHR1cmUncyBzcGFjZSB3aXRoIHRoZSBvcmlnaW4gb24gdGhlIGJvdHRvbS1sZWZ0LiAgfFxuICogfCB2aWV3cG9ydEZyYW1lICAgICAgICAgIHwgVGhlIGZyYW1lYnVmZmVyIHZpZXdwb3J0IGNvcnJlc3BvbmRpbmcgdG8gdGhlIGRlc3RpbmF0aW9uLWZyYW1lICB8ICoqV2luZG93IENvb3JkaW5hdGVzKio6IFRoZSBvcmlnaW4gaXMgYWx3YXlzIG9uIHRoZSBib3R0b20tbGVmdC4gfFxuICogQG1lbWJlcm9mIFBJWElcbiAqL1xudmFyIFJlbmRlclRleHR1cmVTeXN0ZW0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHJlbmRlcmVyIC0gVGhlIHJlbmRlcmVyIHRoaXMgU3lzdGVtIHdvcmtzIGZvci5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBSZW5kZXJUZXh0dXJlU3lzdGVtKHJlbmRlcmVyKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgdGhpcy5jbGVhckNvbG9yID0gcmVuZGVyZXIuX2JhY2tncm91bmRDb2xvclJnYmE7XG4gICAgICAgIHRoaXMuZGVmYXVsdE1hc2tTdGFjayA9IFtdO1xuICAgICAgICB0aGlzLmN1cnJlbnQgPSBudWxsO1xuICAgICAgICB0aGlzLnNvdXJjZUZyYW1lID0gbmV3IG1hdGguUmVjdGFuZ2xlKCk7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb25GcmFtZSA9IG5ldyBtYXRoLlJlY3RhbmdsZSgpO1xuICAgICAgICB0aGlzLnZpZXdwb3J0RnJhbWUgPSBuZXcgbWF0aC5SZWN0YW5nbGUoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQmluZCB0aGUgY3VycmVudCByZW5kZXIgdGV4dHVyZS5cbiAgICAgKiBAcGFyYW0gcmVuZGVyVGV4dHVyZSAtIFJlbmRlclRleHR1cmUgdG8gYmluZCwgYnkgZGVmYXVsdCBpdHMgYG51bGxgIC0gdGhlIHNjcmVlbi5cbiAgICAgKiBAcGFyYW0gc291cmNlRnJhbWUgLSBQYXJ0IG9mIHdvcmxkIHRoYXQgaXMgbWFwcGVkIHRvIHRoZSByZW5kZXJUZXh0dXJlLlxuICAgICAqIEBwYXJhbSBkZXN0aW5hdGlvbkZyYW1lIC0gUGFydCBvZiByZW5kZXJUZXh0dXJlLCBieSBkZWZhdWx0IGl0IGhhcyB0aGUgc2FtZSBzaXplIGFzIHNvdXJjZUZyYW1lLlxuICAgICAqL1xuICAgIFJlbmRlclRleHR1cmVTeXN0ZW0ucHJvdG90eXBlLmJpbmQgPSBmdW5jdGlvbiAocmVuZGVyVGV4dHVyZSwgc291cmNlRnJhbWUsIGRlc3RpbmF0aW9uRnJhbWUpIHtcbiAgICAgICAgaWYgKHJlbmRlclRleHR1cmUgPT09IHZvaWQgMCkgeyByZW5kZXJUZXh0dXJlID0gbnVsbDsgfVxuICAgICAgICB2YXIgcmVuZGVyZXIgPSB0aGlzLnJlbmRlcmVyO1xuICAgICAgICB0aGlzLmN1cnJlbnQgPSByZW5kZXJUZXh0dXJlO1xuICAgICAgICB2YXIgYmFzZVRleHR1cmU7XG4gICAgICAgIHZhciBmcmFtZWJ1ZmZlcjtcbiAgICAgICAgdmFyIHJlc29sdXRpb247XG4gICAgICAgIGlmIChyZW5kZXJUZXh0dXJlKSB7XG4gICAgICAgICAgICBiYXNlVGV4dHVyZSA9IHJlbmRlclRleHR1cmUuYmFzZVRleHR1cmU7XG4gICAgICAgICAgICByZXNvbHV0aW9uID0gYmFzZVRleHR1cmUucmVzb2x1dGlvbjtcbiAgICAgICAgICAgIGlmICghc291cmNlRnJhbWUpIHtcbiAgICAgICAgICAgICAgICB0ZW1wUmVjdC53aWR0aCA9IHJlbmRlclRleHR1cmUuZnJhbWUud2lkdGg7XG4gICAgICAgICAgICAgICAgdGVtcFJlY3QuaGVpZ2h0ID0gcmVuZGVyVGV4dHVyZS5mcmFtZS5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgc291cmNlRnJhbWUgPSB0ZW1wUmVjdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZGVzdGluYXRpb25GcmFtZSkge1xuICAgICAgICAgICAgICAgIHRlbXBSZWN0Mi54ID0gcmVuZGVyVGV4dHVyZS5mcmFtZS54O1xuICAgICAgICAgICAgICAgIHRlbXBSZWN0Mi55ID0gcmVuZGVyVGV4dHVyZS5mcmFtZS55O1xuICAgICAgICAgICAgICAgIHRlbXBSZWN0Mi53aWR0aCA9IHNvdXJjZUZyYW1lLndpZHRoO1xuICAgICAgICAgICAgICAgIHRlbXBSZWN0Mi5oZWlnaHQgPSBzb3VyY2VGcmFtZS5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgZGVzdGluYXRpb25GcmFtZSA9IHRlbXBSZWN0MjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZyYW1lYnVmZmVyID0gYmFzZVRleHR1cmUuZnJhbWVidWZmZXI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXNvbHV0aW9uID0gcmVuZGVyZXIucmVzb2x1dGlvbjtcbiAgICAgICAgICAgIGlmICghc291cmNlRnJhbWUpIHtcbiAgICAgICAgICAgICAgICB0ZW1wUmVjdC53aWR0aCA9IHJlbmRlcmVyLnNjcmVlbi53aWR0aDtcbiAgICAgICAgICAgICAgICB0ZW1wUmVjdC5oZWlnaHQgPSByZW5kZXJlci5zY3JlZW4uaGVpZ2h0O1xuICAgICAgICAgICAgICAgIHNvdXJjZUZyYW1lID0gdGVtcFJlY3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWRlc3RpbmF0aW9uRnJhbWUpIHtcbiAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbkZyYW1lID0gdGVtcFJlY3Q7XG4gICAgICAgICAgICAgICAgZGVzdGluYXRpb25GcmFtZS53aWR0aCA9IHNvdXJjZUZyYW1lLndpZHRoO1xuICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uRnJhbWUuaGVpZ2h0ID0gc291cmNlRnJhbWUuaGVpZ2h0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciB2aWV3cG9ydEZyYW1lID0gdGhpcy52aWV3cG9ydEZyYW1lO1xuICAgICAgICB2aWV3cG9ydEZyYW1lLnggPSBkZXN0aW5hdGlvbkZyYW1lLnggKiByZXNvbHV0aW9uO1xuICAgICAgICB2aWV3cG9ydEZyYW1lLnkgPSBkZXN0aW5hdGlvbkZyYW1lLnkgKiByZXNvbHV0aW9uO1xuICAgICAgICB2aWV3cG9ydEZyYW1lLndpZHRoID0gZGVzdGluYXRpb25GcmFtZS53aWR0aCAqIHJlc29sdXRpb247XG4gICAgICAgIHZpZXdwb3J0RnJhbWUuaGVpZ2h0ID0gZGVzdGluYXRpb25GcmFtZS5oZWlnaHQgKiByZXNvbHV0aW9uO1xuICAgICAgICBpZiAoIXJlbmRlclRleHR1cmUpIHtcbiAgICAgICAgICAgIHZpZXdwb3J0RnJhbWUueSA9IHJlbmRlcmVyLnZpZXcuaGVpZ2h0IC0gKHZpZXdwb3J0RnJhbWUueSArIHZpZXdwb3J0RnJhbWUuaGVpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICB2aWV3cG9ydEZyYW1lLmNlaWwoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5mcmFtZWJ1ZmZlci5iaW5kKGZyYW1lYnVmZmVyLCB2aWV3cG9ydEZyYW1lKTtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5wcm9qZWN0aW9uLnVwZGF0ZShkZXN0aW5hdGlvbkZyYW1lLCBzb3VyY2VGcmFtZSwgcmVzb2x1dGlvbiwgIWZyYW1lYnVmZmVyKTtcbiAgICAgICAgaWYgKHJlbmRlclRleHR1cmUpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIubWFzay5zZXRNYXNrU3RhY2soYmFzZVRleHR1cmUubWFza1N0YWNrKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIubWFzay5zZXRNYXNrU3RhY2sodGhpcy5kZWZhdWx0TWFza1N0YWNrKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNvdXJjZUZyYW1lLmNvcHlGcm9tKHNvdXJjZUZyYW1lKTtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbkZyYW1lLmNvcHlGcm9tKGRlc3RpbmF0aW9uRnJhbWUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRXJhc2VzIHRoZSByZW5kZXIgdGV4dHVyZSBhbmQgZmlsbHMgdGhlIGRyYXdpbmcgYXJlYSB3aXRoIGEgY29sb3VyLlxuICAgICAqIEBwYXJhbSBjbGVhckNvbG9yIC0gVGhlIGNvbG9yIGFzIHJnYmEsIGRlZmF1bHQgdG8gdXNlIHRoZSByZW5kZXJlciBiYWNrZ3JvdW5kQ29sb3JcbiAgICAgKiBAcGFyYW0gW21hc2s9QlVGRkVSX0JJVFMuQ09MT1IgfCBCVUZGRVJfQklUUy5ERVBUSF0gLSBCaXR3aXNlIE9SIG9mIG1hc2tzXG4gICAgICogIHRoYXQgaW5kaWNhdGUgdGhlIGJ1ZmZlcnMgdG8gYmUgY2xlYXJlZCwgYnkgZGVmYXVsdCBDT0xPUiBhbmQgREVQVEggYnVmZmVycy5cbiAgICAgKi9cbiAgICBSZW5kZXJUZXh0dXJlU3lzdGVtLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uIChjbGVhckNvbG9yLCBtYXNrKSB7XG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIGNsZWFyQ29sb3IgPSBjbGVhckNvbG9yIHx8IHRoaXMuY3VycmVudC5iYXNlVGV4dHVyZS5jbGVhckNvbG9yO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY2xlYXJDb2xvciA9IGNsZWFyQ29sb3IgfHwgdGhpcy5jbGVhckNvbG9yO1xuICAgICAgICB9XG4gICAgICAgIHZhciBkZXN0aW5hdGlvbkZyYW1lID0gdGhpcy5kZXN0aW5hdGlvbkZyYW1lO1xuICAgICAgICB2YXIgYmFzZUZyYW1lID0gdGhpcy5jdXJyZW50ID8gdGhpcy5jdXJyZW50LmJhc2VUZXh0dXJlIDogdGhpcy5yZW5kZXJlci5zY3JlZW47XG4gICAgICAgIHZhciBjbGVhck1hc2sgPSBkZXN0aW5hdGlvbkZyYW1lLndpZHRoICE9PSBiYXNlRnJhbWUud2lkdGggfHwgZGVzdGluYXRpb25GcmFtZS5oZWlnaHQgIT09IGJhc2VGcmFtZS5oZWlnaHQ7XG4gICAgICAgIGlmIChjbGVhck1hc2spIHtcbiAgICAgICAgICAgIHZhciBfYSA9IHRoaXMudmlld3BvcnRGcmFtZSwgeCA9IF9hLngsIHkgPSBfYS55LCB3aWR0aCA9IF9hLndpZHRoLCBoZWlnaHQgPSBfYS5oZWlnaHQ7XG4gICAgICAgICAgICB4ID0gTWF0aC5yb3VuZCh4KTtcbiAgICAgICAgICAgIHkgPSBNYXRoLnJvdW5kKHkpO1xuICAgICAgICAgICAgd2lkdGggPSBNYXRoLnJvdW5kKHdpZHRoKTtcbiAgICAgICAgICAgIGhlaWdodCA9IE1hdGgucm91bmQoaGVpZ2h0KTtcbiAgICAgICAgICAgIC8vIFRPRE86IFNjaXNzb3JTeXN0ZW0gc2hvdWxkIGNhY2hlIHdoZXRoZXIgdGhlIHNjaXNzb3IgdGVzdCBpcyBlbmFibGVkIG9yIG5vdC5cbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuZ2wuZW5hYmxlKHRoaXMucmVuZGVyZXIuZ2wuU0NJU1NPUl9URVNUKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuZ2wuc2Npc3Nvcih4LCB5LCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbmRlcmVyLmZyYW1lYnVmZmVyLmNsZWFyKGNsZWFyQ29sb3JbMF0sIGNsZWFyQ29sb3JbMV0sIGNsZWFyQ29sb3JbMl0sIGNsZWFyQ29sb3JbM10sIG1hc2spO1xuICAgICAgICBpZiAoY2xlYXJNYXNrKSB7XG4gICAgICAgICAgICAvLyBSZXN0b3JlIHRoZSBzY2lzc29yIGJveFxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zY2lzc29yLnBvcCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBSZW5kZXJUZXh0dXJlU3lzdGVtLnByb3RvdHlwZS5yZXNpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIHJlc2l6ZSB0aGUgcm9vdCBvbmx5IVxuICAgICAgICB0aGlzLmJpbmQobnVsbCk7XG4gICAgfTtcbiAgICAvKiogUmVzZXRzIHJlbmRlci10ZXh0dXJlIHN0YXRlLiAqL1xuICAgIFJlbmRlclRleHR1cmVTeXN0ZW0ucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmJpbmQobnVsbCk7XG4gICAgfTtcbiAgICBSZW5kZXJUZXh0dXJlU3lzdGVtLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gbnVsbDtcbiAgICB9O1xuICAgIHJldHVybiBSZW5kZXJUZXh0dXJlU3lzdGVtO1xufSgpKTtcblxuZnVuY3Rpb24gdWJvVXBkYXRlKF91ZCwgX3V2LCBfcmVuZGVyZXIsIF9zeW5jRGF0YSwgYnVmZmVyKSB7XG4gICAgX3JlbmRlcmVyLmJ1ZmZlci51cGRhdGUoYnVmZmVyKTtcbn1cbi8vIGN2ID0gQ2FjaGVkVmFsdWVcbi8vIHYgPSB2YWx1ZVxuLy8gdWQgPSB1bmlmb3JtRGF0YVxuLy8gdXYgPSB1bmlmb3JtVmFsdWVcbi8vIGwgPSBsb2NhdGlvblxudmFyIFVCT19UT19TSU5HTEVfU0VUVEVSUyA9IHtcbiAgICBmbG9hdDogXCJcXG4gICAgICAgIGRhdGFbb2Zmc2V0XSA9IHY7XFxuICAgIFwiLFxuICAgIHZlYzI6IFwiXFxuICAgICAgICBkYXRhW29mZnNldF0gPSB2WzBdO1xcbiAgICAgICAgZGF0YVtvZmZzZXQrMV0gPSB2WzFdO1xcbiAgICBcIixcbiAgICB2ZWMzOiBcIlxcbiAgICAgICAgZGF0YVtvZmZzZXRdID0gdlswXTtcXG4gICAgICAgIGRhdGFbb2Zmc2V0KzFdID0gdlsxXTtcXG4gICAgICAgIGRhdGFbb2Zmc2V0KzJdID0gdlsyXTtcXG5cXG4gICAgXCIsXG4gICAgdmVjNDogXCJcXG4gICAgICAgIGRhdGFbb2Zmc2V0XSA9IHZbMF07XFxuICAgICAgICBkYXRhW29mZnNldCsxXSA9IHZbMV07XFxuICAgICAgICBkYXRhW29mZnNldCsyXSA9IHZbMl07XFxuICAgICAgICBkYXRhW29mZnNldCszXSA9IHZbM107XFxuICAgIFwiLFxuICAgIG1hdDI6IFwiXFxuICAgICAgICBkYXRhW29mZnNldF0gPSB2WzBdO1xcbiAgICAgICAgZGF0YVtvZmZzZXQrMV0gPSB2WzFdO1xcblxcbiAgICAgICAgZGF0YVtvZmZzZXQrNF0gPSB2WzJdO1xcbiAgICAgICAgZGF0YVtvZmZzZXQrNV0gPSB2WzNdO1xcbiAgICBcIixcbiAgICBtYXQzOiBcIlxcbiAgICAgICAgZGF0YVtvZmZzZXRdID0gdlswXTtcXG4gICAgICAgIGRhdGFbb2Zmc2V0KzFdID0gdlsxXTtcXG4gICAgICAgIGRhdGFbb2Zmc2V0KzJdID0gdlsyXTtcXG5cXG4gICAgICAgIGRhdGFbb2Zmc2V0ICsgNF0gPSB2WzNdO1xcbiAgICAgICAgZGF0YVtvZmZzZXQgKyA1XSA9IHZbNF07XFxuICAgICAgICBkYXRhW29mZnNldCArIDZdID0gdls1XTtcXG5cXG4gICAgICAgIGRhdGFbb2Zmc2V0ICsgOF0gPSB2WzZdO1xcbiAgICAgICAgZGF0YVtvZmZzZXQgKyA5XSA9IHZbN107XFxuICAgICAgICBkYXRhW29mZnNldCArIDEwXSA9IHZbOF07XFxuICAgIFwiLFxuICAgIG1hdDQ6IFwiXFxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgMTY7IGkrKylcXG4gICAgICAgIHtcXG4gICAgICAgICAgICBkYXRhW29mZnNldCArIGldID0gdltpXTtcXG4gICAgICAgIH1cXG4gICAgXCJcbn07XG52YXIgR0xTTF9UT19TVEQ0MF9TSVpFID0ge1xuICAgIGZsb2F0OiA0LFxuICAgIHZlYzI6IDgsXG4gICAgdmVjMzogMTIsXG4gICAgdmVjNDogMTYsXG4gICAgaW50OiA0LFxuICAgIGl2ZWMyOiA4LFxuICAgIGl2ZWMzOiAxMixcbiAgICBpdmVjNDogMTYsXG4gICAgdWludDogNCxcbiAgICB1dmVjMjogOCxcbiAgICB1dmVjMzogMTIsXG4gICAgdXZlYzQ6IDE2LFxuICAgIGJvb2w6IDQsXG4gICAgYnZlYzI6IDgsXG4gICAgYnZlYzM6IDEyLFxuICAgIGJ2ZWM0OiAxNixcbiAgICBtYXQyOiAxNiAqIDIsXG4gICAgbWF0MzogMTYgKiAzLFxuICAgIG1hdDQ6IDE2ICogNCxcbn07XG4vKipcbiAqIGxvZ2ljIG9yaWdpbmFsbHkgZnJvbSBoZXJlOiBodHRwczovL2dpdGh1Yi5jb20vc2tldGNocHVuay9GdW5XaXRoV2ViR0wyL2Jsb2IvbWFzdGVyL2xlc3Nvbl8wMjIvU2hhZGVycy5qc1xuICogcmV3cm90ZSBpdCwgYnV0IHRoaXMgd2FzIGEgZ3JlYXQgc3RhcnRpbmcgcG9pbnQgdG8gZ2V0IGEgc29saWQgdW5kZXJzdGFuZGluZyBvZiB3aGF0cyBnb2luZyBvbiA6KVxuICogQGlnbm9yZVxuICogQHBhcmFtIHVuaWZvcm1EYXRhXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVVCT0VsZW1lbnRzKHVuaWZvcm1EYXRhKSB7XG4gICAgdmFyIHVib0VsZW1lbnRzID0gdW5pZm9ybURhdGEubWFwKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIHJldHVybiAoe1xuICAgICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgICAgIG9mZnNldDogMCxcbiAgICAgICAgICAgIGRhdGFMZW46IDAsXG4gICAgICAgICAgICBkaXJ0eTogMFxuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICB2YXIgc2l6ZSA9IDA7XG4gICAgdmFyIGNodW5rU2l6ZSA9IDA7XG4gICAgdmFyIG9mZnNldCA9IDA7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB1Ym9FbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgdWJvRWxlbWVudCA9IHVib0VsZW1lbnRzW2ldO1xuICAgICAgICBzaXplID0gR0xTTF9UT19TVEQ0MF9TSVpFW3Vib0VsZW1lbnQuZGF0YS50eXBlXTtcbiAgICAgICAgaWYgKHVib0VsZW1lbnQuZGF0YS5zaXplID4gMSkge1xuICAgICAgICAgICAgc2l6ZSA9IE1hdGgubWF4KHNpemUsIDE2KSAqIHVib0VsZW1lbnQuZGF0YS5zaXplO1xuICAgICAgICB9XG4gICAgICAgIHVib0VsZW1lbnQuZGF0YUxlbiA9IHNpemU7XG4gICAgICAgIC8vIGFkZCBzb21lIHNpemUgb2Zmc2V0Li5cbiAgICAgICAgLy8gbXVzdCBhbGlnbiB0byB0aGUgbmVhcmVzdCAxNiBieXRlcyBvciBpbnRlcm5hbGx5IG5lYXJlc3Qgcm91bmQgc2l6ZVxuICAgICAgICBpZiAoY2h1bmtTaXplICUgc2l6ZSAhPT0gMCAmJiBjaHVua1NpemUgPCAxNikge1xuICAgICAgICAgICAgLy8gZGlmZiByZXF1aXJlZCB0byBsaW5lIHVwLi5cbiAgICAgICAgICAgIHZhciBsaW5lVXBWYWx1ZSA9IChjaHVua1NpemUgJSBzaXplKSAlIDE2O1xuICAgICAgICAgICAgY2h1bmtTaXplICs9IGxpbmVVcFZhbHVlO1xuICAgICAgICAgICAgb2Zmc2V0ICs9IGxpbmVVcFZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICgoY2h1bmtTaXplICsgc2l6ZSkgPiAxNikge1xuICAgICAgICAgICAgb2Zmc2V0ID0gTWF0aC5jZWlsKG9mZnNldCAvIDE2KSAqIDE2O1xuICAgICAgICAgICAgdWJvRWxlbWVudC5vZmZzZXQgPSBvZmZzZXQ7XG4gICAgICAgICAgICBvZmZzZXQgKz0gc2l6ZTtcbiAgICAgICAgICAgIGNodW5rU2l6ZSA9IHNpemU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB1Ym9FbGVtZW50Lm9mZnNldCA9IG9mZnNldDtcbiAgICAgICAgICAgIGNodW5rU2l6ZSArPSBzaXplO1xuICAgICAgICAgICAgb2Zmc2V0ICs9IHNpemU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb2Zmc2V0ID0gTWF0aC5jZWlsKG9mZnNldCAvIDE2KSAqIDE2O1xuICAgIHJldHVybiB7IHVib0VsZW1lbnRzOiB1Ym9FbGVtZW50cywgc2l6ZTogb2Zmc2V0IH07XG59XG5mdW5jdGlvbiBnZXRVQk9EYXRhKHVuaWZvcm1zLCB1bmlmb3JtRGF0YSkge1xuICAgIHZhciB1c2VkVW5pZm9ybURhdGFzID0gW107XG4gICAgLy8gYnVpbGQuLlxuICAgIGZvciAodmFyIGkgaW4gdW5pZm9ybXMpIHtcbiAgICAgICAgaWYgKHVuaWZvcm1EYXRhW2ldKSB7XG4gICAgICAgICAgICB1c2VkVW5pZm9ybURhdGFzLnB1c2godW5pZm9ybURhdGFbaV0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIHNvcnQgdGhlbSBvdXQgYnkgaW5kZXghXG4gICAgdXNlZFVuaWZvcm1EYXRhcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBhLmluZGV4IC0gYi5pbmRleDsgfSk7XG4gICAgcmV0dXJuIHVzZWRVbmlmb3JtRGF0YXM7XG59XG5mdW5jdGlvbiBnZW5lcmF0ZVVuaWZvcm1CdWZmZXJTeW5jKGdyb3VwLCB1bmlmb3JtRGF0YSkge1xuICAgIGlmICghZ3JvdXAuYXV0b01hbmFnZSkge1xuICAgICAgICAvLyBpZiB0aGUgZ3JvdXAgaXMgbm90dCBhdXRvbWF0aWNhbGx5IG1hbmFnZWQsIHdlIGRvbid0IG5lZWQgdG8gZ2VuZXJhdGUgYSBzcGVjaWFsIGZ1bmN0aW9uIGZvciBpdC4uLlxuICAgICAgICByZXR1cm4geyBzaXplOiAwLCBzeW5jRnVuYzogdWJvVXBkYXRlIH07XG4gICAgfVxuICAgIHZhciB1c2VkVW5pZm9ybURhdGFzID0gZ2V0VUJPRGF0YShncm91cC51bmlmb3JtcywgdW5pZm9ybURhdGEpO1xuICAgIHZhciBfYSA9IGNyZWF0ZVVCT0VsZW1lbnRzKHVzZWRVbmlmb3JtRGF0YXMpLCB1Ym9FbGVtZW50cyA9IF9hLnVib0VsZW1lbnRzLCBzaXplID0gX2Euc2l6ZTtcbiAgICB2YXIgZnVuY0ZyYWdtZW50cyA9IFtcIlxcbiAgICB2YXIgdiA9IG51bGw7XFxuICAgIHZhciB2MiA9IG51bGw7XFxuICAgIHZhciBjdiA9IG51bGw7XFxuICAgIHZhciB0ID0gMDtcXG4gICAgdmFyIGdsID0gcmVuZGVyZXIuZ2xcXG4gICAgdmFyIGluZGV4ID0gMDtcXG4gICAgdmFyIGRhdGEgPSBidWZmZXIuZGF0YTtcXG4gICAgXCJdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdWJvRWxlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHVib0VsZW1lbnQgPSB1Ym9FbGVtZW50c1tpXTtcbiAgICAgICAgdmFyIHVuaWZvcm0gPSBncm91cC51bmlmb3Jtc1t1Ym9FbGVtZW50LmRhdGEubmFtZV07XG4gICAgICAgIHZhciBuYW1lID0gdWJvRWxlbWVudC5kYXRhLm5hbWU7XG4gICAgICAgIHZhciBwYXJzZWQgPSBmYWxzZTtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB1bmlmb3JtUGFyc2Vycy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgdmFyIHVuaWZvcm1QYXJzZXIgPSB1bmlmb3JtUGFyc2Vyc1tqXTtcbiAgICAgICAgICAgIGlmICh1bmlmb3JtUGFyc2VyLmNvZGVVYm8gJiYgdW5pZm9ybVBhcnNlci50ZXN0KHVib0VsZW1lbnQuZGF0YSwgdW5pZm9ybSkpIHtcbiAgICAgICAgICAgICAgICBmdW5jRnJhZ21lbnRzLnB1c2goXCJvZmZzZXQgPSBcIiArIHVib0VsZW1lbnQub2Zmc2V0IC8gNCArIFwiO1wiLCB1bmlmb3JtUGFyc2Vyc1tqXS5jb2RlVWJvKHVib0VsZW1lbnQuZGF0YS5uYW1lLCB1bmlmb3JtKSk7XG4gICAgICAgICAgICAgICAgcGFyc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIXBhcnNlZCkge1xuICAgICAgICAgICAgaWYgKHVib0VsZW1lbnQuZGF0YS5zaXplID4gMSkge1xuICAgICAgICAgICAgICAgIHZhciBzaXplXzEgPSBtYXBTaXplKHVib0VsZW1lbnQuZGF0YS50eXBlKTtcbiAgICAgICAgICAgICAgICB2YXIgcm93U2l6ZSA9IE1hdGgubWF4KEdMU0xfVE9fU1RENDBfU0laRVt1Ym9FbGVtZW50LmRhdGEudHlwZV0gLyAxNiwgMSk7XG4gICAgICAgICAgICAgICAgdmFyIGVsZW1lbnRTaXplID0gc2l6ZV8xIC8gcm93U2l6ZTtcbiAgICAgICAgICAgICAgICB2YXIgcmVtYWluZGVyID0gKDQgLSAoZWxlbWVudFNpemUgJSA0KSkgJSA0O1xuICAgICAgICAgICAgICAgIGZ1bmNGcmFnbWVudHMucHVzaChcIlxcbiAgICAgICAgICAgICAgICBjdiA9IHVkLlwiICsgbmFtZSArIFwiLnZhbHVlO1xcbiAgICAgICAgICAgICAgICB2ID0gdXYuXCIgKyBuYW1lICsgXCI7XFxuICAgICAgICAgICAgICAgIG9mZnNldCA9IFwiICsgdWJvRWxlbWVudC5vZmZzZXQgLyA0ICsgXCI7XFxuXFxuICAgICAgICAgICAgICAgIHQgPSAwO1xcblxcbiAgICAgICAgICAgICAgICBmb3IodmFyIGk9MDsgaSA8IFwiICsgdWJvRWxlbWVudC5kYXRhLnNpemUgKiByb3dTaXplICsgXCI7IGkrKylcXG4gICAgICAgICAgICAgICAge1xcbiAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBqID0gMDsgaiA8IFwiICsgZWxlbWVudFNpemUgKyBcIjsgaisrKVxcbiAgICAgICAgICAgICAgICAgICAge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbb2Zmc2V0KytdID0gdlt0KytdO1xcbiAgICAgICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IFwiICsgcmVtYWluZGVyICsgXCI7XFxuICAgICAgICAgICAgICAgIH1cXG5cXG4gICAgICAgICAgICAgICAgXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHRlbXBsYXRlID0gVUJPX1RPX1NJTkdMRV9TRVRURVJTW3Vib0VsZW1lbnQuZGF0YS50eXBlXTtcbiAgICAgICAgICAgICAgICBmdW5jRnJhZ21lbnRzLnB1c2goXCJcXG4gICAgICAgICAgICAgICAgY3YgPSB1ZC5cIiArIG5hbWUgKyBcIi52YWx1ZTtcXG4gICAgICAgICAgICAgICAgdiA9IHV2LlwiICsgbmFtZSArIFwiO1xcbiAgICAgICAgICAgICAgICBvZmZzZXQgPSBcIiArIHVib0VsZW1lbnQub2Zmc2V0IC8gNCArIFwiO1xcbiAgICAgICAgICAgICAgICBcIiArIHRlbXBsYXRlICsgXCI7XFxuICAgICAgICAgICAgICAgIFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jRnJhZ21lbnRzLnB1c2goXCJcXG4gICAgICAgcmVuZGVyZXIuYnVmZmVyLnVwZGF0ZShidWZmZXIpO1xcbiAgICBcIik7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2l6ZTogc2l6ZSxcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLW5ldy1mdW5jXG4gICAgICAgIHN5bmNGdW5jOiBuZXcgRnVuY3Rpb24oJ3VkJywgJ3V2JywgJ3JlbmRlcmVyJywgJ3N5bmNEYXRhJywgJ2J1ZmZlcicsIGZ1bmNGcmFnbWVudHMuam9pbignXFxuJykpXG4gICAgfTtcbn1cblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG52YXIgSUdMVW5pZm9ybURhdGEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gSUdMVW5pZm9ybURhdGEoKSB7XG4gICAgfVxuICAgIHJldHVybiBJR0xVbmlmb3JtRGF0YTtcbn0oKSk7XG4vKipcbiAqIEhlbHBlciBjbGFzcyB0byBjcmVhdGUgYSBXZWJHTCBQcm9ncmFtXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG52YXIgR0xQcm9ncmFtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIE1ha2VzIGEgbmV3IFBpeGkgcHJvZ3JhbS5cbiAgICAgKiBAcGFyYW0gcHJvZ3JhbSAtIHdlYmdsIHByb2dyYW1cbiAgICAgKiBAcGFyYW0gdW5pZm9ybURhdGEgLSB1bmlmb3Jtc1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIEdMUHJvZ3JhbShwcm9ncmFtLCB1bmlmb3JtRGF0YSkge1xuICAgICAgICB0aGlzLnByb2dyYW0gPSBwcm9ncmFtO1xuICAgICAgICB0aGlzLnVuaWZvcm1EYXRhID0gdW5pZm9ybURhdGE7XG4gICAgICAgIHRoaXMudW5pZm9ybUdyb3VwcyA9IHt9O1xuICAgICAgICB0aGlzLnVuaWZvcm1EaXJ0eUdyb3VwcyA9IHt9O1xuICAgICAgICB0aGlzLnVuaWZvcm1CdWZmZXJCaW5kaW5ncyA9IHt9O1xuICAgIH1cbiAgICAvKiogRGVzdHJveXMgdGhpcyBwcm9ncmFtLiAqL1xuICAgIEdMUHJvZ3JhbS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy51bmlmb3JtRGF0YSA9IG51bGw7XG4gICAgICAgIHRoaXMudW5pZm9ybUdyb3VwcyA9IG51bGw7XG4gICAgICAgIHRoaXMudW5pZm9ybURpcnR5R3JvdXBzID0gbnVsbDtcbiAgICAgICAgdGhpcy51bmlmb3JtQnVmZmVyQmluZGluZ3MgPSBudWxsO1xuICAgICAgICB0aGlzLnByb2dyYW0gPSBudWxsO1xuICAgIH07XG4gICAgcmV0dXJuIEdMUHJvZ3JhbTtcbn0oKSk7XG5cbi8qKlxuICogcmV0dXJucyB0aGUgYXR0cmlidXRlIGRhdGEgZnJvbSB0aGUgcHJvZ3JhbVxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7V2ViR0xQcm9ncmFtfSBbcHJvZ3JhbV0gLSB0aGUgV2ViR0wgcHJvZ3JhbVxuICogQHBhcmFtIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IFtnbF0gLSB0aGUgV2ViR0wgY29udGV4dFxuICogQHJldHVybnMge29iamVjdH0gdGhlIGF0dHJpYnV0ZSBkYXRhIGZvciB0aGlzIHByb2dyYW1cbiAqL1xuZnVuY3Rpb24gZ2V0QXR0cmlidXRlRGF0YShwcm9ncmFtLCBnbCkge1xuICAgIHZhciBhdHRyaWJ1dGVzID0ge307XG4gICAgdmFyIHRvdGFsQXR0cmlidXRlcyA9IGdsLmdldFByb2dyYW1QYXJhbWV0ZXIocHJvZ3JhbSwgZ2wuQUNUSVZFX0FUVFJJQlVURVMpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdG90YWxBdHRyaWJ1dGVzOyBpKyspIHtcbiAgICAgICAgdmFyIGF0dHJpYkRhdGEgPSBnbC5nZXRBY3RpdmVBdHRyaWIocHJvZ3JhbSwgaSk7XG4gICAgICAgIGlmIChhdHRyaWJEYXRhLm5hbWUuaW5kZXhPZignZ2xfJykgPT09IDApIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0eXBlID0gbWFwVHlwZShnbCwgYXR0cmliRGF0YS50eXBlKTtcbiAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICAgICAgbmFtZTogYXR0cmliRGF0YS5uYW1lLFxuICAgICAgICAgICAgc2l6ZTogbWFwU2l6ZSh0eXBlKSxcbiAgICAgICAgICAgIGxvY2F0aW9uOiBnbC5nZXRBdHRyaWJMb2NhdGlvbihwcm9ncmFtLCBhdHRyaWJEYXRhLm5hbWUpLFxuICAgICAgICB9O1xuICAgICAgICBhdHRyaWJ1dGVzW2F0dHJpYkRhdGEubmFtZV0gPSBkYXRhO1xuICAgIH1cbiAgICByZXR1cm4gYXR0cmlidXRlcztcbn1cblxuLyoqXG4gKiByZXR1cm5zIHRoZSB1bmlmb3JtIGRhdGEgZnJvbSB0aGUgcHJvZ3JhbVxuICogQHByaXZhdGVcbiAqIEBwYXJhbSBwcm9ncmFtIC0gdGhlIHdlYmdsIHByb2dyYW1cbiAqIEBwYXJhbSBnbCAtIHRoZSBXZWJHTCBjb250ZXh0XG4gKiBAcmV0dXJucyB7b2JqZWN0fSB0aGUgdW5pZm9ybSBkYXRhIGZvciB0aGlzIHByb2dyYW1cbiAqL1xuZnVuY3Rpb24gZ2V0VW5pZm9ybURhdGEocHJvZ3JhbSwgZ2wpIHtcbiAgICB2YXIgdW5pZm9ybXMgPSB7fTtcbiAgICB2YXIgdG90YWxVbmlmb3JtcyA9IGdsLmdldFByb2dyYW1QYXJhbWV0ZXIocHJvZ3JhbSwgZ2wuQUNUSVZFX1VOSUZPUk1TKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRvdGFsVW5pZm9ybXM7IGkrKykge1xuICAgICAgICB2YXIgdW5pZm9ybURhdGEgPSBnbC5nZXRBY3RpdmVVbmlmb3JtKHByb2dyYW0sIGkpO1xuICAgICAgICB2YXIgbmFtZSA9IHVuaWZvcm1EYXRhLm5hbWUucmVwbGFjZSgvXFxbLio/XFxdJC8sICcnKTtcbiAgICAgICAgdmFyIGlzQXJyYXkgPSAhISh1bmlmb3JtRGF0YS5uYW1lLm1hdGNoKC9cXFsuKj9cXF0kLykpO1xuICAgICAgICB2YXIgdHlwZSA9IG1hcFR5cGUoZ2wsIHVuaWZvcm1EYXRhLnR5cGUpO1xuICAgICAgICB1bmlmb3Jtc1tuYW1lXSA9IHtcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICBpbmRleDogaSxcbiAgICAgICAgICAgIHR5cGU6IHR5cGUsXG4gICAgICAgICAgICBzaXplOiB1bmlmb3JtRGF0YS5zaXplLFxuICAgICAgICAgICAgaXNBcnJheTogaXNBcnJheSxcbiAgICAgICAgICAgIHZhbHVlOiBkZWZhdWx0VmFsdWUodHlwZSwgdW5pZm9ybURhdGEuc2l6ZSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB1bmlmb3Jtcztcbn1cblxuLyoqXG4gKiBnZW5lcmF0ZXMgYSBXZWJHTCBQcm9ncmFtIG9iamVjdCBmcm9tIGEgaGlnaCBsZXZlbCBQaXhpIFByb2dyYW0uXG4gKiBAcGFyYW0gZ2wgLSBhIHJlbmRlcmluZyBjb250ZXh0IG9uIHdoaWNoIHRvIGdlbmVyYXRlIHRoZSBwcm9ncmFtXG4gKiBAcGFyYW0gcHJvZ3JhbSAtIHRoZSBoaWdoIGxldmVsIFBpeGkgUHJvZ3JhbS5cbiAqL1xuZnVuY3Rpb24gZ2VuZXJhdGVQcm9ncmFtKGdsLCBwcm9ncmFtKSB7XG4gICAgdmFyIGdsVmVydFNoYWRlciA9IGNvbXBpbGVTaGFkZXIoZ2wsIGdsLlZFUlRFWF9TSEFERVIsIHByb2dyYW0udmVydGV4U3JjKTtcbiAgICB2YXIgZ2xGcmFnU2hhZGVyID0gY29tcGlsZVNoYWRlcihnbCwgZ2wuRlJBR01FTlRfU0hBREVSLCBwcm9ncmFtLmZyYWdtZW50U3JjKTtcbiAgICB2YXIgd2ViR0xQcm9ncmFtID0gZ2wuY3JlYXRlUHJvZ3JhbSgpO1xuICAgIGdsLmF0dGFjaFNoYWRlcih3ZWJHTFByb2dyYW0sIGdsVmVydFNoYWRlcik7XG4gICAgZ2wuYXR0YWNoU2hhZGVyKHdlYkdMUHJvZ3JhbSwgZ2xGcmFnU2hhZGVyKTtcbiAgICBnbC5saW5rUHJvZ3JhbSh3ZWJHTFByb2dyYW0pO1xuICAgIGlmICghZ2wuZ2V0UHJvZ3JhbVBhcmFtZXRlcih3ZWJHTFByb2dyYW0sIGdsLkxJTktfU1RBVFVTKSkge1xuICAgICAgICBsb2dQcm9ncmFtRXJyb3IoZ2wsIHdlYkdMUHJvZ3JhbSwgZ2xWZXJ0U2hhZGVyLCBnbEZyYWdTaGFkZXIpO1xuICAgIH1cbiAgICBwcm9ncmFtLmF0dHJpYnV0ZURhdGEgPSBnZXRBdHRyaWJ1dGVEYXRhKHdlYkdMUHJvZ3JhbSwgZ2wpO1xuICAgIHByb2dyYW0udW5pZm9ybURhdGEgPSBnZXRVbmlmb3JtRGF0YSh3ZWJHTFByb2dyYW0sIGdsKTtcbiAgICAvLyBHTFNMIDEuMDA6IGJpbmQgYXR0cmlidXRlcyBzb3J0ZWQgYnkgbmFtZSBpbiBhc2NlbmRpbmcgb3JkZXJcbiAgICAvLyBHTFNMIDMuMDA6IGRvbid0IGNoYW5nZSB0aGUgYXR0cmlidXRlIGxvY2F0aW9ucyB0aGF0IHdoZXJlIGNob3NlbiBieSB0aGUgY29tcGlsZXJcbiAgICAvLyAgICAgICAgICAgIG9yIGFzc2lnbmVkIGJ5IHRoZSBsYXlvdXQgc3BlY2lmaWVyIGluIHRoZSBzaGFkZXIgc291cmNlIGNvZGVcbiAgICBpZiAoISgvXlsgXFx0XSojWyBcXHRdKnZlcnNpb25bIFxcdF0rMzAwWyBcXHRdK2VzWyBcXHRdKiQvbSkudGVzdChwcm9ncmFtLnZlcnRleFNyYykpIHtcbiAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9ncmFtLmF0dHJpYnV0ZURhdGEpO1xuICAgICAgICBrZXlzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIChhID4gYikgPyAxIDogLTE7IH0pOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbmZ1c2luZy1hcnJvd1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHByb2dyYW0uYXR0cmlidXRlRGF0YVtrZXlzW2ldXS5sb2NhdGlvbiA9IGk7XG4gICAgICAgICAgICBnbC5iaW5kQXR0cmliTG9jYXRpb24od2ViR0xQcm9ncmFtLCBpLCBrZXlzW2ldKTtcbiAgICAgICAgfVxuICAgICAgICBnbC5saW5rUHJvZ3JhbSh3ZWJHTFByb2dyYW0pO1xuICAgIH1cbiAgICBnbC5kZWxldGVTaGFkZXIoZ2xWZXJ0U2hhZGVyKTtcbiAgICBnbC5kZWxldGVTaGFkZXIoZ2xGcmFnU2hhZGVyKTtcbiAgICB2YXIgdW5pZm9ybURhdGEgPSB7fTtcbiAgICBmb3IgKHZhciBpIGluIHByb2dyYW0udW5pZm9ybURhdGEpIHtcbiAgICAgICAgdmFyIGRhdGEgPSBwcm9ncmFtLnVuaWZvcm1EYXRhW2ldO1xuICAgICAgICB1bmlmb3JtRGF0YVtpXSA9IHtcbiAgICAgICAgICAgIGxvY2F0aW9uOiBnbC5nZXRVbmlmb3JtTG9jYXRpb24od2ViR0xQcm9ncmFtLCBpKSxcbiAgICAgICAgICAgIHZhbHVlOiBkZWZhdWx0VmFsdWUoZGF0YS50eXBlLCBkYXRhLnNpemUpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICB2YXIgZ2xQcm9ncmFtID0gbmV3IEdMUHJvZ3JhbSh3ZWJHTFByb2dyYW0sIHVuaWZvcm1EYXRhKTtcbiAgICByZXR1cm4gZ2xQcm9ncmFtO1xufVxuXG52YXIgVUlEID0gMDtcbi8vIGRlZmF1bHQgc3luYyBkYXRhIHNvIHdlIGRvbid0IGNyZWF0ZSBhIG5ldyBvbmUgZWFjaCB0aW1lIVxudmFyIGRlZmF1bHRTeW5jRGF0YSA9IHsgdGV4dHVyZUNvdW50OiAwLCB1Ym9Db3VudDogMCB9O1xuLyoqXG4gKiBTeXN0ZW0gcGx1Z2luIHRvIHRoZSByZW5kZXJlciB0byBtYW5hZ2Ugc2hhZGVycy5cbiAqIEBtZW1iZXJvZiBQSVhJXG4gKi9cbnZhciBTaGFkZXJTeXN0ZW0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqIEBwYXJhbSByZW5kZXJlciAtIFRoZSByZW5kZXJlciB0aGlzIFN5c3RlbSB3b3JrcyBmb3IuICovXG4gICAgZnVuY3Rpb24gU2hhZGVyU3lzdGVtKHJlbmRlcmVyKSB7XG4gICAgICAgIHRoaXMuZGVzdHJveWVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgLy8gVmFsaWRhdGlvbiBjaGVjayB0aGF0IHRoaXMgZW52aXJvbm1lbnQgc3VwcG9ydCBgbmV3IEZ1bmN0aW9uYFxuICAgICAgICB0aGlzLnN5c3RlbUNoZWNrKCk7XG4gICAgICAgIHRoaXMuZ2wgPSBudWxsO1xuICAgICAgICB0aGlzLnNoYWRlciA9IG51bGw7XG4gICAgICAgIHRoaXMucHJvZ3JhbSA9IG51bGw7XG4gICAgICAgIHRoaXMuY2FjaGUgPSB7fTtcbiAgICAgICAgdGhpcy5fdWJvQ2FjaGUgPSB7fTtcbiAgICAgICAgdGhpcy5pZCA9IFVJRCsrO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBPdmVycmlkZWFibGUgZnVuY3Rpb24gYnkgYEBwaXhpL3Vuc2FmZS1ldmFsYCB0byBzaWxlbmNlXG4gICAgICogdGhyb3dpbmcgYW4gZXJyb3IgaWYgcGxhdGZvcm0gZG9lc24ndCBzdXBwb3J0IHVuc2FmZS1ldmFscy5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFNoYWRlclN5c3RlbS5wcm90b3R5cGUuc3lzdGVtQ2hlY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdW5zYWZlRXZhbFN1cHBvcnRlZCgpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0N1cnJlbnQgZW52aXJvbm1lbnQgZG9lcyBub3QgYWxsb3cgdW5zYWZlLWV2YWwsICdcbiAgICAgICAgICAgICAgICArICdwbGVhc2UgdXNlIEBwaXhpL3Vuc2FmZS1ldmFsIG1vZHVsZSB0byBlbmFibGUgc3VwcG9ydC4nKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU2hhZGVyU3lzdGVtLnByb3RvdHlwZS5jb250ZXh0Q2hhbmdlID0gZnVuY3Rpb24gKGdsKSB7XG4gICAgICAgIHRoaXMuZ2wgPSBnbDtcbiAgICAgICAgdGhpcy5yZXNldCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2hhbmdlcyB0aGUgY3VycmVudCBzaGFkZXIgdG8gdGhlIG9uZSBnaXZlbiBpbiBwYXJhbWV0ZXIuXG4gICAgICogQHBhcmFtIHNoYWRlciAtIHRoZSBuZXcgc2hhZGVyXG4gICAgICogQHBhcmFtIGRvbnRTeW5jIC0gZmFsc2UgaWYgdGhlIHNoYWRlciBzaG91bGQgYXV0b21hdGljYWxseSBzeW5jIGl0cyB1bmlmb3Jtcy5cbiAgICAgKiBAcmV0dXJucyB0aGUgZ2xQcm9ncmFtIHRoYXQgYmVsb25ncyB0byB0aGUgc2hhZGVyLlxuICAgICAqL1xuICAgIFNoYWRlclN5c3RlbS5wcm90b3R5cGUuYmluZCA9IGZ1bmN0aW9uIChzaGFkZXIsIGRvbnRTeW5jKSB7XG4gICAgICAgIHNoYWRlci51bmlmb3Jtcy5nbG9iYWxzID0gdGhpcy5yZW5kZXJlci5nbG9iYWxVbmlmb3JtcztcbiAgICAgICAgdmFyIHByb2dyYW0gPSBzaGFkZXIucHJvZ3JhbTtcbiAgICAgICAgdmFyIGdsUHJvZ3JhbSA9IHByb2dyYW0uZ2xQcm9ncmFtc1t0aGlzLnJlbmRlcmVyLkNPTlRFWFRfVUlEXSB8fCB0aGlzLmdlbmVyYXRlUHJvZ3JhbShzaGFkZXIpO1xuICAgICAgICB0aGlzLnNoYWRlciA9IHNoYWRlcjtcbiAgICAgICAgLy8gVE9ETyAtIHNvbWUgY3VycmVudCBQaXhpIHBsdWdpbnMgYnlwYXNzIHRoaXMuLiBzbyBpdCBub3Qgc2FmZSB0byB1c2UgeWV0Li5cbiAgICAgICAgaWYgKHRoaXMucHJvZ3JhbSAhPT0gcHJvZ3JhbSkge1xuICAgICAgICAgICAgdGhpcy5wcm9ncmFtID0gcHJvZ3JhbTtcbiAgICAgICAgICAgIHRoaXMuZ2wudXNlUHJvZ3JhbShnbFByb2dyYW0ucHJvZ3JhbSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFkb250U3luYykge1xuICAgICAgICAgICAgZGVmYXVsdFN5bmNEYXRhLnRleHR1cmVDb3VudCA9IDA7XG4gICAgICAgICAgICBkZWZhdWx0U3luY0RhdGEudWJvQ291bnQgPSAwO1xuICAgICAgICAgICAgdGhpcy5zeW5jVW5pZm9ybUdyb3VwKHNoYWRlci51bmlmb3JtR3JvdXAsIGRlZmF1bHRTeW5jRGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGdsUHJvZ3JhbTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFVwbG9hZHMgdGhlIHVuaWZvcm1zIHZhbHVlcyB0byB0aGUgY3VycmVudGx5IGJvdW5kIHNoYWRlci5cbiAgICAgKiBAcGFyYW0gdW5pZm9ybXMgLSB0aGUgdW5pZm9ybXMgdmFsdWVzIHRoYXQgYmUgYXBwbGllZCB0byB0aGUgY3VycmVudCBzaGFkZXJcbiAgICAgKi9cbiAgICBTaGFkZXJTeXN0ZW0ucHJvdG90eXBlLnNldFVuaWZvcm1zID0gZnVuY3Rpb24gKHVuaWZvcm1zKSB7XG4gICAgICAgIHZhciBzaGFkZXIgPSB0aGlzLnNoYWRlci5wcm9ncmFtO1xuICAgICAgICB2YXIgZ2xQcm9ncmFtID0gc2hhZGVyLmdsUHJvZ3JhbXNbdGhpcy5yZW5kZXJlci5DT05URVhUX1VJRF07XG4gICAgICAgIHNoYWRlci5zeW5jVW5pZm9ybXMoZ2xQcm9ncmFtLnVuaWZvcm1EYXRhLCB1bmlmb3JtcywgdGhpcy5yZW5kZXJlcik7XG4gICAgfTtcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvZXhwbGljaXQtbW9kdWxlLWJvdW5kYXJ5LXR5cGVzICovXG4gICAgLyoqXG4gICAgICogU3luY3MgdW5pZm9ybXMgb24gdGhlIGdyb3VwXG4gICAgICogQHBhcmFtIGdyb3VwIC0gdGhlIHVuaWZvcm0gZ3JvdXAgdG8gc3luY1xuICAgICAqIEBwYXJhbSBzeW5jRGF0YSAtIHRoaXMgaXMgZGF0YSB0aGF0IGlzIHBhc3NlZCB0byB0aGUgc3luYyBmdW5jdGlvbiBhbmQgYW55IG5lc3RlZCBzeW5jIGZ1bmN0aW9uc1xuICAgICAqL1xuICAgIFNoYWRlclN5c3RlbS5wcm90b3R5cGUuc3luY1VuaWZvcm1Hcm91cCA9IGZ1bmN0aW9uIChncm91cCwgc3luY0RhdGEpIHtcbiAgICAgICAgdmFyIGdsUHJvZ3JhbSA9IHRoaXMuZ2V0R2xQcm9ncmFtKCk7XG4gICAgICAgIGlmICghZ3JvdXAuc3RhdGljIHx8IGdyb3VwLmRpcnR5SWQgIT09IGdsUHJvZ3JhbS51bmlmb3JtRGlydHlHcm91cHNbZ3JvdXAuaWRdKSB7XG4gICAgICAgICAgICBnbFByb2dyYW0udW5pZm9ybURpcnR5R3JvdXBzW2dyb3VwLmlkXSA9IGdyb3VwLmRpcnR5SWQ7XG4gICAgICAgICAgICB0aGlzLnN5bmNVbmlmb3Jtcyhncm91cCwgZ2xQcm9ncmFtLCBzeW5jRGF0YSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIE92ZXJyaWRlYWJsZSBieSB0aGUgQHBpeGkvdW5zYWZlLWV2YWwgcGFja2FnZSB0byB1c2Ugc3RhdGljIHN5bmNVbmlmb3JtcyBpbnN0ZWFkLlxuICAgICAqIEBwYXJhbSBncm91cFxuICAgICAqIEBwYXJhbSBnbFByb2dyYW1cbiAgICAgKiBAcGFyYW0gc3luY0RhdGFcbiAgICAgKi9cbiAgICBTaGFkZXJTeXN0ZW0ucHJvdG90eXBlLnN5bmNVbmlmb3JtcyA9IGZ1bmN0aW9uIChncm91cCwgZ2xQcm9ncmFtLCBzeW5jRGF0YSkge1xuICAgICAgICB2YXIgc3luY0Z1bmMgPSBncm91cC5zeW5jVW5pZm9ybXNbdGhpcy5zaGFkZXIucHJvZ3JhbS5pZF0gfHwgdGhpcy5jcmVhdGVTeW5jR3JvdXBzKGdyb3VwKTtcbiAgICAgICAgc3luY0Z1bmMoZ2xQcm9ncmFtLnVuaWZvcm1EYXRhLCBncm91cC51bmlmb3JtcywgdGhpcy5yZW5kZXJlciwgc3luY0RhdGEpO1xuICAgIH07XG4gICAgU2hhZGVyU3lzdGVtLnByb3RvdHlwZS5jcmVhdGVTeW5jR3JvdXBzID0gZnVuY3Rpb24gKGdyb3VwKSB7XG4gICAgICAgIHZhciBpZCA9IHRoaXMuZ2V0U2lnbmF0dXJlKGdyb3VwLCB0aGlzLnNoYWRlci5wcm9ncmFtLnVuaWZvcm1EYXRhLCAndScpO1xuICAgICAgICBpZiAoIXRoaXMuY2FjaGVbaWRdKSB7XG4gICAgICAgICAgICB0aGlzLmNhY2hlW2lkXSA9IGdlbmVyYXRlVW5pZm9ybXNTeW5jKGdyb3VwLCB0aGlzLnNoYWRlci5wcm9ncmFtLnVuaWZvcm1EYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBncm91cC5zeW5jVW5pZm9ybXNbdGhpcy5zaGFkZXIucHJvZ3JhbS5pZF0gPSB0aGlzLmNhY2hlW2lkXTtcbiAgICAgICAgcmV0dXJuIGdyb3VwLnN5bmNVbmlmb3Jtc1t0aGlzLnNoYWRlci5wcm9ncmFtLmlkXTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFN5bmNzIHVuaWZvcm0gYnVmZmVyc1xuICAgICAqIEBwYXJhbSBncm91cCAtIHRoZSB1bmlmb3JtIGJ1ZmZlciBncm91cCB0byBzeW5jXG4gICAgICogQHBhcmFtIG5hbWUgLSB0aGUgbmFtZSBvZiB0aGUgdW5pZm9ybSBidWZmZXJcbiAgICAgKi9cbiAgICBTaGFkZXJTeXN0ZW0ucHJvdG90eXBlLnN5bmNVbmlmb3JtQnVmZmVyR3JvdXAgPSBmdW5jdGlvbiAoZ3JvdXAsIG5hbWUpIHtcbiAgICAgICAgdmFyIGdsUHJvZ3JhbSA9IHRoaXMuZ2V0R2xQcm9ncmFtKCk7XG4gICAgICAgIGlmICghZ3JvdXAuc3RhdGljIHx8IGdyb3VwLmRpcnR5SWQgIT09IDAgfHwgIWdsUHJvZ3JhbS51bmlmb3JtR3JvdXBzW2dyb3VwLmlkXSkge1xuICAgICAgICAgICAgZ3JvdXAuZGlydHlJZCA9IDA7XG4gICAgICAgICAgICB2YXIgc3luY0Z1bmMgPSBnbFByb2dyYW0udW5pZm9ybUdyb3Vwc1tncm91cC5pZF1cbiAgICAgICAgICAgICAgICB8fCB0aGlzLmNyZWF0ZVN5bmNCdWZmZXJHcm91cChncm91cCwgZ2xQcm9ncmFtLCBuYW1lKTtcbiAgICAgICAgICAgIC8vIFRPRE8gd3JhcCB1cGRhdGUgaW4gYSBjYWNoZT8/XG4gICAgICAgICAgICBncm91cC5idWZmZXIudXBkYXRlKCk7XG4gICAgICAgICAgICBzeW5jRnVuYyhnbFByb2dyYW0udW5pZm9ybURhdGEsIGdyb3VwLnVuaWZvcm1zLCB0aGlzLnJlbmRlcmVyLCBkZWZhdWx0U3luY0RhdGEsIGdyb3VwLmJ1ZmZlcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW5kZXJlci5idWZmZXIuYmluZEJ1ZmZlckJhc2UoZ3JvdXAuYnVmZmVyLCBnbFByb2dyYW0udW5pZm9ybUJ1ZmZlckJpbmRpbmdzW25hbWVdKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFdpbGwgY3JlYXRlIGEgZnVuY3Rpb24gdGhhdCB1cGxvYWRzIGEgdW5pZm9ybSBidWZmZXIgdXNpbmcgdGhlIFNURDE0MCBzdGFuZGFyZC5cbiAgICAgKiBUaGUgdXBsb2FkIGZ1bmN0aW9uIHdpbGwgdGhlbiBiZSBjYWNoZWQgZm9yIGZ1dHVyZSBjYWxsc1xuICAgICAqIElmIGEgZ3JvdXAgaXMgbWFudWFsbHkgbWFuYWdlZCwgdGhlbiBhIHNpbXBsZSB1cGxvYWQgZnVuY3Rpb24gaXMgZ2VuZXJhdGVkXG4gICAgICogQHBhcmFtIGdyb3VwIC0gdGhlIHVuaWZvcm0gYnVmZmVyIGdyb3VwIHRvIHN5bmNcbiAgICAgKiBAcGFyYW0gZ2xQcm9ncmFtIC0gdGhlIGdsIHByb2dyYW0gdG8gYXR0YWNoIHRoZSB1bmlmb3JtIGJpbmRpbmdzIHRvXG4gICAgICogQHBhcmFtIG5hbWUgLSB0aGUgbmFtZSBvZiB0aGUgdW5pZm9ybSBidWZmZXIgKG11c3QgZXhpc3Qgb24gdGhlIHNoYWRlcilcbiAgICAgKi9cbiAgICBTaGFkZXJTeXN0ZW0ucHJvdG90eXBlLmNyZWF0ZVN5bmNCdWZmZXJHcm91cCA9IGZ1bmN0aW9uIChncm91cCwgZ2xQcm9ncmFtLCBuYW1lKSB7XG4gICAgICAgIHZhciBnbCA9IHRoaXMucmVuZGVyZXIuZ2w7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuYnVmZmVyLmJpbmQoZ3JvdXAuYnVmZmVyKTtcbiAgICAgICAgLy8gYmluZCB0aGVtLi4uXG4gICAgICAgIHZhciB1bmlmb3JtQmxvY2tJbmRleCA9IHRoaXMuZ2wuZ2V0VW5pZm9ybUJsb2NrSW5kZXgoZ2xQcm9ncmFtLnByb2dyYW0sIG5hbWUpO1xuICAgICAgICBnbFByb2dyYW0udW5pZm9ybUJ1ZmZlckJpbmRpbmdzW25hbWVdID0gdGhpcy5zaGFkZXIudW5pZm9ybUJpbmRDb3VudDtcbiAgICAgICAgZ2wudW5pZm9ybUJsb2NrQmluZGluZyhnbFByb2dyYW0ucHJvZ3JhbSwgdW5pZm9ybUJsb2NrSW5kZXgsIHRoaXMuc2hhZGVyLnVuaWZvcm1CaW5kQ291bnQpO1xuICAgICAgICB0aGlzLnNoYWRlci51bmlmb3JtQmluZENvdW50Kys7XG4gICAgICAgIHZhciBpZCA9IHRoaXMuZ2V0U2lnbmF0dXJlKGdyb3VwLCB0aGlzLnNoYWRlci5wcm9ncmFtLnVuaWZvcm1EYXRhLCAndWJvJyk7XG4gICAgICAgIHZhciB1Ym9EYXRhID0gdGhpcy5fdWJvQ2FjaGVbaWRdO1xuICAgICAgICBpZiAoIXVib0RhdGEpIHtcbiAgICAgICAgICAgIHVib0RhdGEgPSB0aGlzLl91Ym9DYWNoZVtpZF0gPSBnZW5lcmF0ZVVuaWZvcm1CdWZmZXJTeW5jKGdyb3VwLCB0aGlzLnNoYWRlci5wcm9ncmFtLnVuaWZvcm1EYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZ3JvdXAuYXV0b01hbmFnZSkge1xuICAgICAgICAgICAgdmFyIGRhdGEgPSBuZXcgRmxvYXQzMkFycmF5KHVib0RhdGEuc2l6ZSAvIDQpO1xuICAgICAgICAgICAgZ3JvdXAuYnVmZmVyLnVwZGF0ZShkYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBnbFByb2dyYW0udW5pZm9ybUdyb3Vwc1tncm91cC5pZF0gPSB1Ym9EYXRhLnN5bmNGdW5jO1xuICAgICAgICByZXR1cm4gZ2xQcm9ncmFtLnVuaWZvcm1Hcm91cHNbZ3JvdXAuaWRdO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVGFrZXMgYSB1bmlmb3JtIGdyb3VwIGFuZCBkYXRhIGFuZCBnZW5lcmF0ZXMgYSB1bmlxdWUgc2lnbmF0dXJlIGZvciB0aGVtLlxuICAgICAqIEBwYXJhbSBncm91cCAtIFRoZSB1bmlmb3JtIGdyb3VwIHRvIGdldCBzaWduYXR1cmUgb2ZcbiAgICAgKiBAcGFyYW0gZ3JvdXAudW5pZm9ybXNcbiAgICAgKiBAcGFyYW0gdW5pZm9ybURhdGEgLSBVbmlmb3JtIGluZm9ybWF0aW9uIGdlbmVyYXRlZCBieSB0aGUgc2hhZGVyXG4gICAgICogQHBhcmFtIHByZUZpeFxuICAgICAqIEByZXR1cm5zIFVuaXF1ZSBzaWduYXR1cmUgb2YgdGhlIHVuaWZvcm0gZ3JvdXBcbiAgICAgKi9cbiAgICBTaGFkZXJTeXN0ZW0ucHJvdG90eXBlLmdldFNpZ25hdHVyZSA9IGZ1bmN0aW9uIChncm91cCwgdW5pZm9ybURhdGEsIHByZUZpeCkge1xuICAgICAgICB2YXIgdW5pZm9ybXMgPSBncm91cC51bmlmb3JtcztcbiAgICAgICAgdmFyIHN0cmluZ3MgPSBbcHJlRml4ICsgXCItXCJdO1xuICAgICAgICBmb3IgKHZhciBpIGluIHVuaWZvcm1zKSB7XG4gICAgICAgICAgICBzdHJpbmdzLnB1c2goaSk7XG4gICAgICAgICAgICBpZiAodW5pZm9ybURhdGFbaV0pIHtcbiAgICAgICAgICAgICAgICBzdHJpbmdzLnB1c2godW5pZm9ybURhdGFbaV0udHlwZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0cmluZ3Muam9pbignLScpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdW5kZXJseWluZyBHTFNoYWRlIHJvZiB0aGUgY3VycmVudGx5IGJvdW5kIHNoYWRlci5cbiAgICAgKlxuICAgICAqIFRoaXMgY2FuIGJlIGhhbmR5IGZvciB3aGVuIHlvdSB0byBoYXZlIGEgbGl0dGxlIG1vcmUgY29udHJvbCBvdmVyIHRoZSBzZXR0aW5nIG9mIHlvdXIgdW5pZm9ybXMuXG4gICAgICogQHJldHVybnMgVGhlIGdsUHJvZ3JhbSBmb3IgdGhlIGN1cnJlbnRseSBib3VuZCBTaGFkZXIgZm9yIHRoaXMgY29udGV4dFxuICAgICAqL1xuICAgIFNoYWRlclN5c3RlbS5wcm90b3R5cGUuZ2V0R2xQcm9ncmFtID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5zaGFkZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNoYWRlci5wcm9ncmFtLmdsUHJvZ3JhbXNbdGhpcy5yZW5kZXJlci5DT05URVhUX1VJRF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZXMgYSBnbFByb2dyYW0gdmVyc2lvbiBvZiB0aGUgU2hhZGVyIHByb3ZpZGVkLlxuICAgICAqIEBwYXJhbSBzaGFkZXIgLSBUaGUgc2hhZGVyIHRoYXQgdGhlIGdsUHJvZ3JhbSB3aWxsIGJlIGJhc2VkIG9uLlxuICAgICAqIEByZXR1cm5zIEEgc2hpbnkgbmV3IGdsUHJvZ3JhbSFcbiAgICAgKi9cbiAgICBTaGFkZXJTeXN0ZW0ucHJvdG90eXBlLmdlbmVyYXRlUHJvZ3JhbSA9IGZ1bmN0aW9uIChzaGFkZXIpIHtcbiAgICAgICAgdmFyIGdsID0gdGhpcy5nbDtcbiAgICAgICAgdmFyIHByb2dyYW0gPSBzaGFkZXIucHJvZ3JhbTtcbiAgICAgICAgdmFyIGdsUHJvZ3JhbSA9IGdlbmVyYXRlUHJvZ3JhbShnbCwgcHJvZ3JhbSk7XG4gICAgICAgIHByb2dyYW0uZ2xQcm9ncmFtc1t0aGlzLnJlbmRlcmVyLkNPTlRFWFRfVUlEXSA9IGdsUHJvZ3JhbTtcbiAgICAgICAgcmV0dXJuIGdsUHJvZ3JhbTtcbiAgICB9O1xuICAgIC8qKiBSZXNldHMgU2hhZGVyU3lzdGVtIHN0YXRlLCBkb2VzIG5vdCBhZmZlY3QgV2ViR0wgc3RhdGUuICovXG4gICAgU2hhZGVyU3lzdGVtLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5wcm9ncmFtID0gbnVsbDtcbiAgICAgICAgdGhpcy5zaGFkZXIgPSBudWxsO1xuICAgIH07XG4gICAgLyoqIERlc3Ryb3lzIHRoaXMgU3lzdGVtIGFuZCByZW1vdmVzIGFsbCBpdHMgdGV4dHVyZXMuICovXG4gICAgU2hhZGVyU3lzdGVtLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gbnVsbDtcbiAgICAgICAgLy8gVE9ETyBpbXBsZW1lbnQgZGVzdHJveSBtZXRob2QgZm9yIFNoYWRlclN5c3RlbVxuICAgICAgICB0aGlzLmRlc3Ryb3llZCA9IHRydWU7XG4gICAgfTtcbiAgICByZXR1cm4gU2hhZGVyU3lzdGVtO1xufSgpKTtcblxuLyoqXG4gKiBNYXBzIGdsIGJsZW5kIGNvbWJpbmF0aW9ucyB0byBXZWJHTC5cbiAqIEBtZW1iZXJvZiBQSVhJXG4gKiBAZnVuY3Rpb24gbWFwV2ViR0xCbGVuZE1vZGVzVG9QaXhpXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGdsIC0gVGhlIHJlbmRlcmluZyBjb250ZXh0LlxuICogQHBhcmFtIHtudW1iZXJbXVtdfSBbYXJyYXk9W11dIC0gVGhlIGFycmF5IHRvIG91dHB1dCBpbnRvLlxuICogQHJldHVybnMge251bWJlcltdW119IE1hcHBlZCBtb2Rlcy5cbiAqL1xuZnVuY3Rpb24gbWFwV2ViR0xCbGVuZE1vZGVzVG9QaXhpKGdsLCBhcnJheSkge1xuICAgIGlmIChhcnJheSA9PT0gdm9pZCAwKSB7IGFycmF5ID0gW107IH1cbiAgICAvLyBUT0RPIC0gcHJlbXVsdGlwbHkgYWxwaGEgd291bGQgYmUgZGlmZmVyZW50LlxuICAgIC8vIGFkZCBhIGJvb2xlYW4gZm9yIHRoYXQhXG4gICAgYXJyYXlbY29uc3RhbnRzLkJMRU5EX01PREVTLk5PUk1BTF0gPSBbZ2wuT05FLCBnbC5PTkVfTUlOVVNfU1JDX0FMUEhBXTtcbiAgICBhcnJheVtjb25zdGFudHMuQkxFTkRfTU9ERVMuQUREXSA9IFtnbC5PTkUsIGdsLk9ORV07XG4gICAgYXJyYXlbY29uc3RhbnRzLkJMRU5EX01PREVTLk1VTFRJUExZXSA9IFtnbC5EU1RfQ09MT1IsIGdsLk9ORV9NSU5VU19TUkNfQUxQSEEsIGdsLk9ORSwgZ2wuT05FX01JTlVTX1NSQ19BTFBIQV07XG4gICAgYXJyYXlbY29uc3RhbnRzLkJMRU5EX01PREVTLlNDUkVFTl0gPSBbZ2wuT05FLCBnbC5PTkVfTUlOVVNfU1JDX0NPTE9SLCBnbC5PTkUsIGdsLk9ORV9NSU5VU19TUkNfQUxQSEFdO1xuICAgIGFycmF5W2NvbnN0YW50cy5CTEVORF9NT0RFUy5PVkVSTEFZXSA9IFtnbC5PTkUsIGdsLk9ORV9NSU5VU19TUkNfQUxQSEFdO1xuICAgIGFycmF5W2NvbnN0YW50cy5CTEVORF9NT0RFUy5EQVJLRU5dID0gW2dsLk9ORSwgZ2wuT05FX01JTlVTX1NSQ19BTFBIQV07XG4gICAgYXJyYXlbY29uc3RhbnRzLkJMRU5EX01PREVTLkxJR0hURU5dID0gW2dsLk9ORSwgZ2wuT05FX01JTlVTX1NSQ19BTFBIQV07XG4gICAgYXJyYXlbY29uc3RhbnRzLkJMRU5EX01PREVTLkNPTE9SX0RPREdFXSA9IFtnbC5PTkUsIGdsLk9ORV9NSU5VU19TUkNfQUxQSEFdO1xuICAgIGFycmF5W2NvbnN0YW50cy5CTEVORF9NT0RFUy5DT0xPUl9CVVJOXSA9IFtnbC5PTkUsIGdsLk9ORV9NSU5VU19TUkNfQUxQSEFdO1xuICAgIGFycmF5W2NvbnN0YW50cy5CTEVORF9NT0RFUy5IQVJEX0xJR0hUXSA9IFtnbC5PTkUsIGdsLk9ORV9NSU5VU19TUkNfQUxQSEFdO1xuICAgIGFycmF5W2NvbnN0YW50cy5CTEVORF9NT0RFUy5TT0ZUX0xJR0hUXSA9IFtnbC5PTkUsIGdsLk9ORV9NSU5VU19TUkNfQUxQSEFdO1xuICAgIGFycmF5W2NvbnN0YW50cy5CTEVORF9NT0RFUy5ESUZGRVJFTkNFXSA9IFtnbC5PTkUsIGdsLk9ORV9NSU5VU19TUkNfQUxQSEFdO1xuICAgIGFycmF5W2NvbnN0YW50cy5CTEVORF9NT0RFUy5FWENMVVNJT05dID0gW2dsLk9ORSwgZ2wuT05FX01JTlVTX1NSQ19BTFBIQV07XG4gICAgYXJyYXlbY29uc3RhbnRzLkJMRU5EX01PREVTLkhVRV0gPSBbZ2wuT05FLCBnbC5PTkVfTUlOVVNfU1JDX0FMUEhBXTtcbiAgICBhcnJheVtjb25zdGFudHMuQkxFTkRfTU9ERVMuU0FUVVJBVElPTl0gPSBbZ2wuT05FLCBnbC5PTkVfTUlOVVNfU1JDX0FMUEhBXTtcbiAgICBhcnJheVtjb25zdGFudHMuQkxFTkRfTU9ERVMuQ09MT1JdID0gW2dsLk9ORSwgZ2wuT05FX01JTlVTX1NSQ19BTFBIQV07XG4gICAgYXJyYXlbY29uc3RhbnRzLkJMRU5EX01PREVTLkxVTUlOT1NJVFldID0gW2dsLk9ORSwgZ2wuT05FX01JTlVTX1NSQ19BTFBIQV07XG4gICAgYXJyYXlbY29uc3RhbnRzLkJMRU5EX01PREVTLk5PTkVdID0gWzAsIDBdO1xuICAgIC8vIG5vdC1wcmVtdWx0aXBsaWVkIGJsZW5kIG1vZGVzXG4gICAgYXJyYXlbY29uc3RhbnRzLkJMRU5EX01PREVTLk5PUk1BTF9OUE1dID0gW2dsLlNSQ19BTFBIQSwgZ2wuT05FX01JTlVTX1NSQ19BTFBIQSwgZ2wuT05FLCBnbC5PTkVfTUlOVVNfU1JDX0FMUEhBXTtcbiAgICBhcnJheVtjb25zdGFudHMuQkxFTkRfTU9ERVMuQUREX05QTV0gPSBbZ2wuU1JDX0FMUEhBLCBnbC5PTkUsIGdsLk9ORSwgZ2wuT05FXTtcbiAgICBhcnJheVtjb25zdGFudHMuQkxFTkRfTU9ERVMuU0NSRUVOX05QTV0gPSBbZ2wuU1JDX0FMUEhBLCBnbC5PTkVfTUlOVVNfU1JDX0NPTE9SLCBnbC5PTkUsIGdsLk9ORV9NSU5VU19TUkNfQUxQSEFdO1xuICAgIC8vIGNvbXBvc2l0ZSBvcGVyYXRpb25zXG4gICAgYXJyYXlbY29uc3RhbnRzLkJMRU5EX01PREVTLlNSQ19JTl0gPSBbZ2wuRFNUX0FMUEhBLCBnbC5aRVJPXTtcbiAgICBhcnJheVtjb25zdGFudHMuQkxFTkRfTU9ERVMuU1JDX09VVF0gPSBbZ2wuT05FX01JTlVTX0RTVF9BTFBIQSwgZ2wuWkVST107XG4gICAgYXJyYXlbY29uc3RhbnRzLkJMRU5EX01PREVTLlNSQ19BVE9QXSA9IFtnbC5EU1RfQUxQSEEsIGdsLk9ORV9NSU5VU19TUkNfQUxQSEFdO1xuICAgIGFycmF5W2NvbnN0YW50cy5CTEVORF9NT0RFUy5EU1RfT1ZFUl0gPSBbZ2wuT05FX01JTlVTX0RTVF9BTFBIQSwgZ2wuT05FXTtcbiAgICBhcnJheVtjb25zdGFudHMuQkxFTkRfTU9ERVMuRFNUX0lOXSA9IFtnbC5aRVJPLCBnbC5TUkNfQUxQSEFdO1xuICAgIGFycmF5W2NvbnN0YW50cy5CTEVORF9NT0RFUy5EU1RfT1VUXSA9IFtnbC5aRVJPLCBnbC5PTkVfTUlOVVNfU1JDX0FMUEhBXTtcbiAgICBhcnJheVtjb25zdGFudHMuQkxFTkRfTU9ERVMuRFNUX0FUT1BdID0gW2dsLk9ORV9NSU5VU19EU1RfQUxQSEEsIGdsLlNSQ19BTFBIQV07XG4gICAgYXJyYXlbY29uc3RhbnRzLkJMRU5EX01PREVTLlhPUl0gPSBbZ2wuT05FX01JTlVTX0RTVF9BTFBIQSwgZ2wuT05FX01JTlVTX1NSQ19BTFBIQV07XG4gICAgLy8gU1VCVFJBQ1QgZnJvbSBmbGFzaFxuICAgIGFycmF5W2NvbnN0YW50cy5CTEVORF9NT0RFUy5TVUJUUkFDVF0gPSBbZ2wuT05FLCBnbC5PTkUsIGdsLk9ORSwgZ2wuT05FLCBnbC5GVU5DX1JFVkVSU0VfU1VCVFJBQ1QsIGdsLkZVTkNfQUREXTtcbiAgICByZXR1cm4gYXJyYXk7XG59XG5cbnZhciBCTEVORCA9IDA7XG52YXIgT0ZGU0VUID0gMTtcbnZhciBDVUxMSU5HID0gMjtcbnZhciBERVBUSF9URVNUID0gMztcbnZhciBXSU5ESU5HID0gNDtcbnZhciBERVBUSF9NQVNLID0gNTtcbi8qKlxuICogU3lzdGVtIHBsdWdpbiB0byB0aGUgcmVuZGVyZXIgdG8gbWFuYWdlIFdlYkdMIHN0YXRlIG1hY2hpbmVzLlxuICogQG1lbWJlcm9mIFBJWElcbiAqL1xudmFyIFN0YXRlU3lzdGVtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFN0YXRlU3lzdGVtKCkge1xuICAgICAgICB0aGlzLmdsID0gbnVsbDtcbiAgICAgICAgdGhpcy5zdGF0ZUlkID0gMDtcbiAgICAgICAgdGhpcy5wb2x5Z29uT2Zmc2V0ID0gMDtcbiAgICAgICAgdGhpcy5ibGVuZE1vZGUgPSBjb25zdGFudHMuQkxFTkRfTU9ERVMuTk9ORTtcbiAgICAgICAgdGhpcy5fYmxlbmRFcSA9IGZhbHNlO1xuICAgICAgICAvLyBtYXAgZnVuY3Rpb25zIGZvciB3aGVuIHdlIHNldCBzdGF0ZS4uXG4gICAgICAgIHRoaXMubWFwID0gW107XG4gICAgICAgIHRoaXMubWFwW0JMRU5EXSA9IHRoaXMuc2V0QmxlbmQ7XG4gICAgICAgIHRoaXMubWFwW09GRlNFVF0gPSB0aGlzLnNldE9mZnNldDtcbiAgICAgICAgdGhpcy5tYXBbQ1VMTElOR10gPSB0aGlzLnNldEN1bGxGYWNlO1xuICAgICAgICB0aGlzLm1hcFtERVBUSF9URVNUXSA9IHRoaXMuc2V0RGVwdGhUZXN0O1xuICAgICAgICB0aGlzLm1hcFtXSU5ESU5HXSA9IHRoaXMuc2V0RnJvbnRGYWNlO1xuICAgICAgICB0aGlzLm1hcFtERVBUSF9NQVNLXSA9IHRoaXMuc2V0RGVwdGhNYXNrO1xuICAgICAgICB0aGlzLmNoZWNrcyA9IFtdO1xuICAgICAgICB0aGlzLmRlZmF1bHRTdGF0ZSA9IG5ldyBTdGF0ZSgpO1xuICAgICAgICB0aGlzLmRlZmF1bHRTdGF0ZS5ibGVuZCA9IHRydWU7XG4gICAgfVxuICAgIFN0YXRlU3lzdGVtLnByb3RvdHlwZS5jb250ZXh0Q2hhbmdlID0gZnVuY3Rpb24gKGdsKSB7XG4gICAgICAgIHRoaXMuZ2wgPSBnbDtcbiAgICAgICAgdGhpcy5ibGVuZE1vZGVzID0gbWFwV2ViR0xCbGVuZE1vZGVzVG9QaXhpKGdsKTtcbiAgICAgICAgdGhpcy5zZXQodGhpcy5kZWZhdWx0U3RhdGUpO1xuICAgICAgICB0aGlzLnJlc2V0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBjdXJyZW50IHN0YXRlXG4gICAgICogQHBhcmFtIHsqfSBzdGF0ZSAtIFRoZSBzdGF0ZSB0byBzZXQuXG4gICAgICovXG4gICAgU3RhdGVTeXN0ZW0ucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICBzdGF0ZSA9IHN0YXRlIHx8IHRoaXMuZGVmYXVsdFN0YXRlO1xuICAgICAgICAvLyBUT0RPIG1heWJlIHRvIGFuIG9iamVjdCBjaGVjaz8gKCB0aGlzLnN0YXRlID09PSBzdGF0ZSApP1xuICAgICAgICBpZiAodGhpcy5zdGF0ZUlkICE9PSBzdGF0ZS5kYXRhKSB7XG4gICAgICAgICAgICB2YXIgZGlmZiA9IHRoaXMuc3RhdGVJZCBeIHN0YXRlLmRhdGE7XG4gICAgICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgICAgICAvLyBvcmRlciBmcm9tIGxlYXN0IHRvIG1vc3QgY29tbW9uXG4gICAgICAgICAgICB3aGlsZSAoZGlmZikge1xuICAgICAgICAgICAgICAgIGlmIChkaWZmICYgMSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBzdGF0ZSBjaGFuZ2UhXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWFwW2ldLmNhbGwodGhpcywgISEoc3RhdGUuZGF0YSAmICgxIDw8IGkpKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRpZmYgPSBkaWZmID4+IDE7XG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zdGF0ZUlkID0gc3RhdGUuZGF0YTtcbiAgICAgICAgfVxuICAgICAgICAvLyBiYXNlZCBvbiB0aGUgYWJvdmUgc2V0dGluZ3Mgd2UgY2hlY2sgZm9yIHNwZWNpZmljIG1vZGVzLi5cbiAgICAgICAgLy8gZm9yIGV4YW1wbGUgaWYgYmxlbmQgaXMgYWN0aXZlIHdlIGNoZWNrIGFuZCBzZXQgdGhlIGJsZW5kIG1vZGVzXG4gICAgICAgIC8vIG9yIG9mIHBvbHlnb24gb2Zmc2V0IGlzIGFjdGl2ZSB3ZSBjaGVjayB0aGUgcG9seSBkZXB0aC5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNoZWNrcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5jaGVja3NbaV0odGhpcywgc3RhdGUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBzdGF0ZSwgd2hlbiBwcmV2aW91cyBzdGF0ZSBpcyB1bmtub3duLlxuICAgICAqIEBwYXJhbSB7Kn0gc3RhdGUgLSBUaGUgc3RhdGUgdG8gc2V0XG4gICAgICovXG4gICAgU3RhdGVTeXN0ZW0ucHJvdG90eXBlLmZvcmNlU3RhdGUgPSBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgc3RhdGUgPSBzdGF0ZSB8fCB0aGlzLmRlZmF1bHRTdGF0ZTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm1hcC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5tYXBbaV0uY2FsbCh0aGlzLCAhIShzdGF0ZS5kYXRhICYgKDEgPDwgaSkpKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY2hlY2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLmNoZWNrc1tpXSh0aGlzLCBzdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdGF0ZUlkID0gc3RhdGUuZGF0YTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHMgd2hldGhlciB0byBlbmFibGUgb3IgZGlzYWJsZSBibGVuZGluZy5cbiAgICAgKiBAcGFyYW0gdmFsdWUgLSBUdXJuIG9uIG9yIG9mZiBXZWJHbCBibGVuZGluZy5cbiAgICAgKi9cbiAgICBTdGF0ZVN5c3RlbS5wcm90b3R5cGUuc2V0QmxlbmQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdGhpcy51cGRhdGVDaGVjayhTdGF0ZVN5c3RlbS5jaGVja0JsZW5kTW9kZSwgdmFsdWUpO1xuICAgICAgICB0aGlzLmdsW3ZhbHVlID8gJ2VuYWJsZScgOiAnZGlzYWJsZSddKHRoaXMuZ2wuQkxFTkQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0cyB3aGV0aGVyIHRvIGVuYWJsZSBvciBkaXNhYmxlIHBvbHlnb24gb2Zmc2V0IGZpbGwuXG4gICAgICogQHBhcmFtIHZhbHVlIC0gVHVybiBvbiBvciBvZmYgd2ViZ2wgcG9seWdvbiBvZmZzZXQgdGVzdGluZy5cbiAgICAgKi9cbiAgICBTdGF0ZVN5c3RlbS5wcm90b3R5cGUuc2V0T2Zmc2V0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudXBkYXRlQ2hlY2soU3RhdGVTeXN0ZW0uY2hlY2tQb2x5Z29uT2Zmc2V0LCB2YWx1ZSk7XG4gICAgICAgIHRoaXMuZ2xbdmFsdWUgPyAnZW5hYmxlJyA6ICdkaXNhYmxlJ10odGhpcy5nbC5QT0xZR09OX09GRlNFVF9GSUxMKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHMgd2hldGhlciB0byBlbmFibGUgb3IgZGlzYWJsZSBkZXB0aCB0ZXN0LlxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIFR1cm4gb24gb3Igb2ZmIHdlYmdsIGRlcHRoIHRlc3RpbmcuXG4gICAgICovXG4gICAgU3RhdGVTeXN0ZW0ucHJvdG90eXBlLnNldERlcHRoVGVzdCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLmdsW3ZhbHVlID8gJ2VuYWJsZScgOiAnZGlzYWJsZSddKHRoaXMuZ2wuREVQVEhfVEVTVCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXRzIHdoZXRoZXIgdG8gZW5hYmxlIG9yIGRpc2FibGUgZGVwdGggbWFzay5cbiAgICAgKiBAcGFyYW0gdmFsdWUgLSBUdXJuIG9uIG9yIG9mZiB3ZWJnbCBkZXB0aCBtYXNrLlxuICAgICAqL1xuICAgIFN0YXRlU3lzdGVtLnByb3RvdHlwZS5zZXREZXB0aE1hc2sgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdGhpcy5nbC5kZXB0aE1hc2sodmFsdWUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0cyB3aGV0aGVyIHRvIGVuYWJsZSBvciBkaXNhYmxlIGN1bGwgZmFjZS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHZhbHVlIC0gVHVybiBvbiBvciBvZmYgd2ViZ2wgY3VsbCBmYWNlLlxuICAgICAqL1xuICAgIFN0YXRlU3lzdGVtLnByb3RvdHlwZS5zZXRDdWxsRmFjZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLmdsW3ZhbHVlID8gJ2VuYWJsZScgOiAnZGlzYWJsZSddKHRoaXMuZ2wuQ1VMTF9GQUNFKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGdsIGZyb250IGZhY2UuXG4gICAgICogQHBhcmFtIHtib29sZWFufSB2YWx1ZSAtIHRydWUgaXMgY2xvY2t3aXNlIGFuZCBmYWxzZSBpcyBjb3VudGVyLWNsb2Nrd2lzZVxuICAgICAqL1xuICAgIFN0YXRlU3lzdGVtLnByb3RvdHlwZS5zZXRGcm9udEZhY2UgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdGhpcy5nbC5mcm9udEZhY2UodGhpcy5nbFt2YWx1ZSA/ICdDVycgOiAnQ0NXJ10pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgYmxlbmQgbW9kZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgLSBUaGUgYmxlbmQgbW9kZSB0byBzZXQgdG8uXG4gICAgICovXG4gICAgU3RhdGVTeXN0ZW0ucHJvdG90eXBlLnNldEJsZW5kTW9kZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAodmFsdWUgPT09IHRoaXMuYmxlbmRNb2RlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ibGVuZE1vZGUgPSB2YWx1ZTtcbiAgICAgICAgdmFyIG1vZGUgPSB0aGlzLmJsZW5kTW9kZXNbdmFsdWVdO1xuICAgICAgICB2YXIgZ2wgPSB0aGlzLmdsO1xuICAgICAgICBpZiAobW9kZS5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgIGdsLmJsZW5kRnVuYyhtb2RlWzBdLCBtb2RlWzFdKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGdsLmJsZW5kRnVuY1NlcGFyYXRlKG1vZGVbMF0sIG1vZGVbMV0sIG1vZGVbMl0sIG1vZGVbM10pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtb2RlLmxlbmd0aCA9PT0gNikge1xuICAgICAgICAgICAgdGhpcy5fYmxlbmRFcSA9IHRydWU7XG4gICAgICAgICAgICBnbC5ibGVuZEVxdWF0aW9uU2VwYXJhdGUobW9kZVs0XSwgbW9kZVs1XSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5fYmxlbmRFcSkge1xuICAgICAgICAgICAgdGhpcy5fYmxlbmRFcSA9IGZhbHNlO1xuICAgICAgICAgICAgZ2wuYmxlbmRFcXVhdGlvblNlcGFyYXRlKGdsLkZVTkNfQURELCBnbC5GVU5DX0FERCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHBvbHlnb24gb2Zmc2V0LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSAtIHRoZSBwb2x5Z29uIG9mZnNldFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzY2FsZSAtIHRoZSBwb2x5Z29uIG9mZnNldCBzY2FsZVxuICAgICAqL1xuICAgIFN0YXRlU3lzdGVtLnByb3RvdHlwZS5zZXRQb2x5Z29uT2Zmc2V0ID0gZnVuY3Rpb24gKHZhbHVlLCBzY2FsZSkge1xuICAgICAgICB0aGlzLmdsLnBvbHlnb25PZmZzZXQodmFsdWUsIHNjYWxlKTtcbiAgICB9O1xuICAgIC8vIHVzZWRcbiAgICAvKiogUmVzZXRzIGFsbCB0aGUgbG9naWMgYW5kIGRpc2FibGVzIHRoZSBWQU9zLiAqL1xuICAgIFN0YXRlU3lzdGVtLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5nbC5waXhlbFN0b3JlaSh0aGlzLmdsLlVOUEFDS19GTElQX1lfV0VCR0wsIGZhbHNlKTtcbiAgICAgICAgdGhpcy5mb3JjZVN0YXRlKHRoaXMuZGVmYXVsdFN0YXRlKTtcbiAgICAgICAgdGhpcy5fYmxlbmRFcSA9IHRydWU7XG4gICAgICAgIHRoaXMuYmxlbmRNb2RlID0gLTE7XG4gICAgICAgIHRoaXMuc2V0QmxlbmRNb2RlKDApO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2hlY2tzIHRvIHNlZSB3aGljaCB1cGRhdGVzIHNob3VsZCBiZSBjaGVja2VkIGJhc2VkIG9uIHdoaWNoIHNldHRpbmdzIGhhdmUgYmVlbiBhY3RpdmF0ZWQuXG4gICAgICpcbiAgICAgKiBGb3IgZXhhbXBsZSwgaWYgYmxlbmQgaXMgZW5hYmxlZCB0aGVuIHdlIHNob3VsZCBjaGVjayB0aGUgYmxlbmQgbW9kZXMgZWFjaCB0aW1lIHRoZSBzdGF0ZSBpcyBjaGFuZ2VkXG4gICAgICogb3IgaWYgcG9seWdvbiBmaWxsIGlzIGFjdGl2YXRlZCB0aGVuIHdlIG5lZWQgdG8gY2hlY2sgaWYgdGhlIHBvbHlnb24gb2Zmc2V0IGNoYW5nZXMuXG4gICAgICogVGhlIGlkZWEgaXMgdGhhdCB3ZSBvbmx5IGNoZWNrIHdoYXQgd2UgaGF2ZSB0b28uXG4gICAgICogQHBhcmFtIGZ1bmMgLSB0aGUgY2hlY2tpbmcgZnVuY3Rpb24gdG8gYWRkIG9yIHJlbW92ZVxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIHNob3VsZCB0aGUgY2hlY2sgZnVuY3Rpb24gYmUgYWRkZWQgb3IgcmVtb3ZlZC5cbiAgICAgKi9cbiAgICBTdGF0ZVN5c3RlbS5wcm90b3R5cGUudXBkYXRlQ2hlY2sgPSBmdW5jdGlvbiAoZnVuYywgdmFsdWUpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5jaGVja3MuaW5kZXhPZihmdW5jKTtcbiAgICAgICAgaWYgKHZhbHVlICYmIGluZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgdGhpcy5jaGVja3MucHVzaChmdW5jKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghdmFsdWUgJiYgaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICB0aGlzLmNoZWNrcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBIHByaXZhdGUgbGl0dGxlIHdyYXBwZXIgZnVuY3Rpb24gdGhhdCB3ZSBjYWxsIHRvIGNoZWNrIHRoZSBibGVuZCBtb2RlLlxuICAgICAqIEBwYXJhbSBzeXN0ZW0gLSB0aGUgU3lzdGVtIHRvIHBlcmZvcm0gdGhlIHN0YXRlIGNoZWNrIG9uXG4gICAgICogQHBhcmFtIHN0YXRlIC0gdGhlIHN0YXRlIHRoYXQgdGhlIGJsZW5kTW9kZSB3aWxsIHB1bGxlZCBmcm9tXG4gICAgICovXG4gICAgU3RhdGVTeXN0ZW0uY2hlY2tCbGVuZE1vZGUgPSBmdW5jdGlvbiAoc3lzdGVtLCBzdGF0ZSkge1xuICAgICAgICBzeXN0ZW0uc2V0QmxlbmRNb2RlKHN0YXRlLmJsZW5kTW9kZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBIHByaXZhdGUgbGl0dGxlIHdyYXBwZXIgZnVuY3Rpb24gdGhhdCB3ZSBjYWxsIHRvIGNoZWNrIHRoZSBwb2x5Z29uIG9mZnNldC5cbiAgICAgKiBAcGFyYW0gc3lzdGVtIC0gdGhlIFN5c3RlbSB0byBwZXJmb3JtIHRoZSBzdGF0ZSBjaGVjayBvblxuICAgICAqIEBwYXJhbSBzdGF0ZSAtIHRoZSBzdGF0ZSB0aGF0IHRoZSBibGVuZE1vZGUgd2lsbCBwdWxsZWQgZnJvbVxuICAgICAqL1xuICAgIFN0YXRlU3lzdGVtLmNoZWNrUG9seWdvbk9mZnNldCA9IGZ1bmN0aW9uIChzeXN0ZW0sIHN0YXRlKSB7XG4gICAgICAgIHN5c3RlbS5zZXRQb2x5Z29uT2Zmc2V0KDEsIHN0YXRlLnBvbHlnb25PZmZzZXQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGlnbm9yZVxuICAgICAqL1xuICAgIFN0YXRlU3lzdGVtLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmdsID0gbnVsbDtcbiAgICB9O1xuICAgIHJldHVybiBTdGF0ZVN5c3RlbTtcbn0oKSk7XG5cbi8qKlxuICogU3lzdGVtIHBsdWdpbiB0byB0aGUgcmVuZGVyZXIgdG8gbWFuYWdlIHRleHR1cmUgZ2FyYmFnZSBjb2xsZWN0aW9uIG9uIHRoZSBHUFUsXG4gKiBlbnN1cmluZyB0aGF0IGl0IGRvZXMgbm90IGdldCBjbG9nZ2VkIHVwIHdpdGggdGV4dHVyZXMgdGhhdCBhcmUgbm8gbG9uZ2VyIGJlaW5nIHVzZWQuXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG52YXIgVGV4dHVyZUdDU3lzdGVtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKiBAcGFyYW0gcmVuZGVyZXIgLSBUaGUgcmVuZGVyZXIgdGhpcyBTeXN0ZW0gd29ya3MgZm9yLiAqL1xuICAgIGZ1bmN0aW9uIFRleHR1cmVHQ1N5c3RlbShyZW5kZXJlcikge1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgIHRoaXMuY291bnQgPSAwO1xuICAgICAgICB0aGlzLmNoZWNrQ291bnQgPSAwO1xuICAgICAgICB0aGlzLm1heElkbGUgPSBzZXR0aW5ncy5zZXR0aW5ncy5HQ19NQVhfSURMRTtcbiAgICAgICAgdGhpcy5jaGVja0NvdW50TWF4ID0gc2V0dGluZ3Muc2V0dGluZ3MuR0NfTUFYX0NIRUNLX0NPVU5UO1xuICAgICAgICB0aGlzLm1vZGUgPSBzZXR0aW5ncy5zZXR0aW5ncy5HQ19NT0RFO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVja3MgdG8gc2VlIHdoZW4gdGhlIGxhc3QgdGltZSBhIHRleHR1cmUgd2FzIHVzZWRcbiAgICAgKiBpZiB0aGUgdGV4dHVyZSBoYXMgbm90IGJlZW4gdXNlZCBmb3IgYSBzcGVjaWZpZWQgYW1vdW50IG9mIHRpbWUgaXQgd2lsbCBiZSByZW1vdmVkIGZyb20gdGhlIEdQVVxuICAgICAqL1xuICAgIFRleHR1cmVHQ1N5c3RlbS5wcm90b3R5cGUucG9zdHJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnJlbmRlcmVyLnJlbmRlcmluZ1RvU2NyZWVuKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb3VudCsrO1xuICAgICAgICBpZiAodGhpcy5tb2RlID09PSBjb25zdGFudHMuR0NfTU9ERVMuTUFOVUFMKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jaGVja0NvdW50Kys7XG4gICAgICAgIGlmICh0aGlzLmNoZWNrQ291bnQgPiB0aGlzLmNoZWNrQ291bnRNYXgpIHtcbiAgICAgICAgICAgIHRoaXMuY2hlY2tDb3VudCA9IDA7XG4gICAgICAgICAgICB0aGlzLnJ1bigpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDaGVja3MgdG8gc2VlIHdoZW4gdGhlIGxhc3QgdGltZSBhIHRleHR1cmUgd2FzIHVzZWRcbiAgICAgKiBpZiB0aGUgdGV4dHVyZSBoYXMgbm90IGJlZW4gdXNlZCBmb3IgYSBzcGVjaWZpZWQgYW1vdW50IG9mIHRpbWUgaXQgd2lsbCBiZSByZW1vdmVkIGZyb20gdGhlIEdQVVxuICAgICAqL1xuICAgIFRleHR1cmVHQ1N5c3RlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdG0gPSB0aGlzLnJlbmRlcmVyLnRleHR1cmU7XG4gICAgICAgIHZhciBtYW5hZ2VkVGV4dHVyZXMgPSB0bS5tYW5hZ2VkVGV4dHVyZXM7XG4gICAgICAgIHZhciB3YXNSZW1vdmVkID0gZmFsc2U7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWFuYWdlZFRleHR1cmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgdGV4dHVyZSA9IG1hbmFnZWRUZXh0dXJlc1tpXTtcbiAgICAgICAgICAgIC8vIG9ubHkgc3VwcG9ydHMgbm9uIGdlbmVyYXRlZCB0ZXh0dXJlcyBhdCB0aGUgbW9tZW50IVxuICAgICAgICAgICAgaWYgKCF0ZXh0dXJlLmZyYW1lYnVmZmVyICYmIHRoaXMuY291bnQgLSB0ZXh0dXJlLnRvdWNoZWQgPiB0aGlzLm1heElkbGUpIHtcbiAgICAgICAgICAgICAgICB0bS5kZXN0cm95VGV4dHVyZSh0ZXh0dXJlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBtYW5hZ2VkVGV4dHVyZXNbaV0gPSBudWxsO1xuICAgICAgICAgICAgICAgIHdhc1JlbW92ZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh3YXNSZW1vdmVkKSB7XG4gICAgICAgICAgICB2YXIgaiA9IDA7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hbmFnZWRUZXh0dXJlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChtYW5hZ2VkVGV4dHVyZXNbaV0gIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgbWFuYWdlZFRleHR1cmVzW2orK10gPSBtYW5hZ2VkVGV4dHVyZXNbaV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWFuYWdlZFRleHR1cmVzLmxlbmd0aCA9IGo7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYWxsIHRoZSB0ZXh0dXJlcyB3aXRoaW4gdGhlIHNwZWNpZmllZCBkaXNwbGF5T2JqZWN0IGFuZCBpdHMgY2hpbGRyZW4gZnJvbSB0aGUgR1BVXG4gICAgICogQHBhcmFtIHtQSVhJLkRpc3BsYXlPYmplY3R9IGRpc3BsYXlPYmplY3QgLSB0aGUgZGlzcGxheU9iamVjdCB0byByZW1vdmUgdGhlIHRleHR1cmVzIGZyb20uXG4gICAgICovXG4gICAgVGV4dHVyZUdDU3lzdGVtLnByb3RvdHlwZS51bmxvYWQgPSBmdW5jdGlvbiAoZGlzcGxheU9iamVjdCkge1xuICAgICAgICB2YXIgdG0gPSB0aGlzLnJlbmRlcmVyLnRleHR1cmU7XG4gICAgICAgIHZhciB0ZXh0dXJlID0gZGlzcGxheU9iamVjdC5fdGV4dHVyZTtcbiAgICAgICAgLy8gb25seSBkZXN0cm95IG5vbiBnZW5lcmF0ZWQgdGV4dHVyZXNcbiAgICAgICAgaWYgKHRleHR1cmUgJiYgIXRleHR1cmUuZnJhbWVidWZmZXIpIHtcbiAgICAgICAgICAgIHRtLmRlc3Ryb3lUZXh0dXJlKHRleHR1cmUpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSBkaXNwbGF5T2JqZWN0LmNoaWxkcmVuLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICB0aGlzLnVubG9hZChkaXNwbGF5T2JqZWN0LmNoaWxkcmVuW2ldKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgVGV4dHVyZUdDU3lzdGVtLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gbnVsbDtcbiAgICB9O1xuICAgIHJldHVybiBUZXh0dXJlR0NTeXN0ZW07XG59KCkpO1xuXG4vKipcbiAqIFJldHVybnMgYSBsb29rdXAgdGFibGUgdGhhdCBtYXBzIGVhY2ggdHlwZS1mb3JtYXQgcGFpciB0byBhIGNvbXBhdGlibGUgaW50ZXJuYWwgZm9ybWF0LlxuICogQG1lbWJlcm9mIFBJWElcbiAqIEBmdW5jdGlvbiBtYXBUeXBlQW5kRm9ybWF0VG9JbnRlcm5hbEZvcm1hdFxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCAtIFRoZSByZW5kZXJpbmcgY29udGV4dC5cbiAqIEByZXR1cm5zIExvb2t1cCB0YWJsZS5cbiAqL1xuZnVuY3Rpb24gbWFwVHlwZUFuZEZvcm1hdFRvSW50ZXJuYWxGb3JtYXQoZ2wpIHtcbiAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2csIF9oLCBfaiwgX2ssIF9sLCBfbSwgX28sIF9wLCBfcSwgX3IsIF9zLCBfdCwgX3UsIF92LCBfdywgX3g7XG4gICAgdmFyIHRhYmxlO1xuICAgIGlmICgnV2ViR0wyUmVuZGVyaW5nQ29udGV4dCcgaW4gZ2xvYmFsVGhpcyAmJiBnbCBpbnN0YW5jZW9mIGdsb2JhbFRoaXMuV2ViR0wyUmVuZGVyaW5nQ29udGV4dCkge1xuICAgICAgICB0YWJsZSA9IChfYSA9IHt9LFxuICAgICAgICAgICAgX2FbY29uc3RhbnRzLlRZUEVTLlVOU0lHTkVEX0JZVEVdID0gKF9iID0ge30sXG4gICAgICAgICAgICAgICAgX2JbY29uc3RhbnRzLkZPUk1BVFMuUkdCQV0gPSBnbC5SR0JBOCxcbiAgICAgICAgICAgICAgICBfYltjb25zdGFudHMuRk9STUFUUy5SR0JdID0gZ2wuUkdCOCxcbiAgICAgICAgICAgICAgICBfYltjb25zdGFudHMuRk9STUFUUy5SR10gPSBnbC5SRzgsXG4gICAgICAgICAgICAgICAgX2JbY29uc3RhbnRzLkZPUk1BVFMuUkVEXSA9IGdsLlI4LFxuICAgICAgICAgICAgICAgIF9iW2NvbnN0YW50cy5GT1JNQVRTLlJHQkFfSU5URUdFUl0gPSBnbC5SR0JBOFVJLFxuICAgICAgICAgICAgICAgIF9iW2NvbnN0YW50cy5GT1JNQVRTLlJHQl9JTlRFR0VSXSA9IGdsLlJHQjhVSSxcbiAgICAgICAgICAgICAgICBfYltjb25zdGFudHMuRk9STUFUUy5SR19JTlRFR0VSXSA9IGdsLlJHOFVJLFxuICAgICAgICAgICAgICAgIF9iW2NvbnN0YW50cy5GT1JNQVRTLlJFRF9JTlRFR0VSXSA9IGdsLlI4VUksXG4gICAgICAgICAgICAgICAgX2JbY29uc3RhbnRzLkZPUk1BVFMuQUxQSEFdID0gZ2wuQUxQSEEsXG4gICAgICAgICAgICAgICAgX2JbY29uc3RhbnRzLkZPUk1BVFMuTFVNSU5BTkNFXSA9IGdsLkxVTUlOQU5DRSxcbiAgICAgICAgICAgICAgICBfYltjb25zdGFudHMuRk9STUFUUy5MVU1JTkFOQ0VfQUxQSEFdID0gZ2wuTFVNSU5BTkNFX0FMUEhBLFxuICAgICAgICAgICAgICAgIF9iKSxcbiAgICAgICAgICAgIF9hW2NvbnN0YW50cy5UWVBFUy5CWVRFXSA9IChfYyA9IHt9LFxuICAgICAgICAgICAgICAgIF9jW2NvbnN0YW50cy5GT1JNQVRTLlJHQkFdID0gZ2wuUkdCQThfU05PUk0sXG4gICAgICAgICAgICAgICAgX2NbY29uc3RhbnRzLkZPUk1BVFMuUkdCXSA9IGdsLlJHQjhfU05PUk0sXG4gICAgICAgICAgICAgICAgX2NbY29uc3RhbnRzLkZPUk1BVFMuUkddID0gZ2wuUkc4X1NOT1JNLFxuICAgICAgICAgICAgICAgIF9jW2NvbnN0YW50cy5GT1JNQVRTLlJFRF0gPSBnbC5SOF9TTk9STSxcbiAgICAgICAgICAgICAgICBfY1tjb25zdGFudHMuRk9STUFUUy5SR0JBX0lOVEVHRVJdID0gZ2wuUkdCQThJLFxuICAgICAgICAgICAgICAgIF9jW2NvbnN0YW50cy5GT1JNQVRTLlJHQl9JTlRFR0VSXSA9IGdsLlJHQjhJLFxuICAgICAgICAgICAgICAgIF9jW2NvbnN0YW50cy5GT1JNQVRTLlJHX0lOVEVHRVJdID0gZ2wuUkc4SSxcbiAgICAgICAgICAgICAgICBfY1tjb25zdGFudHMuRk9STUFUUy5SRURfSU5URUdFUl0gPSBnbC5SOEksXG4gICAgICAgICAgICAgICAgX2MpLFxuICAgICAgICAgICAgX2FbY29uc3RhbnRzLlRZUEVTLlVOU0lHTkVEX1NIT1JUXSA9IChfZCA9IHt9LFxuICAgICAgICAgICAgICAgIF9kW2NvbnN0YW50cy5GT1JNQVRTLlJHQkFfSU5URUdFUl0gPSBnbC5SR0JBMTZVSSxcbiAgICAgICAgICAgICAgICBfZFtjb25zdGFudHMuRk9STUFUUy5SR0JfSU5URUdFUl0gPSBnbC5SR0IxNlVJLFxuICAgICAgICAgICAgICAgIF9kW2NvbnN0YW50cy5GT1JNQVRTLlJHX0lOVEVHRVJdID0gZ2wuUkcxNlVJLFxuICAgICAgICAgICAgICAgIF9kW2NvbnN0YW50cy5GT1JNQVRTLlJFRF9JTlRFR0VSXSA9IGdsLlIxNlVJLFxuICAgICAgICAgICAgICAgIF9kW2NvbnN0YW50cy5GT1JNQVRTLkRFUFRIX0NPTVBPTkVOVF0gPSBnbC5ERVBUSF9DT01QT05FTlQxNixcbiAgICAgICAgICAgICAgICBfZCksXG4gICAgICAgICAgICBfYVtjb25zdGFudHMuVFlQRVMuU0hPUlRdID0gKF9lID0ge30sXG4gICAgICAgICAgICAgICAgX2VbY29uc3RhbnRzLkZPUk1BVFMuUkdCQV9JTlRFR0VSXSA9IGdsLlJHQkExNkksXG4gICAgICAgICAgICAgICAgX2VbY29uc3RhbnRzLkZPUk1BVFMuUkdCX0lOVEVHRVJdID0gZ2wuUkdCMTZJLFxuICAgICAgICAgICAgICAgIF9lW2NvbnN0YW50cy5GT1JNQVRTLlJHX0lOVEVHRVJdID0gZ2wuUkcxNkksXG4gICAgICAgICAgICAgICAgX2VbY29uc3RhbnRzLkZPUk1BVFMuUkVEX0lOVEVHRVJdID0gZ2wuUjE2SSxcbiAgICAgICAgICAgICAgICBfZSksXG4gICAgICAgICAgICBfYVtjb25zdGFudHMuVFlQRVMuVU5TSUdORURfSU5UXSA9IChfZiA9IHt9LFxuICAgICAgICAgICAgICAgIF9mW2NvbnN0YW50cy5GT1JNQVRTLlJHQkFfSU5URUdFUl0gPSBnbC5SR0JBMzJVSSxcbiAgICAgICAgICAgICAgICBfZltjb25zdGFudHMuRk9STUFUUy5SR0JfSU5URUdFUl0gPSBnbC5SR0IzMlVJLFxuICAgICAgICAgICAgICAgIF9mW2NvbnN0YW50cy5GT1JNQVRTLlJHX0lOVEVHRVJdID0gZ2wuUkczMlVJLFxuICAgICAgICAgICAgICAgIF9mW2NvbnN0YW50cy5GT1JNQVRTLlJFRF9JTlRFR0VSXSA9IGdsLlIzMlVJLFxuICAgICAgICAgICAgICAgIF9mW2NvbnN0YW50cy5GT1JNQVRTLkRFUFRIX0NPTVBPTkVOVF0gPSBnbC5ERVBUSF9DT01QT05FTlQyNCxcbiAgICAgICAgICAgICAgICBfZiksXG4gICAgICAgICAgICBfYVtjb25zdGFudHMuVFlQRVMuSU5UXSA9IChfZyA9IHt9LFxuICAgICAgICAgICAgICAgIF9nW2NvbnN0YW50cy5GT1JNQVRTLlJHQkFfSU5URUdFUl0gPSBnbC5SR0JBMzJJLFxuICAgICAgICAgICAgICAgIF9nW2NvbnN0YW50cy5GT1JNQVRTLlJHQl9JTlRFR0VSXSA9IGdsLlJHQjMySSxcbiAgICAgICAgICAgICAgICBfZ1tjb25zdGFudHMuRk9STUFUUy5SR19JTlRFR0VSXSA9IGdsLlJHMzJJLFxuICAgICAgICAgICAgICAgIF9nW2NvbnN0YW50cy5GT1JNQVRTLlJFRF9JTlRFR0VSXSA9IGdsLlIzMkksXG4gICAgICAgICAgICAgICAgX2cpLFxuICAgICAgICAgICAgX2FbY29uc3RhbnRzLlRZUEVTLkZMT0FUXSA9IChfaCA9IHt9LFxuICAgICAgICAgICAgICAgIF9oW2NvbnN0YW50cy5GT1JNQVRTLlJHQkFdID0gZ2wuUkdCQTMyRixcbiAgICAgICAgICAgICAgICBfaFtjb25zdGFudHMuRk9STUFUUy5SR0JdID0gZ2wuUkdCMzJGLFxuICAgICAgICAgICAgICAgIF9oW2NvbnN0YW50cy5GT1JNQVRTLlJHXSA9IGdsLlJHMzJGLFxuICAgICAgICAgICAgICAgIF9oW2NvbnN0YW50cy5GT1JNQVRTLlJFRF0gPSBnbC5SMzJGLFxuICAgICAgICAgICAgICAgIF9oW2NvbnN0YW50cy5GT1JNQVRTLkRFUFRIX0NPTVBPTkVOVF0gPSBnbC5ERVBUSF9DT01QT05FTlQzMkYsXG4gICAgICAgICAgICAgICAgX2gpLFxuICAgICAgICAgICAgX2FbY29uc3RhbnRzLlRZUEVTLkhBTEZfRkxPQVRdID0gKF9qID0ge30sXG4gICAgICAgICAgICAgICAgX2pbY29uc3RhbnRzLkZPUk1BVFMuUkdCQV0gPSBnbC5SR0JBMTZGLFxuICAgICAgICAgICAgICAgIF9qW2NvbnN0YW50cy5GT1JNQVRTLlJHQl0gPSBnbC5SR0IxNkYsXG4gICAgICAgICAgICAgICAgX2pbY29uc3RhbnRzLkZPUk1BVFMuUkddID0gZ2wuUkcxNkYsXG4gICAgICAgICAgICAgICAgX2pbY29uc3RhbnRzLkZPUk1BVFMuUkVEXSA9IGdsLlIxNkYsXG4gICAgICAgICAgICAgICAgX2opLFxuICAgICAgICAgICAgX2FbY29uc3RhbnRzLlRZUEVTLlVOU0lHTkVEX1NIT1JUXzVfNl81XSA9IChfayA9IHt9LFxuICAgICAgICAgICAgICAgIF9rW2NvbnN0YW50cy5GT1JNQVRTLlJHQl0gPSBnbC5SR0I1NjUsXG4gICAgICAgICAgICAgICAgX2spLFxuICAgICAgICAgICAgX2FbY29uc3RhbnRzLlRZUEVTLlVOU0lHTkVEX1NIT1JUXzRfNF80XzRdID0gKF9sID0ge30sXG4gICAgICAgICAgICAgICAgX2xbY29uc3RhbnRzLkZPUk1BVFMuUkdCQV0gPSBnbC5SR0JBNCxcbiAgICAgICAgICAgICAgICBfbCksXG4gICAgICAgICAgICBfYVtjb25zdGFudHMuVFlQRVMuVU5TSUdORURfU0hPUlRfNV81XzVfMV0gPSAoX20gPSB7fSxcbiAgICAgICAgICAgICAgICBfbVtjb25zdGFudHMuRk9STUFUUy5SR0JBXSA9IGdsLlJHQjVfQTEsXG4gICAgICAgICAgICAgICAgX20pLFxuICAgICAgICAgICAgX2FbY29uc3RhbnRzLlRZUEVTLlVOU0lHTkVEX0lOVF8yXzEwXzEwXzEwX1JFVl0gPSAoX28gPSB7fSxcbiAgICAgICAgICAgICAgICBfb1tjb25zdGFudHMuRk9STUFUUy5SR0JBXSA9IGdsLlJHQjEwX0EyLFxuICAgICAgICAgICAgICAgIF9vW2NvbnN0YW50cy5GT1JNQVRTLlJHQkFfSU5URUdFUl0gPSBnbC5SR0IxMF9BMlVJLFxuICAgICAgICAgICAgICAgIF9vKSxcbiAgICAgICAgICAgIF9hW2NvbnN0YW50cy5UWVBFUy5VTlNJR05FRF9JTlRfMTBGXzExRl8xMUZfUkVWXSA9IChfcCA9IHt9LFxuICAgICAgICAgICAgICAgIF9wW2NvbnN0YW50cy5GT1JNQVRTLlJHQl0gPSBnbC5SMTFGX0cxMUZfQjEwRixcbiAgICAgICAgICAgICAgICBfcCksXG4gICAgICAgICAgICBfYVtjb25zdGFudHMuVFlQRVMuVU5TSUdORURfSU5UXzVfOV85XzlfUkVWXSA9IChfcSA9IHt9LFxuICAgICAgICAgICAgICAgIF9xW2NvbnN0YW50cy5GT1JNQVRTLlJHQl0gPSBnbC5SR0I5X0U1LFxuICAgICAgICAgICAgICAgIF9xKSxcbiAgICAgICAgICAgIF9hW2NvbnN0YW50cy5UWVBFUy5VTlNJR05FRF9JTlRfMjRfOF0gPSAoX3IgPSB7fSxcbiAgICAgICAgICAgICAgICBfcltjb25zdGFudHMuRk9STUFUUy5ERVBUSF9TVEVOQ0lMXSA9IGdsLkRFUFRIMjRfU1RFTkNJTDgsXG4gICAgICAgICAgICAgICAgX3IpLFxuICAgICAgICAgICAgX2FbY29uc3RhbnRzLlRZUEVTLkZMT0FUXzMyX1VOU0lHTkVEX0lOVF8yNF84X1JFVl0gPSAoX3MgPSB7fSxcbiAgICAgICAgICAgICAgICBfc1tjb25zdGFudHMuRk9STUFUUy5ERVBUSF9TVEVOQ0lMXSA9IGdsLkRFUFRIMzJGX1NURU5DSUw4LFxuICAgICAgICAgICAgICAgIF9zKSxcbiAgICAgICAgICAgIF9hKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRhYmxlID0gKF90ID0ge30sXG4gICAgICAgICAgICBfdFtjb25zdGFudHMuVFlQRVMuVU5TSUdORURfQllURV0gPSAoX3UgPSB7fSxcbiAgICAgICAgICAgICAgICBfdVtjb25zdGFudHMuRk9STUFUUy5SR0JBXSA9IGdsLlJHQkEsXG4gICAgICAgICAgICAgICAgX3VbY29uc3RhbnRzLkZPUk1BVFMuUkdCXSA9IGdsLlJHQixcbiAgICAgICAgICAgICAgICBfdVtjb25zdGFudHMuRk9STUFUUy5BTFBIQV0gPSBnbC5BTFBIQSxcbiAgICAgICAgICAgICAgICBfdVtjb25zdGFudHMuRk9STUFUUy5MVU1JTkFOQ0VdID0gZ2wuTFVNSU5BTkNFLFxuICAgICAgICAgICAgICAgIF91W2NvbnN0YW50cy5GT1JNQVRTLkxVTUlOQU5DRV9BTFBIQV0gPSBnbC5MVU1JTkFOQ0VfQUxQSEEsXG4gICAgICAgICAgICAgICAgX3UpLFxuICAgICAgICAgICAgX3RbY29uc3RhbnRzLlRZUEVTLlVOU0lHTkVEX1NIT1JUXzVfNl81XSA9IChfdiA9IHt9LFxuICAgICAgICAgICAgICAgIF92W2NvbnN0YW50cy5GT1JNQVRTLlJHQl0gPSBnbC5SR0IsXG4gICAgICAgICAgICAgICAgX3YpLFxuICAgICAgICAgICAgX3RbY29uc3RhbnRzLlRZUEVTLlVOU0lHTkVEX1NIT1JUXzRfNF80XzRdID0gKF93ID0ge30sXG4gICAgICAgICAgICAgICAgX3dbY29uc3RhbnRzLkZPUk1BVFMuUkdCQV0gPSBnbC5SR0JBLFxuICAgICAgICAgICAgICAgIF93KSxcbiAgICAgICAgICAgIF90W2NvbnN0YW50cy5UWVBFUy5VTlNJR05FRF9TSE9SVF81XzVfNV8xXSA9IChfeCA9IHt9LFxuICAgICAgICAgICAgICAgIF94W2NvbnN0YW50cy5GT1JNQVRTLlJHQkFdID0gZ2wuUkdCQSxcbiAgICAgICAgICAgICAgICBfeCksXG4gICAgICAgICAgICBfdCk7XG4gICAgfVxuICAgIHJldHVybiB0YWJsZTtcbn1cblxuLyoqXG4gKiBJbnRlcm5hbCB0ZXh0dXJlIGZvciBXZWJHTCBjb250ZXh0LlxuICogQG1lbWJlcm9mIFBJWElcbiAqL1xudmFyIEdMVGV4dHVyZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBHTFRleHR1cmUodGV4dHVyZSkge1xuICAgICAgICB0aGlzLnRleHR1cmUgPSB0ZXh0dXJlO1xuICAgICAgICB0aGlzLndpZHRoID0gLTE7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gLTE7XG4gICAgICAgIHRoaXMuZGlydHlJZCA9IC0xO1xuICAgICAgICB0aGlzLmRpcnR5U3R5bGVJZCA9IC0xO1xuICAgICAgICB0aGlzLm1pcG1hcCA9IGZhbHNlO1xuICAgICAgICB0aGlzLndyYXBNb2RlID0gMzMwNzE7XG4gICAgICAgIHRoaXMudHlwZSA9IGNvbnN0YW50cy5UWVBFUy5VTlNJR05FRF9CWVRFO1xuICAgICAgICB0aGlzLmludGVybmFsRm9ybWF0ID0gY29uc3RhbnRzLkZPUk1BVFMuUkdCQTtcbiAgICAgICAgdGhpcy5zYW1wbGVyVHlwZSA9IDA7XG4gICAgfVxuICAgIHJldHVybiBHTFRleHR1cmU7XG59KCkpO1xuXG4vKipcbiAqIFN5c3RlbSBwbHVnaW4gdG8gdGhlIHJlbmRlcmVyIHRvIG1hbmFnZSB0ZXh0dXJlcy5cbiAqIEBtZW1iZXJvZiBQSVhJXG4gKi9cbnZhciBUZXh0dXJlU3lzdGVtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSByZW5kZXJlciAtIFRoZSByZW5kZXJlciB0aGlzIHN5c3RlbSB3b3JrcyBmb3IuXG4gICAgICovXG4gICAgZnVuY3Rpb24gVGV4dHVyZVN5c3RlbShyZW5kZXJlcikge1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgIC8vIFRPRE8gc2V0IHRvIG1heCB0ZXh0dXJlcy4uLlxuICAgICAgICB0aGlzLmJvdW5kVGV4dHVyZXMgPSBbXTtcbiAgICAgICAgdGhpcy5jdXJyZW50TG9jYXRpb24gPSAtMTtcbiAgICAgICAgdGhpcy5tYW5hZ2VkVGV4dHVyZXMgPSBbXTtcbiAgICAgICAgdGhpcy5fdW5rbm93bkJvdW5kVGV4dHVyZXMgPSBmYWxzZTtcbiAgICAgICAgdGhpcy51bmtub3duVGV4dHVyZSA9IG5ldyBCYXNlVGV4dHVyZSgpO1xuICAgICAgICB0aGlzLmhhc0ludGVnZXJUZXh0dXJlcyA9IGZhbHNlO1xuICAgIH1cbiAgICAvKiogU2V0cyB1cCB0aGUgcmVuZGVyZXIgY29udGV4dCBhbmQgbmVjZXNzYXJ5IGJ1ZmZlcnMuICovXG4gICAgVGV4dHVyZVN5c3RlbS5wcm90b3R5cGUuY29udGV4dENoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGdsID0gdGhpcy5nbCA9IHRoaXMucmVuZGVyZXIuZ2w7XG4gICAgICAgIHRoaXMuQ09OVEVYVF9VSUQgPSB0aGlzLnJlbmRlcmVyLkNPTlRFWFRfVUlEO1xuICAgICAgICB0aGlzLndlYkdMVmVyc2lvbiA9IHRoaXMucmVuZGVyZXIuY29udGV4dC53ZWJHTFZlcnNpb247XG4gICAgICAgIHRoaXMuaW50ZXJuYWxGb3JtYXRzID0gbWFwVHlwZUFuZEZvcm1hdFRvSW50ZXJuYWxGb3JtYXQoZ2wpO1xuICAgICAgICB2YXIgbWF4VGV4dHVyZXMgPSBnbC5nZXRQYXJhbWV0ZXIoZ2wuTUFYX1RFWFRVUkVfSU1BR0VfVU5JVFMpO1xuICAgICAgICB0aGlzLmJvdW5kVGV4dHVyZXMubGVuZ3RoID0gbWF4VGV4dHVyZXM7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF4VGV4dHVyZXM7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5ib3VuZFRleHR1cmVzW2ldID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICAvLyBUT0RPIG1vdmUgdGhpcy4uIHRvIGEgbmljZSBtYWtlIGVtcHR5IHRleHR1cmVzIGNsYXNzLi5cbiAgICAgICAgdGhpcy5lbXB0eVRleHR1cmVzID0ge307XG4gICAgICAgIHZhciBlbXB0eVRleHR1cmUyRCA9IG5ldyBHTFRleHR1cmUoZ2wuY3JlYXRlVGV4dHVyZSgpKTtcbiAgICAgICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgZW1wdHlUZXh0dXJlMkQudGV4dHVyZSk7XG4gICAgICAgIGdsLnRleEltYWdlMkQoZ2wuVEVYVFVSRV8yRCwgMCwgZ2wuUkdCQSwgMSwgMSwgMCwgZ2wuUkdCQSwgZ2wuVU5TSUdORURfQllURSwgbmV3IFVpbnQ4QXJyYXkoNCkpO1xuICAgICAgICB0aGlzLmVtcHR5VGV4dHVyZXNbZ2wuVEVYVFVSRV8yRF0gPSBlbXB0eVRleHR1cmUyRDtcbiAgICAgICAgdGhpcy5lbXB0eVRleHR1cmVzW2dsLlRFWFRVUkVfQ1VCRV9NQVBdID0gbmV3IEdMVGV4dHVyZShnbC5jcmVhdGVUZXh0dXJlKCkpO1xuICAgICAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFX0NVQkVfTUFQLCB0aGlzLmVtcHR5VGV4dHVyZXNbZ2wuVEVYVFVSRV9DVUJFX01BUF0udGV4dHVyZSk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNjsgaSsrKSB7XG4gICAgICAgICAgICBnbC50ZXhJbWFnZTJEKGdsLlRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWCArIGksIDAsIGdsLlJHQkEsIDEsIDEsIDAsIGdsLlJHQkEsIGdsLlVOU0lHTkVEX0JZVEUsIG51bGwpO1xuICAgICAgICB9XG4gICAgICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV9DVUJFX01BUCwgZ2wuVEVYVFVSRV9NQUdfRklMVEVSLCBnbC5MSU5FQVIpO1xuICAgICAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfQ1VCRV9NQVAsIGdsLlRFWFRVUkVfTUlOX0ZJTFRFUiwgZ2wuTElORUFSKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmJvdW5kVGV4dHVyZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuYmluZChudWxsLCBpKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQmluZCBhIHRleHR1cmUgdG8gYSBzcGVjaWZpYyBsb2NhdGlvblxuICAgICAqXG4gICAgICogSWYgeW91IHdhbnQgdG8gdW5iaW5kIHNvbWV0aGluZywgcGxlYXNlIHVzZSBgdW5iaW5kKHRleHR1cmUpYCBpbnN0ZWFkIG9mIGBiaW5kKG51bGwsIHRleHR1cmVMb2NhdGlvbilgXG4gICAgICogQHBhcmFtIHRleHR1cmUgLSBUZXh0dXJlIHRvIGJpbmRcbiAgICAgKiBAcGFyYW0gW2xvY2F0aW9uPTBdIC0gTG9jYXRpb24gdG8gYmluZCBhdFxuICAgICAqL1xuICAgIFRleHR1cmVTeXN0ZW0ucHJvdG90eXBlLmJpbmQgPSBmdW5jdGlvbiAodGV4dHVyZSwgbG9jYXRpb24pIHtcbiAgICAgICAgaWYgKGxvY2F0aW9uID09PSB2b2lkIDApIHsgbG9jYXRpb24gPSAwOyB9XG4gICAgICAgIHZhciBnbCA9IHRoaXMuZ2w7XG4gICAgICAgIHRleHR1cmUgPSB0ZXh0dXJlID09PSBudWxsIHx8IHRleHR1cmUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHRleHR1cmUuY2FzdFRvQmFzZVRleHR1cmUoKTtcbiAgICAgICAgLy8gY2Fubm90IGJpbmQgcGFydGlhbCB0ZXh0dXJlXG4gICAgICAgIC8vIFRPRE86IHJlcG9ydCBhIHdhcm5pbmdcbiAgICAgICAgaWYgKHRleHR1cmUgJiYgdGV4dHVyZS52YWxpZCAmJiAhdGV4dHVyZS5wYXJlbnRUZXh0dXJlQXJyYXkpIHtcbiAgICAgICAgICAgIHRleHR1cmUudG91Y2hlZCA9IHRoaXMucmVuZGVyZXIudGV4dHVyZUdDLmNvdW50O1xuICAgICAgICAgICAgdmFyIGdsVGV4dHVyZSA9IHRleHR1cmUuX2dsVGV4dHVyZXNbdGhpcy5DT05URVhUX1VJRF0gfHwgdGhpcy5pbml0VGV4dHVyZSh0ZXh0dXJlKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmJvdW5kVGV4dHVyZXNbbG9jYXRpb25dICE9PSB0ZXh0dXJlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudExvY2F0aW9uICE9PSBsb2NhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRMb2NhdGlvbiA9IGxvY2F0aW9uO1xuICAgICAgICAgICAgICAgICAgICBnbC5hY3RpdmVUZXh0dXJlKGdsLlRFWFRVUkUwICsgbG9jYXRpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBnbC5iaW5kVGV4dHVyZSh0ZXh0dXJlLnRhcmdldCwgZ2xUZXh0dXJlLnRleHR1cmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGdsVGV4dHVyZS5kaXJ0eUlkICE9PSB0ZXh0dXJlLmRpcnR5SWQpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50TG9jYXRpb24gIT09IGxvY2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudExvY2F0aW9uID0gbG9jYXRpb247XG4gICAgICAgICAgICAgICAgICAgIGdsLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTAgKyBsb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVGV4dHVyZSh0ZXh0dXJlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYm91bmRUZXh0dXJlc1tsb2NhdGlvbl0gPSB0ZXh0dXJlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudExvY2F0aW9uICE9PSBsb2NhdGlvbikge1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudExvY2F0aW9uID0gbG9jYXRpb247XG4gICAgICAgICAgICAgICAgZ2wuYWN0aXZlVGV4dHVyZShnbC5URVhUVVJFMCArIGxvY2F0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHRoaXMuZW1wdHlUZXh0dXJlc1tnbC5URVhUVVJFXzJEXS50ZXh0dXJlKTtcbiAgICAgICAgICAgIHRoaXMuYm91bmRUZXh0dXJlc1tsb2NhdGlvbl0gPSBudWxsO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKiogUmVzZXRzIHRleHR1cmUgbG9jYXRpb24gYW5kIGJvdW5kIHRleHR1cmVzIEFjdHVhbCBgYmluZChudWxsLCBpKWAgY2FsbHMgd2lsbCBiZSBwZXJmb3JtZWQgYXQgbmV4dCBgdW5iaW5kKClgIGNhbGwgKi9cbiAgICBUZXh0dXJlU3lzdGVtLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fdW5rbm93bkJvdW5kVGV4dHVyZXMgPSB0cnVlO1xuICAgICAgICB0aGlzLmhhc0ludGVnZXJUZXh0dXJlcyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmN1cnJlbnRMb2NhdGlvbiA9IC0xO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuYm91bmRUZXh0dXJlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5ib3VuZFRleHR1cmVzW2ldID0gdGhpcy51bmtub3duVGV4dHVyZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogVW5iaW5kIGEgdGV4dHVyZS5cbiAgICAgKiBAcGFyYW0gdGV4dHVyZSAtIFRleHR1cmUgdG8gYmluZFxuICAgICAqL1xuICAgIFRleHR1cmVTeXN0ZW0ucHJvdG90eXBlLnVuYmluZCA9IGZ1bmN0aW9uICh0ZXh0dXJlKSB7XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIGdsID0gX2EuZ2wsIGJvdW5kVGV4dHVyZXMgPSBfYS5ib3VuZFRleHR1cmVzO1xuICAgICAgICBpZiAodGhpcy5fdW5rbm93bkJvdW5kVGV4dHVyZXMpIHtcbiAgICAgICAgICAgIHRoaXMuX3Vua25vd25Cb3VuZFRleHR1cmVzID0gZmFsc2U7XG4gICAgICAgICAgICAvLyBzb21lb25lIGNoYW5nZWQgd2ViR0wgc3RhdGUsXG4gICAgICAgICAgICAvLyB3ZSBoYXZlIHRvIGJlIHN1cmUgdGhhdCBvdXIgdGV4dHVyZSBkb2VzIG5vdCBhcHBlYXIgaW4gbXVsdGktdGV4dHVyZSByZW5kZXJlciBzYW1wbGVyc1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBib3VuZFRleHR1cmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGJvdW5kVGV4dHVyZXNbaV0gPT09IHRoaXMudW5rbm93blRleHR1cmUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5iaW5kKG51bGwsIGkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJvdW5kVGV4dHVyZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChib3VuZFRleHR1cmVzW2ldID09PSB0ZXh0dXJlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudExvY2F0aW9uICE9PSBpKSB7XG4gICAgICAgICAgICAgICAgICAgIGdsLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTAgKyBpKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50TG9jYXRpb24gPSBpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBnbC5iaW5kVGV4dHVyZSh0ZXh0dXJlLnRhcmdldCwgdGhpcy5lbXB0eVRleHR1cmVzW3RleHR1cmUudGFyZ2V0XS50ZXh0dXJlKTtcbiAgICAgICAgICAgICAgICBib3VuZFRleHR1cmVzW2ldID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogRW5zdXJlcyB0aGF0IGN1cnJlbnQgYm91bmRUZXh0dXJlcyBhbGwgaGF2ZSBGTE9BVCBzYW1wbGVyIHR5cGUsXG4gICAgICogc2VlIHtAbGluayBQSVhJLlNBTVBMRVJfVFlQRVN9IGZvciBleHBsYW5hdGlvbi5cbiAgICAgKiBAcGFyYW0gbWF4VGV4dHVyZXMgLSBudW1iZXIgb2YgbG9jYXRpb25zIHRvIGNoZWNrXG4gICAgICovXG4gICAgVGV4dHVyZVN5c3RlbS5wcm90b3R5cGUuZW5zdXJlU2FtcGxlclR5cGUgPSBmdW5jdGlvbiAobWF4VGV4dHVyZXMpIHtcbiAgICAgICAgdmFyIF9hID0gdGhpcywgYm91bmRUZXh0dXJlcyA9IF9hLmJvdW5kVGV4dHVyZXMsIGhhc0ludGVnZXJUZXh0dXJlcyA9IF9hLmhhc0ludGVnZXJUZXh0dXJlcywgQ09OVEVYVF9VSUQgPSBfYS5DT05URVhUX1VJRDtcbiAgICAgICAgaWYgKCFoYXNJbnRlZ2VyVGV4dHVyZXMpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gbWF4VGV4dHVyZXMgLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICAgICAgdmFyIHRleCA9IGJvdW5kVGV4dHVyZXNbaV07XG4gICAgICAgICAgICBpZiAodGV4KSB7XG4gICAgICAgICAgICAgICAgdmFyIGdsVGV4dHVyZSA9IHRleC5fZ2xUZXh0dXJlc1tDT05URVhUX1VJRF07XG4gICAgICAgICAgICAgICAgaWYgKGdsVGV4dHVyZS5zYW1wbGVyVHlwZSAhPT0gY29uc3RhbnRzLlNBTVBMRVJfVFlQRVMuRkxPQVQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci50ZXh0dXJlLnVuYmluZCh0ZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZSBhIHRleHR1cmVcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB0ZXh0dXJlIC0gVGV4dHVyZSB0byBpbml0aWFsaXplXG4gICAgICovXG4gICAgVGV4dHVyZVN5c3RlbS5wcm90b3R5cGUuaW5pdFRleHR1cmUgPSBmdW5jdGlvbiAodGV4dHVyZSkge1xuICAgICAgICB2YXIgZ2xUZXh0dXJlID0gbmV3IEdMVGV4dHVyZSh0aGlzLmdsLmNyZWF0ZVRleHR1cmUoKSk7XG4gICAgICAgIC8vIGd1YXJhbnRlZSBhbiB1cGRhdGUuLlxuICAgICAgICBnbFRleHR1cmUuZGlydHlJZCA9IC0xO1xuICAgICAgICB0ZXh0dXJlLl9nbFRleHR1cmVzW3RoaXMuQ09OVEVYVF9VSURdID0gZ2xUZXh0dXJlO1xuICAgICAgICB0aGlzLm1hbmFnZWRUZXh0dXJlcy5wdXNoKHRleHR1cmUpO1xuICAgICAgICB0ZXh0dXJlLm9uKCdkaXNwb3NlJywgdGhpcy5kZXN0cm95VGV4dHVyZSwgdGhpcyk7XG4gICAgICAgIHJldHVybiBnbFRleHR1cmU7XG4gICAgfTtcbiAgICBUZXh0dXJlU3lzdGVtLnByb3RvdHlwZS5pbml0VGV4dHVyZVR5cGUgPSBmdW5jdGlvbiAodGV4dHVyZSwgZ2xUZXh0dXJlKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIGdsVGV4dHVyZS5pbnRlcm5hbEZvcm1hdCA9IChfYiA9IChfYSA9IHRoaXMuaW50ZXJuYWxGb3JtYXRzW3RleHR1cmUudHlwZV0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYVt0ZXh0dXJlLmZvcm1hdF0pICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IHRleHR1cmUuZm9ybWF0O1xuICAgICAgICBpZiAodGhpcy53ZWJHTFZlcnNpb24gPT09IDIgJiYgdGV4dHVyZS50eXBlID09PSBjb25zdGFudHMuVFlQRVMuSEFMRl9GTE9BVCkge1xuICAgICAgICAgICAgLy8gVFlQRVMuSEFMRl9GTE9BVCBpcyBXZWJHTDEgSEFMRl9GTE9BVF9PRVNcbiAgICAgICAgICAgIC8vIHdlIGhhdmUgdG8gY29udmVydCBpdCB0byBXZWJHTCBIQUxGX0ZMT0FUXG4gICAgICAgICAgICBnbFRleHR1cmUudHlwZSA9IHRoaXMuZ2wuSEFMRl9GTE9BVDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGdsVGV4dHVyZS50eXBlID0gdGV4dHVyZS50eXBlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBVcGRhdGUgYSB0ZXh0dXJlXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge1BJWEkuQmFzZVRleHR1cmV9IHRleHR1cmUgLSBUZXh0dXJlIHRvIGluaXRpYWxpemVcbiAgICAgKi9cbiAgICBUZXh0dXJlU3lzdGVtLnByb3RvdHlwZS51cGRhdGVUZXh0dXJlID0gZnVuY3Rpb24gKHRleHR1cmUpIHtcbiAgICAgICAgdmFyIGdsVGV4dHVyZSA9IHRleHR1cmUuX2dsVGV4dHVyZXNbdGhpcy5DT05URVhUX1VJRF07XG4gICAgICAgIGlmICghZ2xUZXh0dXJlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlbmRlcmVyID0gdGhpcy5yZW5kZXJlcjtcbiAgICAgICAgdGhpcy5pbml0VGV4dHVyZVR5cGUodGV4dHVyZSwgZ2xUZXh0dXJlKTtcbiAgICAgICAgaWYgKHRleHR1cmUucmVzb3VyY2UgJiYgdGV4dHVyZS5yZXNvdXJjZS51cGxvYWQocmVuZGVyZXIsIHRleHR1cmUsIGdsVGV4dHVyZSkpIHtcbiAgICAgICAgICAgIC8vIHRleHR1cmUgaXMgdXBsb2FkZWQsIGRvbnQgZG8gYW55dGhpbmchXG4gICAgICAgICAgICBpZiAoZ2xUZXh0dXJlLnNhbXBsZXJUeXBlICE9PSBjb25zdGFudHMuU0FNUExFUl9UWVBFUy5GTE9BVCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFzSW50ZWdlclRleHR1cmVzID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGRlZmF1bHQsIHJlbmRlclRleHR1cmUtbGlrZSBsb2dpY1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gdGV4dHVyZS5yZWFsV2lkdGg7XG4gICAgICAgICAgICB2YXIgaGVpZ2h0ID0gdGV4dHVyZS5yZWFsSGVpZ2h0O1xuICAgICAgICAgICAgdmFyIGdsID0gcmVuZGVyZXIuZ2w7XG4gICAgICAgICAgICBpZiAoZ2xUZXh0dXJlLndpZHRoICE9PSB3aWR0aFxuICAgICAgICAgICAgICAgIHx8IGdsVGV4dHVyZS5oZWlnaHQgIT09IGhlaWdodFxuICAgICAgICAgICAgICAgIHx8IGdsVGV4dHVyZS5kaXJ0eUlkIDwgMCkge1xuICAgICAgICAgICAgICAgIGdsVGV4dHVyZS53aWR0aCA9IHdpZHRoO1xuICAgICAgICAgICAgICAgIGdsVGV4dHVyZS5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgICAgICAgICAgZ2wudGV4SW1hZ2UyRCh0ZXh0dXJlLnRhcmdldCwgMCwgZ2xUZXh0dXJlLmludGVybmFsRm9ybWF0LCB3aWR0aCwgaGVpZ2h0LCAwLCB0ZXh0dXJlLmZvcm1hdCwgZ2xUZXh0dXJlLnR5cGUsIG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGxldHMgb25seSB1cGRhdGUgd2hhdCBjaGFuZ2VzLi5cbiAgICAgICAgaWYgKHRleHR1cmUuZGlydHlTdHlsZUlkICE9PSBnbFRleHR1cmUuZGlydHlTdHlsZUlkKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVRleHR1cmVTdHlsZSh0ZXh0dXJlKTtcbiAgICAgICAgfVxuICAgICAgICBnbFRleHR1cmUuZGlydHlJZCA9IHRleHR1cmUuZGlydHlJZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERlbGV0ZXMgdGhlIHRleHR1cmUgZnJvbSBXZWJHTFxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHRleHR1cmUgLSB0aGUgdGV4dHVyZSB0byBkZXN0cm95XG4gICAgICogQHBhcmFtIFtza2lwUmVtb3ZlPWZhbHNlXSAtIFdoZXRoZXIgdG8gc2tpcCByZW1vdmluZyB0aGUgdGV4dHVyZSBmcm9tIHRoZSBUZXh0dXJlTWFuYWdlci5cbiAgICAgKi9cbiAgICBUZXh0dXJlU3lzdGVtLnByb3RvdHlwZS5kZXN0cm95VGV4dHVyZSA9IGZ1bmN0aW9uICh0ZXh0dXJlLCBza2lwUmVtb3ZlKSB7XG4gICAgICAgIHZhciBnbCA9IHRoaXMuZ2w7XG4gICAgICAgIHRleHR1cmUgPSB0ZXh0dXJlLmNhc3RUb0Jhc2VUZXh0dXJlKCk7XG4gICAgICAgIGlmICh0ZXh0dXJlLl9nbFRleHR1cmVzW3RoaXMuQ09OVEVYVF9VSURdKSB7XG4gICAgICAgICAgICB0aGlzLnVuYmluZCh0ZXh0dXJlKTtcbiAgICAgICAgICAgIGdsLmRlbGV0ZVRleHR1cmUodGV4dHVyZS5fZ2xUZXh0dXJlc1t0aGlzLkNPTlRFWFRfVUlEXS50ZXh0dXJlKTtcbiAgICAgICAgICAgIHRleHR1cmUub2ZmKCdkaXNwb3NlJywgdGhpcy5kZXN0cm95VGV4dHVyZSwgdGhpcyk7XG4gICAgICAgICAgICBkZWxldGUgdGV4dHVyZS5fZ2xUZXh0dXJlc1t0aGlzLkNPTlRFWFRfVUlEXTtcbiAgICAgICAgICAgIGlmICghc2tpcFJlbW92ZSkge1xuICAgICAgICAgICAgICAgIHZhciBpID0gdGhpcy5tYW5hZ2VkVGV4dHVyZXMuaW5kZXhPZih0ZXh0dXJlKTtcbiAgICAgICAgICAgICAgICBpZiAoaSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgdXRpbHMucmVtb3ZlSXRlbXModGhpcy5tYW5hZ2VkVGV4dHVyZXMsIGksIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRleHR1cmUgc3R5bGUgc3VjaCBhcyBtaXBtYXAgZmxhZ1xuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtQSVhJLkJhc2VUZXh0dXJlfSB0ZXh0dXJlIC0gVGV4dHVyZSB0byB1cGRhdGVcbiAgICAgKi9cbiAgICBUZXh0dXJlU3lzdGVtLnByb3RvdHlwZS51cGRhdGVUZXh0dXJlU3R5bGUgPSBmdW5jdGlvbiAodGV4dHVyZSkge1xuICAgICAgICB2YXIgZ2xUZXh0dXJlID0gdGV4dHVyZS5fZ2xUZXh0dXJlc1t0aGlzLkNPTlRFWFRfVUlEXTtcbiAgICAgICAgaWYgKCFnbFRleHR1cmUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKHRleHR1cmUubWlwbWFwID09PSBjb25zdGFudHMuTUlQTUFQX01PREVTLlBPVzIgfHwgdGhpcy53ZWJHTFZlcnNpb24gIT09IDIpICYmICF0ZXh0dXJlLmlzUG93ZXJPZlR3bykge1xuICAgICAgICAgICAgZ2xUZXh0dXJlLm1pcG1hcCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZ2xUZXh0dXJlLm1pcG1hcCA9IHRleHR1cmUubWlwbWFwID49IDE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMud2ViR0xWZXJzaW9uICE9PSAyICYmICF0ZXh0dXJlLmlzUG93ZXJPZlR3bykge1xuICAgICAgICAgICAgZ2xUZXh0dXJlLndyYXBNb2RlID0gY29uc3RhbnRzLldSQVBfTU9ERVMuQ0xBTVA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBnbFRleHR1cmUud3JhcE1vZGUgPSB0ZXh0dXJlLndyYXBNb2RlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0ZXh0dXJlLnJlc291cmNlICYmIHRleHR1cmUucmVzb3VyY2Uuc3R5bGUodGhpcy5yZW5kZXJlciwgdGV4dHVyZSwgZ2xUZXh0dXJlKSkgO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3R5bGUodGV4dHVyZSwgZ2xUZXh0dXJlKTtcbiAgICAgICAgfVxuICAgICAgICBnbFRleHR1cmUuZGlydHlTdHlsZUlkID0gdGV4dHVyZS5kaXJ0eVN0eWxlSWQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgc3R5bGUgZm9yIHRleHR1cmVcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB0ZXh0dXJlIC0gVGV4dHVyZSB0byB1cGRhdGVcbiAgICAgKiBAcGFyYW0gZ2xUZXh0dXJlXG4gICAgICovXG4gICAgVGV4dHVyZVN5c3RlbS5wcm90b3R5cGUuc2V0U3R5bGUgPSBmdW5jdGlvbiAodGV4dHVyZSwgZ2xUZXh0dXJlKSB7XG4gICAgICAgIHZhciBnbCA9IHRoaXMuZ2w7XG4gICAgICAgIGlmIChnbFRleHR1cmUubWlwbWFwICYmIHRleHR1cmUubWlwbWFwICE9PSBjb25zdGFudHMuTUlQTUFQX01PREVTLk9OX01BTlVBTCkge1xuICAgICAgICAgICAgZ2wuZ2VuZXJhdGVNaXBtYXAodGV4dHVyZS50YXJnZXQpO1xuICAgICAgICB9XG4gICAgICAgIGdsLnRleFBhcmFtZXRlcmkodGV4dHVyZS50YXJnZXQsIGdsLlRFWFRVUkVfV1JBUF9TLCBnbFRleHR1cmUud3JhcE1vZGUpO1xuICAgICAgICBnbC50ZXhQYXJhbWV0ZXJpKHRleHR1cmUudGFyZ2V0LCBnbC5URVhUVVJFX1dSQVBfVCwgZ2xUZXh0dXJlLndyYXBNb2RlKTtcbiAgICAgICAgaWYgKGdsVGV4dHVyZS5taXBtYXApIHtcbiAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG1heC1sZW4gKi9cbiAgICAgICAgICAgIGdsLnRleFBhcmFtZXRlcmkodGV4dHVyZS50YXJnZXQsIGdsLlRFWFRVUkVfTUlOX0ZJTFRFUiwgdGV4dHVyZS5zY2FsZU1vZGUgPT09IGNvbnN0YW50cy5TQ0FMRV9NT0RFUy5MSU5FQVIgPyBnbC5MSU5FQVJfTUlQTUFQX0xJTkVBUiA6IGdsLk5FQVJFU1RfTUlQTUFQX05FQVJFU1QpO1xuICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbWF4LWxlbiAqL1xuICAgICAgICAgICAgdmFyIGFuaXNvdHJvcGljRXh0ID0gdGhpcy5yZW5kZXJlci5jb250ZXh0LmV4dGVuc2lvbnMuYW5pc290cm9waWNGaWx0ZXJpbmc7XG4gICAgICAgICAgICBpZiAoYW5pc290cm9waWNFeHQgJiYgdGV4dHVyZS5hbmlzb3Ryb3BpY0xldmVsID4gMCAmJiB0ZXh0dXJlLnNjYWxlTW9kZSA9PT0gY29uc3RhbnRzLlNDQUxFX01PREVTLkxJTkVBUikge1xuICAgICAgICAgICAgICAgIHZhciBsZXZlbCA9IE1hdGgubWluKHRleHR1cmUuYW5pc290cm9waWNMZXZlbCwgZ2wuZ2V0UGFyYW1ldGVyKGFuaXNvdHJvcGljRXh0Lk1BWF9URVhUVVJFX01BWF9BTklTT1RST1BZX0VYVCkpO1xuICAgICAgICAgICAgICAgIGdsLnRleFBhcmFtZXRlcmYodGV4dHVyZS50YXJnZXQsIGFuaXNvdHJvcGljRXh0LlRFWFRVUkVfTUFYX0FOSVNPVFJPUFlfRVhULCBsZXZlbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBnbC50ZXhQYXJhbWV0ZXJpKHRleHR1cmUudGFyZ2V0LCBnbC5URVhUVVJFX01JTl9GSUxURVIsIHRleHR1cmUuc2NhbGVNb2RlID09PSBjb25zdGFudHMuU0NBTEVfTU9ERVMuTElORUFSID8gZ2wuTElORUFSIDogZ2wuTkVBUkVTVCk7XG4gICAgICAgIH1cbiAgICAgICAgZ2wudGV4UGFyYW1ldGVyaSh0ZXh0dXJlLnRhcmdldCwgZ2wuVEVYVFVSRV9NQUdfRklMVEVSLCB0ZXh0dXJlLnNjYWxlTW9kZSA9PT0gY29uc3RhbnRzLlNDQUxFX01PREVTLkxJTkVBUiA/IGdsLkxJTkVBUiA6IGdsLk5FQVJFU1QpO1xuICAgIH07XG4gICAgVGV4dHVyZVN5c3RlbS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IG51bGw7XG4gICAgfTtcbiAgICByZXR1cm4gVGV4dHVyZVN5c3RlbTtcbn0oKSk7XG5cbnZhciBfc3lzdGVtcyA9IHtcbiAgICBfX3Byb3RvX186IG51bGwsXG4gICAgRmlsdGVyU3lzdGVtOiBGaWx0ZXJTeXN0ZW0sXG4gICAgQmF0Y2hTeXN0ZW06IEJhdGNoU3lzdGVtLFxuICAgIENvbnRleHRTeXN0ZW06IENvbnRleHRTeXN0ZW0sXG4gICAgRnJhbWVidWZmZXJTeXN0ZW06IEZyYW1lYnVmZmVyU3lzdGVtLFxuICAgIEdlb21ldHJ5U3lzdGVtOiBHZW9tZXRyeVN5c3RlbSxcbiAgICBNYXNrU3lzdGVtOiBNYXNrU3lzdGVtLFxuICAgIFNjaXNzb3JTeXN0ZW06IFNjaXNzb3JTeXN0ZW0sXG4gICAgU3RlbmNpbFN5c3RlbTogU3RlbmNpbFN5c3RlbSxcbiAgICBQcm9qZWN0aW9uU3lzdGVtOiBQcm9qZWN0aW9uU3lzdGVtLFxuICAgIFJlbmRlclRleHR1cmVTeXN0ZW06IFJlbmRlclRleHR1cmVTeXN0ZW0sXG4gICAgU2hhZGVyU3lzdGVtOiBTaGFkZXJTeXN0ZW0sXG4gICAgU3RhdGVTeXN0ZW06IFN0YXRlU3lzdGVtLFxuICAgIFRleHR1cmVHQ1N5c3RlbTogVGV4dHVyZUdDU3lzdGVtLFxuICAgIFRleHR1cmVTeXN0ZW06IFRleHR1cmVTeXN0ZW1cbn07XG5cbnZhciB0ZW1wTWF0cml4ID0gbmV3IG1hdGguTWF0cml4KCk7XG4vKipcbiAqIFRoZSBBYnN0cmFjdFJlbmRlcmVyIGlzIHRoZSBiYXNlIGZvciBhIFBpeGlKUyBSZW5kZXJlci4gSXQgaXMgZXh0ZW5kZWQgYnkgdGhlIHtAbGluayBQSVhJLkNhbnZhc1JlbmRlcmVyfVxuICogYW5kIHtAbGluayBQSVhJLlJlbmRlcmVyfSB3aGljaCBjYW4gYmUgdXNlZCBmb3IgcmVuZGVyaW5nIGEgUGl4aUpTIHNjZW5lLlxuICogQGFic3RyYWN0XG4gKiBAY2xhc3NcbiAqIEBleHRlbmRzIFBJWEkudXRpbHMuRXZlbnRFbWl0dGVyXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG52YXIgQWJzdHJhY3RSZW5kZXJlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQWJzdHJhY3RSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gdHlwZSAtIFRoZSByZW5kZXJlciB0eXBlLlxuICAgICAqIEBwYXJhbSBbb3B0aW9uc10gLSBUaGUgb3B0aW9uYWwgcmVuZGVyZXIgcGFyYW1ldGVycy5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMud2lkdGg9ODAwXSAtIFRoZSB3aWR0aCBvZiB0aGUgc2NyZWVuLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5oZWlnaHQ9NjAwXSAtIFRoZSBoZWlnaHQgb2YgdGhlIHNjcmVlbi5cbiAgICAgKiBAcGFyYW0ge0hUTUxDYW52YXNFbGVtZW50fSBbb3B0aW9ucy52aWV3XSAtIFRoZSBjYW52YXMgdG8gdXNlIGFzIGEgdmlldywgb3B0aW9uYWwuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy51c2VDb250ZXh0QWxwaGE9dHJ1ZV0gLSBQYXNzLXRocm91Z2ggdmFsdWUgZm9yIGNhbnZhcycgY29udGV4dCBgYWxwaGFgIHByb3BlcnR5LlxuICAgICAqICAgSWYgeW91IHdhbnQgdG8gc2V0IHRyYW5zcGFyZW5jeSwgcGxlYXNlIHVzZSBgYmFja2dyb3VuZEFscGhhYC4gVGhpcyBvcHRpb24gaXMgZm9yIGNhc2VzIHdoZXJlIHRoZVxuICAgICAqICAgY2FudmFzIG5lZWRzIHRvIGJlIG9wYXF1ZSwgcG9zc2libHkgZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMgb24gc29tZSBvbGRlciBkZXZpY2VzLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuYXV0b0RlbnNpdHk9ZmFsc2VdIC0gUmVzaXplcyByZW5kZXJlciB2aWV3IGluIENTUyBwaXhlbHMgdG8gYWxsb3cgZm9yXG4gICAgICogICByZXNvbHV0aW9ucyBvdGhlciB0aGFuIDEuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5hbnRpYWxpYXM9ZmFsc2VdIC0gU2V0cyBhbnRpYWxpYXNcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMucmVzb2x1dGlvbj1QSVhJLnNldHRpbmdzLlJFU09MVVRJT05dIC0gVGhlIHJlc29sdXRpb24gLyBkZXZpY2UgcGl4ZWwgcmF0aW8gb2YgdGhlIHJlbmRlcmVyLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMucHJlc2VydmVEcmF3aW5nQnVmZmVyPWZhbHNlXSAtIEVuYWJsZXMgZHJhd2luZyBidWZmZXIgcHJlc2VydmF0aW9uLFxuICAgICAqICBlbmFibGUgdGhpcyBpZiB5b3UgbmVlZCB0byBjYWxsIHRvRGF0YVVybCBvbiB0aGUgV2ViR0wgY29udGV4dC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmNsZWFyQmVmb3JlUmVuZGVyPXRydWVdIC0gVGhpcyBzZXRzIGlmIHRoZSByZW5kZXJlciB3aWxsIGNsZWFyIHRoZSBjYW52YXMgb3JcbiAgICAgKiAgICAgIG5vdCBiZWZvcmUgdGhlIG5ldyByZW5kZXIgcGFzcy5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMuYmFja2dyb3VuZENvbG9yPTB4MDAwMDAwXSAtIFRoZSBiYWNrZ3JvdW5kIGNvbG9yIG9mIHRoZSByZW5kZXJlZCBhcmVhXG4gICAgICogIChzaG93biBpZiBub3QgdHJhbnNwYXJlbnQpLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5iYWNrZ3JvdW5kQWxwaGE9MV0gLSBWYWx1ZSBmcm9tIDAgKGZ1bGx5IHRyYW5zcGFyZW50KSB0byAxIChmdWxseSBvcGFxdWUpLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEFic3RyYWN0UmVuZGVyZXIodHlwZSwgb3B0aW9ucykge1xuICAgICAgICBpZiAodHlwZSA9PT0gdm9pZCAwKSB7IHR5cGUgPSBjb25zdGFudHMuUkVOREVSRVJfVFlQRS5VTktOT1dOOyB9XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIC8vIEFkZCB0aGUgZGVmYXVsdCByZW5kZXIgb3B0aW9uc1xuICAgICAgICBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgc2V0dGluZ3Muc2V0dGluZ3MuUkVOREVSX09QVElPTlMsIG9wdGlvbnMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHN1cHBsaWVkIGNvbnN0cnVjdG9yIG9wdGlvbnMuXG4gICAgICAgICAqIEBtZW1iZXIge29iamVjdH1cbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB0eXBlIG9mIHRoZSByZW5kZXJlci5cbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKiBAZGVmYXVsdCBQSVhJLlJFTkRFUkVSX1RZUEUuVU5LTk9XTlxuICAgICAgICAgKiBAc2VlIFBJWEkuUkVOREVSRVJfVFlQRVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudHlwZSA9IHR5cGU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNZWFzdXJlbWVudHMgb2YgdGhlIHNjcmVlbi4gKDAsIDAsIHNjcmVlbldpZHRoLCBzY3JlZW5IZWlnaHQpLlxuICAgICAgICAgKlxuICAgICAgICAgKiBJdHMgc2FmZSB0byB1c2UgYXMgZmlsdGVyQXJlYSBvciBoaXRBcmVhIGZvciB0aGUgd2hvbGUgc3RhZ2UuXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuUmVjdGFuZ2xlfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc2NyZWVuID0gbmV3IG1hdGguUmVjdGFuZ2xlKDAsIDAsIG9wdGlvbnMud2lkdGgsIG9wdGlvbnMuaGVpZ2h0KTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBjYW52YXMgZWxlbWVudCB0aGF0IGV2ZXJ5dGhpbmcgaXMgZHJhd24gdG8uXG4gICAgICAgICAqIEBtZW1iZXIge0hUTUxDYW52YXNFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudmlldyA9IG9wdGlvbnMudmlldyB8fCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSByZXNvbHV0aW9uIC8gZGV2aWNlIHBpeGVsIHJhdGlvIG9mIHRoZSByZW5kZXJlci5cbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKiBAZGVmYXVsdCBQSVhJLnNldHRpbmdzLlJFU09MVVRJT05cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlc29sdXRpb24gPSBvcHRpb25zLnJlc29sdXRpb24gfHwgc2V0dGluZ3Muc2V0dGluZ3MuUkVTT0xVVElPTjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFBhc3MtdGhydSBzZXR0aW5nIGZvciB0aGUgY2FudmFzJyBjb250ZXh0IGBhbHBoYWAgcHJvcGVydHkuIFRoaXMgaXMgdHlwaWNhbGx5XG4gICAgICAgICAqIG5vdCBzb21ldGhpbmcgeW91IG5lZWQgdG8gZmlkZGxlIHdpdGguIElmIHlvdSB3YW50IHRyYW5zcGFyZW5jeSwgdXNlIGBiYWNrZ3JvdW5kQWxwaGFgLlxuICAgICAgICAgKiBAbWVtYmVyIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudXNlQ29udGV4dEFscGhhID0gb3B0aW9ucy51c2VDb250ZXh0QWxwaGE7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIENTUyBkaW1lbnNpb25zIG9mIGNhbnZhcyB2aWV3IHNob3VsZCBiZSByZXNpemVkIHRvIHNjcmVlbiBkaW1lbnNpb25zIGF1dG9tYXRpY2FsbHkuXG4gICAgICAgICAqIEBtZW1iZXIge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5hdXRvRGVuc2l0eSA9ICEhb3B0aW9ucy5hdXRvRGVuc2l0eTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB2YWx1ZSBvZiB0aGUgcHJlc2VydmVEcmF3aW5nQnVmZmVyIGZsYWcgYWZmZWN0cyB3aGV0aGVyIG9yIG5vdCB0aGUgY29udGVudHMgb2ZcbiAgICAgICAgICogdGhlIHN0ZW5jaWwgYnVmZmVyIGlzIHJldGFpbmVkIGFmdGVyIHJlbmRlcmluZy5cbiAgICAgICAgICogQG1lbWJlciB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnByZXNlcnZlRHJhd2luZ0J1ZmZlciA9IG9wdGlvbnMucHJlc2VydmVEcmF3aW5nQnVmZmVyO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhpcyBzZXRzIGlmIHRoZSBDYW52YXNSZW5kZXJlciB3aWxsIGNsZWFyIHRoZSBjYW52YXMgb3Igbm90IGJlZm9yZSB0aGUgbmV3IHJlbmRlciBwYXNzLlxuICAgICAgICAgKiBJZiB0aGUgc2NlbmUgaXMgTk9UIHRyYW5zcGFyZW50IFBpeGlKUyB3aWxsIHVzZSBhIGNhbnZhcyBzaXplZCBmaWxsUmVjdCBvcGVyYXRpb24gZXZlcnlcbiAgICAgICAgICogZnJhbWUgdG8gc2V0IHRoZSBjYW52YXMgYmFja2dyb3VuZCBjb2xvci4gSWYgdGhlIHNjZW5lIGlzIHRyYW5zcGFyZW50IFBpeGlKUyB3aWxsIHVzZSBjbGVhclJlY3RcbiAgICAgICAgICogdG8gY2xlYXIgdGhlIGNhbnZhcyBldmVyeSBmcmFtZS4gRGlzYWJsZSB0aGlzIGJ5IHNldHRpbmcgdGhpcyB0byBmYWxzZS4gRm9yIGV4YW1wbGUsIGlmXG4gICAgICAgICAqIHlvdXIgZ2FtZSBoYXMgYSBjYW52YXMgZmlsbGluZyBiYWNrZ3JvdW5kIGltYWdlIHlvdSBvZnRlbiBkb24ndCBuZWVkIHRoaXMgc2V0LlxuICAgICAgICAgKiBAbWVtYmVyIHtib29sZWFufVxuICAgICAgICAgKiBAZGVmYXVsdFxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY2xlYXJCZWZvcmVSZW5kZXIgPSBvcHRpb25zLmNsZWFyQmVmb3JlUmVuZGVyO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGJhY2tncm91bmQgY29sb3IgYXMgYSBudW1iZXIuXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuX2JhY2tncm91bmRDb2xvciA9IDB4MDAwMDAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGJhY2tncm91bmQgY29sb3IgYXMgYW4gW1IsIEcsIEIsIEFdIGFycmF5LlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJbXX1cbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuX2JhY2tncm91bmRDb2xvclJnYmEgPSBbMCwgMCwgMCwgMV07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgYmFja2dyb3VuZCBjb2xvciBhcyBhIHN0cmluZy5cbiAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfVxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5fYmFja2dyb3VuZENvbG9yU3RyaW5nID0gJyMwMDAwMDAnO1xuICAgICAgICBfdGhpcy5iYWNrZ3JvdW5kQ29sb3IgPSBvcHRpb25zLmJhY2tncm91bmRDb2xvciB8fCBfdGhpcy5fYmFja2dyb3VuZENvbG9yOyAvLyBydW4gYmcgY29sb3Igc2V0dGVyXG4gICAgICAgIF90aGlzLmJhY2tncm91bmRBbHBoYSA9IG9wdGlvbnMuYmFja2dyb3VuZEFscGhhO1xuICAgICAgICAvLyBAZGVwcmVjYXRlZFxuICAgICAgICBpZiAob3B0aW9ucy50cmFuc3BhcmVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB1dGlscy5kZXByZWNhdGlvbignNi4wLjAnLCAnT3B0aW9uIHRyYW5zcGFyZW50IGlzIGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgYmFja2dyb3VuZEFscGhhIGluc3RlYWQuJyk7XG4gICAgICAgICAgICBfdGhpcy51c2VDb250ZXh0QWxwaGEgPSBvcHRpb25zLnRyYW5zcGFyZW50O1xuICAgICAgICAgICAgX3RoaXMuYmFja2dyb3VuZEFscGhhID0gb3B0aW9ucy50cmFuc3BhcmVudCA/IDAgOiAxO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbGFzdCByb290IG9iamVjdCB0aGF0IHRoZSByZW5kZXJlciB0cmllZCB0byByZW5kZXIuXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuRGlzcGxheU9iamVjdH1cbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuX2xhc3RPYmplY3RSZW5kZXJlZCA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb2xsZWN0aW9uIG9mIHBsdWdpbnMuXG4gICAgICAgICAqIEByZWFkb25seVxuICAgICAgICAgKiBAbWVtYmVyIHtvYmplY3R9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5wbHVnaW5zID0ge307XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZSB0aGUgcGx1Z2lucy5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHBhcmFtIHtvYmplY3R9IHN0YXRpY01hcCAtIFRoZSBkaWN0aW9uYXJ5IG9mIHN0YXRpY2FsbHkgc2F2ZWQgcGx1Z2lucy5cbiAgICAgKi9cbiAgICBBYnN0cmFjdFJlbmRlcmVyLnByb3RvdHlwZS5pbml0UGx1Z2lucyA9IGZ1bmN0aW9uIChzdGF0aWNNYXApIHtcbiAgICAgICAgZm9yICh2YXIgbyBpbiBzdGF0aWNNYXApIHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luc1tvXSA9IG5ldyAoc3RhdGljTWFwW29dKSh0aGlzKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFic3RyYWN0UmVuZGVyZXIucHJvdG90eXBlLCBcIndpZHRoXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNhbWUgYXMgdmlldy53aWR0aCwgYWN0dWFsIG51bWJlciBvZiBwaXhlbHMgaW4gdGhlIGNhbnZhcyBieSBob3Jpem9udGFsLlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEByZWFkb25seVxuICAgICAgICAgKiBAZGVmYXVsdCA4MDBcbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlldy53aWR0aDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBYnN0cmFjdFJlbmRlcmVyLnByb3RvdHlwZSwgXCJoZWlnaHRcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogU2FtZSBhcyB2aWV3LmhlaWdodCwgYWN0dWFsIG51bWJlciBvZiBwaXhlbHMgaW4gdGhlIGNhbnZhcyBieSB2ZXJ0aWNhbC5cbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKiBAcmVhZG9ubHlcbiAgICAgICAgICogQGRlZmF1bHQgNjAwXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZpZXcuaGVpZ2h0O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgLyoqXG4gICAgICogUmVzaXplcyB0aGUgc2NyZWVuIGFuZCBjYW52YXMgYXMgY2xvc2UgYXMgcG9zc2libGUgdG8gdGhlIHNwZWNpZmllZCB3aWR0aCBhbmQgaGVpZ2h0LlxuICAgICAqIENhbnZhcyBkaW1lbnNpb25zIGFyZSBtdWx0aXBsaWVkIGJ5IHJlc29sdXRpb24gYW5kIHJvdW5kZWQgdG8gdGhlIG5lYXJlc3QgaW50ZWdlcnMuXG4gICAgICogVGhlIG5ldyBjYW52YXMgZGltZW5zaW9ucyBkaXZpZGVkIGJ5IHRoZSByZXNvbHV0aW9uIGJlY29tZSB0aGUgbmV3IHNjcmVlbiBkaW1lbnNpb25zLlxuICAgICAqIEBwYXJhbSBkZXNpcmVkU2NyZWVuV2lkdGggLSBUaGUgZGVzaXJlZCB3aWR0aCBvZiB0aGUgc2NyZWVuLlxuICAgICAqIEBwYXJhbSBkZXNpcmVkU2NyZWVuSGVpZ2h0IC0gVGhlIGRlc2lyZWQgaGVpZ2h0IG9mIHRoZSBzY3JlZW4uXG4gICAgICovXG4gICAgQWJzdHJhY3RSZW5kZXJlci5wcm90b3R5cGUucmVzaXplID0gZnVuY3Rpb24gKGRlc2lyZWRTY3JlZW5XaWR0aCwgZGVzaXJlZFNjcmVlbkhlaWdodCkge1xuICAgICAgICB0aGlzLnZpZXcud2lkdGggPSBNYXRoLnJvdW5kKGRlc2lyZWRTY3JlZW5XaWR0aCAqIHRoaXMucmVzb2x1dGlvbik7XG4gICAgICAgIHRoaXMudmlldy5oZWlnaHQgPSBNYXRoLnJvdW5kKGRlc2lyZWRTY3JlZW5IZWlnaHQgKiB0aGlzLnJlc29sdXRpb24pO1xuICAgICAgICB2YXIgc2NyZWVuV2lkdGggPSB0aGlzLnZpZXcud2lkdGggLyB0aGlzLnJlc29sdXRpb247XG4gICAgICAgIHZhciBzY3JlZW5IZWlnaHQgPSB0aGlzLnZpZXcuaGVpZ2h0IC8gdGhpcy5yZXNvbHV0aW9uO1xuICAgICAgICB0aGlzLnNjcmVlbi53aWR0aCA9IHNjcmVlbldpZHRoO1xuICAgICAgICB0aGlzLnNjcmVlbi5oZWlnaHQgPSBzY3JlZW5IZWlnaHQ7XG4gICAgICAgIGlmICh0aGlzLmF1dG9EZW5zaXR5KSB7XG4gICAgICAgICAgICB0aGlzLnZpZXcuc3R5bGUud2lkdGggPSBzY3JlZW5XaWR0aCArIFwicHhcIjtcbiAgICAgICAgICAgIHRoaXMudmlldy5zdHlsZS5oZWlnaHQgPSBzY3JlZW5IZWlnaHQgKyBcInB4XCI7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVkIGFmdGVyIHZpZXcgaGFzIGJlZW4gcmVzaXplZC5cbiAgICAgICAgICogQGV2ZW50IFBJWEkuUmVuZGVyZXIjcmVzaXplXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzY3JlZW5XaWR0aCAtIFRoZSBuZXcgd2lkdGggb2YgdGhlIHNjcmVlbi5cbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHNjcmVlbkhlaWdodCAtIFRoZSBuZXcgaGVpZ2h0IG9mIHRoZSBzY3JlZW4uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmVtaXQoJ3Jlc2l6ZScsIHNjcmVlbldpZHRoLCBzY3JlZW5IZWlnaHQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGlnbm9yZVxuICAgICAqL1xuICAgIEFic3RyYWN0UmVuZGVyZXIucHJvdG90eXBlLmdlbmVyYXRlVGV4dHVyZSA9IGZ1bmN0aW9uIChkaXNwbGF5T2JqZWN0LCBvcHRpb25zLCByZXNvbHV0aW9uLCByZWdpb24pIHtcbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0ge307IH1cbiAgICAgICAgLy8gQGRlcHJlY2F0ZWQgcGFyYW1ldGVycyBzcHJlYWQsIHVzZSBvcHRpb25zIGluc3RlYWRcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgdXRpbHMuZGVwcmVjYXRpb24oJzYuMS4wJywgJ2dlbmVyYXRlVGV4dHVyZSBvcHRpb25zIChzY2FsZU1vZGUsIHJlc29sdXRpb24sIHJlZ2lvbikgYXJlIG5vdyBvYmplY3Qgb3B0aW9ucy4nKTtcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7IHNjYWxlTW9kZTogb3B0aW9ucywgcmVzb2x1dGlvbjogcmVzb2x1dGlvbiwgcmVnaW9uOiByZWdpb24gfTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbWFudWFsUmVnaW9uID0gb3B0aW9ucy5yZWdpb24sIHRleHR1cmVPcHRpb25zID0gX19yZXN0KG9wdGlvbnMsIFtcInJlZ2lvblwiXSk7XG4gICAgICAgIHJlZ2lvbiA9IG1hbnVhbFJlZ2lvbiB8fCBkaXNwbGF5T2JqZWN0LmdldExvY2FsQm91bmRzKG51bGwsIHRydWUpO1xuICAgICAgICAvLyBtaW5pbXVtIHRleHR1cmUgc2l6ZSBpcyAxeDEsIDB4MCB3aWxsIHRocm93IGFuIGVycm9yXG4gICAgICAgIGlmIChyZWdpb24ud2lkdGggPT09IDApXG4gICAgICAgICAgICB7IHJlZ2lvbi53aWR0aCA9IDE7IH1cbiAgICAgICAgaWYgKHJlZ2lvbi5oZWlnaHQgPT09IDApXG4gICAgICAgICAgICB7IHJlZ2lvbi5oZWlnaHQgPSAxOyB9XG4gICAgICAgIHZhciByZW5kZXJUZXh0dXJlID0gUmVuZGVyVGV4dHVyZS5jcmVhdGUoX19hc3NpZ24oeyB3aWR0aDogcmVnaW9uLndpZHRoLCBoZWlnaHQ6IHJlZ2lvbi5oZWlnaHQgfSwgdGV4dHVyZU9wdGlvbnMpKTtcbiAgICAgICAgdGVtcE1hdHJpeC50eCA9IC1yZWdpb24ueDtcbiAgICAgICAgdGVtcE1hdHJpeC50eSA9IC1yZWdpb24ueTtcbiAgICAgICAgdGhpcy5yZW5kZXIoZGlzcGxheU9iamVjdCwge1xuICAgICAgICAgICAgcmVuZGVyVGV4dHVyZTogcmVuZGVyVGV4dHVyZSxcbiAgICAgICAgICAgIGNsZWFyOiBmYWxzZSxcbiAgICAgICAgICAgIHRyYW5zZm9ybTogdGVtcE1hdHJpeCxcbiAgICAgICAgICAgIHNraXBVcGRhdGVUcmFuc2Zvcm06ICEhZGlzcGxheU9iamVjdC5wYXJlbnRcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByZW5kZXJUZXh0dXJlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBldmVyeXRoaW5nIGZyb20gdGhlIHJlbmRlcmVyIGFuZCBvcHRpb25hbGx5IHJlbW92ZXMgdGhlIENhbnZhcyBET00gZWxlbWVudC5cbiAgICAgKiBAcGFyYW0gW3JlbW92ZVZpZXc9ZmFsc2VdIC0gUmVtb3ZlcyB0aGUgQ2FudmFzIGVsZW1lbnQgZnJvbSB0aGUgRE9NLlxuICAgICAqL1xuICAgIEFic3RyYWN0UmVuZGVyZXIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAocmVtb3ZlVmlldykge1xuICAgICAgICBmb3IgKHZhciBvIGluIHRoaXMucGx1Z2lucykge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW5zW29dLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luc1tvXSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlbW92ZVZpZXcgJiYgdGhpcy52aWV3LnBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgIHRoaXMudmlldy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMudmlldyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRoaXNBbnkgPSB0aGlzO1xuICAgICAgICAvLyBudWxsLWluZyBhbGwgb2JqZWN0cywgdGhhdCdzIGEgdHJhZGl0aW9uIVxuICAgICAgICB0aGlzQW55LnBsdWdpbnMgPSBudWxsO1xuICAgICAgICB0aGlzQW55LnR5cGUgPSBjb25zdGFudHMuUkVOREVSRVJfVFlQRS5VTktOT1dOO1xuICAgICAgICB0aGlzQW55LnZpZXcgPSBudWxsO1xuICAgICAgICB0aGlzQW55LnNjcmVlbiA9IG51bGw7XG4gICAgICAgIHRoaXNBbnkuX3RlbXBEaXNwbGF5T2JqZWN0UGFyZW50ID0gbnVsbDtcbiAgICAgICAgdGhpc0FueS5vcHRpb25zID0gbnVsbDtcbiAgICAgICAgdGhpcy5fYmFja2dyb3VuZENvbG9yUmdiYSA9IG51bGw7XG4gICAgICAgIHRoaXMuX2JhY2tncm91bmRDb2xvclN0cmluZyA9IG51bGw7XG4gICAgICAgIHRoaXMuX2xhc3RPYmplY3RSZW5kZXJlZCA9IG51bGw7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQWJzdHJhY3RSZW5kZXJlci5wcm90b3R5cGUsIFwiYmFja2dyb3VuZENvbG9yXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBiYWNrZ3JvdW5kIGNvbG9yIHRvIGZpbGwgaWYgbm90IHRyYW5zcGFyZW50XG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2JhY2tncm91bmRDb2xvcjtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuX2JhY2tncm91bmRDb2xvciA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5fYmFja2dyb3VuZENvbG9yU3RyaW5nID0gdXRpbHMuaGV4MnN0cmluZyh2YWx1ZSk7XG4gICAgICAgICAgICB1dGlscy5oZXgycmdiKHZhbHVlLCB0aGlzLl9iYWNrZ3JvdW5kQ29sb3JSZ2JhKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBYnN0cmFjdFJlbmRlcmVyLnByb3RvdHlwZSwgXCJiYWNrZ3JvdW5kQWxwaGFcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGJhY2tncm91bmQgY29sb3IgYWxwaGEuIFNldHRpbmcgdGhpcyB0byAwIHdpbGwgbWFrZSB0aGUgY2FudmFzIHRyYW5zcGFyZW50LlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9iYWNrZ3JvdW5kQ29sb3JSZ2JhWzNdO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5fYmFja2dyb3VuZENvbG9yUmdiYVszXSA9IHZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIEFic3RyYWN0UmVuZGVyZXI7XG59KHV0aWxzLkV2ZW50RW1pdHRlcikpO1xuXG52YXIgR0xCdWZmZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gR0xCdWZmZXIoYnVmZmVyKSB7XG4gICAgICAgIHRoaXMuYnVmZmVyID0gYnVmZmVyIHx8IG51bGw7XG4gICAgICAgIHRoaXMudXBkYXRlSUQgPSAtMTtcbiAgICAgICAgdGhpcy5ieXRlTGVuZ3RoID0gLTE7XG4gICAgICAgIHRoaXMucmVmQ291bnQgPSAwO1xuICAgIH1cbiAgICByZXR1cm4gR0xCdWZmZXI7XG59KCkpO1xuXG4vKipcbiAqIFN5c3RlbSBwbHVnaW4gdG8gdGhlIHJlbmRlcmVyIHRvIG1hbmFnZSBidWZmZXJzLlxuICpcbiAqIFdlYkdMIHVzZXMgQnVmZmVycyBhcyBhIHdheSB0byBzdG9yZSBvYmplY3RzIHRvIHRoZSBHUFUuXG4gKiBUaGlzIHN5c3RlbSBtYWtlcyB3b3JraW5nIHdpdGggdGhlbSBhIGxvdCBlYXNpZXIuXG4gKlxuICogQnVmZmVycyBhcmUgdXNlZCBpbiB0aHJlZSBtYWluIHBsYWNlcyBpbiBXZWJHTFxuICogLSBnZW9tZXRyeSBpbmZvcm1hdGlvblxuICogLSBVbmlmb3JtIGluZm9ybWF0aW9uICh2aWEgdW5pZm9ybSBidWZmZXIgb2JqZWN0cyAtIGEgV2ViR0wgMiBvbmx5IGZlYXR1cmUpXG4gKiAtIFRyYW5zZm9ybSBmZWVkYmFjayBpbmZvcm1hdGlvbi4gKFdlYkdMIDIgb25seSBmZWF0dXJlKVxuICpcbiAqIFRoaXMgc3lzdGVtIHdpbGwgaGFuZGxlIHRoZSBiaW5kaW5nIG9mIGJ1ZmZlcnMgdG8gdGhlIEdQVSBhcyB3ZWxsIGFzIHVwbG9hZGluZ1xuICogdGhlbS4gV2l0aCB0aGlzIHN5c3RlbSwgeW91IG5ldmVyIG5lZWQgdG8gd29yayBkaXJlY3RseSB3aXRoIEdQVSBidWZmZXJzLCBidXQgaW5zdGVhZCB3b3JrIHdpdGhcbiAqIHRoZSBQSVhJLkJ1ZmZlciBjbGFzcy5cbiAqIEBjbGFzc1xuICogQG1lbWJlcm9mIFBJWElcbiAqL1xudmFyIEJ1ZmZlclN5c3RlbSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1BJWEkuUmVuZGVyZXJ9IHJlbmRlcmVyIC0gVGhlIHJlbmRlcmVyIHRoaXMgU3lzdGVtIHdvcmtzIGZvci5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBCdWZmZXJTeXN0ZW0ocmVuZGVyZXIpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICB0aGlzLm1hbmFnZWRCdWZmZXJzID0ge307XG4gICAgICAgIHRoaXMuYm91bmRCdWZmZXJCYXNlcyA9IHt9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaWdub3JlXG4gICAgICovXG4gICAgQnVmZmVyU3lzdGVtLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gbnVsbDtcbiAgICB9O1xuICAgIC8qKiBTZXRzIHVwIHRoZSByZW5kZXJlciBjb250ZXh0IGFuZCBuZWNlc3NhcnkgYnVmZmVycy4gKi9cbiAgICBCdWZmZXJTeXN0ZW0ucHJvdG90eXBlLmNvbnRleHRDaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZGlzcG9zZUFsbCh0cnVlKTtcbiAgICAgICAgdGhpcy5nbCA9IHRoaXMucmVuZGVyZXIuZ2w7XG4gICAgICAgIC8vIFRPRE8gZmlsbCBvdXQuLi5cbiAgICAgICAgdGhpcy5DT05URVhUX1VJRCA9IHRoaXMucmVuZGVyZXIuQ09OVEVYVF9VSUQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUaGlzIGJpbmRzIHNwZWNpZmllZCBidWZmZXIuIE9uIGZpcnN0IHJ1biwgaXQgd2lsbCBjcmVhdGUgdGhlIHdlYkdMIGJ1ZmZlcnMgZm9yIHRoZSBjb250ZXh0IHRvb1xuICAgICAqIEBwYXJhbSBidWZmZXIgLSB0aGUgYnVmZmVyIHRvIGJpbmQgdG8gdGhlIHJlbmRlcmVyXG4gICAgICovXG4gICAgQnVmZmVyU3lzdGVtLnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24gKGJ1ZmZlcikge1xuICAgICAgICB2YXIgX2EgPSB0aGlzLCBnbCA9IF9hLmdsLCBDT05URVhUX1VJRCA9IF9hLkNPTlRFWFRfVUlEO1xuICAgICAgICB2YXIgZ2xCdWZmZXIgPSBidWZmZXIuX2dsQnVmZmVyc1tDT05URVhUX1VJRF0gfHwgdGhpcy5jcmVhdGVHTEJ1ZmZlcihidWZmZXIpO1xuICAgICAgICBnbC5iaW5kQnVmZmVyKGJ1ZmZlci50eXBlLCBnbEJ1ZmZlci5idWZmZXIpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQmluZHMgYW4gdW5pZm9ybSBidWZmZXIgdG8gYXQgdGhlIGdpdmVuIGluZGV4LlxuICAgICAqXG4gICAgICogQSBjYWNoZSBpcyB1c2VkIHNvIGEgYnVmZmVyIHdpbGwgbm90IGJlIGJvdW5kIGFnYWluIGlmIGFscmVhZHkgYm91bmQuXG4gICAgICogQHBhcmFtIGJ1ZmZlciAtIHRoZSBidWZmZXIgdG8gYmluZFxuICAgICAqIEBwYXJhbSBpbmRleCAtIHRoZSBiYXNlIGluZGV4IHRvIGJpbmQgaXQgdG8uXG4gICAgICovXG4gICAgQnVmZmVyU3lzdGVtLnByb3RvdHlwZS5iaW5kQnVmZmVyQmFzZSA9IGZ1bmN0aW9uIChidWZmZXIsIGluZGV4KSB7XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIGdsID0gX2EuZ2wsIENPTlRFWFRfVUlEID0gX2EuQ09OVEVYVF9VSUQ7XG4gICAgICAgIGlmICh0aGlzLmJvdW5kQnVmZmVyQmFzZXNbaW5kZXhdICE9PSBidWZmZXIpIHtcbiAgICAgICAgICAgIHZhciBnbEJ1ZmZlciA9IGJ1ZmZlci5fZ2xCdWZmZXJzW0NPTlRFWFRfVUlEXSB8fCB0aGlzLmNyZWF0ZUdMQnVmZmVyKGJ1ZmZlcik7XG4gICAgICAgICAgICB0aGlzLmJvdW5kQnVmZmVyQmFzZXNbaW5kZXhdID0gYnVmZmVyO1xuICAgICAgICAgICAgZ2wuYmluZEJ1ZmZlckJhc2UoZ2wuVU5JRk9STV9CVUZGRVIsIGluZGV4LCBnbEJ1ZmZlci5idWZmZXIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBCaW5kcyBhIGJ1ZmZlciB3aGlsc3QgYWxzbyBiaW5kaW5nIGl0cyByYW5nZS5cbiAgICAgKiBUaGlzIHdpbGwgbWFrZSB0aGUgYnVmZmVyIHN0YXJ0IGZyb20gdGhlIG9mZnNldCBzdXBwbGllZCByYXRoZXIgdGhhbiAwIHdoZW4gaXQgaXMgcmVhZC5cbiAgICAgKiBAcGFyYW0gYnVmZmVyIC0gdGhlIGJ1ZmZlciB0byBiaW5kXG4gICAgICogQHBhcmFtIGluZGV4IC0gdGhlIGJhc2UgaW5kZXggdG8gYmluZCBhdCwgZGVmYXVsdHMgdG8gMFxuICAgICAqIEBwYXJhbSBvZmZzZXQgLSB0aGUgb2Zmc2V0IHRvIGJpbmQgYXQgKHRoaXMgaXMgYmxvY2tzIG9mIDI1NikuIDAgPSAwLCAxID0gMjU2LCAyID0gNTEyIGV0Y1xuICAgICAqL1xuICAgIEJ1ZmZlclN5c3RlbS5wcm90b3R5cGUuYmluZEJ1ZmZlclJhbmdlID0gZnVuY3Rpb24gKGJ1ZmZlciwgaW5kZXgsIG9mZnNldCkge1xuICAgICAgICB2YXIgX2EgPSB0aGlzLCBnbCA9IF9hLmdsLCBDT05URVhUX1VJRCA9IF9hLkNPTlRFWFRfVUlEO1xuICAgICAgICBvZmZzZXQgPSBvZmZzZXQgfHwgMDtcbiAgICAgICAgdmFyIGdsQnVmZmVyID0gYnVmZmVyLl9nbEJ1ZmZlcnNbQ09OVEVYVF9VSURdIHx8IHRoaXMuY3JlYXRlR0xCdWZmZXIoYnVmZmVyKTtcbiAgICAgICAgZ2wuYmluZEJ1ZmZlclJhbmdlKGdsLlVOSUZPUk1fQlVGRkVSLCBpbmRleCB8fCAwLCBnbEJ1ZmZlci5idWZmZXIsIG9mZnNldCAqIDI1NiwgMjU2KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFdpbGwgZW5zdXJlIHRoZSBkYXRhIGluIHRoZSBidWZmZXIgaXMgdXBsb2FkZWQgdG8gdGhlIEdQVS5cbiAgICAgKiBAcGFyYW0ge1BJWEkuQnVmZmVyfSBidWZmZXIgLSB0aGUgYnVmZmVyIHRvIHVwZGF0ZVxuICAgICAqL1xuICAgIEJ1ZmZlclN5c3RlbS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGJ1ZmZlcikge1xuICAgICAgICB2YXIgX2EgPSB0aGlzLCBnbCA9IF9hLmdsLCBDT05URVhUX1VJRCA9IF9hLkNPTlRFWFRfVUlEO1xuICAgICAgICB2YXIgZ2xCdWZmZXIgPSBidWZmZXIuX2dsQnVmZmVyc1tDT05URVhUX1VJRF07XG4gICAgICAgIGlmIChidWZmZXIuX3VwZGF0ZUlEID09PSBnbEJ1ZmZlci51cGRhdGVJRCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGdsQnVmZmVyLnVwZGF0ZUlEID0gYnVmZmVyLl91cGRhdGVJRDtcbiAgICAgICAgZ2wuYmluZEJ1ZmZlcihidWZmZXIudHlwZSwgZ2xCdWZmZXIuYnVmZmVyKTtcbiAgICAgICAgaWYgKGdsQnVmZmVyLmJ5dGVMZW5ndGggPj0gYnVmZmVyLmRhdGEuYnl0ZUxlbmd0aCkge1xuICAgICAgICAgICAgLy8gb2Zmc2V0IGlzIGFsd2F5cyB6ZXJvIGZvciBub3chXG4gICAgICAgICAgICBnbC5idWZmZXJTdWJEYXRhKGJ1ZmZlci50eXBlLCAwLCBidWZmZXIuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgZHJhd1R5cGUgPSBidWZmZXIuc3RhdGljID8gZ2wuU1RBVElDX0RSQVcgOiBnbC5EWU5BTUlDX0RSQVc7XG4gICAgICAgICAgICBnbEJ1ZmZlci5ieXRlTGVuZ3RoID0gYnVmZmVyLmRhdGEuYnl0ZUxlbmd0aDtcbiAgICAgICAgICAgIGdsLmJ1ZmZlckRhdGEoYnVmZmVyLnR5cGUsIGJ1ZmZlci5kYXRhLCBkcmF3VHlwZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERpc3Bvc2VzIGJ1ZmZlclxuICAgICAqIEBwYXJhbSB7UElYSS5CdWZmZXJ9IGJ1ZmZlciAtIGJ1ZmZlciB3aXRoIGRhdGFcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtjb250ZXh0TG9zdD1mYWxzZV0gLSBJZiBjb250ZXh0IHdhcyBsb3N0LCB3ZSBzdXBwcmVzcyBkZWxldGVWZXJ0ZXhBcnJheVxuICAgICAqL1xuICAgIEJ1ZmZlclN5c3RlbS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uIChidWZmZXIsIGNvbnRleHRMb3N0KSB7XG4gICAgICAgIGlmICghdGhpcy5tYW5hZ2VkQnVmZmVyc1tidWZmZXIuaWRdKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZGVsZXRlIHRoaXMubWFuYWdlZEJ1ZmZlcnNbYnVmZmVyLmlkXTtcbiAgICAgICAgdmFyIGdsQnVmZmVyID0gYnVmZmVyLl9nbEJ1ZmZlcnNbdGhpcy5DT05URVhUX1VJRF07XG4gICAgICAgIHZhciBnbCA9IHRoaXMuZ2w7XG4gICAgICAgIGJ1ZmZlci5kaXNwb3NlUnVubmVyLnJlbW92ZSh0aGlzKTtcbiAgICAgICAgaWYgKCFnbEJ1ZmZlcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghY29udGV4dExvc3QpIHtcbiAgICAgICAgICAgIGdsLmRlbGV0ZUJ1ZmZlcihnbEJ1ZmZlci5idWZmZXIpO1xuICAgICAgICB9XG4gICAgICAgIGRlbGV0ZSBidWZmZXIuX2dsQnVmZmVyc1t0aGlzLkNPTlRFWFRfVUlEXTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIGRpc3Bvc2UgYWxsIFdlYkdMIHJlc291cmNlcyBvZiBhbGwgbWFuYWdlZCBidWZmZXJzXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbY29udGV4dExvc3Q9ZmFsc2VdIC0gSWYgY29udGV4dCB3YXMgbG9zdCwgd2Ugc3VwcHJlc3MgYGdsLmRlbGV0ZWAgY2FsbHNcbiAgICAgKi9cbiAgICBCdWZmZXJTeXN0ZW0ucHJvdG90eXBlLmRpc3Bvc2VBbGwgPSBmdW5jdGlvbiAoY29udGV4dExvc3QpIHtcbiAgICAgICAgdmFyIGFsbCA9IE9iamVjdC5rZXlzKHRoaXMubWFuYWdlZEJ1ZmZlcnMpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFsbC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5kaXNwb3NlKHRoaXMubWFuYWdlZEJ1ZmZlcnNbYWxsW2ldXSwgY29udGV4dExvc3QpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBjcmVhdGVzIGFuZCBhdHRhY2hlcyBhIEdMQnVmZmVyIG9iamVjdCB0aWVkIHRvIHRoZSBjdXJyZW50IGNvbnRleHQuXG4gICAgICogQHBhcmFtIGJ1ZmZlclxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBCdWZmZXJTeXN0ZW0ucHJvdG90eXBlLmNyZWF0ZUdMQnVmZmVyID0gZnVuY3Rpb24gKGJ1ZmZlcikge1xuICAgICAgICB2YXIgX2EgPSB0aGlzLCBDT05URVhUX1VJRCA9IF9hLkNPTlRFWFRfVUlELCBnbCA9IF9hLmdsO1xuICAgICAgICBidWZmZXIuX2dsQnVmZmVyc1tDT05URVhUX1VJRF0gPSBuZXcgR0xCdWZmZXIoZ2wuY3JlYXRlQnVmZmVyKCkpO1xuICAgICAgICB0aGlzLm1hbmFnZWRCdWZmZXJzW2J1ZmZlci5pZF0gPSBidWZmZXI7XG4gICAgICAgIGJ1ZmZlci5kaXNwb3NlUnVubmVyLmFkZCh0aGlzKTtcbiAgICAgICAgcmV0dXJuIGJ1ZmZlci5fZ2xCdWZmZXJzW0NPTlRFWFRfVUlEXTtcbiAgICB9O1xuICAgIHJldHVybiBCdWZmZXJTeXN0ZW07XG59KCkpO1xuXG4vKipcbiAqIFRoZSBSZW5kZXJlciBkcmF3cyB0aGUgc2NlbmUgYW5kIGFsbCBpdHMgY29udGVudCBvbnRvIGEgV2ViR0wgZW5hYmxlZCBjYW52YXMuXG4gKlxuICogVGhpcyByZW5kZXJlciBzaG91bGQgYmUgdXNlZCBmb3IgYnJvd3NlcnMgdGhhdCBzdXBwb3J0IFdlYkdMLlxuICpcbiAqIFRoaXMgcmVuZGVyZXIgd29ya3MgYnkgYXV0b21hdGljYWxseSBtYW5hZ2luZyBXZWJHTEJhdGNoZXNtLCBzbyBubyBuZWVkIGZvciBTcHJpdGUgQmF0Y2hlcyBvciBTcHJpdGUgQ2xvdWRzLlxuICogRG9uJ3QgZm9yZ2V0IHRvIGFkZCB0aGUgdmlldyB0byB5b3VyIERPTSBvciB5b3Ugd2lsbCBub3Qgc2VlIGFueXRoaW5nIVxuICpcbiAqIFJlbmRlcmVyIGlzIGNvbXBvc2VkIG9mIHN5c3RlbXMgdGhhdCBtYW5hZ2Ugc3BlY2lmaWMgdGFza3MuIFRoZSBmb2xsb3dpbmcgc3lzdGVtcyBhcmUgYWRkZWQgYnkgZGVmYXVsdFxuICogd2hlbmV2ZXIgeW91IGNyZWF0ZSBhIHJlbmRlcmVyOlxuICpcbiAqIHwgU3lzdGVtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgRGVzY3JpcHRpb24gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gfCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSB8XG4gKiB8IHtAbGluayBQSVhJLkJhdGNoU3lzdGVtfSAgICAgICAgICAgICB8IFRoaXMgbWFuYWdlcyBvYmplY3QgcmVuZGVyZXJzIHRoYXQgZGVmZXIgcmVuZGVyaW5nIHVudGlsIGEgZmx1c2guICAgICAgICAgICAgIHxcbiAqIHwge0BsaW5rIFBJWEkuQ29udGV4dFN5c3RlbX0gICAgICAgICAgIHwgVGhpcyBtYW5hZ2VzIHRoZSBXZWJHTCBjb250ZXh0IGFuZCBleHRlbnNpb25zLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfCB7QGxpbmsgUElYSS5FdmVudFN5c3RlbX0gICAgICAgICAgICAgfCBUaGlzIG1hbmFnZXMgVUkgZXZlbnRzLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8IHtAbGluayBQSVhJLkZpbHRlclN5c3RlbX0gICAgICAgICAgICB8IFRoaXMgbWFuYWdlcyB0aGUgZmlsdGVyaW5nIHBpcGVsaW5lIGZvciBwb3N0LXByb2Nlc3NpbmcgZWZmZWN0cy4gICAgICAgICAgICAgIHxcbiAqIHwge0BsaW5rIFBJWEkuRnJhbWVidWZmZXJTeXN0ZW19ICAgICAgIHwgVGhpcyBtYW5hZ2VzIGZyYW1lYnVmZmVycywgd2hpY2ggYXJlIHVzZWQgZm9yIG9mZnNjcmVlbiByZW5kZXJpbmcuICAgICAgICAgICAgfFxuICogfCB7QGxpbmsgUElYSS5HZW9tZXRyeVN5c3RlbX0gICAgICAgICAgfCBUaGlzIG1hbmFnZXMgZ2VvbWV0cmllcyAmIGJ1ZmZlcnMsIHdoaWNoIGFyZSB1c2VkIHRvIGRyYXcgb2JqZWN0IG1lc2hlcy4gICAgICB8XG4gKiB8IHtAbGluayBQSVhJLk1hc2tTeXN0ZW19ICAgICAgICAgICAgICB8IFRoaXMgbWFuYWdlcyBtYXNraW5nIG9wZXJhdGlvbnMuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwge0BsaW5rIFBJWEkuUHJvamVjdGlvblN5c3RlbX0gICAgICAgIHwgVGhpcyBtYW5hZ2VzIHRoZSBgcHJvamVjdGlvbk1hdHJpeGAsIHVzZWQgYnkgc2hhZGVycyB0byBnZXQgTkRDIGNvb3JkaW5hdGVzLiAgfFxuICogfCB7QGxpbmsgUElYSS5SZW5kZXJUZXh0dXJlU3lzdGVtfSAgICAgfCBUaGlzIG1hbmFnZXMgcmVuZGVyLXRleHR1cmVzLCB3aGljaCBhcmUgYW4gYWJzdHJhY3Rpb24gb3ZlciBmcmFtZWJ1ZmZlcnMuICAgICB8XG4gKiB8IHtAbGluayBQSVhJLlNjaXNzb3JTeXN0ZW19ICAgICAgICAgICB8IFRoaXMgaGFuZGxlcyBzY2lzc29yIG1hc2tpbmcsIGFuZCBpcyB1c2VkIGludGVybmFsbHkgYnkge0BsaW5rIE1hc2tTeXN0ZW19ICAgIHxcbiAqIHwge0BsaW5rIFBJWEkuU2hhZGVyU3lzdGVtfSAgICAgICAgICAgIHwgVGhpcyBtYW5hZ2VzIHNoYWRlcnMsIHByb2dyYW1zIHRoYXQgcnVuIG9uIHRoZSBHUFUgdG8gY2FsY3VsYXRlICdlbSBwaXhlbHMuICAgfFxuICogfCB7QGxpbmsgUElYSS5TdGF0ZVN5c3RlbX0gICAgICAgICAgICAgfCBUaGlzIG1hbmFnZXMgdGhlIFdlYkdMIHN0YXRlIHZhcmlhYmxlcyBsaWtlIGJsZW5kIG1vZGUsIGRlcHRoIHRlc3RpbmcsIGV0Yy4gICB8XG4gKiB8IHtAbGluayBQSVhJLlN0ZW5jaWxTeXN0ZW19ICAgICAgICAgICB8IFRoaXMgaGFuZGxlcyBzdGVuY2lsIG1hc2tpbmcsIGFuZCBpcyB1c2VkIGludGVybmFsbHkgYnkge0BsaW5rIE1hc2tTeXN0ZW19ICAgIHxcbiAqIHwge0BsaW5rIFBJWEkuVGV4dHVyZVN5c3RlbX0gICAgICAgICAgIHwgVGhpcyBtYW5hZ2VzIHRleHR1cmVzIGFuZCB0aGVpciByZXNvdXJjZXMgb24gdGhlIEdQVS4gICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfCB7QGxpbmsgUElYSS5UZXh0dXJlR0NTeXN0ZW19ICAgICAgICAgfCBUaGlzIHdpbGwgYXV0b21hdGljYWxseSByZW1vdmUgdGV4dHVyZXMgZnJvbSB0aGUgR1BVIGlmIHRoZXkgYXJlIG5vdCB1c2VkLiAgICB8XG4gKlxuICogVGhlIGJyZWFkdGggb2YgdGhlIEFQSSBzdXJmYWNlIHByb3ZpZGVkIGJ5IHRoZSByZW5kZXJlciBpcyBjb250YWluZWQgd2l0aGluIHRoZXNlIHN5c3RlbXMuXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG52YXIgUmVuZGVyZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFJlbmRlcmVyLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBbb3B0aW9uc10gLSBUaGUgb3B0aW9uYWwgcmVuZGVyZXIgcGFyYW1ldGVycy5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMud2lkdGg9ODAwXSAtIFRoZSB3aWR0aCBvZiB0aGUgc2NyZWVuLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5oZWlnaHQ9NjAwXSAtIFRoZSBoZWlnaHQgb2YgdGhlIHNjcmVlbi5cbiAgICAgKiBAcGFyYW0ge0hUTUxDYW52YXNFbGVtZW50fSBbb3B0aW9ucy52aWV3XSAtIFRoZSBjYW52YXMgdG8gdXNlIGFzIGEgdmlldywgb3B0aW9uYWwuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy51c2VDb250ZXh0QWxwaGE9dHJ1ZV0gLSBQYXNzLXRocm91Z2ggdmFsdWUgZm9yIGNhbnZhcycgY29udGV4dCBgYWxwaGFgIHByb3BlcnR5LlxuICAgICAqICAgSWYgeW91IHdhbnQgdG8gc2V0IHRyYW5zcGFyZW5jeSwgcGxlYXNlIHVzZSBgYmFja2dyb3VuZEFscGhhYC4gVGhpcyBvcHRpb24gaXMgZm9yIGNhc2VzIHdoZXJlIHRoZVxuICAgICAqICAgY2FudmFzIG5lZWRzIHRvIGJlIG9wYXF1ZSwgcG9zc2libHkgZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMgb24gc29tZSBvbGRlciBkZXZpY2VzLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuYXV0b0RlbnNpdHk9ZmFsc2VdIC0gUmVzaXplcyByZW5kZXJlciB2aWV3IGluIENTUyBwaXhlbHMgdG8gYWxsb3cgZm9yXG4gICAgICogICByZXNvbHV0aW9ucyBvdGhlciB0aGFuIDEuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5hbnRpYWxpYXM9ZmFsc2VdIC0gU2V0cyBhbnRpYWxpYXMuIElmIG5vdCBhdmFpbGFibGUgbmF0aXZlbHkgdGhlbiBGWEFBXG4gICAgICogIGFudGlhbGlhc2luZyBpcyB1c2VkLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5yZXNvbHV0aW9uPVBJWEkuc2V0dGluZ3MuUkVTT0xVVElPTl0gLSBUaGUgcmVzb2x1dGlvbiAvIGRldmljZSBwaXhlbCByYXRpbyBvZiB0aGUgcmVuZGVyZXIuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5jbGVhckJlZm9yZVJlbmRlcj10cnVlXSAtIFRoaXMgc2V0cyBpZiB0aGUgcmVuZGVyZXIgd2lsbCBjbGVhclxuICAgICAqICB0aGUgY2FudmFzIG9yIG5vdCBiZWZvcmUgdGhlIG5ldyByZW5kZXIgcGFzcy4gSWYgeW91IHdpc2ggdG8gc2V0IHRoaXMgdG8gZmFsc2UsIHlvdSAqbXVzdCogc2V0XG4gICAgICogIHByZXNlcnZlRHJhd2luZ0J1ZmZlciB0byBgdHJ1ZWAuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5wcmVzZXJ2ZURyYXdpbmdCdWZmZXI9ZmFsc2VdIC0gRW5hYmxlcyBkcmF3aW5nIGJ1ZmZlciBwcmVzZXJ2YXRpb24sXG4gICAgICogIGVuYWJsZSB0aGlzIGlmIHlvdSBuZWVkIHRvIGNhbGwgdG9EYXRhVXJsIG9uIHRoZSBXZWJHTCBjb250ZXh0LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5iYWNrZ3JvdW5kQ29sb3I9MHgwMDAwMDBdIC0gVGhlIGJhY2tncm91bmQgY29sb3Igb2YgdGhlIHJlbmRlcmVkIGFyZWFcbiAgICAgKiAgKHNob3duIGlmIG5vdCB0cmFuc3BhcmVudCkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLmJhY2tncm91bmRBbHBoYT0xXSAtIFZhbHVlIGZyb20gMCAoZnVsbHkgdHJhbnNwYXJlbnQpIHRvIDEgKGZ1bGx5IG9wYXF1ZSkuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnBvd2VyUHJlZmVyZW5jZV0gLSBQYXJhbWV0ZXIgcGFzc2VkIHRvIFdlYkdMIGNvbnRleHQsIHNldCB0byBcImhpZ2gtcGVyZm9ybWFuY2VcIlxuICAgICAqICBmb3IgZGV2aWNlcyB3aXRoIGR1YWwgZ3JhcGhpY3MgY2FyZC5cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnMuY29udGV4dF0gLSBJZiBXZWJHTCBjb250ZXh0IGFscmVhZHkgZXhpc3RzLCBhbGwgcGFyYW1ldGVycyBtdXN0IGJlIHRha2VuIGZyb20gaXQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gUmVuZGVyZXIob3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBjb25zdGFudHMuUkVOREVSRVJfVFlQRS5XRUJHTCwgb3B0aW9ucykgfHwgdGhpcztcbiAgICAgICAgLy8gdGhlIG9wdGlvbnMgd2lsbCBoYXZlIGJlZW4gbW9kaWZpZWQgaGVyZSBpbiB0aGUgc3VwZXIgY29uc3RydWN0b3Igd2l0aCBwaXhpJ3MgZGVmYXVsdCBzZXR0aW5ncy4uXG4gICAgICAgIG9wdGlvbnMgPSBfdGhpcy5vcHRpb25zO1xuICAgICAgICBfdGhpcy5nbCA9IG51bGw7XG4gICAgICAgIF90aGlzLkNPTlRFWFRfVUlEID0gMDtcbiAgICAgICAgX3RoaXMucnVubmVycyA9IHtcbiAgICAgICAgICAgIGRlc3Ryb3k6IG5ldyBydW5uZXIuUnVubmVyKCdkZXN0cm95JyksXG4gICAgICAgICAgICBjb250ZXh0Q2hhbmdlOiBuZXcgcnVubmVyLlJ1bm5lcignY29udGV4dENoYW5nZScpLFxuICAgICAgICAgICAgcmVzZXQ6IG5ldyBydW5uZXIuUnVubmVyKCdyZXNldCcpLFxuICAgICAgICAgICAgdXBkYXRlOiBuZXcgcnVubmVyLlJ1bm5lcigndXBkYXRlJyksXG4gICAgICAgICAgICBwb3N0cmVuZGVyOiBuZXcgcnVubmVyLlJ1bm5lcigncG9zdHJlbmRlcicpLFxuICAgICAgICAgICAgcHJlcmVuZGVyOiBuZXcgcnVubmVyLlJ1bm5lcigncHJlcmVuZGVyJyksXG4gICAgICAgICAgICByZXNpemU6IG5ldyBydW5uZXIuUnVubmVyKCdyZXNpemUnKSxcbiAgICAgICAgfTtcbiAgICAgICAgX3RoaXMucnVubmVycy5jb250ZXh0Q2hhbmdlLmFkZChfdGhpcyk7XG4gICAgICAgIF90aGlzLmdsb2JhbFVuaWZvcm1zID0gbmV3IFVuaWZvcm1Hcm91cCh7XG4gICAgICAgICAgICBwcm9qZWN0aW9uTWF0cml4OiBuZXcgbWF0aC5NYXRyaXgoKSxcbiAgICAgICAgfSwgdHJ1ZSk7XG4gICAgICAgIF90aGlzLmFkZFN5c3RlbShNYXNrU3lzdGVtLCAnbWFzaycpXG4gICAgICAgICAgICAuYWRkU3lzdGVtKENvbnRleHRTeXN0ZW0sICdjb250ZXh0JylcbiAgICAgICAgICAgIC5hZGRTeXN0ZW0oU3RhdGVTeXN0ZW0sICdzdGF0ZScpXG4gICAgICAgICAgICAuYWRkU3lzdGVtKFNoYWRlclN5c3RlbSwgJ3NoYWRlcicpXG4gICAgICAgICAgICAuYWRkU3lzdGVtKFRleHR1cmVTeXN0ZW0sICd0ZXh0dXJlJylcbiAgICAgICAgICAgIC5hZGRTeXN0ZW0oQnVmZmVyU3lzdGVtLCAnYnVmZmVyJylcbiAgICAgICAgICAgIC5hZGRTeXN0ZW0oR2VvbWV0cnlTeXN0ZW0sICdnZW9tZXRyeScpXG4gICAgICAgICAgICAuYWRkU3lzdGVtKEZyYW1lYnVmZmVyU3lzdGVtLCAnZnJhbWVidWZmZXInKVxuICAgICAgICAgICAgLmFkZFN5c3RlbShTY2lzc29yU3lzdGVtLCAnc2Npc3NvcicpXG4gICAgICAgICAgICAuYWRkU3lzdGVtKFN0ZW5jaWxTeXN0ZW0sICdzdGVuY2lsJylcbiAgICAgICAgICAgIC5hZGRTeXN0ZW0oUHJvamVjdGlvblN5c3RlbSwgJ3Byb2plY3Rpb24nKVxuICAgICAgICAgICAgLmFkZFN5c3RlbShUZXh0dXJlR0NTeXN0ZW0sICd0ZXh0dXJlR0MnKVxuICAgICAgICAgICAgLmFkZFN5c3RlbShGaWx0ZXJTeXN0ZW0sICdmaWx0ZXInKVxuICAgICAgICAgICAgLmFkZFN5c3RlbShSZW5kZXJUZXh0dXJlU3lzdGVtLCAncmVuZGVyVGV4dHVyZScpXG4gICAgICAgICAgICAuYWRkU3lzdGVtKEJhdGNoU3lzdGVtLCAnYmF0Y2gnKTtcbiAgICAgICAgX3RoaXMuaW5pdFBsdWdpbnMoUmVuZGVyZXIuX19wbHVnaW5zKTtcbiAgICAgICAgX3RoaXMubXVsdGlzYW1wbGUgPSB1bmRlZmluZWQ7XG4gICAgICAgIC8qXG4gICAgICAgICAqIFRoZSBvcHRpb25zIHBhc3NlZCBpbiB0byBjcmVhdGUgYSBuZXcgV2ViR0wgY29udGV4dC5cbiAgICAgICAgICovXG4gICAgICAgIGlmIChvcHRpb25zLmNvbnRleHQpIHtcbiAgICAgICAgICAgIF90aGlzLmNvbnRleHQuaW5pdEZyb21Db250ZXh0KG9wdGlvbnMuY29udGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBfdGhpcy5jb250ZXh0LmluaXRGcm9tT3B0aW9ucyh7XG4gICAgICAgICAgICAgICAgYWxwaGE6ICEhX3RoaXMudXNlQ29udGV4dEFscGhhLFxuICAgICAgICAgICAgICAgIGFudGlhbGlhczogb3B0aW9ucy5hbnRpYWxpYXMsXG4gICAgICAgICAgICAgICAgcHJlbXVsdGlwbGllZEFscGhhOiBfdGhpcy51c2VDb250ZXh0QWxwaGEgJiYgX3RoaXMudXNlQ29udGV4dEFscGhhICE9PSAnbm90TXVsdGlwbGllZCcsXG4gICAgICAgICAgICAgICAgc3RlbmNpbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBwcmVzZXJ2ZURyYXdpbmdCdWZmZXI6IG9wdGlvbnMucHJlc2VydmVEcmF3aW5nQnVmZmVyLFxuICAgICAgICAgICAgICAgIHBvd2VyUHJlZmVyZW5jZTogX3RoaXMub3B0aW9ucy5wb3dlclByZWZlcmVuY2UsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBfdGhpcy5yZW5kZXJpbmdUb1NjcmVlbiA9IHRydWU7XG4gICAgICAgIHV0aWxzLnNheUhlbGxvKF90aGlzLmNvbnRleHQud2ViR0xWZXJzaW9uID09PSAyID8gJ1dlYkdMIDInIDogJ1dlYkdMIDEnKTtcbiAgICAgICAgX3RoaXMucmVzaXplKF90aGlzLm9wdGlvbnMud2lkdGgsIF90aGlzLm9wdGlvbnMuaGVpZ2h0KTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgcmVuZGVyZXIgaWYgV2ViR0wgaXMgYXZhaWxhYmxlLiBPdmVycmlkZWFibGVcbiAgICAgKiBieSB0aGUgKipAcGl4aS9jYW52YXMtcmVuZGVyZXIqKiBwYWNrYWdlIHRvIGFsbG93IGZhbGxiYWNrLlxuICAgICAqIHRocm93cyBlcnJvciBpZiBXZWJHTCBpcyBub3QgYXZhaWxhYmxlLlxuICAgICAqIEBwYXJhbSBvcHRpb25zXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBSZW5kZXJlci5jcmVhdGUgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICBpZiAodXRpbHMuaXNXZWJHTFN1cHBvcnRlZCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlbmRlcmVyKG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignV2ViR0wgdW5zdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyLCB1c2UgXCJwaXhpLmpzLWxlZ2FjeVwiIGZvciBmYWxsYmFjayBjYW52YXMyZCBzdXBwb3J0LicpO1xuICAgIH07XG4gICAgUmVuZGVyZXIucHJvdG90eXBlLmNvbnRleHRDaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBnbCA9IHRoaXMuZ2w7XG4gICAgICAgIHZhciBzYW1wbGVzO1xuICAgICAgICBpZiAodGhpcy5jb250ZXh0LndlYkdMVmVyc2lvbiA9PT0gMSkge1xuICAgICAgICAgICAgdmFyIGZyYW1lYnVmZmVyID0gZ2wuZ2V0UGFyYW1ldGVyKGdsLkZSQU1FQlVGRkVSX0JJTkRJTkcpO1xuICAgICAgICAgICAgZ2wuYmluZEZyYW1lYnVmZmVyKGdsLkZSQU1FQlVGRkVSLCBudWxsKTtcbiAgICAgICAgICAgIHNhbXBsZXMgPSBnbC5nZXRQYXJhbWV0ZXIoZ2wuU0FNUExFUyk7XG4gICAgICAgICAgICBnbC5iaW5kRnJhbWVidWZmZXIoZ2wuRlJBTUVCVUZGRVIsIGZyYW1lYnVmZmVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBmcmFtZWJ1ZmZlciA9IGdsLmdldFBhcmFtZXRlcihnbC5EUkFXX0ZSQU1FQlVGRkVSX0JJTkRJTkcpO1xuICAgICAgICAgICAgZ2wuYmluZEZyYW1lYnVmZmVyKGdsLkRSQVdfRlJBTUVCVUZGRVIsIG51bGwpO1xuICAgICAgICAgICAgc2FtcGxlcyA9IGdsLmdldFBhcmFtZXRlcihnbC5TQU1QTEVTKTtcbiAgICAgICAgICAgIGdsLmJpbmRGcmFtZWJ1ZmZlcihnbC5EUkFXX0ZSQU1FQlVGRkVSLCBmcmFtZWJ1ZmZlcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNhbXBsZXMgPj0gY29uc3RhbnRzLk1TQUFfUVVBTElUWS5ISUdIKSB7XG4gICAgICAgICAgICB0aGlzLm11bHRpc2FtcGxlID0gY29uc3RhbnRzLk1TQUFfUVVBTElUWS5ISUdIO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNhbXBsZXMgPj0gY29uc3RhbnRzLk1TQUFfUVVBTElUWS5NRURJVU0pIHtcbiAgICAgICAgICAgIHRoaXMubXVsdGlzYW1wbGUgPSBjb25zdGFudHMuTVNBQV9RVUFMSVRZLk1FRElVTTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzYW1wbGVzID49IGNvbnN0YW50cy5NU0FBX1FVQUxJVFkuTE9XKSB7XG4gICAgICAgICAgICB0aGlzLm11bHRpc2FtcGxlID0gY29uc3RhbnRzLk1TQUFfUVVBTElUWS5MT1c7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm11bHRpc2FtcGxlID0gY29uc3RhbnRzLk1TQUFfUVVBTElUWS5OT05FO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBZGQgYSBuZXcgc3lzdGVtIHRvIHRoZSByZW5kZXJlci5cbiAgICAgKiBAcGFyYW0gQ2xhc3NSZWYgLSBDbGFzcyByZWZlcmVuY2VcbiAgICAgKiBAcGFyYW0gbmFtZSAtIFByb3BlcnR5IG5hbWUgZm9yIHN5c3RlbSwgaWYgbm90IHNwZWNpZmllZFxuICAgICAqICAgICAgICB3aWxsIHVzZSBhIHN0YXRpYyBgbmFtZWAgcHJvcGVydHkgb24gdGhlIGNsYXNzIGl0c2VsZi4gVGhpc1xuICAgICAqICAgICAgICBuYW1lIHdpbGwgYmUgYXNzaWduZWQgYXMgcyBwcm9wZXJ0eSBvbiB0aGUgUmVuZGVyZXIgc28gbWFrZVxuICAgICAqICAgICAgICBzdXJlIGl0IGRvZXNuJ3QgY29sbGlkZSB3aXRoIHByb3BlcnRpZXMgb24gUmVuZGVyZXIuXG4gICAgICogQHJldHVybnMgUmV0dXJuIGluc3RhbmNlIG9mIHJlbmRlcmVyXG4gICAgICovXG4gICAgUmVuZGVyZXIucHJvdG90eXBlLmFkZFN5c3RlbSA9IGZ1bmN0aW9uIChDbGFzc1JlZiwgbmFtZSkge1xuICAgICAgICB2YXIgc3lzdGVtID0gbmV3IENsYXNzUmVmKHRoaXMpO1xuICAgICAgICBpZiAodGhpc1tuYW1lXSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiV2hvb3BzISBUaGUgbmFtZSBcXFwiXCIgKyBuYW1lICsgXCJcXFwiIGlzIGFscmVhZHkgaW4gdXNlXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXNbbmFtZV0gPSBzeXN0ZW07XG4gICAgICAgIGZvciAodmFyIGkgaW4gdGhpcy5ydW5uZXJzKSB7XG4gICAgICAgICAgICB0aGlzLnJ1bm5lcnNbaV0uYWRkKHN5c3RlbSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVkIGFmdGVyIHJlbmRlcmluZyBmaW5pc2hlcy5cbiAgICAgICAgICogQGV2ZW50IFBJWEkuUmVuZGVyZXIjcG9zdHJlbmRlclxuICAgICAgICAgKi9cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVkIGJlZm9yZSByZW5kZXJpbmcgc3RhcnRzLlxuICAgICAgICAgKiBAZXZlbnQgUElYSS5SZW5kZXJlciNwcmVyZW5kZXJcbiAgICAgICAgICovXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlZCB3aGVuIHRoZSBXZWJHTCBjb250ZXh0IGlzIHNldC5cbiAgICAgICAgICogQGV2ZW50IFBJWEkuUmVuZGVyZXIjY29udGV4dFxuICAgICAgICAgKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgLSBXZWJHTCBjb250ZXh0LlxuICAgICAgICAgKi9cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAaWdub3JlXG4gICAgICovXG4gICAgUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChkaXNwbGF5T2JqZWN0LCBvcHRpb25zKSB7XG4gICAgICAgIHZhciByZW5kZXJUZXh0dXJlO1xuICAgICAgICB2YXIgY2xlYXI7XG4gICAgICAgIHZhciB0cmFuc2Zvcm07XG4gICAgICAgIHZhciBza2lwVXBkYXRlVHJhbnNmb3JtO1xuICAgICAgICBpZiAob3B0aW9ucykge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMgaW5zdGFuY2VvZiBSZW5kZXJUZXh0dXJlKSB7XG4gICAgICAgICAgICAgICAgdXRpbHMuZGVwcmVjYXRpb24oJzYuMC4wJywgJ1JlbmRlcmVyI3JlbmRlciBhcmd1bWVudHMgY2hhbmdlZCwgdXNlIG9wdGlvbnMgaW5zdGVhZC4nKTtcbiAgICAgICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBwcmVmZXItcmVzdC1wYXJhbXMgKi9cbiAgICAgICAgICAgICAgICByZW5kZXJUZXh0dXJlID0gb3B0aW9ucztcbiAgICAgICAgICAgICAgICBjbGVhciA9IGFyZ3VtZW50c1syXTtcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm0gPSBhcmd1bWVudHNbM107XG4gICAgICAgICAgICAgICAgc2tpcFVwZGF0ZVRyYW5zZm9ybSA9IGFyZ3VtZW50c1s0XTtcbiAgICAgICAgICAgICAgICAvKiBlc2xpbnQtZW5hYmxlIHByZWZlci1yZXN0LXBhcmFtcyAqL1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVuZGVyVGV4dHVyZSA9IG9wdGlvbnMucmVuZGVyVGV4dHVyZTtcbiAgICAgICAgICAgICAgICBjbGVhciA9IG9wdGlvbnMuY2xlYXI7XG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtID0gb3B0aW9ucy50cmFuc2Zvcm07XG4gICAgICAgICAgICAgICAgc2tpcFVwZGF0ZVRyYW5zZm9ybSA9IG9wdGlvbnMuc2tpcFVwZGF0ZVRyYW5zZm9ybTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBjYW4gYmUgaGFuZHkgdG8ga25vdyFcbiAgICAgICAgdGhpcy5yZW5kZXJpbmdUb1NjcmVlbiA9ICFyZW5kZXJUZXh0dXJlO1xuICAgICAgICB0aGlzLnJ1bm5lcnMucHJlcmVuZGVyLmVtaXQoKTtcbiAgICAgICAgdGhpcy5lbWl0KCdwcmVyZW5kZXInKTtcbiAgICAgICAgLy8gYXBwbHkgYSB0cmFuc2Zvcm0gYXQgYSBHUFUgbGV2ZWxcbiAgICAgICAgdGhpcy5wcm9qZWN0aW9uLnRyYW5zZm9ybSA9IHRyYW5zZm9ybTtcbiAgICAgICAgLy8gbm8gcG9pbnQgcmVuZGVyaW5nIGlmIG91ciBjb250ZXh0IGhhcyBiZWVuIGJsb3duIHVwIVxuICAgICAgICBpZiAodGhpcy5jb250ZXh0LmlzTG9zdCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghcmVuZGVyVGV4dHVyZSkge1xuICAgICAgICAgICAgdGhpcy5fbGFzdE9iamVjdFJlbmRlcmVkID0gZGlzcGxheU9iamVjdDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXNraXBVcGRhdGVUcmFuc2Zvcm0pIHtcbiAgICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgc2NlbmUgZ3JhcGhcbiAgICAgICAgICAgIHZhciBjYWNoZVBhcmVudCA9IGRpc3BsYXlPYmplY3QuZW5hYmxlVGVtcFBhcmVudCgpO1xuICAgICAgICAgICAgZGlzcGxheU9iamVjdC51cGRhdGVUcmFuc2Zvcm0oKTtcbiAgICAgICAgICAgIGRpc3BsYXlPYmplY3QuZGlzYWJsZVRlbXBQYXJlbnQoY2FjaGVQYXJlbnQpO1xuICAgICAgICAgICAgLy8gZGlzcGxheU9iamVjdC5oaXRBcmVhID0gLy9UT0RPIGFkZCBhIHRlbXAgaGl0IGFyZWFcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbmRlclRleHR1cmUuYmluZChyZW5kZXJUZXh0dXJlKTtcbiAgICAgICAgdGhpcy5iYXRjaC5jdXJyZW50UmVuZGVyZXIuc3RhcnQoKTtcbiAgICAgICAgaWYgKGNsZWFyICE9PSB1bmRlZmluZWQgPyBjbGVhciA6IHRoaXMuY2xlYXJCZWZvcmVSZW5kZXIpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyVGV4dHVyZS5jbGVhcigpO1xuICAgICAgICB9XG4gICAgICAgIGRpc3BsYXlPYmplY3QucmVuZGVyKHRoaXMpO1xuICAgICAgICAvLyBhcHBseSB0cmFuc2Zvcm0uLlxuICAgICAgICB0aGlzLmJhdGNoLmN1cnJlbnRSZW5kZXJlci5mbHVzaCgpO1xuICAgICAgICBpZiAocmVuZGVyVGV4dHVyZSkge1xuICAgICAgICAgICAgcmVuZGVyVGV4dHVyZS5iYXNlVGV4dHVyZS51cGRhdGUoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJ1bm5lcnMucG9zdHJlbmRlci5lbWl0KCk7XG4gICAgICAgIC8vIHJlc2V0IHRyYW5zZm9ybSBhZnRlciByZW5kZXJcbiAgICAgICAgdGhpcy5wcm9qZWN0aW9uLnRyYW5zZm9ybSA9IG51bGw7XG4gICAgICAgIHRoaXMuZW1pdCgncG9zdHJlbmRlcicpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQGlnbm9yZVxuICAgICAqL1xuICAgIFJlbmRlcmVyLnByb3RvdHlwZS5nZW5lcmF0ZVRleHR1cmUgPSBmdW5jdGlvbiAoZGlzcGxheU9iamVjdCwgb3B0aW9ucywgcmVzb2x1dGlvbiwgcmVnaW9uKSB7XG4gICAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsgb3B0aW9ucyA9IHt9OyB9XG4gICAgICAgIHZhciByZW5kZXJUZXh0dXJlID0gX3N1cGVyLnByb3RvdHlwZS5nZW5lcmF0ZVRleHR1cmUuY2FsbCh0aGlzLCBkaXNwbGF5T2JqZWN0LCBvcHRpb25zLCByZXNvbHV0aW9uLCByZWdpb24pO1xuICAgICAgICB0aGlzLmZyYW1lYnVmZmVyLmJsaXQoKTtcbiAgICAgICAgcmV0dXJuIHJlbmRlclRleHR1cmU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXNpemVzIHRoZSBXZWJHTCB2aWV3IHRvIHRoZSBzcGVjaWZpZWQgd2lkdGggYW5kIGhlaWdodC5cbiAgICAgKiBAcGFyYW0gZGVzaXJlZFNjcmVlbldpZHRoIC0gVGhlIGRlc2lyZWQgd2lkdGggb2YgdGhlIHNjcmVlbi5cbiAgICAgKiBAcGFyYW0gZGVzaXJlZFNjcmVlbkhlaWdodCAtIFRoZSBkZXNpcmVkIGhlaWdodCBvZiB0aGUgc2NyZWVuLlxuICAgICAqL1xuICAgIFJlbmRlcmVyLnByb3RvdHlwZS5yZXNpemUgPSBmdW5jdGlvbiAoZGVzaXJlZFNjcmVlbldpZHRoLCBkZXNpcmVkU2NyZWVuSGVpZ2h0KSB7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUucmVzaXplLmNhbGwodGhpcywgZGVzaXJlZFNjcmVlbldpZHRoLCBkZXNpcmVkU2NyZWVuSGVpZ2h0KTtcbiAgICAgICAgdGhpcy5ydW5uZXJzLnJlc2l6ZS5lbWl0KHRoaXMuc2NyZWVuLmhlaWdodCwgdGhpcy5zY3JlZW4ud2lkdGgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVzZXRzIHRoZSBXZWJHTCBzdGF0ZSBzbyB5b3UgY2FuIHJlbmRlciB0aGluZ3MgaG93ZXZlciB5b3UgZmFuY3khXG4gICAgICogQHJldHVybnMgUmV0dXJucyBpdHNlbGYuXG4gICAgICovXG4gICAgUmVuZGVyZXIucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnJ1bm5lcnMucmVzZXQuZW1pdCgpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKiBDbGVhciB0aGUgZnJhbWUgYnVmZmVyLiAqL1xuICAgIFJlbmRlcmVyLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJUZXh0dXJlLmJpbmQoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJUZXh0dXJlLmNsZWFyKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGV2ZXJ5dGhpbmcgZnJvbSB0aGUgcmVuZGVyZXIgKGV2ZW50IGxpc3RlbmVycywgc3ByaXRlYmF0Y2gsIGV0Yy4uLilcbiAgICAgKiBAcGFyYW0gW3JlbW92ZVZpZXc9ZmFsc2VdIC0gUmVtb3ZlcyB0aGUgQ2FudmFzIGVsZW1lbnQgZnJvbSB0aGUgRE9NLlxuICAgICAqICBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9waXhpanMvcGl4aS5qcy9pc3N1ZXMvMjIzM1xuICAgICAqL1xuICAgIFJlbmRlcmVyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKHJlbW92ZVZpZXcpIHtcbiAgICAgICAgdGhpcy5ydW5uZXJzLmRlc3Ryb3kuZW1pdCgpO1xuICAgICAgICBmb3IgKHZhciByIGluIHRoaXMucnVubmVycykge1xuICAgICAgICAgICAgdGhpcy5ydW5uZXJzW3JdLmRlc3Ryb3koKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBjYWxsIGJhc2UgZGVzdHJveVxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRlc3Ryb3kuY2FsbCh0aGlzLCByZW1vdmVWaWV3KTtcbiAgICAgICAgLy8gVE9ETyBudWxsaWZ5IGFsbCB0aGUgbWFuYWdlcnMuLlxuICAgICAgICB0aGlzLmdsID0gbnVsbDtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZW5kZXJlci5wcm90b3R5cGUsIFwiZXh0cmFjdFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQbGVhc2UgdXNlIGBwbHVnaW5zLmV4dHJhY3RgIGluc3RlYWQuXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuRXh0cmFjdH0gZXh0cmFjdFxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSA2LjAuMFxuICAgICAgICAgKiBAcmVhZG9ubHlcbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdXRpbHMuZGVwcmVjYXRpb24oJzYuMC4wJywgJ1JlbmRlcmVyI2V4dHJhY3QgaGFzIGJlZW4gZGVwcmVjYXRlZCwgcGxlYXNlIHVzZSBSZW5kZXJlciNwbHVnaW5zLmV4dHJhY3QgaW5zdGVhZC4nKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBsdWdpbnMuZXh0cmFjdDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIC8qKlxuICAgICAqIEFkZHMgYSBwbHVnaW4gdG8gdGhlIHJlbmRlcmVyLlxuICAgICAqIEBwYXJhbSBwbHVnaW5OYW1lIC0gVGhlIG5hbWUgb2YgdGhlIHBsdWdpbi5cbiAgICAgKiBAcGFyYW0gY3RvciAtIFRoZSBjb25zdHJ1Y3RvciBmdW5jdGlvbiBvciBjbGFzcyBmb3IgdGhlIHBsdWdpbi5cbiAgICAgKi9cbiAgICBSZW5kZXJlci5yZWdpc3RlclBsdWdpbiA9IGZ1bmN0aW9uIChwbHVnaW5OYW1lLCBjdG9yKSB7XG4gICAgICAgIFJlbmRlcmVyLl9fcGx1Z2lucyA9IFJlbmRlcmVyLl9fcGx1Z2lucyB8fCB7fTtcbiAgICAgICAgUmVuZGVyZXIuX19wbHVnaW5zW3BsdWdpbk5hbWVdID0gY3RvcjtcbiAgICB9O1xuICAgIHJldHVybiBSZW5kZXJlcjtcbn0oQWJzdHJhY3RSZW5kZXJlcikpO1xuXG4vKipcbiAqIFRoaXMgaGVscGVyIGZ1bmN0aW9uIHdpbGwgYXV0b21hdGljYWxseSBkZXRlY3Qgd2hpY2ggcmVuZGVyZXIgeW91IHNob3VsZCBiZSB1c2luZy5cbiAqIFdlYkdMIGlzIHRoZSBwcmVmZXJyZWQgcmVuZGVyZXIgYXMgaXQgaXMgYSBsb3QgZmFzdGVyLiBJZiBXZWJHTCBpcyBub3Qgc3VwcG9ydGVkIGJ5XG4gKiB0aGUgYnJvd3NlciB0aGVuIHRoaXMgZnVuY3Rpb24gd2lsbCByZXR1cm4gYSBjYW52YXMgcmVuZGVyZXJcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKiBAZnVuY3Rpb24gYXV0b0RldGVjdFJlbmRlcmVyXG4gKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdIC0gVGhlIG9wdGlvbmFsIHJlbmRlcmVyIHBhcmFtZXRlcnNcbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy53aWR0aD04MDBdIC0gdGhlIHdpZHRoIG9mIHRoZSByZW5kZXJlcnMgdmlld1xuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLmhlaWdodD02MDBdIC0gdGhlIGhlaWdodCBvZiB0aGUgcmVuZGVyZXJzIHZpZXdcbiAqIEBwYXJhbSB7SFRNTENhbnZhc0VsZW1lbnR9IFtvcHRpb25zLnZpZXddIC0gdGhlIGNhbnZhcyB0byB1c2UgYXMgYSB2aWV3LCBvcHRpb25hbFxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy51c2VDb250ZXh0QWxwaGE9dHJ1ZV0gLSBQYXNzLXRocm91Z2ggdmFsdWUgZm9yIGNhbnZhcycgY29udGV4dCBgYWxwaGFgIHByb3BlcnR5LlxuICogICBJZiB5b3Ugd2FudCB0byBzZXQgdHJhbnNwYXJlbmN5LCBwbGVhc2UgdXNlIGBiYWNrZ3JvdW5kQWxwaGFgLiBUaGlzIG9wdGlvbiBpcyBmb3IgY2FzZXMgd2hlcmUgdGhlXG4gKiAgIGNhbnZhcyBuZWVkcyB0byBiZSBvcGFxdWUsIHBvc3NpYmx5IGZvciBwZXJmb3JtYW5jZSByZWFzb25zIG9uIHNvbWUgb2xkZXIgZGV2aWNlcy5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuYXV0b0RlbnNpdHk9ZmFsc2VdIC0gUmVzaXplcyByZW5kZXJlciB2aWV3IGluIENTUyBwaXhlbHMgdG8gYWxsb3cgZm9yXG4gKiAgIHJlc29sdXRpb25zIG90aGVyIHRoYW4gMVxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5hbnRpYWxpYXM9ZmFsc2VdIC0gc2V0cyBhbnRpYWxpYXNcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMucHJlc2VydmVEcmF3aW5nQnVmZmVyPWZhbHNlXSAtIGVuYWJsZXMgZHJhd2luZyBidWZmZXIgcHJlc2VydmF0aW9uLCBlbmFibGUgdGhpcyBpZiB5b3VcbiAqICBuZWVkIHRvIGNhbGwgdG9EYXRhVXJsIG9uIHRoZSB3ZWJnbCBjb250ZXh0XG4gKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMuYmFja2dyb3VuZENvbG9yPTB4MDAwMDAwXSAtIFRoZSBiYWNrZ3JvdW5kIGNvbG9yIG9mIHRoZSByZW5kZXJlZCBhcmVhXG4gKiAgKHNob3duIGlmIG5vdCB0cmFuc3BhcmVudCkuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMuYmFja2dyb3VuZEFscGhhPTFdIC0gVmFsdWUgZnJvbSAwIChmdWxseSB0cmFuc3BhcmVudCkgdG8gMSAoZnVsbHkgb3BhcXVlKS5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuY2xlYXJCZWZvcmVSZW5kZXI9dHJ1ZV0gLSBUaGlzIHNldHMgaWYgdGhlIHJlbmRlcmVyIHdpbGwgY2xlYXIgdGhlIGNhbnZhcyBvclxuICogICBub3QgYmVmb3JlIHRoZSBuZXcgcmVuZGVyIHBhc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMucmVzb2x1dGlvbj1QSVhJLnNldHRpbmdzLlJFU09MVVRJT05dIC0gVGhlIHJlc29sdXRpb24gLyBkZXZpY2UgcGl4ZWwgcmF0aW8gb2YgdGhlIHJlbmRlcmVyLlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5mb3JjZUNhbnZhcz1mYWxzZV0gLSBwcmV2ZW50cyBzZWxlY3Rpb24gb2YgV2ViR0wgcmVuZGVyZXIsIGV2ZW4gaWYgc3VjaCBpcyBwcmVzZW50LCB0aGlzXG4gKiAgIG9wdGlvbiBvbmx5IGlzIGF2YWlsYWJsZSB3aGVuIHVzaW5nICoqcGl4aS5qcy1sZWdhY3kqKiBvciAqKkBwaXhpL2NhbnZhcy1yZW5kZXJlcioqIG1vZHVsZXMsIG90aGVyd2lzZVxuICogICBpdCBpcyBpZ25vcmVkLlxuICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnBvd2VyUHJlZmVyZW5jZV0gLSBQYXJhbWV0ZXIgcGFzc2VkIHRvIHdlYmdsIGNvbnRleHQsIHNldCB0byBcImhpZ2gtcGVyZm9ybWFuY2VcIlxuICogIGZvciBkZXZpY2VzIHdpdGggZHVhbCBncmFwaGljcyBjYXJkICoqd2ViZ2wgb25seSoqXG4gKiBAcmV0dXJucyB7UElYSS5SZW5kZXJlcnxQSVhJLkNhbnZhc1JlbmRlcmVyfSBSZXR1cm5zIFdlYkdMIHJlbmRlcmVyIGlmIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIENhbnZhc1JlbmRlcmVyXG4gKi9cbmZ1bmN0aW9uIGF1dG9EZXRlY3RSZW5kZXJlcihvcHRpb25zKSB7XG4gICAgcmV0dXJuIFJlbmRlcmVyLmNyZWF0ZShvcHRpb25zKTtcbn1cblxudmFyICRkZWZhdWx0VmVydGV4ID0gXCJhdHRyaWJ1dGUgdmVjMiBhVmVydGV4UG9zaXRpb247XFxuYXR0cmlidXRlIHZlYzIgYVRleHR1cmVDb29yZDtcXG5cXG51bmlmb3JtIG1hdDMgcHJvamVjdGlvbk1hdHJpeDtcXG5cXG52YXJ5aW5nIHZlYzIgdlRleHR1cmVDb29yZDtcXG5cXG52b2lkIG1haW4odm9pZClcXG57XFxuICAgIGdsX1Bvc2l0aW9uID0gdmVjNCgocHJvamVjdGlvbk1hdHJpeCAqIHZlYzMoYVZlcnRleFBvc2l0aW9uLCAxLjApKS54eSwgMC4wLCAxLjApO1xcbiAgICB2VGV4dHVyZUNvb3JkID0gYVRleHR1cmVDb29yZDtcXG59XCI7XG5cbnZhciAkZGVmYXVsdEZpbHRlclZlcnRleCA9IFwiYXR0cmlidXRlIHZlYzIgYVZlcnRleFBvc2l0aW9uO1xcblxcbnVuaWZvcm0gbWF0MyBwcm9qZWN0aW9uTWF0cml4O1xcblxcbnZhcnlpbmcgdmVjMiB2VGV4dHVyZUNvb3JkO1xcblxcbnVuaWZvcm0gdmVjNCBpbnB1dFNpemU7XFxudW5pZm9ybSB2ZWM0IG91dHB1dEZyYW1lO1xcblxcbnZlYzQgZmlsdGVyVmVydGV4UG9zaXRpb24oIHZvaWQgKVxcbntcXG4gICAgdmVjMiBwb3NpdGlvbiA9IGFWZXJ0ZXhQb3NpdGlvbiAqIG1heChvdXRwdXRGcmFtZS56dywgdmVjMigwLikpICsgb3V0cHV0RnJhbWUueHk7XFxuXFxuICAgIHJldHVybiB2ZWM0KChwcm9qZWN0aW9uTWF0cml4ICogdmVjMyhwb3NpdGlvbiwgMS4wKSkueHksIDAuMCwgMS4wKTtcXG59XFxuXFxudmVjMiBmaWx0ZXJUZXh0dXJlQ29vcmQoIHZvaWQgKVxcbntcXG4gICAgcmV0dXJuIGFWZXJ0ZXhQb3NpdGlvbiAqIChvdXRwdXRGcmFtZS56dyAqIGlucHV0U2l6ZS56dyk7XFxufVxcblxcbnZvaWQgbWFpbih2b2lkKVxcbntcXG4gICAgZ2xfUG9zaXRpb24gPSBmaWx0ZXJWZXJ0ZXhQb3NpdGlvbigpO1xcbiAgICB2VGV4dHVyZUNvb3JkID0gZmlsdGVyVGV4dHVyZUNvb3JkKCk7XFxufVxcblwiO1xuXG4vKipcbiAqIERlZmF1bHQgdmVydGV4IHNoYWRlclxuICogQG1lbWJlcm9mIFBJWElcbiAqIEBtZW1iZXIge3N0cmluZ30gZGVmYXVsdFZlcnRleFxuICovXG4vKipcbiAqIERlZmF1bHQgZmlsdGVyIHZlcnRleCBzaGFkZXJcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKiBAbWVtYmVyIHtzdHJpbmd9IGRlZmF1bHRGaWx0ZXJWZXJ0ZXhcbiAqL1xuLy8gTk9URTogVGhpcyBibGFjayBtYWdpYyBpcyBzbyB0aGF0IEBtaWNyb3NvZnQvYXBpLWV4dHJhY3RvciBkb2VzIG5vdCBjb21wbGFpbiEgVGhpcyBleHBsaWNpdGx5IHNwZWNpZmllcyB0aGUgdHlwZXNcbi8vIG9mIGRlZmF1bHRWZXJ0ZXgsIGRlZmF1bHRGaWx0ZXJWZXJ0ZXguXG52YXIgZGVmYXVsdFZlcnRleCQxID0gJGRlZmF1bHRWZXJ0ZXg7XG52YXIgZGVmYXVsdEZpbHRlclZlcnRleCA9ICRkZWZhdWx0RmlsdGVyVmVydGV4O1xuXG4vKipcbiAqIFVzZSB0aGUgSVN5c3RlbSBpbnRlcmZhY2UgaW5zdGVhZC5cbiAqIEBkZXByZWNhdGVkIHNpbmNlIDYuMS4wXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG52YXIgU3lzdGVtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSByZW5kZXJlciAtIFJlZmVyZW5jZSB0byBSZW5kZXJlclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFN5c3RlbShyZW5kZXJlcikge1xuICAgICAgICB1dGlscy5kZXByZWNhdGlvbignNi4xLjAnLCAnU3lzdGVtIGNsYXNzIGlzIGRlcHJlY2F0ZWQsIGltcGxlbWVtZW50IElTeXN0ZW0gaW50ZXJmYWNlIGluc3RlYWQuJyk7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB9XG4gICAgLyoqIERlc3Ryb3kgYW5kIGRvbid0IHVzZSBhZnRlciB0aGlzLiAqL1xuICAgIFN5c3RlbS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IG51bGw7XG4gICAgfTtcbiAgICByZXR1cm4gU3lzdGVtO1xufSgpKTtcblxuLyoqXG4gKiBVc2VkIGJ5IHRoZSBiYXRjaGVyIHRvIGRyYXcgYmF0Y2hlcy5cbiAqIEVhY2ggb25lIG9mIHRoZXNlIGNvbnRhaW5zIGFsbCBpbmZvcm1hdGlvbiByZXF1aXJlZCB0byBkcmF3IGEgYm91bmQgZ2VvbWV0cnkuXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG52YXIgQmF0Y2hEcmF3Q2FsbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBCYXRjaERyYXdDYWxsKCkge1xuICAgICAgICB0aGlzLnRleEFycmF5ID0gbnVsbDtcbiAgICAgICAgdGhpcy5ibGVuZCA9IDA7XG4gICAgICAgIHRoaXMudHlwZSA9IGNvbnN0YW50cy5EUkFXX01PREVTLlRSSUFOR0xFUztcbiAgICAgICAgdGhpcy5zdGFydCA9IDA7XG4gICAgICAgIHRoaXMuc2l6ZSA9IDA7XG4gICAgICAgIHRoaXMuZGF0YSA9IG51bGw7XG4gICAgfVxuICAgIHJldHVybiBCYXRjaERyYXdDYWxsO1xufSgpKTtcblxuLyoqXG4gKiBVc2VkIGJ5IHRoZSBiYXRjaGVyIHRvIGJ1aWxkIHRleHR1cmUgYmF0Y2hlcy5cbiAqIEhvbGRzIGxpc3Qgb2YgdGV4dHVyZXMgYW5kIHRoZWlyIHJlc3BlY3RpdmUgbG9jYXRpb25zLlxuICogQG1lbWJlcm9mIFBJWElcbiAqL1xudmFyIEJhdGNoVGV4dHVyZUFycmF5ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEJhdGNoVGV4dHVyZUFycmF5KCkge1xuICAgICAgICB0aGlzLmVsZW1lbnRzID0gW107XG4gICAgICAgIHRoaXMuaWRzID0gW107XG4gICAgICAgIHRoaXMuY291bnQgPSAwO1xuICAgIH1cbiAgICBCYXRjaFRleHR1cmVBcnJheS5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jb3VudDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRzW2ldID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvdW50ID0gMDtcbiAgICB9O1xuICAgIHJldHVybiBCYXRjaFRleHR1cmVBcnJheTtcbn0oKSk7XG5cbi8qKlxuICogRmxleGlibGUgd3JhcHBlciBhcm91bmQgYEFycmF5QnVmZmVyYCB0aGF0IGFsc28gcHJvdmlkZXMgdHlwZWQgYXJyYXkgdmlld3Mgb24gZGVtYW5kLlxuICogQG1lbWJlcm9mIFBJWElcbiAqL1xudmFyIFZpZXdhYmxlQnVmZmVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFZpZXdhYmxlQnVmZmVyKHNpemVPckJ1ZmZlcikge1xuICAgICAgICBpZiAodHlwZW9mIHNpemVPckJ1ZmZlciA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHRoaXMucmF3QmluYXJ5RGF0YSA9IG5ldyBBcnJheUJ1ZmZlcihzaXplT3JCdWZmZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNpemVPckJ1ZmZlciBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHtcbiAgICAgICAgICAgIHRoaXMucmF3QmluYXJ5RGF0YSA9IHNpemVPckJ1ZmZlci5idWZmZXI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJhd0JpbmFyeURhdGEgPSBzaXplT3JCdWZmZXI7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51aW50MzJWaWV3ID0gbmV3IFVpbnQzMkFycmF5KHRoaXMucmF3QmluYXJ5RGF0YSk7XG4gICAgICAgIHRoaXMuZmxvYXQzMlZpZXcgPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMucmF3QmluYXJ5RGF0YSk7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWaWV3YWJsZUJ1ZmZlci5wcm90b3R5cGUsIFwiaW50OFZpZXdcIiwge1xuICAgICAgICAvKiogVmlldyBvbiB0aGUgcmF3IGJpbmFyeSBkYXRhIGFzIGEgYEludDhBcnJheWAuICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9pbnQ4Vmlldykge1xuICAgICAgICAgICAgICAgIHRoaXMuX2ludDhWaWV3ID0gbmV3IEludDhBcnJheSh0aGlzLnJhd0JpbmFyeURhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2ludDhWaWV3O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFZpZXdhYmxlQnVmZmVyLnByb3RvdHlwZSwgXCJ1aW50OFZpZXdcIiwge1xuICAgICAgICAvKiogVmlldyBvbiB0aGUgcmF3IGJpbmFyeSBkYXRhIGFzIGEgYFVpbnQ4QXJyYXlgLiAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fdWludDhWaWV3KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fdWludDhWaWV3ID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5yYXdCaW5hcnlEYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLl91aW50OFZpZXc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVmlld2FibGVCdWZmZXIucHJvdG90eXBlLCBcImludDE2Vmlld1wiLCB7XG4gICAgICAgIC8qKiAgVmlldyBvbiB0aGUgcmF3IGJpbmFyeSBkYXRhIGFzIGEgYEludDE2QXJyYXlgLiAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5faW50MTZWaWV3KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5faW50MTZWaWV3ID0gbmV3IEludDE2QXJyYXkodGhpcy5yYXdCaW5hcnlEYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9pbnQxNlZpZXc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVmlld2FibGVCdWZmZXIucHJvdG90eXBlLCBcInVpbnQxNlZpZXdcIiwge1xuICAgICAgICAvKiogVmlldyBvbiB0aGUgcmF3IGJpbmFyeSBkYXRhIGFzIGEgYFVpbnQxNkFycmF5YC4gKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX3VpbnQxNlZpZXcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl91aW50MTZWaWV3ID0gbmV3IFVpbnQxNkFycmF5KHRoaXMucmF3QmluYXJ5RGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdWludDE2VmlldztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWaWV3YWJsZUJ1ZmZlci5wcm90b3R5cGUsIFwiaW50MzJWaWV3XCIsIHtcbiAgICAgICAgLyoqIFZpZXcgb24gdGhlIHJhdyBiaW5hcnkgZGF0YSBhcyBhIGBJbnQzMkFycmF5YC4gKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX2ludDMyVmlldykge1xuICAgICAgICAgICAgICAgIHRoaXMuX2ludDMyVmlldyA9IG5ldyBJbnQzMkFycmF5KHRoaXMucmF3QmluYXJ5RGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faW50MzJWaWV3O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdmlldyBvZiB0aGUgZ2l2ZW4gdHlwZS5cbiAgICAgKiBAcGFyYW0gdHlwZSAtIE9uZSBvZiBgaW50OGAsIGB1aW50OGAsIGBpbnQxNmAsXG4gICAgICogICAgYHVpbnQxNmAsIGBpbnQzMmAsIGB1aW50MzJgLCBhbmQgYGZsb2F0MzJgLlxuICAgICAqIEByZXR1cm5zIC0gdHlwZWQgYXJyYXkgb2YgZ2l2ZW4gdHlwZVxuICAgICAqL1xuICAgIFZpZXdhYmxlQnVmZmVyLnByb3RvdHlwZS52aWV3ID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNbdHlwZSArIFwiVmlld1wiXTtcbiAgICB9O1xuICAgIC8qKiBEZXN0cm95cyBhbGwgYnVmZmVyIHJlZmVyZW5jZXMuIERvIG5vdCB1c2UgYWZ0ZXIgY2FsbGluZyB0aGlzLiAqL1xuICAgIFZpZXdhYmxlQnVmZmVyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnJhd0JpbmFyeURhdGEgPSBudWxsO1xuICAgICAgICB0aGlzLl9pbnQ4VmlldyA9IG51bGw7XG4gICAgICAgIHRoaXMuX3VpbnQ4VmlldyA9IG51bGw7XG4gICAgICAgIHRoaXMuX2ludDE2VmlldyA9IG51bGw7XG4gICAgICAgIHRoaXMuX3VpbnQxNlZpZXcgPSBudWxsO1xuICAgICAgICB0aGlzLl9pbnQzMlZpZXcgPSBudWxsO1xuICAgICAgICB0aGlzLnVpbnQzMlZpZXcgPSBudWxsO1xuICAgICAgICB0aGlzLmZsb2F0MzJWaWV3ID0gbnVsbDtcbiAgICB9O1xuICAgIFZpZXdhYmxlQnVmZmVyLnNpemVPZiA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgY2FzZSAnaW50OCc6XG4gICAgICAgICAgICBjYXNlICd1aW50OCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICBjYXNlICdpbnQxNic6XG4gICAgICAgICAgICBjYXNlICd1aW50MTYnOlxuICAgICAgICAgICAgICAgIHJldHVybiAyO1xuICAgICAgICAgICAgY2FzZSAnaW50MzInOlxuICAgICAgICAgICAgY2FzZSAndWludDMyJzpcbiAgICAgICAgICAgIGNhc2UgJ2Zsb2F0MzInOlxuICAgICAgICAgICAgICAgIHJldHVybiA0O1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IodHlwZSArIFwiIGlzbid0IGEgdmFsaWQgdmlldyB0eXBlXCIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gVmlld2FibGVCdWZmZXI7XG59KCkpO1xuXG4vKipcbiAqIFJlbmRlcmVyIGRlZGljYXRlZCB0byBkcmF3aW5nIGFuZCBiYXRjaGluZyBzcHJpdGVzLlxuICpcbiAqIFRoaXMgaXMgdGhlIGRlZmF1bHQgYmF0Y2ggcmVuZGVyZXIuIEl0IGJ1ZmZlcnMgb2JqZWN0c1xuICogd2l0aCB0ZXh0dXJlLWJhc2VkIGdlb21ldHJpZXMgYW5kIHJlbmRlcnMgdGhlbSBpblxuICogYmF0Y2hlcy4gSXQgdXBsb2FkcyBtdWx0aXBsZSB0ZXh0dXJlcyB0byB0aGUgR1BVIHRvXG4gKiByZWR1Y2UgdG8gdGhlIG51bWJlciBvZiBkcmF3IGNhbGxzLlxuICogQG1lbWJlcm9mIFBJWElcbiAqL1xudmFyIEFic3RyYWN0QmF0Y2hSZW5kZXJlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQWJzdHJhY3RCYXRjaFJlbmRlcmVyLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIFRoaXMgd2lsbCBob29rIG9udG8gdGhlIHJlbmRlcmVyJ3MgYGNvbnRleHRDaGFuZ2VgXG4gICAgICogYW5kIGBwcmVyZW5kZXJgIHNpZ25hbHMuXG4gICAgICogQHBhcmFtIHtQSVhJLlJlbmRlcmVyfSByZW5kZXJlciAtIFRoZSByZW5kZXJlciB0aGlzIHdvcmtzIGZvci5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBBYnN0cmFjdEJhdGNoUmVuZGVyZXIocmVuZGVyZXIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcmVuZGVyZXIpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnNoYWRlckdlbmVyYXRvciA9IG51bGw7XG4gICAgICAgIF90aGlzLmdlb21ldHJ5Q2xhc3MgPSBudWxsO1xuICAgICAgICBfdGhpcy52ZXJ0ZXhTaXplID0gbnVsbDtcbiAgICAgICAgX3RoaXMuc3RhdGUgPSBTdGF0ZS5mb3IyZCgpO1xuICAgICAgICBfdGhpcy5zaXplID0gc2V0dGluZ3Muc2V0dGluZ3MuU1BSSVRFX0JBVENIX1NJWkUgKiA0O1xuICAgICAgICBfdGhpcy5fdmVydGV4Q291bnQgPSAwO1xuICAgICAgICBfdGhpcy5faW5kZXhDb3VudCA9IDA7XG4gICAgICAgIF90aGlzLl9idWZmZXJlZEVsZW1lbnRzID0gW107XG4gICAgICAgIF90aGlzLl9idWZmZXJlZFRleHR1cmVzID0gW107XG4gICAgICAgIF90aGlzLl9idWZmZXJTaXplID0gMDtcbiAgICAgICAgX3RoaXMuX3NoYWRlciA9IG51bGw7XG4gICAgICAgIF90aGlzLl9wYWNrZWRHZW9tZXRyaWVzID0gW107XG4gICAgICAgIF90aGlzLl9wYWNrZWRHZW9tZXRyeVBvb2xTaXplID0gMjtcbiAgICAgICAgX3RoaXMuX2ZsdXNoSWQgPSAwO1xuICAgICAgICBfdGhpcy5fYUJ1ZmZlcnMgPSB7fTtcbiAgICAgICAgX3RoaXMuX2lCdWZmZXJzID0ge307XG4gICAgICAgIF90aGlzLk1BWF9URVhUVVJFUyA9IDE7XG4gICAgICAgIF90aGlzLnJlbmRlcmVyLm9uKCdwcmVyZW5kZXInLCBfdGhpcy5vblByZXJlbmRlciwgX3RoaXMpO1xuICAgICAgICByZW5kZXJlci5ydW5uZXJzLmNvbnRleHRDaGFuZ2UuYWRkKF90aGlzKTtcbiAgICAgICAgX3RoaXMuX2RjSW5kZXggPSAwO1xuICAgICAgICBfdGhpcy5fYUluZGV4ID0gMDtcbiAgICAgICAgX3RoaXMuX2lJbmRleCA9IDA7XG4gICAgICAgIF90aGlzLl9hdHRyaWJ1dGVCdWZmZXIgPSBudWxsO1xuICAgICAgICBfdGhpcy5faW5kZXhCdWZmZXIgPSBudWxsO1xuICAgICAgICBfdGhpcy5fdGVtcEJvdW5kVGV4dHVyZXMgPSBbXTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIHRoZSBgY29udGV4dENoYW5nZWAgc2lnbmFsLlxuICAgICAqXG4gICAgICogSXQgY2FsY3VsYXRlcyBgdGhpcy5NQVhfVEVYVFVSRVNgIGFuZCBhbGxvY2F0aW5nIHRoZSBwYWNrZWQtZ2VvbWV0cnkgb2JqZWN0IHBvb2wuXG4gICAgICovXG4gICAgQWJzdHJhY3RCYXRjaFJlbmRlcmVyLnByb3RvdHlwZS5jb250ZXh0Q2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZ2wgPSB0aGlzLnJlbmRlcmVyLmdsO1xuICAgICAgICBpZiAoc2V0dGluZ3Muc2V0dGluZ3MuUFJFRkVSX0VOViA9PT0gY29uc3RhbnRzLkVOVi5XRUJHTF9MRUdBQ1kpIHtcbiAgICAgICAgICAgIHRoaXMuTUFYX1RFWFRVUkVTID0gMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIHN0ZXAgMTogZmlyc3QgY2hlY2sgbWF4IHRleHR1cmVzIHRoZSBHUFUgY2FuIGhhbmRsZS5cbiAgICAgICAgICAgIHRoaXMuTUFYX1RFWFRVUkVTID0gTWF0aC5taW4oZ2wuZ2V0UGFyYW1ldGVyKGdsLk1BWF9URVhUVVJFX0lNQUdFX1VOSVRTKSwgc2V0dGluZ3Muc2V0dGluZ3MuU1BSSVRFX01BWF9URVhUVVJFUyk7XG4gICAgICAgICAgICAvLyBzdGVwIDI6IGNoZWNrIHRoZSBtYXhpbXVtIG51bWJlciBvZiBpZiBzdGF0ZW1lbnRzIHRoZSBzaGFkZXIgY2FuIGhhdmUgdG9vLi5cbiAgICAgICAgICAgIHRoaXMuTUFYX1RFWFRVUkVTID0gY2hlY2tNYXhJZlN0YXRlbWVudHNJblNoYWRlcih0aGlzLk1BWF9URVhUVVJFUywgZ2wpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3NoYWRlciA9IHRoaXMuc2hhZGVyR2VuZXJhdG9yLmdlbmVyYXRlU2hhZGVyKHRoaXMuTUFYX1RFWFRVUkVTKTtcbiAgICAgICAgLy8gd2UgdXNlIHRoZSBzZWNvbmQgc2hhZGVyIGFzIHRoZSBmaXJzdCBvbmUgZGVwZW5kaW5nIG9uIHlvdXIgYnJvd3NlclxuICAgICAgICAvLyBtYXkgb21pdCBhVGV4dHVyZUlkIGFzIGl0IGlzIG5vdCB1c2VkIGJ5IHRoZSBzaGFkZXIgc28gaXMgb3B0aW1pemVkIG91dC5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9wYWNrZWRHZW9tZXRyeVBvb2xTaXplOyBpKyspIHtcbiAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG1heC1sZW4gKi9cbiAgICAgICAgICAgIHRoaXMuX3BhY2tlZEdlb21ldHJpZXNbaV0gPSBuZXcgKHRoaXMuZ2VvbWV0cnlDbGFzcykoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmluaXRGbHVzaEJ1ZmZlcnMoKTtcbiAgICB9O1xuICAgIC8qKiBNYWtlcyBzdXJlIHRoYXQgc3RhdGljIGFuZCBkeW5hbWljIGZsdXNoIHBvb2xlZCBvYmplY3RzIGhhdmUgY29ycmVjdCBkaW1lbnNpb25zLiAqL1xuICAgIEFic3RyYWN0QmF0Y2hSZW5kZXJlci5wcm90b3R5cGUuaW5pdEZsdXNoQnVmZmVycyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9kcmF3Q2FsbFBvb2wgPSBBYnN0cmFjdEJhdGNoUmVuZGVyZXIuX2RyYXdDYWxsUG9vbCwgX3RleHR1cmVBcnJheVBvb2wgPSBBYnN0cmFjdEJhdGNoUmVuZGVyZXIuX3RleHR1cmVBcnJheVBvb2w7XG4gICAgICAgIC8vIG1heCBkcmF3IGNhbGxzXG4gICAgICAgIHZhciBNQVhfU1BSSVRFUyA9IHRoaXMuc2l6ZSAvIDQ7XG4gICAgICAgIC8vIG1heCB0ZXh0dXJlIGFycmF5c1xuICAgICAgICB2YXIgTUFYX1RBID0gTWF0aC5mbG9vcihNQVhfU1BSSVRFUyAvIHRoaXMuTUFYX1RFWFRVUkVTKSArIDE7XG4gICAgICAgIHdoaWxlIChfZHJhd0NhbGxQb29sLmxlbmd0aCA8IE1BWF9TUFJJVEVTKSB7XG4gICAgICAgICAgICBfZHJhd0NhbGxQb29sLnB1c2gobmV3IEJhdGNoRHJhd0NhbGwoKSk7XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKF90ZXh0dXJlQXJyYXlQb29sLmxlbmd0aCA8IE1BWF9UQSkge1xuICAgICAgICAgICAgX3RleHR1cmVBcnJheVBvb2wucHVzaChuZXcgQmF0Y2hUZXh0dXJlQXJyYXkoKSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLk1BWF9URVhUVVJFUzsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLl90ZW1wQm91bmRUZXh0dXJlc1tpXSA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKiBIYW5kbGVzIHRoZSBgcHJlcmVuZGVyYCBzaWduYWwuIEl0IGVuc3VyZXMgdGhhdCBmbHVzaGVzIHN0YXJ0IGZyb20gdGhlIGZpcnN0IGdlb21ldHJ5IG9iamVjdCBhZ2Fpbi4gKi9cbiAgICBBYnN0cmFjdEJhdGNoUmVuZGVyZXIucHJvdG90eXBlLm9uUHJlcmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl9mbHVzaElkID0gMDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEJ1ZmZlcnMgdGhlIFwiYmF0Y2hhYmxlXCIgb2JqZWN0LiBJdCBuZWVkIG5vdCBiZSByZW5kZXJlZCBpbW1lZGlhdGVseS5cbiAgICAgKiBAcGFyYW0ge1BJWEkuRGlzcGxheU9iamVjdH0gZWxlbWVudCAtIHRoZSBlbGVtZW50IHRvIHJlbmRlciB3aGVuXG4gICAgICogICAgdXNpbmcgdGhpcyByZW5kZXJlclxuICAgICAqL1xuICAgIEFic3RyYWN0QmF0Y2hSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgaWYgKCFlbGVtZW50Ll90ZXh0dXJlLnZhbGlkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX3ZlcnRleENvdW50ICsgKGVsZW1lbnQudmVydGV4RGF0YS5sZW5ndGggLyAyKSA+IHRoaXMuc2l6ZSkge1xuICAgICAgICAgICAgdGhpcy5mbHVzaCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3ZlcnRleENvdW50ICs9IGVsZW1lbnQudmVydGV4RGF0YS5sZW5ndGggLyAyO1xuICAgICAgICB0aGlzLl9pbmRleENvdW50ICs9IGVsZW1lbnQuaW5kaWNlcy5sZW5ndGg7XG4gICAgICAgIHRoaXMuX2J1ZmZlcmVkVGV4dHVyZXNbdGhpcy5fYnVmZmVyU2l6ZV0gPSBlbGVtZW50Ll90ZXh0dXJlLmJhc2VUZXh0dXJlO1xuICAgICAgICB0aGlzLl9idWZmZXJlZEVsZW1lbnRzW3RoaXMuX2J1ZmZlclNpemUrK10gPSBlbGVtZW50O1xuICAgIH07XG4gICAgQWJzdHJhY3RCYXRjaFJlbmRlcmVyLnByb3RvdHlwZS5idWlsZFRleHR1cmVzQW5kRHJhd0NhbGxzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX2EgPSB0aGlzLCB0ZXh0dXJlcyA9IF9hLl9idWZmZXJlZFRleHR1cmVzLCBNQVhfVEVYVFVSRVMgPSBfYS5NQVhfVEVYVFVSRVM7XG4gICAgICAgIHZhciB0ZXh0dXJlQXJyYXlzID0gQWJzdHJhY3RCYXRjaFJlbmRlcmVyLl90ZXh0dXJlQXJyYXlQb29sO1xuICAgICAgICB2YXIgYmF0Y2ggPSB0aGlzLnJlbmRlcmVyLmJhdGNoO1xuICAgICAgICB2YXIgYm91bmRUZXh0dXJlcyA9IHRoaXMuX3RlbXBCb3VuZFRleHR1cmVzO1xuICAgICAgICB2YXIgdG91Y2ggPSB0aGlzLnJlbmRlcmVyLnRleHR1cmVHQy5jb3VudDtcbiAgICAgICAgdmFyIFRJQ0sgPSArK0Jhc2VUZXh0dXJlLl9nbG9iYWxCYXRjaDtcbiAgICAgICAgdmFyIGNvdW50VGV4QXJyYXlzID0gMDtcbiAgICAgICAgdmFyIHRleEFycmF5ID0gdGV4dHVyZUFycmF5c1swXTtcbiAgICAgICAgdmFyIHN0YXJ0ID0gMDtcbiAgICAgICAgYmF0Y2guY29weUJvdW5kVGV4dHVyZXMoYm91bmRUZXh0dXJlcywgTUFYX1RFWFRVUkVTKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9idWZmZXJTaXplOyArK2kpIHtcbiAgICAgICAgICAgIHZhciB0ZXggPSB0ZXh0dXJlc1tpXTtcbiAgICAgICAgICAgIHRleHR1cmVzW2ldID0gbnVsbDtcbiAgICAgICAgICAgIGlmICh0ZXguX2JhdGNoRW5hYmxlZCA9PT0gVElDSykge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRleEFycmF5LmNvdW50ID49IE1BWF9URVhUVVJFUykge1xuICAgICAgICAgICAgICAgIGJhdGNoLmJvdW5kQXJyYXkodGV4QXJyYXksIGJvdW5kVGV4dHVyZXMsIFRJQ0ssIE1BWF9URVhUVVJFUyk7XG4gICAgICAgICAgICAgICAgdGhpcy5idWlsZERyYXdDYWxscyh0ZXhBcnJheSwgc3RhcnQsIGkpO1xuICAgICAgICAgICAgICAgIHN0YXJ0ID0gaTtcbiAgICAgICAgICAgICAgICB0ZXhBcnJheSA9IHRleHR1cmVBcnJheXNbKytjb3VudFRleEFycmF5c107XG4gICAgICAgICAgICAgICAgKytUSUNLO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGV4Ll9iYXRjaEVuYWJsZWQgPSBUSUNLO1xuICAgICAgICAgICAgdGV4LnRvdWNoZWQgPSB0b3VjaDtcbiAgICAgICAgICAgIHRleEFycmF5LmVsZW1lbnRzW3RleEFycmF5LmNvdW50KytdID0gdGV4O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0ZXhBcnJheS5jb3VudCA+IDApIHtcbiAgICAgICAgICAgIGJhdGNoLmJvdW5kQXJyYXkodGV4QXJyYXksIGJvdW5kVGV4dHVyZXMsIFRJQ0ssIE1BWF9URVhUVVJFUyk7XG4gICAgICAgICAgICB0aGlzLmJ1aWxkRHJhd0NhbGxzKHRleEFycmF5LCBzdGFydCwgdGhpcy5fYnVmZmVyU2l6ZSk7XG4gICAgICAgICAgICArK2NvdW50VGV4QXJyYXlzO1xuICAgICAgICAgICAgKytUSUNLO1xuICAgICAgICB9XG4gICAgICAgIC8vIENsZWFuLXVwXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYm91bmRUZXh0dXJlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYm91bmRUZXh0dXJlc1tpXSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgQmFzZVRleHR1cmUuX2dsb2JhbEJhdGNoID0gVElDSztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFBvcHVsYXRpbmcgZHJhd2NhbGxzIGZvciByZW5kZXJpbmdcbiAgICAgKiBAcGFyYW0gdGV4QXJyYXlcbiAgICAgKiBAcGFyYW0gc3RhcnRcbiAgICAgKiBAcGFyYW0gZmluaXNoXG4gICAgICovXG4gICAgQWJzdHJhY3RCYXRjaFJlbmRlcmVyLnByb3RvdHlwZS5idWlsZERyYXdDYWxscyA9IGZ1bmN0aW9uICh0ZXhBcnJheSwgc3RhcnQsIGZpbmlzaCkge1xuICAgICAgICB2YXIgX2EgPSB0aGlzLCBlbGVtZW50cyA9IF9hLl9idWZmZXJlZEVsZW1lbnRzLCBfYXR0cmlidXRlQnVmZmVyID0gX2EuX2F0dHJpYnV0ZUJ1ZmZlciwgX2luZGV4QnVmZmVyID0gX2EuX2luZGV4QnVmZmVyLCB2ZXJ0ZXhTaXplID0gX2EudmVydGV4U2l6ZTtcbiAgICAgICAgdmFyIGRyYXdDYWxscyA9IEFic3RyYWN0QmF0Y2hSZW5kZXJlci5fZHJhd0NhbGxQb29sO1xuICAgICAgICB2YXIgZGNJbmRleCA9IHRoaXMuX2RjSW5kZXg7XG4gICAgICAgIHZhciBhSW5kZXggPSB0aGlzLl9hSW5kZXg7XG4gICAgICAgIHZhciBpSW5kZXggPSB0aGlzLl9pSW5kZXg7XG4gICAgICAgIHZhciBkcmF3Q2FsbCA9IGRyYXdDYWxsc1tkY0luZGV4XTtcbiAgICAgICAgZHJhd0NhbGwuc3RhcnQgPSB0aGlzLl9pSW5kZXg7XG4gICAgICAgIGRyYXdDYWxsLnRleEFycmF5ID0gdGV4QXJyYXk7XG4gICAgICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGZpbmlzaDsgKytpKSB7XG4gICAgICAgICAgICB2YXIgc3ByaXRlID0gZWxlbWVudHNbaV07XG4gICAgICAgICAgICB2YXIgdGV4ID0gc3ByaXRlLl90ZXh0dXJlLmJhc2VUZXh0dXJlO1xuICAgICAgICAgICAgdmFyIHNwcml0ZUJsZW5kTW9kZSA9IHV0aWxzLnByZW11bHRpcGx5QmxlbmRNb2RlW3RleC5hbHBoYU1vZGUgPyAxIDogMF1bc3ByaXRlLmJsZW5kTW9kZV07XG4gICAgICAgICAgICBlbGVtZW50c1tpXSA9IG51bGw7XG4gICAgICAgICAgICBpZiAoc3RhcnQgPCBpICYmIGRyYXdDYWxsLmJsZW5kICE9PSBzcHJpdGVCbGVuZE1vZGUpIHtcbiAgICAgICAgICAgICAgICBkcmF3Q2FsbC5zaXplID0gaUluZGV4IC0gZHJhd0NhbGwuc3RhcnQ7XG4gICAgICAgICAgICAgICAgc3RhcnQgPSBpO1xuICAgICAgICAgICAgICAgIGRyYXdDYWxsID0gZHJhd0NhbGxzWysrZGNJbmRleF07XG4gICAgICAgICAgICAgICAgZHJhd0NhbGwudGV4QXJyYXkgPSB0ZXhBcnJheTtcbiAgICAgICAgICAgICAgICBkcmF3Q2FsbC5zdGFydCA9IGlJbmRleDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFja0ludGVybGVhdmVkR2VvbWV0cnkoc3ByaXRlLCBfYXR0cmlidXRlQnVmZmVyLCBfaW5kZXhCdWZmZXIsIGFJbmRleCwgaUluZGV4KTtcbiAgICAgICAgICAgIGFJbmRleCArPSBzcHJpdGUudmVydGV4RGF0YS5sZW5ndGggLyAyICogdmVydGV4U2l6ZTtcbiAgICAgICAgICAgIGlJbmRleCArPSBzcHJpdGUuaW5kaWNlcy5sZW5ndGg7XG4gICAgICAgICAgICBkcmF3Q2FsbC5ibGVuZCA9IHNwcml0ZUJsZW5kTW9kZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhcnQgPCBmaW5pc2gpIHtcbiAgICAgICAgICAgIGRyYXdDYWxsLnNpemUgPSBpSW5kZXggLSBkcmF3Q2FsbC5zdGFydDtcbiAgICAgICAgICAgICsrZGNJbmRleDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9kY0luZGV4ID0gZGNJbmRleDtcbiAgICAgICAgdGhpcy5fYUluZGV4ID0gYUluZGV4O1xuICAgICAgICB0aGlzLl9pSW5kZXggPSBpSW5kZXg7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBCaW5kIHRleHR1cmVzIGZvciBjdXJyZW50IHJlbmRlcmluZ1xuICAgICAqIEBwYXJhbSB0ZXhBcnJheVxuICAgICAqL1xuICAgIEFic3RyYWN0QmF0Y2hSZW5kZXJlci5wcm90b3R5cGUuYmluZEFuZENsZWFyVGV4QXJyYXkgPSBmdW5jdGlvbiAodGV4QXJyYXkpIHtcbiAgICAgICAgdmFyIHRleHR1cmVTeXN0ZW0gPSB0aGlzLnJlbmRlcmVyLnRleHR1cmU7XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGV4QXJyYXkuY291bnQ7IGorKykge1xuICAgICAgICAgICAgdGV4dHVyZVN5c3RlbS5iaW5kKHRleEFycmF5LmVsZW1lbnRzW2pdLCB0ZXhBcnJheS5pZHNbal0pO1xuICAgICAgICAgICAgdGV4QXJyYXkuZWxlbWVudHNbal0gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRleEFycmF5LmNvdW50ID0gMDtcbiAgICB9O1xuICAgIEFic3RyYWN0QmF0Y2hSZW5kZXJlci5wcm90b3R5cGUudXBkYXRlR2VvbWV0cnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIHBhY2tlZEdlb21ldHJpZXMgPSBfYS5fcGFja2VkR2VvbWV0cmllcywgYXR0cmlidXRlQnVmZmVyID0gX2EuX2F0dHJpYnV0ZUJ1ZmZlciwgaW5kZXhCdWZmZXIgPSBfYS5faW5kZXhCdWZmZXI7XG4gICAgICAgIGlmICghc2V0dGluZ3Muc2V0dGluZ3MuQ0FOX1VQTE9BRF9TQU1FX0JVRkZFUikgeyAvKiBVc3VhbGx5IG9uIGlPUyBkZXZpY2VzLCB3aGVyZSB0aGUgYnJvd3NlciBkb2Vzbid0XG4gICAgICAgICAgICBsaWtlIHVwbG9hZHMgdG8gdGhlIHNhbWUgYnVmZmVyIGluIGEgc2luZ2xlIGZyYW1lLiAqL1xuICAgICAgICAgICAgaWYgKHRoaXMuX3BhY2tlZEdlb21ldHJ5UG9vbFNpemUgPD0gdGhpcy5fZmx1c2hJZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3BhY2tlZEdlb21ldHJ5UG9vbFNpemUrKztcbiAgICAgICAgICAgICAgICBwYWNrZWRHZW9tZXRyaWVzW3RoaXMuX2ZsdXNoSWRdID0gbmV3ICh0aGlzLmdlb21ldHJ5Q2xhc3MpKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYWNrZWRHZW9tZXRyaWVzW3RoaXMuX2ZsdXNoSWRdLl9idWZmZXIudXBkYXRlKGF0dHJpYnV0ZUJ1ZmZlci5yYXdCaW5hcnlEYXRhKTtcbiAgICAgICAgICAgIHBhY2tlZEdlb21ldHJpZXNbdGhpcy5fZmx1c2hJZF0uX2luZGV4QnVmZmVyLnVwZGF0ZShpbmRleEJ1ZmZlcik7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmdlb21ldHJ5LmJpbmQocGFja2VkR2VvbWV0cmllc1t0aGlzLl9mbHVzaElkXSk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmdlb21ldHJ5LnVwZGF0ZUJ1ZmZlcnMoKTtcbiAgICAgICAgICAgIHRoaXMuX2ZsdXNoSWQrKztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGxldHMgdXNlIHRoZSBmYXN0ZXIgb3B0aW9uLCBhbHdheXMgdXNlIGJ1ZmZlciBudW1iZXIgMFxuICAgICAgICAgICAgcGFja2VkR2VvbWV0cmllc1t0aGlzLl9mbHVzaElkXS5fYnVmZmVyLnVwZGF0ZShhdHRyaWJ1dGVCdWZmZXIucmF3QmluYXJ5RGF0YSk7XG4gICAgICAgICAgICBwYWNrZWRHZW9tZXRyaWVzW3RoaXMuX2ZsdXNoSWRdLl9pbmRleEJ1ZmZlci51cGRhdGUoaW5kZXhCdWZmZXIpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5nZW9tZXRyeS51cGRhdGVCdWZmZXJzKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEFic3RyYWN0QmF0Y2hSZW5kZXJlci5wcm90b3R5cGUuZHJhd0JhdGNoZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBkY0NvdW50ID0gdGhpcy5fZGNJbmRleDtcbiAgICAgICAgdmFyIF9hID0gdGhpcy5yZW5kZXJlciwgZ2wgPSBfYS5nbCwgc3RhdGVTeXN0ZW0gPSBfYS5zdGF0ZTtcbiAgICAgICAgdmFyIGRyYXdDYWxscyA9IEFic3RyYWN0QmF0Y2hSZW5kZXJlci5fZHJhd0NhbGxQb29sO1xuICAgICAgICB2YXIgY3VyVGV4QXJyYXkgPSBudWxsO1xuICAgICAgICAvLyBVcGxvYWQgdGV4dHVyZXMgYW5kIGRvIHRoZSBkcmF3IGNhbGxzXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGNDb3VudDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgX2IgPSBkcmF3Q2FsbHNbaV0sIHRleEFycmF5ID0gX2IudGV4QXJyYXksIHR5cGUgPSBfYi50eXBlLCBzaXplID0gX2Iuc2l6ZSwgc3RhcnQgPSBfYi5zdGFydCwgYmxlbmQgPSBfYi5ibGVuZDtcbiAgICAgICAgICAgIGlmIChjdXJUZXhBcnJheSAhPT0gdGV4QXJyYXkpIHtcbiAgICAgICAgICAgICAgICBjdXJUZXhBcnJheSA9IHRleEFycmF5O1xuICAgICAgICAgICAgICAgIHRoaXMuYmluZEFuZENsZWFyVGV4QXJyYXkodGV4QXJyYXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5ibGVuZE1vZGUgPSBibGVuZDtcbiAgICAgICAgICAgIHN0YXRlU3lzdGVtLnNldCh0aGlzLnN0YXRlKTtcbiAgICAgICAgICAgIGdsLmRyYXdFbGVtZW50cyh0eXBlLCBzaXplLCBnbC5VTlNJR05FRF9TSE9SVCwgc3RhcnQgKiAyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqIFJlbmRlcnMgdGhlIGNvbnRlbnQgX25vd18gYW5kIGVtcHRpZXMgdGhlIGN1cnJlbnQgYmF0Y2guICovXG4gICAgQWJzdHJhY3RCYXRjaFJlbmRlcmVyLnByb3RvdHlwZS5mbHVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuX3ZlcnRleENvdW50ID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fYXR0cmlidXRlQnVmZmVyID0gdGhpcy5nZXRBdHRyaWJ1dGVCdWZmZXIodGhpcy5fdmVydGV4Q291bnQpO1xuICAgICAgICB0aGlzLl9pbmRleEJ1ZmZlciA9IHRoaXMuZ2V0SW5kZXhCdWZmZXIodGhpcy5faW5kZXhDb3VudCk7XG4gICAgICAgIHRoaXMuX2FJbmRleCA9IDA7XG4gICAgICAgIHRoaXMuX2lJbmRleCA9IDA7XG4gICAgICAgIHRoaXMuX2RjSW5kZXggPSAwO1xuICAgICAgICB0aGlzLmJ1aWxkVGV4dHVyZXNBbmREcmF3Q2FsbHMoKTtcbiAgICAgICAgdGhpcy51cGRhdGVHZW9tZXRyeSgpO1xuICAgICAgICB0aGlzLmRyYXdCYXRjaGVzKCk7XG4gICAgICAgIC8vIHJlc2V0IGVsZW1lbnRzIGJ1ZmZlciBmb3IgdGhlIG5leHQgZmx1c2hcbiAgICAgICAgdGhpcy5fYnVmZmVyU2l6ZSA9IDA7XG4gICAgICAgIHRoaXMuX3ZlcnRleENvdW50ID0gMDtcbiAgICAgICAgdGhpcy5faW5kZXhDb3VudCA9IDA7XG4gICAgfTtcbiAgICAvKiogU3RhcnRzIGEgbmV3IHNwcml0ZSBiYXRjaC4gKi9cbiAgICBBYnN0cmFjdEJhdGNoUmVuZGVyZXIucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnN0YXRlLnNldCh0aGlzLnN0YXRlKTtcbiAgICAgICAgdGhpcy5yZW5kZXJlci50ZXh0dXJlLmVuc3VyZVNhbXBsZXJUeXBlKHRoaXMuTUFYX1RFWFRVUkVTKTtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zaGFkZXIuYmluZCh0aGlzLl9zaGFkZXIpO1xuICAgICAgICBpZiAoc2V0dGluZ3Muc2V0dGluZ3MuQ0FOX1VQTE9BRF9TQU1FX0JVRkZFUikge1xuICAgICAgICAgICAgLy8gYmluZCBidWZmZXIgIzAsIHdlIGRvbid0IG5lZWQgb3RoZXJzXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmdlb21ldHJ5LmJpbmQodGhpcy5fcGFja2VkR2VvbWV0cmllc1t0aGlzLl9mbHVzaElkXSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKiBTdG9wcyBhbmQgZmx1c2hlcyB0aGUgY3VycmVudCBiYXRjaC4gKi9cbiAgICBBYnN0cmFjdEJhdGNoUmVuZGVyZXIucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZmx1c2goKTtcbiAgICB9O1xuICAgIC8qKiBEZXN0cm95cyB0aGlzIGBBYnN0cmFjdEJhdGNoUmVuZGVyZXJgLiBJdCBjYW5ub3QgYmUgdXNlZCBhZ2Fpbi4gKi9cbiAgICBBYnN0cmFjdEJhdGNoUmVuZGVyZXIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fcGFja2VkR2VvbWV0cnlQb29sU2l6ZTsgaSsrKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fcGFja2VkR2VvbWV0cmllc1tpXSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3BhY2tlZEdlb21ldHJpZXNbaV0uZGVzdHJveSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVuZGVyZXIub2ZmKCdwcmVyZW5kZXInLCB0aGlzLm9uUHJlcmVuZGVyLCB0aGlzKTtcbiAgICAgICAgdGhpcy5fYUJ1ZmZlcnMgPSBudWxsO1xuICAgICAgICB0aGlzLl9pQnVmZmVycyA9IG51bGw7XG4gICAgICAgIHRoaXMuX3BhY2tlZEdlb21ldHJpZXMgPSBudWxsO1xuICAgICAgICB0aGlzLl9hdHRyaWJ1dGVCdWZmZXIgPSBudWxsO1xuICAgICAgICB0aGlzLl9pbmRleEJ1ZmZlciA9IG51bGw7XG4gICAgICAgIGlmICh0aGlzLl9zaGFkZXIpIHtcbiAgICAgICAgICAgIHRoaXMuX3NoYWRlci5kZXN0cm95KCk7XG4gICAgICAgICAgICB0aGlzLl9zaGFkZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuZGVzdHJveS5jYWxsKHRoaXMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRmV0Y2hlcyBhbiBhdHRyaWJ1dGUgYnVmZmVyIGZyb20gYHRoaXMuX2FCdWZmZXJzYCB0aGF0IGNhbiBob2xkIGF0bGVhc3QgYHNpemVgIGZsb2F0cy5cbiAgICAgKiBAcGFyYW0gc2l6ZSAtIG1pbmltdW0gY2FwYWNpdHkgcmVxdWlyZWRcbiAgICAgKiBAcmV0dXJucyAtIGJ1ZmZlciB0aGFuIGNhbiBob2xkIGF0bGVhc3QgYHNpemVgIGZsb2F0c1xuICAgICAqL1xuICAgIEFic3RyYWN0QmF0Y2hSZW5kZXJlci5wcm90b3R5cGUuZ2V0QXR0cmlidXRlQnVmZmVyID0gZnVuY3Rpb24gKHNpemUpIHtcbiAgICAgICAgLy8gOCB2ZXJ0aWNlcyBpcyBlbm91Z2ggZm9yIDIgcXVhZHNcbiAgICAgICAgdmFyIHJvdW5kZWRQMiA9IHV0aWxzLm5leHRQb3cyKE1hdGguY2VpbChzaXplIC8gOCkpO1xuICAgICAgICB2YXIgcm91bmRlZFNpemVJbmRleCA9IHV0aWxzLmxvZzIocm91bmRlZFAyKTtcbiAgICAgICAgdmFyIHJvdW5kZWRTaXplID0gcm91bmRlZFAyICogODtcbiAgICAgICAgaWYgKHRoaXMuX2FCdWZmZXJzLmxlbmd0aCA8PSByb3VuZGVkU2l6ZUluZGV4KSB7XG4gICAgICAgICAgICB0aGlzLl9pQnVmZmVycy5sZW5ndGggPSByb3VuZGVkU2l6ZUluZGV4ICsgMTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYnVmZmVyID0gdGhpcy5fYUJ1ZmZlcnNbcm91bmRlZFNpemVdO1xuICAgICAgICBpZiAoIWJ1ZmZlcikge1xuICAgICAgICAgICAgdGhpcy5fYUJ1ZmZlcnNbcm91bmRlZFNpemVdID0gYnVmZmVyID0gbmV3IFZpZXdhYmxlQnVmZmVyKHJvdW5kZWRTaXplICogdGhpcy52ZXJ0ZXhTaXplICogNCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJ1ZmZlcjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEZldGNoZXMgYW4gaW5kZXggYnVmZmVyIGZyb20gYHRoaXMuX2lCdWZmZXJzYCB0aGF0IGNhblxuICAgICAqIGhhdmUgYXQgbGVhc3QgYHNpemVgIGNhcGFjaXR5LlxuICAgICAqIEBwYXJhbSBzaXplIC0gbWluaW11bSByZXF1aXJlZCBjYXBhY2l0eVxuICAgICAqIEByZXR1cm5zIC0gYnVmZmVyIHRoYXQgY2FuIGZpdCBgc2l6ZWAgaW5kaWNlcy5cbiAgICAgKi9cbiAgICBBYnN0cmFjdEJhdGNoUmVuZGVyZXIucHJvdG90eXBlLmdldEluZGV4QnVmZmVyID0gZnVuY3Rpb24gKHNpemUpIHtcbiAgICAgICAgLy8gMTIgaW5kaWNlcyBpcyBlbm91Z2ggZm9yIDIgcXVhZHNcbiAgICAgICAgdmFyIHJvdW5kZWRQMiA9IHV0aWxzLm5leHRQb3cyKE1hdGguY2VpbChzaXplIC8gMTIpKTtcbiAgICAgICAgdmFyIHJvdW5kZWRTaXplSW5kZXggPSB1dGlscy5sb2cyKHJvdW5kZWRQMik7XG4gICAgICAgIHZhciByb3VuZGVkU2l6ZSA9IHJvdW5kZWRQMiAqIDEyO1xuICAgICAgICBpZiAodGhpcy5faUJ1ZmZlcnMubGVuZ3RoIDw9IHJvdW5kZWRTaXplSW5kZXgpIHtcbiAgICAgICAgICAgIHRoaXMuX2lCdWZmZXJzLmxlbmd0aCA9IHJvdW5kZWRTaXplSW5kZXggKyAxO1xuICAgICAgICB9XG4gICAgICAgIHZhciBidWZmZXIgPSB0aGlzLl9pQnVmZmVyc1tyb3VuZGVkU2l6ZUluZGV4XTtcbiAgICAgICAgaWYgKCFidWZmZXIpIHtcbiAgICAgICAgICAgIHRoaXMuX2lCdWZmZXJzW3JvdW5kZWRTaXplSW5kZXhdID0gYnVmZmVyID0gbmV3IFVpbnQxNkFycmF5KHJvdW5kZWRTaXplKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYnVmZmVyO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVGFrZXMgdGhlIGZvdXIgYmF0Y2hpbmcgcGFyYW1ldGVycyBvZiBgZWxlbWVudGAsIGludGVybGVhdmVzXG4gICAgICogYW5kIHB1c2hlcyB0aGVtIGludG8gdGhlIGJhdGNoaW5nIGF0dHJpYnV0ZS9pbmRleCBidWZmZXJzIGdpdmVuLlxuICAgICAqXG4gICAgICogSXQgdXNlcyB0aGVzZSBwcm9wZXJ0aWVzOiBgdmVydGV4RGF0YWAgYHV2c2AsIGB0ZXh0dXJlSWRgIGFuZFxuICAgICAqIGBpbmRpY2llc2AuIEl0IGFsc28gdXNlcyB0aGUgXCJ0aW50XCIgb2YgdGhlIGJhc2UtdGV4dHVyZSwgaWZcbiAgICAgKiBwcmVzZW50LlxuICAgICAqIEBwYXJhbSB7UElYSS5EaXNwbGF5T2JqZWN0fSBlbGVtZW50IC0gZWxlbWVudCBiZWluZyByZW5kZXJlZFxuICAgICAqIEBwYXJhbSBhdHRyaWJ1dGVCdWZmZXIgLSBhdHRyaWJ1dGUgYnVmZmVyLlxuICAgICAqIEBwYXJhbSBpbmRleEJ1ZmZlciAtIGluZGV4IGJ1ZmZlclxuICAgICAqIEBwYXJhbSBhSW5kZXggLSBudW1iZXIgb2YgZmxvYXRzIGFscmVhZHkgaW4gdGhlIGF0dHJpYnV0ZSBidWZmZXJcbiAgICAgKiBAcGFyYW0gaUluZGV4IC0gbnVtYmVyIG9mIGluZGljZXMgYWxyZWFkeSBpbiBgaW5kZXhCdWZmZXJgXG4gICAgICovXG4gICAgQWJzdHJhY3RCYXRjaFJlbmRlcmVyLnByb3RvdHlwZS5wYWNrSW50ZXJsZWF2ZWRHZW9tZXRyeSA9IGZ1bmN0aW9uIChlbGVtZW50LCBhdHRyaWJ1dGVCdWZmZXIsIGluZGV4QnVmZmVyLCBhSW5kZXgsIGlJbmRleCkge1xuICAgICAgICB2YXIgdWludDMyVmlldyA9IGF0dHJpYnV0ZUJ1ZmZlci51aW50MzJWaWV3LCBmbG9hdDMyVmlldyA9IGF0dHJpYnV0ZUJ1ZmZlci5mbG9hdDMyVmlldztcbiAgICAgICAgdmFyIHBhY2tlZFZlcnRpY2VzID0gYUluZGV4IC8gdGhpcy52ZXJ0ZXhTaXplO1xuICAgICAgICB2YXIgdXZzID0gZWxlbWVudC51dnM7XG4gICAgICAgIHZhciBpbmRpY2llcyA9IGVsZW1lbnQuaW5kaWNlcztcbiAgICAgICAgdmFyIHZlcnRleERhdGEgPSBlbGVtZW50LnZlcnRleERhdGE7XG4gICAgICAgIHZhciB0ZXh0dXJlSWQgPSBlbGVtZW50Ll90ZXh0dXJlLmJhc2VUZXh0dXJlLl9iYXRjaExvY2F0aW9uO1xuICAgICAgICB2YXIgYWxwaGEgPSBNYXRoLm1pbihlbGVtZW50LndvcmxkQWxwaGEsIDEuMCk7XG4gICAgICAgIHZhciBhcmdiID0gKGFscGhhIDwgMS4wXG4gICAgICAgICAgICAmJiBlbGVtZW50Ll90ZXh0dXJlLmJhc2VUZXh0dXJlLmFscGhhTW9kZSlcbiAgICAgICAgICAgID8gdXRpbHMucHJlbXVsdGlwbHlUaW50KGVsZW1lbnQuX3RpbnRSR0IsIGFscGhhKVxuICAgICAgICAgICAgOiBlbGVtZW50Ll90aW50UkdCICsgKGFscGhhICogMjU1IDw8IDI0KTtcbiAgICAgICAgLy8gbGV0cyBub3Qgd29ycnkgYWJvdXQgdGludCEgZm9yIG5vdy4uXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmVydGV4RGF0YS5sZW5ndGg7IGkgKz0gMikge1xuICAgICAgICAgICAgZmxvYXQzMlZpZXdbYUluZGV4KytdID0gdmVydGV4RGF0YVtpXTtcbiAgICAgICAgICAgIGZsb2F0MzJWaWV3W2FJbmRleCsrXSA9IHZlcnRleERhdGFbaSArIDFdO1xuICAgICAgICAgICAgZmxvYXQzMlZpZXdbYUluZGV4KytdID0gdXZzW2ldO1xuICAgICAgICAgICAgZmxvYXQzMlZpZXdbYUluZGV4KytdID0gdXZzW2kgKyAxXTtcbiAgICAgICAgICAgIHVpbnQzMlZpZXdbYUluZGV4KytdID0gYXJnYjtcbiAgICAgICAgICAgIGZsb2F0MzJWaWV3W2FJbmRleCsrXSA9IHRleHR1cmVJZDtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGluZGljaWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpbmRleEJ1ZmZlcltpSW5kZXgrK10gPSBwYWNrZWRWZXJ0aWNlcyArIGluZGljaWVzW2ldO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBQb29sIG9mIGBCYXRjaERyYXdDYWxsYCBvYmplY3RzIHRoYXQgYGZsdXNoYCB1c2VkXG4gICAgICogdG8gY3JlYXRlIFwiYmF0Y2hlc1wiIG9mIHRoZSBvYmplY3RzIGJlaW5nIHJlbmRlcmVkLlxuICAgICAqXG4gICAgICogVGhlc2UgYXJlIG5ldmVyIHJlLWFsbG9jYXRlZCBhZ2Fpbi5cbiAgICAgKiBTaGFyZWQgYmV0d2VlbiBhbGwgYmF0Y2ggcmVuZGVyZXJzIGJlY2F1c2UgaXQgY2FuIGJlIG9ubHkgb25lIFwiZmx1c2hcIiB3b3JraW5nIGF0IHRoZSBtb21lbnQuXG4gICAgICogQG1lbWJlciB7UElYSS5CYXRjaERyYXdDYWxsW119XG4gICAgICovXG4gICAgQWJzdHJhY3RCYXRjaFJlbmRlcmVyLl9kcmF3Q2FsbFBvb2wgPSBbXTtcbiAgICAvKipcbiAgICAgKiBQb29sIG9mIGBCYXRjaERyYXdDYWxsYCBvYmplY3RzIHRoYXQgYGZsdXNoYCB1c2VkXG4gICAgICogdG8gY3JlYXRlIFwiYmF0Y2hlc1wiIG9mIHRoZSBvYmplY3RzIGJlaW5nIHJlbmRlcmVkLlxuICAgICAqXG4gICAgICogVGhlc2UgYXJlIG5ldmVyIHJlLWFsbG9jYXRlZCBhZ2Fpbi5cbiAgICAgKiBTaGFyZWQgYmV0d2VlbiBhbGwgYmF0Y2ggcmVuZGVyZXJzIGJlY2F1c2UgaXQgY2FuIGJlIG9ubHkgb25lIFwiZmx1c2hcIiB3b3JraW5nIGF0IHRoZSBtb21lbnQuXG4gICAgICogQG1lbWJlciB7UElYSS5CYXRjaFRleHR1cmVBcnJheVtdfVxuICAgICAqL1xuICAgIEFic3RyYWN0QmF0Y2hSZW5kZXJlci5fdGV4dHVyZUFycmF5UG9vbCA9IFtdO1xuICAgIHJldHVybiBBYnN0cmFjdEJhdGNoUmVuZGVyZXI7XG59KE9iamVjdFJlbmRlcmVyKSk7XG5cbi8qKlxuICogSGVscGVyIHRoYXQgZ2VuZXJhdGVzIGJhdGNoaW5nIG11bHRpLXRleHR1cmUgc2hhZGVyLiBVc2UgaXQgd2l0aCB5b3VyIG5ldyBCYXRjaFJlbmRlcmVyXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG52YXIgQmF0Y2hTaGFkZXJHZW5lcmF0b3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHZlcnRleFNyYyAtIFZlcnRleCBzaGFkZXJcbiAgICAgKiBAcGFyYW0gZnJhZ1RlbXBsYXRlIC0gRnJhZ21lbnQgc2hhZGVyIHRlbXBsYXRlXG4gICAgICovXG4gICAgZnVuY3Rpb24gQmF0Y2hTaGFkZXJHZW5lcmF0b3IodmVydGV4U3JjLCBmcmFnVGVtcGxhdGUpIHtcbiAgICAgICAgdGhpcy52ZXJ0ZXhTcmMgPSB2ZXJ0ZXhTcmM7XG4gICAgICAgIHRoaXMuZnJhZ1RlbXBsYXRlID0gZnJhZ1RlbXBsYXRlO1xuICAgICAgICB0aGlzLnByb2dyYW1DYWNoZSA9IHt9O1xuICAgICAgICB0aGlzLmRlZmF1bHRHcm91cENhY2hlID0ge307XG4gICAgICAgIGlmIChmcmFnVGVtcGxhdGUuaW5kZXhPZignJWNvdW50JScpIDwgMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGcmFnbWVudCB0ZW1wbGF0ZSBtdXN0IGNvbnRhaW4gXCIlY291bnQlXCIuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZyYWdUZW1wbGF0ZS5pbmRleE9mKCclZm9ybG9vcCUnKSA8IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRnJhZ21lbnQgdGVtcGxhdGUgbXVzdCBjb250YWluIFwiJWZvcmxvb3AlXCIuJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgQmF0Y2hTaGFkZXJHZW5lcmF0b3IucHJvdG90eXBlLmdlbmVyYXRlU2hhZGVyID0gZnVuY3Rpb24gKG1heFRleHR1cmVzKSB7XG4gICAgICAgIGlmICghdGhpcy5wcm9ncmFtQ2FjaGVbbWF4VGV4dHVyZXNdKSB7XG4gICAgICAgICAgICB2YXIgc2FtcGxlVmFsdWVzID0gbmV3IEludDMyQXJyYXkobWF4VGV4dHVyZXMpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXhUZXh0dXJlczsgaSsrKSB7XG4gICAgICAgICAgICAgICAgc2FtcGxlVmFsdWVzW2ldID0gaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZGVmYXVsdEdyb3VwQ2FjaGVbbWF4VGV4dHVyZXNdID0gVW5pZm9ybUdyb3VwLmZyb20oeyB1U2FtcGxlcnM6IHNhbXBsZVZhbHVlcyB9LCB0cnVlKTtcbiAgICAgICAgICAgIHZhciBmcmFnbWVudFNyYyA9IHRoaXMuZnJhZ1RlbXBsYXRlO1xuICAgICAgICAgICAgZnJhZ21lbnRTcmMgPSBmcmFnbWVudFNyYy5yZXBsYWNlKC8lY291bnQlL2dpLCBcIlwiICsgbWF4VGV4dHVyZXMpO1xuICAgICAgICAgICAgZnJhZ21lbnRTcmMgPSBmcmFnbWVudFNyYy5yZXBsYWNlKC8lZm9ybG9vcCUvZ2ksIHRoaXMuZ2VuZXJhdGVTYW1wbGVTcmMobWF4VGV4dHVyZXMpKTtcbiAgICAgICAgICAgIHRoaXMucHJvZ3JhbUNhY2hlW21heFRleHR1cmVzXSA9IG5ldyBQcm9ncmFtKHRoaXMudmVydGV4U3JjLCBmcmFnbWVudFNyYyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHVuaWZvcm1zID0ge1xuICAgICAgICAgICAgdGludDogbmV3IEZsb2F0MzJBcnJheShbMSwgMSwgMSwgMV0pLFxuICAgICAgICAgICAgdHJhbnNsYXRpb25NYXRyaXg6IG5ldyBtYXRoLk1hdHJpeCgpLFxuICAgICAgICAgICAgZGVmYXVsdDogdGhpcy5kZWZhdWx0R3JvdXBDYWNoZVttYXhUZXh0dXJlc10sXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBuZXcgU2hhZGVyKHRoaXMucHJvZ3JhbUNhY2hlW21heFRleHR1cmVzXSwgdW5pZm9ybXMpO1xuICAgIH07XG4gICAgQmF0Y2hTaGFkZXJHZW5lcmF0b3IucHJvdG90eXBlLmdlbmVyYXRlU2FtcGxlU3JjID0gZnVuY3Rpb24gKG1heFRleHR1cmVzKSB7XG4gICAgICAgIHZhciBzcmMgPSAnJztcbiAgICAgICAgc3JjICs9ICdcXG4nO1xuICAgICAgICBzcmMgKz0gJ1xcbic7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF4VGV4dHVyZXM7IGkrKykge1xuICAgICAgICAgICAgaWYgKGkgPiAwKSB7XG4gICAgICAgICAgICAgICAgc3JjICs9ICdcXG5lbHNlICc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaSA8IG1heFRleHR1cmVzIC0gMSkge1xuICAgICAgICAgICAgICAgIHNyYyArPSBcImlmKHZUZXh0dXJlSWQgPCBcIiArIGkgKyBcIi41KVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3JjICs9ICdcXG57JztcbiAgICAgICAgICAgIHNyYyArPSBcIlxcblxcdGNvbG9yID0gdGV4dHVyZTJEKHVTYW1wbGVyc1tcIiArIGkgKyBcIl0sIHZUZXh0dXJlQ29vcmQpO1wiO1xuICAgICAgICAgICAgc3JjICs9ICdcXG59JztcbiAgICAgICAgfVxuICAgICAgICBzcmMgKz0gJ1xcbic7XG4gICAgICAgIHNyYyArPSAnXFxuJztcbiAgICAgICAgcmV0dXJuIHNyYztcbiAgICB9O1xuICAgIHJldHVybiBCYXRjaFNoYWRlckdlbmVyYXRvcjtcbn0oKSk7XG5cbi8qKlxuICogR2VvbWV0cnkgdXNlZCB0byBiYXRjaCBzdGFuZGFyZCBQSVhJIGNvbnRlbnQgKGUuZy4gTWVzaCwgU3ByaXRlLCBHcmFwaGljcyBvYmplY3RzKS5cbiAqIEBtZW1iZXJvZiBQSVhJXG4gKi9cbnZhciBCYXRjaEdlb21ldHJ5ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhCYXRjaEdlb21ldHJ5LCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW19zdGF0aWM9ZmFsc2VdIC0gT3B0aW1pemF0aW9uIGZsYWcsIHdoZXJlIGBmYWxzZWBcbiAgICAgKiAgICAgICAgaXMgdXBkYXRlZCBldmVyeSBmcmFtZSwgYHRydWVgIGRvZXNuJ3QgY2hhbmdlIGZyYW1lLXRvLWZyYW1lLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEJhdGNoR2VvbWV0cnkoX3N0YXRpYykge1xuICAgICAgICBpZiAoX3N0YXRpYyA9PT0gdm9pZCAwKSB7IF9zdGF0aWMgPSBmYWxzZTsgfVxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5fYnVmZmVyID0gbmV3IEJ1ZmZlcihudWxsLCBfc3RhdGljLCBmYWxzZSk7XG4gICAgICAgIF90aGlzLl9pbmRleEJ1ZmZlciA9IG5ldyBCdWZmZXIobnVsbCwgX3N0YXRpYywgdHJ1ZSk7XG4gICAgICAgIF90aGlzLmFkZEF0dHJpYnV0ZSgnYVZlcnRleFBvc2l0aW9uJywgX3RoaXMuX2J1ZmZlciwgMiwgZmFsc2UsIGNvbnN0YW50cy5UWVBFUy5GTE9BVClcbiAgICAgICAgICAgIC5hZGRBdHRyaWJ1dGUoJ2FUZXh0dXJlQ29vcmQnLCBfdGhpcy5fYnVmZmVyLCAyLCBmYWxzZSwgY29uc3RhbnRzLlRZUEVTLkZMT0FUKVxuICAgICAgICAgICAgLmFkZEF0dHJpYnV0ZSgnYUNvbG9yJywgX3RoaXMuX2J1ZmZlciwgNCwgdHJ1ZSwgY29uc3RhbnRzLlRZUEVTLlVOU0lHTkVEX0JZVEUpXG4gICAgICAgICAgICAuYWRkQXR0cmlidXRlKCdhVGV4dHVyZUlkJywgX3RoaXMuX2J1ZmZlciwgMSwgdHJ1ZSwgY29uc3RhbnRzLlRZUEVTLkZMT0FUKVxuICAgICAgICAgICAgLmFkZEluZGV4KF90aGlzLl9pbmRleEJ1ZmZlcik7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIEJhdGNoR2VvbWV0cnk7XG59KEdlb21ldHJ5KSk7XG5cbnZhciBkZWZhdWx0VmVydGV4ID0gXCJwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XFxuYXR0cmlidXRlIHZlYzIgYVZlcnRleFBvc2l0aW9uO1xcbmF0dHJpYnV0ZSB2ZWMyIGFUZXh0dXJlQ29vcmQ7XFxuYXR0cmlidXRlIHZlYzQgYUNvbG9yO1xcbmF0dHJpYnV0ZSBmbG9hdCBhVGV4dHVyZUlkO1xcblxcbnVuaWZvcm0gbWF0MyBwcm9qZWN0aW9uTWF0cml4O1xcbnVuaWZvcm0gbWF0MyB0cmFuc2xhdGlvbk1hdHJpeDtcXG51bmlmb3JtIHZlYzQgdGludDtcXG5cXG52YXJ5aW5nIHZlYzIgdlRleHR1cmVDb29yZDtcXG52YXJ5aW5nIHZlYzQgdkNvbG9yO1xcbnZhcnlpbmcgZmxvYXQgdlRleHR1cmVJZDtcXG5cXG52b2lkIG1haW4odm9pZCl7XFxuICAgIGdsX1Bvc2l0aW9uID0gdmVjNCgocHJvamVjdGlvbk1hdHJpeCAqIHRyYW5zbGF0aW9uTWF0cml4ICogdmVjMyhhVmVydGV4UG9zaXRpb24sIDEuMCkpLnh5LCAwLjAsIDEuMCk7XFxuXFxuICAgIHZUZXh0dXJlQ29vcmQgPSBhVGV4dHVyZUNvb3JkO1xcbiAgICB2VGV4dHVyZUlkID0gYVRleHR1cmVJZDtcXG4gICAgdkNvbG9yID0gYUNvbG9yICogdGludDtcXG59XFxuXCI7XG5cbnZhciBkZWZhdWx0RnJhZ21lbnQgPSBcInZhcnlpbmcgdmVjMiB2VGV4dHVyZUNvb3JkO1xcbnZhcnlpbmcgdmVjNCB2Q29sb3I7XFxudmFyeWluZyBmbG9hdCB2VGV4dHVyZUlkO1xcbnVuaWZvcm0gc2FtcGxlcjJEIHVTYW1wbGVyc1slY291bnQlXTtcXG5cXG52b2lkIG1haW4odm9pZCl7XFxuICAgIHZlYzQgY29sb3I7XFxuICAgICVmb3Jsb29wJVxcbiAgICBnbF9GcmFnQ29sb3IgPSBjb2xvciAqIHZDb2xvcjtcXG59XFxuXCI7XG5cbi8qKiBAbWVtYmVyb2YgUElYSSAqL1xudmFyIEJhdGNoUGx1Z2luRmFjdG9yeSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBCYXRjaFBsdWdpbkZhY3RvcnkoKSB7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBCYXRjaFJlbmRlcmVyIHBsdWdpbiBmb3IgUmVuZGVyZXIuIHRoaXMgY29udmVuaWVuY2UgY2FuIHByb3ZpZGUgYW4gZWFzeSB3YXlcbiAgICAgKiB0byBleHRlbmQgQmF0Y2hSZW5kZXJlciB3aXRoIGFsbCB0aGUgbmVjZXNzYXJ5IHBpZWNlcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGNvbnN0IGZyYWdtZW50ID0gYFxuICAgICAqIHZhcnlpbmcgdmVjMiB2VGV4dHVyZUNvb3JkO1xuICAgICAqIHZhcnlpbmcgdmVjNCB2Q29sb3I7XG4gICAgICogdmFyeWluZyBmbG9hdCB2VGV4dHVyZUlkO1xuICAgICAqIHVuaWZvcm0gc2FtcGxlcjJEIHVTYW1wbGVyc1slY291bnQlXTtcbiAgICAgKlxuICAgICAqIHZvaWQgbWFpbih2b2lkKXtcbiAgICAgKiAgICAgdmVjNCBjb2xvcjtcbiAgICAgKiAgICAgJWZvcmxvb3AlXG4gICAgICogICAgIGdsX0ZyYWdDb2xvciA9IHZDb2xvciAqIHZlYzQoY29sb3IuYSAtIGNvbG9yLnJnYiwgY29sb3IuYSk7XG4gICAgICogfVxuICAgICAqIGA7XG4gICAgICogY29uc3QgSW52ZXJ0QmF0Y2hSZW5kZXJlciA9IFBJWEkuQmF0Y2hQbHVnaW5GYWN0b3J5LmNyZWF0ZSh7IGZyYWdtZW50IH0pO1xuICAgICAqIFBJWEkuUmVuZGVyZXIucmVnaXN0ZXJQbHVnaW4oJ2ludmVydCcsIEludmVydEJhdGNoUmVuZGVyZXIpO1xuICAgICAqIGNvbnN0IHNwcml0ZSA9IG5ldyBQSVhJLlNwcml0ZSgpO1xuICAgICAqIHNwcml0ZS5wbHVnaW5OYW1lID0gJ2ludmVydCc7XG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy52ZXJ0ZXg9UElYSS5CYXRjaFBsdWdpbkZhY3RvcnkuZGVmYXVsdFZlcnRleFNyY10gLSBWZXJ0ZXggc2hhZGVyIHNvdXJjZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5mcmFnbWVudD1QSVhJLkJhdGNoUGx1Z2luRmFjdG9yeS5kZWZhdWx0RnJhZ21lbnRUZW1wbGF0ZV0gLSBGcmFnbWVudCBzaGFkZXIgdGVtcGxhdGVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMudmVydGV4U2l6ZT02XSAtIFZlcnRleCBzaXplXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zLmdlb21ldHJ5Q2xhc3M9UElYSS5CYXRjaEdlb21ldHJ5XVxuICAgICAqIEByZXR1cm5zIHsqfSBOZXcgYmF0Y2ggcmVuZGVyZXIgcGx1Z2luXG4gICAgICovXG4gICAgQmF0Y2hQbHVnaW5GYWN0b3J5LmNyZWF0ZSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIHZhciBfYSA9IE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgICAgdmVydGV4OiBkZWZhdWx0VmVydGV4LFxuICAgICAgICAgICAgZnJhZ21lbnQ6IGRlZmF1bHRGcmFnbWVudCxcbiAgICAgICAgICAgIGdlb21ldHJ5Q2xhc3M6IEJhdGNoR2VvbWV0cnksXG4gICAgICAgICAgICB2ZXJ0ZXhTaXplOiA2LFxuICAgICAgICB9LCBvcHRpb25zKSwgdmVydGV4ID0gX2EudmVydGV4LCBmcmFnbWVudCA9IF9hLmZyYWdtZW50LCB2ZXJ0ZXhTaXplID0gX2EudmVydGV4U2l6ZSwgZ2VvbWV0cnlDbGFzcyA9IF9hLmdlb21ldHJ5Q2xhc3M7XG4gICAgICAgIHJldHVybiAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgICAgICBfX2V4dGVuZHMoQmF0Y2hQbHVnaW4sIF9zdXBlcik7XG4gICAgICAgICAgICBmdW5jdGlvbiBCYXRjaFBsdWdpbihyZW5kZXJlcikge1xuICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHJlbmRlcmVyKSB8fCB0aGlzO1xuICAgICAgICAgICAgICAgIF90aGlzLnNoYWRlckdlbmVyYXRvciA9IG5ldyBCYXRjaFNoYWRlckdlbmVyYXRvcih2ZXJ0ZXgsIGZyYWdtZW50KTtcbiAgICAgICAgICAgICAgICBfdGhpcy5nZW9tZXRyeUNsYXNzID0gZ2VvbWV0cnlDbGFzcztcbiAgICAgICAgICAgICAgICBfdGhpcy52ZXJ0ZXhTaXplID0gdmVydGV4U2l6ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gQmF0Y2hQbHVnaW47XG4gICAgICAgIH0oQWJzdHJhY3RCYXRjaFJlbmRlcmVyKSk7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQmF0Y2hQbHVnaW5GYWN0b3J5LCBcImRlZmF1bHRWZXJ0ZXhTcmNcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGRlZmF1bHQgdmVydGV4IHNoYWRlciBzb3VyY2VcbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBkZWZhdWx0VmVydGV4O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJhdGNoUGx1Z2luRmFjdG9yeSwgXCJkZWZhdWx0RnJhZ21lbnRUZW1wbGF0ZVwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgZGVmYXVsdCBmcmFnbWVudCBzaGFkZXIgc291cmNlXG4gICAgICAgICAqIEByZWFkb25seVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gZGVmYXVsdEZyYWdtZW50O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIEJhdGNoUGx1Z2luRmFjdG9yeTtcbn0oKSk7XG4vLyBTZXR1cCB0aGUgZGVmYXVsdCBCYXRjaFJlbmRlcmVyIHBsdWdpbiwgdGhpcyBpcyB3aGF0XG4vLyB3ZSdsbCBhY3R1YWxseSBleHBvcnQgYXQgdGhlIHJvb3QgbGV2ZWxcbnZhciBCYXRjaFJlbmRlcmVyID0gQmF0Y2hQbHVnaW5GYWN0b3J5LmNyZWF0ZSgpO1xuXG4vKipcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKiBAbmFtZXNwYWNlIHJlc291cmNlc1xuICogQHNlZSBQSVhJXG4gKiBAZGVwcmVjYXRlZCBzaW5jZSA2LjAuMFxuICovXG52YXIgcmVzb3VyY2VzID0ge307XG52YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHJlc291cmNlcywgbmFtZSwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHV0aWxzLmRlcHJlY2F0aW9uKCc2LjAuMCcsIFwiUElYSS5zeXN0ZW1zLlwiICsgbmFtZSArIFwiIGhhcyBtb3ZlZCB0byBQSVhJLlwiICsgbmFtZSk7XG4gICAgICAgICAgICByZXR1cm4gX3Jlc291cmNlc1tuYW1lXTtcbiAgICAgICAgfSxcbiAgICB9KTtcbn07XG5mb3IgKHZhciBuYW1lIGluIF9yZXNvdXJjZXMpIHtcbiAgICBfbG9vcF8xKG5hbWUpO1xufVxuLyoqXG4gKiBAbWVtYmVyb2YgUElYSVxuICogQG5hbWVzcGFjZSBzeXN0ZW1zXG4gKiBAc2VlIFBJWElcbiAqIEBkZXByZWNhdGVkIHNpbmNlIDYuMC4wXG4gKi9cbnZhciBzeXN0ZW1zID0ge307XG52YXIgX2xvb3BfMiA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHN5c3RlbXMsIG5hbWUsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB1dGlscy5kZXByZWNhdGlvbignNi4wLjAnLCBcIlBJWEkucmVzb3VyY2VzLlwiICsgbmFtZSArIFwiIGhhcyBtb3ZlZCB0byBQSVhJLlwiICsgbmFtZSk7XG4gICAgICAgICAgICByZXR1cm4gX3N5c3RlbXNbbmFtZV07XG4gICAgICAgIH0sXG4gICAgfSk7XG59O1xuZm9yICh2YXIgbmFtZSBpbiBfc3lzdGVtcykge1xuICAgIF9sb29wXzIobmFtZSk7XG59XG5cbmV4cG9ydHMuQWJzdHJhY3RCYXRjaFJlbmRlcmVyID0gQWJzdHJhY3RCYXRjaFJlbmRlcmVyO1xuZXhwb3J0cy5BYnN0cmFjdE11bHRpUmVzb3VyY2UgPSBBYnN0cmFjdE11bHRpUmVzb3VyY2U7XG5leHBvcnRzLkFic3RyYWN0UmVuZGVyZXIgPSBBYnN0cmFjdFJlbmRlcmVyO1xuZXhwb3J0cy5BcnJheVJlc291cmNlID0gQXJyYXlSZXNvdXJjZTtcbmV4cG9ydHMuQXR0cmlidXRlID0gQXR0cmlidXRlO1xuZXhwb3J0cy5CYXNlSW1hZ2VSZXNvdXJjZSA9IEJhc2VJbWFnZVJlc291cmNlO1xuZXhwb3J0cy5CYXNlUmVuZGVyVGV4dHVyZSA9IEJhc2VSZW5kZXJUZXh0dXJlO1xuZXhwb3J0cy5CYXNlVGV4dHVyZSA9IEJhc2VUZXh0dXJlO1xuZXhwb3J0cy5CYXRjaERyYXdDYWxsID0gQmF0Y2hEcmF3Q2FsbDtcbmV4cG9ydHMuQmF0Y2hHZW9tZXRyeSA9IEJhdGNoR2VvbWV0cnk7XG5leHBvcnRzLkJhdGNoUGx1Z2luRmFjdG9yeSA9IEJhdGNoUGx1Z2luRmFjdG9yeTtcbmV4cG9ydHMuQmF0Y2hSZW5kZXJlciA9IEJhdGNoUmVuZGVyZXI7XG5leHBvcnRzLkJhdGNoU2hhZGVyR2VuZXJhdG9yID0gQmF0Y2hTaGFkZXJHZW5lcmF0b3I7XG5leHBvcnRzLkJhdGNoU3lzdGVtID0gQmF0Y2hTeXN0ZW07XG5leHBvcnRzLkJhdGNoVGV4dHVyZUFycmF5ID0gQmF0Y2hUZXh0dXJlQXJyYXk7XG5leHBvcnRzLkJ1ZmZlciA9IEJ1ZmZlcjtcbmV4cG9ydHMuQnVmZmVyUmVzb3VyY2UgPSBCdWZmZXJSZXNvdXJjZTtcbmV4cG9ydHMuQ2FudmFzUmVzb3VyY2UgPSBDYW52YXNSZXNvdXJjZTtcbmV4cG9ydHMuQ29udGV4dFN5c3RlbSA9IENvbnRleHRTeXN0ZW07XG5leHBvcnRzLkN1YmVSZXNvdXJjZSA9IEN1YmVSZXNvdXJjZTtcbmV4cG9ydHMuRmlsdGVyID0gRmlsdGVyO1xuZXhwb3J0cy5GaWx0ZXJTdGF0ZSA9IEZpbHRlclN0YXRlO1xuZXhwb3J0cy5GaWx0ZXJTeXN0ZW0gPSBGaWx0ZXJTeXN0ZW07XG5leHBvcnRzLkZyYW1lYnVmZmVyID0gRnJhbWVidWZmZXI7XG5leHBvcnRzLkZyYW1lYnVmZmVyU3lzdGVtID0gRnJhbWVidWZmZXJTeXN0ZW07XG5leHBvcnRzLkdMRnJhbWVidWZmZXIgPSBHTEZyYW1lYnVmZmVyO1xuZXhwb3J0cy5HTFByb2dyYW0gPSBHTFByb2dyYW07XG5leHBvcnRzLkdMVGV4dHVyZSA9IEdMVGV4dHVyZTtcbmV4cG9ydHMuR2VvbWV0cnkgPSBHZW9tZXRyeTtcbmV4cG9ydHMuR2VvbWV0cnlTeXN0ZW0gPSBHZW9tZXRyeVN5c3RlbTtcbmV4cG9ydHMuSUdMVW5pZm9ybURhdGEgPSBJR0xVbmlmb3JtRGF0YTtcbmV4cG9ydHMuSU5TVEFMTEVEID0gSU5TVEFMTEVEO1xuZXhwb3J0cy5JbWFnZUJpdG1hcFJlc291cmNlID0gSW1hZ2VCaXRtYXBSZXNvdXJjZTtcbmV4cG9ydHMuSW1hZ2VSZXNvdXJjZSA9IEltYWdlUmVzb3VyY2U7XG5leHBvcnRzLk1hc2tEYXRhID0gTWFza0RhdGE7XG5leHBvcnRzLk1hc2tTeXN0ZW0gPSBNYXNrU3lzdGVtO1xuZXhwb3J0cy5PYmplY3RSZW5kZXJlciA9IE9iamVjdFJlbmRlcmVyO1xuZXhwb3J0cy5Qcm9ncmFtID0gUHJvZ3JhbTtcbmV4cG9ydHMuUHJvamVjdGlvblN5c3RlbSA9IFByb2plY3Rpb25TeXN0ZW07XG5leHBvcnRzLlF1YWQgPSBRdWFkO1xuZXhwb3J0cy5RdWFkVXYgPSBRdWFkVXY7XG5leHBvcnRzLlJlbmRlclRleHR1cmUgPSBSZW5kZXJUZXh0dXJlO1xuZXhwb3J0cy5SZW5kZXJUZXh0dXJlUG9vbCA9IFJlbmRlclRleHR1cmVQb29sO1xuZXhwb3J0cy5SZW5kZXJUZXh0dXJlU3lzdGVtID0gUmVuZGVyVGV4dHVyZVN5c3RlbTtcbmV4cG9ydHMuUmVuZGVyZXIgPSBSZW5kZXJlcjtcbmV4cG9ydHMuUmVzb3VyY2UgPSBSZXNvdXJjZTtcbmV4cG9ydHMuU1ZHUmVzb3VyY2UgPSBTVkdSZXNvdXJjZTtcbmV4cG9ydHMuU2Npc3NvclN5c3RlbSA9IFNjaXNzb3JTeXN0ZW07XG5leHBvcnRzLlNoYWRlciA9IFNoYWRlcjtcbmV4cG9ydHMuU2hhZGVyU3lzdGVtID0gU2hhZGVyU3lzdGVtO1xuZXhwb3J0cy5TcHJpdGVNYXNrRmlsdGVyID0gU3ByaXRlTWFza0ZpbHRlcjtcbmV4cG9ydHMuU3RhdGUgPSBTdGF0ZTtcbmV4cG9ydHMuU3RhdGVTeXN0ZW0gPSBTdGF0ZVN5c3RlbTtcbmV4cG9ydHMuU3RlbmNpbFN5c3RlbSA9IFN0ZW5jaWxTeXN0ZW07XG5leHBvcnRzLlN5c3RlbSA9IFN5c3RlbTtcbmV4cG9ydHMuVGV4dHVyZSA9IFRleHR1cmU7XG5leHBvcnRzLlRleHR1cmVHQ1N5c3RlbSA9IFRleHR1cmVHQ1N5c3RlbTtcbmV4cG9ydHMuVGV4dHVyZU1hdHJpeCA9IFRleHR1cmVNYXRyaXg7XG5leHBvcnRzLlRleHR1cmVTeXN0ZW0gPSBUZXh0dXJlU3lzdGVtO1xuZXhwb3J0cy5UZXh0dXJlVXZzID0gVGV4dHVyZVV2cztcbmV4cG9ydHMuVW5pZm9ybUdyb3VwID0gVW5pZm9ybUdyb3VwO1xuZXhwb3J0cy5WaWRlb1Jlc291cmNlID0gVmlkZW9SZXNvdXJjZTtcbmV4cG9ydHMuVmlld2FibGVCdWZmZXIgPSBWaWV3YWJsZUJ1ZmZlcjtcbmV4cG9ydHMuYXV0b0RldGVjdFJlbmRlcmVyID0gYXV0b0RldGVjdFJlbmRlcmVyO1xuZXhwb3J0cy5hdXRvRGV0ZWN0UmVzb3VyY2UgPSBhdXRvRGV0ZWN0UmVzb3VyY2U7XG5leHBvcnRzLmNoZWNrTWF4SWZTdGF0ZW1lbnRzSW5TaGFkZXIgPSBjaGVja01heElmU3RhdGVtZW50c0luU2hhZGVyO1xuZXhwb3J0cy5jcmVhdGVVQk9FbGVtZW50cyA9IGNyZWF0ZVVCT0VsZW1lbnRzO1xuZXhwb3J0cy5kZWZhdWx0RmlsdGVyVmVydGV4ID0gZGVmYXVsdEZpbHRlclZlcnRleDtcbmV4cG9ydHMuZGVmYXVsdFZlcnRleCA9IGRlZmF1bHRWZXJ0ZXgkMTtcbmV4cG9ydHMuZ2VuZXJhdGVQcm9ncmFtID0gZ2VuZXJhdGVQcm9ncmFtO1xuZXhwb3J0cy5nZW5lcmF0ZVVuaWZvcm1CdWZmZXJTeW5jID0gZ2VuZXJhdGVVbmlmb3JtQnVmZmVyU3luYztcbmV4cG9ydHMuZ2V0VGVzdENvbnRleHQgPSBnZXRUZXN0Q29udGV4dDtcbmV4cG9ydHMuZ2V0VUJPRGF0YSA9IGdldFVCT0RhdGE7XG5leHBvcnRzLnJlc291cmNlcyA9IHJlc291cmNlcztcbmV4cG9ydHMuc3lzdGVtcyA9IHN5c3RlbXM7XG5leHBvcnRzLnVuaWZvcm1QYXJzZXJzID0gdW5pZm9ybVBhcnNlcnM7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb3JlLmpzLm1hcFxuIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwic2V0dGluZ3MiLCJjb25zdGFudHMiLCJ1dGlscyIsInJ1bm5lciIsInRpY2tlciIsIm1hdGgiLCJQUkVGRVJfRU5WIiwiaXNNb2JpbGUiLCJhbnkiLCJFTlYiLCJXRUJHTCIsIldFQkdMMiIsIlNUUklDVF9URVhUVVJFX0NBQ0hFIiwiSU5TVEFMTEVEIiwiYXV0b0RldGVjdFJlc291cmNlIiwic291cmNlIiwib3B0aW9ucyIsImV4dGVuc2lvbiIsInJlc3VsdCIsImV4ZWMiLCJ0b0xvd2VyQ2FzZSIsImkiLCJsZW5ndGgiLCJSZXNvdXJjZVBsdWdpbiIsInRlc3QiLCJFcnJvciIsImV4dGVuZFN0YXRpY3MiLCJkIiwiYiIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiQXJyYXkiLCJwIiwiaGFzT3duUHJvcGVydHkiLCJfX2V4dGVuZHMiLCJfXyIsInRoaXMiLCJjb25zdHJ1Y3RvciIsInByb3RvdHlwZSIsImNyZWF0ZSIsIl9fYXNzaWduIiwiYXNzaWduIiwidCIsInMiLCJhcmd1bWVudHMkMSIsImFyZ3VtZW50cyIsIm4iLCJjYWxsIiwiYXBwbHkiLCJSZXNvdXJjZSIsIndpZHRoIiwiaGVpZ2h0IiwiX3dpZHRoIiwiX2hlaWdodCIsImRlc3Ryb3llZCIsImludGVybmFsIiwib25SZXNpemUiLCJSdW5uZXIiLCJvblVwZGF0ZSIsIm9uRXJyb3IiLCJiaW5kIiwiYmFzZVRleHR1cmUiLCJhZGQiLCJlbWl0IiwidW5iaW5kIiwicmVtb3ZlIiwicmVzaXplIiwiZ2V0IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsInVwZGF0ZSIsImxvYWQiLCJQcm9taXNlIiwicmVzb2x2ZSIsInN0eWxlIiwiX3JlbmRlcmVyIiwiX2Jhc2VUZXh0dXJlIiwiX2dsVGV4dHVyZSIsImRpc3Bvc2UiLCJkZXN0cm95IiwicmVtb3ZlQWxsIiwiX3NvdXJjZSIsIl9leHRlbnNpb24iLCJCdWZmZXJSZXNvdXJjZSIsIl9zdXBlciIsIl90aGlzIiwiX2EiLCJkYXRhIiwidXBsb2FkIiwicmVuZGVyZXIiLCJnbFRleHR1cmUiLCJnbCIsInBpeGVsU3RvcmVpIiwiVU5QQUNLX1BSRU1VTFRJUExZX0FMUEhBX1dFQkdMIiwiYWxwaGFNb2RlIiwiQUxQSEFfTU9ERVMiLCJVTlBBQ0siLCJyZWFsV2lkdGgiLCJyZWFsSGVpZ2h0IiwidGV4U3ViSW1hZ2UyRCIsInRhcmdldCIsImZvcm1hdCIsInR5cGUiLCJ0ZXhJbWFnZTJEIiwiaW50ZXJuYWxGb3JtYXQiLCJGbG9hdDMyQXJyYXkiLCJVaW50OEFycmF5IiwiVWludDMyQXJyYXkiLCJkZWZhdWx0QnVmZmVyT3B0aW9ucyIsInNjYWxlTW9kZSIsIlNDQUxFX01PREVTIiwiTkVBUkVTVCIsIkZPUk1BVFMiLCJSR0JBIiwiTlBNIiwiQmFzZVRleHR1cmUiLCJyZXNvdXJjZSIsIm1pcG1hcCIsImFuaXNvdHJvcGljTGV2ZWwiLCJ3cmFwTW9kZSIsInJlc29sdXRpb24iLCJyZXNvdXJjZU9wdGlvbnMiLCJSRVNPTFVUSU9OIiwiTWF0aCIsInJvdW5kIiwiX21pcG1hcCIsInVuZGVmaW5lZCIsIk1JUE1BUF9URVhUVVJFUyIsIkFOSVNPVFJPUElDX0xFVkVMIiwiX3dyYXBNb2RlIiwiV1JBUF9NT0RFIiwiX3NjYWxlTW9kZSIsIlNDQUxFX01PREUiLCJUWVBFUyIsIlVOU0lHTkVEX0JZVEUiLCJUQVJHRVRTIiwiVEVYVFVSRV8yRCIsInVpZCIsInRvdWNoZWQiLCJpc1Bvd2VyT2ZUd28iLCJfcmVmcmVzaFBPVCIsIl9nbFRleHR1cmVzIiwiZGlydHlJZCIsImRpcnR5U3R5bGVJZCIsImNhY2hlSWQiLCJ2YWxpZCIsInRleHR1cmVDYWNoZUlkcyIsIl9iYXRjaEVuYWJsZWQiLCJfYmF0Y2hMb2NhdGlvbiIsInBhcmVudFRleHR1cmVBcnJheSIsInNldFJlc291cmNlIiwic2V0Iiwic2V0U3R5bGUiLCJkaXJ0eSIsInNldFNpemUiLCJkZXNpcmVkV2lkdGgiLCJkZXNpcmVkSGVpZ2h0Iiwic2V0UmVhbFNpemUiLCJpc1BvdzIiLCJzZXRSZXNvbHV0aW9uIiwib2xkUmVzb2x1dGlvbiIsImV2ZW50IiwiQmFzZVRleHR1cmVDYWNoZSIsIlRleHR1cmVDYWNoZSIsInJlbW92ZUZyb21DYWNoZSIsImNhc3RUb0Jhc2VUZXh0dXJlIiwiZnJvbSIsInN0cmljdCIsImlzRnJhbWUiLCJfcGl4aUlkIiwicHJlZml4IiwicGl4aUlkUHJlZml4IiwiYWRkVG9DYWNoZSIsImZyb21CdWZmZXIiLCJidWZmZXIiLCJGTE9BVCIsImlkIiwiaW5kZXhPZiIsInB1c2giLCJjb25zb2xlIiwid2FybiIsImJhc2VUZXh0dXJlRnJvbUNhY2hlIiwiaW5kZXgiLCJzcGxpY2UiLCJfZ2xvYmFsQmF0Y2giLCJFdmVudEVtaXR0ZXIiLCJBYnN0cmFjdE11bHRpUmVzb3VyY2UiLCJpdGVtcyIsIml0ZW1EaXJ0eUlkcyIsInBhcnRUZXh0dXJlIiwiX2xvYWQiLCJpbml0RnJvbUFycmF5IiwicmVzb3VyY2VzIiwiYWRkQmFzZVRleHR1cmVBdCIsImFkZFJlc291cmNlQXQiLCJsZW4iLCJvbiIsIm9mZiIsInByb21pc2VzIiwibWFwIiwiaXRlbSIsImZpbHRlciIsImFsbCIsInRoZW4iLCJBcnJheVJlc291cmNlIiwidXJscyIsImlzQXJyYXkiLCJURVhUVVJFXzJEX0FSUkFZIiwidGV4dHVyZSIsInRleEltYWdlM0QiLCJ0ZXhTdWJJbWFnZTNEIiwiQmFzZUltYWdlUmVzb3VyY2UiLCJzb3VyY2VBbnkiLCJuYXR1cmFsV2lkdGgiLCJ2aWRlb1dpZHRoIiwibmF0dXJhbEhlaWdodCIsInZpZGVvSGVpZ2h0Iiwibm9TdWJJbWFnZSIsImNyb3NzT3JpZ2luIiwiZWxlbWVudCIsInVybCIsImNyb3Nzb3JpZ2luIiwiZGV0ZXJtaW5lQ3Jvc3NPcmlnaW4iLCJIVE1MSW1hZ2VFbGVtZW50IiwiY29tcGxldGUiLCJIVE1MVmlkZW9FbGVtZW50IiwicmVhZHlTdGF0ZSIsIkNhbnZhc1Jlc291cmNlIiwiT2Zmc2NyZWVuQ2FudmFzIiwiZ2xvYmFsVGhpcyIsIkhUTUxDYW52YXNFbGVtZW50IiwiQ3ViZVJlc291cmNlIiwiYXV0b0xvYWQiLCJsaW5rQmFzZVRleHR1cmUiLCJTSURFUyIsIlRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWCIsIlRFWFRVUkVfQ1VCRV9NQVAiLCJrZXlzIiwic2lkZSIsIkltYWdlUmVzb3VyY2UiLCJpbWFnZUVsZW1lbnQiLCJJbWFnZSIsInNyYyIsIl9wcm9jZXNzIiwicHJlc2VydmVCaXRtYXAiLCJjcmVhdGVCaXRtYXAiLCJDUkVBVEVfSU1BR0VfQklUTUFQIiwiY3JlYXRlSW1hZ2VCaXRtYXAiLCJiaXRtYXAiLCJyZWplY3QiLCJjb21wbGV0ZWQiLCJvbmxvYWQiLCJvbmVycm9yIiwicHJvY2VzcyIsImNvcnMiLCJmZXRjaCIsIm1vZGUiLCJyIiwiYmxvYiIsInByZW11bHRpcGx5QWxwaGEiLCJmbGFnIiwiZ2xUZXh0dXJlcyIsImtleSIsIm90aGVyVGV4IiwiY2xvc2UiLCJTVkdSZXNvdXJjZSIsInNvdXJjZUJhc2U2NCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInN2ZyIsInNjYWxlIiwiX292ZXJyaWRlV2lkdGgiLCJfb3ZlcnJpZGVIZWlnaHQiLCJfcmVzb2x2ZSIsIl9jcm9zc29yaWdpbiIsIlNWR19YTUwiLCJ0cmltIiwiYnRvYSIsInVuZXNjYXBlIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiX2xvYWRTdmciLCJ0ZW1wSW1hZ2UiLCJzdmdXaWR0aCIsInN2Z0hlaWdodCIsImNhbnZhcyIsImdldENvbnRleHQiLCJkcmF3SW1hZ2UiLCJnZXRTaXplIiwic3ZnU3RyaW5nIiwic2l6ZU1hdGNoIiwiU1ZHX1NJWkUiLCJzaXplIiwicGFyc2VGbG9hdCIsIlZpZGVvUmVzb3VyY2UiLCJ2aWRlb0VsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJmaXJzdFNyYyIsInNvdXJjZUVsZW1lbnQiLCJtaW1lIiwiYmFzZVNyYyIsInNwbGl0Iiwic2hpZnQiLCJleHQiLCJzbGljZSIsImxhc3RJbmRleE9mIiwiTUlNRV9UWVBFUyIsImFwcGVuZENoaWxkIiwiX2F1dG9VcGRhdGUiLCJfaXNDb25uZWN0ZWRUb1RpY2tlciIsIl91cGRhdGVGUFMiLCJ1cGRhdGVGUFMiLCJfbXNUb05leHRVcGRhdGUiLCJhdXRvUGxheSIsIl9vbkNhblBsYXkiLCJfb25FcnJvciIsIl9kZWx0YVRpbWUiLCJlbGFwc2VkTVMiLCJUaWNrZXIiLCJzaGFyZWQiLCJwbGF5YmFja1JhdGUiLCJmbG9vciIsIkhBVkVfRU5PVUdIX0RBVEEiLCJIQVZFX0ZVVFVSRV9EQVRBIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9vblBsYXlTdGFydCIsIl9vblBsYXlTdG9wIiwiX2lzU291cmNlUmVhZHkiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiX2lzU291cmNlUGxheWluZyIsImN1cnJlbnRUaW1lIiwicGF1c2VkIiwiZW5kZWQiLCJhdXRvVXBkYXRlIiwicGxheSIsInBhdXNlIiwib2d2IiwibW92IiwibTR2IiwiSW1hZ2VCaXRtYXBSZXNvdXJjZSIsIkltYWdlQml0bWFwIiwiX3Jlc291cmNlcyIsIkRlcHRoUmVzb3VyY2UiLCJGcmFtZWJ1ZmZlciIsInN0ZW5jaWwiLCJkZXB0aCIsImRpcnR5Rm9ybWF0IiwiZGlydHlTaXplIiwiZGVwdGhUZXh0dXJlIiwiY29sb3JUZXh0dXJlcyIsImdsRnJhbWVidWZmZXJzIiwiZGlzcG9zZVJ1bm5lciIsIm11bHRpc2FtcGxlIiwiTVNBQV9RVUFMSVRZIiwiTk9ORSIsImFkZENvbG9yVGV4dHVyZSIsIk1JUE1BUF9NT0RFUyIsIk9GRiIsImFkZERlcHRoVGV4dHVyZSIsIkRFUFRIX0NPTVBPTkVOVCIsIlVOU0lHTkVEX1NIT1JUIiwiZW5hYmxlRGVwdGgiLCJlbmFibGVTdGVuY2lsIiwiZGVzdHJveURlcHRoVGV4dHVyZSIsIkJhc2VSZW5kZXJUZXh0dXJlIiwiY2xlYXJDb2xvciIsImZyYW1lYnVmZmVyIiwibWFza1N0YWNrIiwiZmlsdGVyU3RhY2siLCJUZXh0dXJlVXZzIiwieDAiLCJ5MCIsIngxIiwieTEiLCJ4MiIsInkyIiwieDMiLCJ5MyIsInV2c0Zsb2F0MzIiLCJmcmFtZSIsImJhc2VGcmFtZSIsInJvdGF0ZSIsInR3IiwidGgiLCJ3MiIsImgyIiwiY1giLCJ4IiwiY1kiLCJ5IiwiZ3JvdXBEOCIsIk5XIiwidVgiLCJ1WSIsInRvU3RyaW5nIiwiREVGQVVMVF9VVlMiLCJyZW1vdmVBbGxIYW5kbGVycyIsInRleCIsIm9uY2UiLCJUZXh0dXJlIiwib3JpZyIsImFuY2hvciIsIm5vRnJhbWUiLCJSZWN0YW5nbGUiLCJfZnJhbWUiLCJfdXZzIiwidXZNYXRyaXgiLCJfcm90YXRlIiwiTnVtYmVyIiwiZGVmYXVsdEFuY2hvciIsIlBvaW50IiwiX3VwZGF0ZUlEIiwib25CYXNlVGV4dHVyZVVwZGF0ZWQiLCJ1cGRhdGVVdnMiLCJkZXN0cm95QmFzZSIsImNsb25lIiwiY2xvbmVkRnJhbWUiLCJjbG9uZWRPcmlnIiwiY2xvbmVkVGV4dHVyZSIsImdldFJlc29sdXRpb25PZlVybCIsImZyb21VUkwiLCJmcm9tTG9hZGVyIiwiaW1hZ2VVcmwiLCJuYW1lIiwidGV4dHVyZUZyb21DYWNoZSIsInhOb3RGaXQiLCJ5Tm90Rml0IiwicmVsYXRpb25zaGlwIiwiZXJyb3JYIiwiZXJyb3JZIiwiX0VNUFRZIiwiX1dISVRFIiwiY29udGV4dCIsImZpbGxTdHlsZSIsImZpbGxSZWN0IiwiUmVuZGVyVGV4dHVyZSIsImJhc2VSZW5kZXJUZXh0dXJlIiwiZmlsdGVyRnJhbWUiLCJmaWx0ZXJQb29sS2V5IiwicmVzaXplQmFzZVRleHR1cmUiLCJyZXN0IiwiX2kiLCJkZXByZWNhdGlvbiIsIlJlbmRlclRleHR1cmVQb29sIiwidGV4dHVyZU9wdGlvbnMiLCJ0ZXh0dXJlUG9vbCIsImVuYWJsZUZ1bGxTY3JlZW4iLCJfcGl4ZWxzV2lkdGgiLCJfcGl4ZWxzSGVpZ2h0IiwiY3JlYXRlVGV4dHVyZSIsImdldE9wdGltYWxUZXh0dXJlIiwibWluV2lkdGgiLCJtaW5IZWlnaHQiLCJjZWlsIiwibmV4dFBvdzIiLCJyZW5kZXJUZXh0dXJlIiwicG9wIiwiZ2V0RmlsdGVyVGV4dHVyZSIsImlucHV0IiwiZmlsdGVyVGV4dHVyZSIsInJldHVyblRleHR1cmUiLCJyZXR1cm5GaWx0ZXJUZXh0dXJlIiwiY2xlYXIiLCJkZXN0cm95VGV4dHVyZXMiLCJ0ZXh0dXJlcyIsImoiLCJzZXRTY3JlZW5TaXplIiwiU0NSRUVOX0tFWSIsIkF0dHJpYnV0ZSIsIm5vcm1hbGl6ZWQiLCJzdHJpZGUiLCJzdGFydCIsImluc3RhbmNlIiwiVUlEJDQiLCJCdWZmZXIiLCJfc3RhdGljIiwiX2dsQnVmZmVycyIsInN0YXRpYyIsIkJVRkZFUl9UWVBFIiwiRUxFTUVOVF9BUlJBWV9CVUZGRVIiLCJBUlJBWV9CVUZGRVIiLCJtYXAkMSIsIkludDMyQXJyYXkiLCJieXRlU2l6ZU1hcCQxIiwiVUlEJDMiLCJVaW50MTZBcnJheSIsIkdlb21ldHJ5IiwiYnVmZmVycyIsImF0dHJpYnV0ZXMiLCJpbmRleEJ1ZmZlciIsImdsVmVydGV4QXJyYXlPYmplY3RzIiwiaW5zdGFuY2VkIiwiaW5zdGFuY2VDb3VudCIsInJlZkNvdW50IiwiYWRkQXR0cmlidXRlIiwiaWRzIiwiYnVmZmVySW5kZXgiLCJnZXRBdHRyaWJ1dGUiLCJnZXRCdWZmZXIiLCJhZGRJbmRleCIsImdldEluZGV4IiwiaW50ZXJsZWF2ZSIsImFycmF5cyIsInNpemVzIiwiaW50ZXJsZWF2ZWRCdWZmZXIiLCJhdHRyaWJ1dGUiLCJvdXRTaXplIiwidmlld3MiLCJBcnJheUJ1ZmZlciIsIm91dCIsImxpdHRsZU9mZnNldCIsImFycmF5IiwiZ2V0QnVmZmVyVHlwZSIsImludGVybGVhdmVUeXBlZEFycmF5cyIsImdlb21ldHJ5IiwiYXR0cmliIiwibWVyZ2UiLCJnZW9tZXRyaWVzIiwiZ2VvbWV0cnlPdXQiLCJvZmZzZXRzIiwib2Zmc2V0Iiwib2Zmc2V0MiIsImJ1ZmZlckluZGV4VG9Db3VudCIsImluZGV4QnVmZmVyRGF0YSIsIlF1YWQiLCJRdWFkVXYiLCJ2ZXJ0aWNlcyIsInV2cyIsInZlcnRleEJ1ZmZlciIsInV2QnVmZmVyIiwidGFyZ2V0VGV4dHVyZUZyYW1lIiwiZGVzdGluYXRpb25GcmFtZSIsImludmFsaWRhdGUiLCJVSUQkMiIsIlVuaWZvcm1Hcm91cCIsInVuaWZvcm1zIiwiaXNTdGF0aWMiLCJpc1VibyIsImdyb3VwIiwic3luY1VuaWZvcm1zIiwidWJvIiwiVU5JRk9STV9CVUZGRVIiLCJhdXRvTWFuYWdlIiwiX3VibyIsInVib0Zyb20iLCJGaWx0ZXJTdGF0ZSIsImxlZ2FjeSIsInNvdXJjZUZyYW1lIiwiYmluZGluZ1NvdXJjZUZyYW1lIiwiYmluZGluZ0Rlc3RpbmF0aW9uRnJhbWUiLCJmaWx0ZXJzIiwidHJhbnNmb3JtIiwidGVtcFBvaW50cyIsInRlbXBNYXRyaXgkMiIsIk1hdHJpeCIsIkZpbHRlclN5c3RlbSIsImRlZmF1bHRGaWx0ZXJTdGFjayIsInZpZXciLCJzdGF0ZVBvb2wiLCJxdWFkIiwicXVhZFV2IiwidGVtcFJlY3QiLCJhY3RpdmVTdGF0ZSIsImdsb2JhbFVuaWZvcm1zIiwib3V0cHV0RnJhbWUiLCJpbnB1dFNpemUiLCJpbnB1dFBpeGVsIiwiaW5wdXRDbGFtcCIsImZpbHRlckFyZWEiLCJmaWx0ZXJDbGFtcCIsImZvcmNlQ2xlYXIiLCJ1c2VNYXhQYWRkaW5nIiwiX2IiLCJzdGF0ZSIsInJlbmRlclRleHR1cmVTeXN0ZW0iLCJwYWRkaW5nIiwiYXV0b0ZpdCIsIm1pbiIsIm1heCIsImN1cnJlbnQiLCJjb3B5RnJvbSIsImdldEJvdW5kcyIsInBhZCIsInNvdXJjZUZyYW1lUHJvamVjdGVkIiwicHJvamVjdGlvbiIsInRyYW5zZm9ybUFBQkIiLCJpbnZlcnQiLCJmaXQiLCJpbnRlcnNlY3RzIiwicm91bmRGcmFtZSIsImdldE9wdGltYWxGaWx0ZXJUZXh0dXJlIiwibGFzdFN0YXRlIiwiYmxpdCIsIkNMRUFSX01PREVTIiwiQkxFTkQiLCJmbGlwIiwiZmxvcCIsIkNMRUFSIiwiYmluZEFuZENsZWFyIiwiY2xlYXJNb2RlIiwic3RhdGVTeXN0ZW0iLCJhdXRvQ2xlYXIiLCJzdGF0ZUlkIiwiQkxJVCIsImFwcGx5RmlsdGVyIiwib3V0cHV0IiwidVNhbXBsZXIiLCJmaWx0ZXJHbG9iYWxzIiwic2hhZGVyIiwicHJvZ3JhbSIsImF0dHJpYnV0ZURhdGEiLCJhVGV4dHVyZUNvb3JkIiwiZHJhdyIsIkRSQVdfTU9ERVMiLCJUUklBTkdMRVMiLCJUUklBTkdMRV9TVFJJUCIsImNhbGN1bGF0ZVNwcml0ZU1hdHJpeCIsIm91dHB1dE1hdHJpeCIsInNwcml0ZSIsIl90ZXh0dXJlIiwibWFwcGVkTWF0cml4Iiwid29ybGRUcmFuc2Zvcm0iLCJjb3B5VG8iLCJURU1QX01BVFJJWCIsInByZXBlbmQiLCJ0cmFuc2xhdGUiLCJzd2FwIiwiZW1wdHlQb29sIiwibWF0cml4IiwicmVjdCIsImx0IiwibGIiLCJydCIsInJiIiwibGVmdCIsInRvcCIsImJvdHRvbSIsInJpZ2h0IiwiYSIsImMiLCJhYnMiLCJpZGVudGl0eSIsIk9iamVjdFJlbmRlcmVyIiwiZmx1c2giLCJzdG9wIiwicmVuZGVyIiwiX29iamVjdCIsIkJhdGNoU3lzdGVtIiwiZW1wdHlSZW5kZXJlciIsImN1cnJlbnRSZW5kZXJlciIsInNldE9iamVjdFJlbmRlcmVyIiwib2JqZWN0UmVuZGVyZXIiLCJyZXNldCIsImNvcHlCb3VuZFRleHR1cmVzIiwiYXJyIiwibWF4VGV4dHVyZXMiLCJib3VuZFRleHR1cmVzIiwiYm91bmRBcnJheSIsInRleEFycmF5IiwiYmF0Y2hJZCIsImVsZW1lbnRzIiwiY291bnQiLCJsb2MiLCJib3VuZCIsIkNPTlRFWFRfVUlEX0NPVU5URVIiLCJDb250ZXh0U3lzdGVtIiwid2ViR0xWZXJzaW9uIiwiZXh0ZW5zaW9ucyIsInN1cHBvcnRzIiwidWludDMySW5kaWNlcyIsImhhbmRsZUNvbnRleHRMb3N0IiwiaGFuZGxlQ29udGV4dFJlc3RvcmVkIiwiaXNDb250ZXh0TG9zdCIsImNvbnRleHRDaGFuZ2UiLCJDT05URVhUX1VJRCIsImdldEV4dGVuc2lvbiIsInJlc3RvcmVDb250ZXh0IiwiaW5pdEZyb21Db250ZXh0IiwidmFsaWRhdGVDb250ZXh0IiwicnVubmVycyIsImluaXRGcm9tT3B0aW9ucyIsImNyZWF0ZUNvbnRleHQiLCJnZXRFeHRlbnNpb25zIiwiY29tbW9uIiwiYW5pc290cm9waWNGaWx0ZXJpbmciLCJmbG9hdFRleHR1cmVMaW5lYXIiLCJzM3RjIiwiczN0Y19zUkdCIiwiZXRjIiwiZXRjMSIsInB2cnRjIiwiYXRjIiwiYXN0YyIsImRyYXdCdWZmZXJzIiwibG9zZUNvbnRleHQiLCJ2ZXJ0ZXhBcnJheU9iamVjdCIsInVpbnQzMkVsZW1lbnRJbmRleCIsImZsb2F0VGV4dHVyZSIsInRleHR1cmVIYWxmRmxvYXQiLCJ0ZXh0dXJlSGFsZkZsb2F0TGluZWFyIiwiY29sb3JCdWZmZXJGbG9hdCIsInByZXZlbnREZWZhdWx0IiwidXNlUHJvZ3JhbSIsInBvc3RyZW5kZXIiLCJyZW5kZXJpbmdUb1NjcmVlbiIsImdldENvbnRleHRBdHRyaWJ1dGVzIiwiaXNXZWJHbDIiLCJXZWJHTDJSZW5kZXJpbmdDb250ZXh0IiwiaGFzdWludDMyIiwiR0xGcmFtZWJ1ZmZlciIsIm1zYWFCdWZmZXIiLCJibGl0RnJhbWVidWZmZXIiLCJtaXBMZXZlbCIsInRlbXBSZWN0YW5nbGUiLCJGcmFtZWJ1ZmZlclN5c3RlbSIsIm1hbmFnZWRGcmFtZWJ1ZmZlcnMiLCJ1bmtub3duRnJhbWVidWZmZXIiLCJtc2FhU2FtcGxlcyIsInZpZXdwb3J0IiwiaGFzTVJUIiwid3JpdGVEZXB0aFRleHR1cmUiLCJkaXNwb3NlQWxsIiwibmF0aXZlRHJhd0J1ZmZlcnNFeHRlbnNpb25fMSIsIm5hdGl2ZURlcHRoVGV4dHVyZUV4dGVuc2lvbiIsIldFQkdMX0xFR0FDWSIsImFjdGl2ZVRleHR1cmVzIiwiZHJhd0J1ZmZlcnNXRUJHTCIsImdldEludGVybmFsZm9ybWF0UGFyYW1ldGVyIiwiUkVOREVSQlVGRkVSIiwiUkdCQTgiLCJTQU1QTEVTIiwiZmJvIiwiaW5pdEZyYW1lYnVmZmVyIiwiYmluZEZyYW1lYnVmZmVyIiwiRlJBTUVCVUZGRVIiLCJ1cGRhdGVGcmFtZWJ1ZmZlciIsInJlc2l6ZUZyYW1lYnVmZmVyIiwibWlwV2lkdGgiLCJtaXBIZWlnaHQiLCJzZXRWaWV3cG9ydCIsInYiLCJnIiwibWFzayIsIkJVRkZFUl9CSVRTIiwiQ09MT1IiLCJERVBUSCIsImNyZWF0ZUZyYW1lYnVmZmVyIiwiZGV0ZWN0U2FtcGxlcyIsImJpbmRSZW5kZXJidWZmZXIiLCJyZW5kZXJidWZmZXJTdG9yYWdlTXVsdGlzYW1wbGUiLCJERVBUSDI0X1NURU5DSUw4IiwicmVuZGVyYnVmZmVyU3RvcmFnZSIsIkRFUFRIX1NURU5DSUwiLCJwYXJlbnRUZXh0dXJlIiwiY2FuTXVsdGlzYW1wbGVGcmFtZWJ1ZmZlciIsImNyZWF0ZVJlbmRlcmJ1ZmZlciIsImZyYW1lYnVmZmVyUmVuZGVyYnVmZmVyIiwiQ09MT1JfQVRUQUNITUVOVDAiLCJkZWxldGVSZW5kZXJidWZmZXIiLCJmcmFtZWJ1ZmZlclRleHR1cmUyRCIsIkRFUFRIX0FUVEFDSE1FTlQiLCJERVBUSF9TVEVOQ0lMX0FUVEFDSE1FTlQiLCJzYW1wbGVzIiwicmVzIiwic291cmNlUGl4ZWxzIiwiZGVzdFBpeGVscyIsImNvbG9yVGV4dHVyZSIsInNhbWVTaXplIiwiUkVBRF9GUkFNRUJVRkZFUiIsIkNPTE9SX0JVRkZFUl9CSVQiLCJMSU5FQVIiLCJkaXNwb3NlRnJhbWVidWZmZXIiLCJjb250ZXh0TG9zdCIsImRlbGV0ZUZyYW1lYnVmZmVyIiwibGlzdCIsImZvcmNlU3RlbmNpbCIsInciLCJoIiwiYnl0ZVNpemVNYXAiLCJHZW9tZXRyeVN5c3RlbSIsIl9hY3RpdmVHZW9tZXRyeSIsIl9hY3RpdmVWYW8iLCJoYXNWYW8iLCJoYXNJbnN0YW5jZSIsImNhblVzZVVJbnQzMkVsZW1lbnRJbmRleCIsIm1hbmFnZWRHZW9tZXRyaWVzIiwibmF0aXZlVmFvRXh0ZW5zaW9uXzEiLCJjcmVhdGVWZXJ0ZXhBcnJheSIsImNyZWF0ZVZlcnRleEFycmF5T0VTIiwiYmluZFZlcnRleEFycmF5IiwidmFvIiwiYmluZFZlcnRleEFycmF5T0VTIiwiZGVsZXRlVmVydGV4QXJyYXkiLCJkZWxldGVWZXJ0ZXhBcnJheU9FUyIsImluc3RhbmNlRXh0XzEiLCJ2ZXJ0ZXhBdHRyaWJEaXZpc29yIiwidmVydGV4QXR0cmliRGl2aXNvckFOR0xFIiwiZHJhd0VsZW1lbnRzSW5zdGFuY2VkIiwiZSIsImRyYXdFbGVtZW50c0luc3RhbmNlZEFOR0xFIiwiZHJhd0FycmF5c0luc3RhbmNlZCIsImRyYXdBcnJheXNJbnN0YW5jZWRBTkdMRSIsInZhb3MiLCJpbmNSZWZDb3VudCIsImluaXRHZW9tZXRyeVZhbyIsImFjdGl2YXRlVmFvIiwidXBkYXRlQnVmZmVycyIsImJ1ZmZlclN5c3RlbSIsImNoZWNrQ29tcGF0aWJpbGl0eSIsImdlb21ldHJ5QXR0cmlidXRlcyIsInNoYWRlckF0dHJpYnV0ZXMiLCJnZXRTaWduYXR1cmUiLCJhdHRyaWJzIiwic3RyaW5ncyIsImxvY2F0aW9uIiwiam9pbiIsImdsUHJvZ3JhbXMiLCJnZW5lcmF0ZVByb2dyYW0iLCJzaWduYXR1cmUiLCJ2YW9PYmplY3RIYXNoIiwidGVtcFN0cmlkZSIsInRlbXBTdGFydCIsImF0dHJpYlNpemUiLCJkaXNwb3NlR2VvbWV0cnkiLCJidWYiLCJ2YW9JZCIsImxhc3RCdWZmZXIiLCJnbEJ1ZmZlciIsImVuYWJsZVZlcnRleEF0dHJpYkFycmF5IiwidmVydGV4QXR0cmliUG9pbnRlciIsImJ5dGVTaXplIiwiQllURVNfUEVSX0VMRU1FTlQiLCJnbFR5cGUiLCJVTlNJR05FRF9JTlQiLCJkcmF3RWxlbWVudHMiLCJkcmF3QXJyYXlzIiwiTWFza0RhdGEiLCJtYXNrT2JqZWN0IiwiTUFTS19UWVBFUyIsImF1dG9EZXRlY3QiLCJwb29sZWQiLCJpc01hc2tEYXRhIiwiRklMVEVSX01VTFRJU0FNUExFIiwiZW5hYmxlZCIsIl9maWx0ZXJzIiwiX3N0ZW5jaWxDb3VudGVyIiwiX3NjaXNzb3JDb3VudGVyIiwiX3NjaXNzb3JSZWN0IiwiX3NjaXNzb3JSZWN0TG9jYWwiLCJfdGFyZ2V0IiwiY29weUNvdW50ZXJzT3JSZXNldCIsIm1hc2tBYm92ZSIsImNvbXBpbGVTaGFkZXIiLCJjcmVhdGVTaGFkZXIiLCJzaGFkZXJTb3VyY2UiLCJsb2dQcmV0dHlTaGFkZXJFcnJvciIsInNoYWRlclNyYyIsImdldFNoYWRlclNvdXJjZSIsImxpbmUiLCJzaGFkZXJMb2ciLCJnZXRTaGFkZXJJbmZvTG9nIiwic3BsaXRTaGFkZXIiLCJkZWR1cGUiLCJsaW5lTnVtYmVycyIsInJlcGxhY2UiLCJsb2dBcmdzIiwiZm9yRWFjaCIsIm51bWJlciIsImZyYWdtZW50U291cmNlVG9Mb2ciLCJlcnJvciIsImdyb3VwQ29sbGFwc2VkIiwiZ3JvdXBFbmQiLCJib29sZWFuQXJyYXkiLCJkZWZhdWx0VmFsdWUiLCJtYXhGcmFnbWVudFByZWNpc2lvbiIsInVua25vd25Db250ZXh0IiwiZ2V0VGVzdENvbnRleHQiLCJzZXRQcmVjaXNpb24iLCJyZXF1ZXN0ZWRQcmVjaXNpb24iLCJtYXhTdXBwb3J0ZWRQcmVjaXNpb24iLCJzdWJzdHJpbmciLCJwcmVjaXNpb24iLCJQUkVDSVNJT04iLCJISUdIIiwiTUVESVVNIiwiR0xTTF9UT19TSVpFIiwiZmxvYXQiLCJ2ZWMyIiwidmVjMyIsInZlYzQiLCJpbnQiLCJpdmVjMiIsIml2ZWMzIiwiaXZlYzQiLCJ1aW50IiwidXZlYzIiLCJ1dmVjMyIsInV2ZWM0IiwiYm9vbCIsImJ2ZWMyIiwiYnZlYzMiLCJidmVjNCIsIm1hdDIiLCJtYXQzIiwibWF0NCIsInNhbXBsZXIyRCIsIm1hcFNpemUiLCJHTF9UQUJMRSIsIkdMX1RPX0dMU0xfVFlQRVMiLCJGTE9BVF9WRUMyIiwiRkxPQVRfVkVDMyIsIkZMT0FUX1ZFQzQiLCJJTlQiLCJJTlRfVkVDMiIsIklOVF9WRUMzIiwiSU5UX1ZFQzQiLCJVTlNJR05FRF9JTlRfVkVDMiIsIlVOU0lHTkVEX0lOVF9WRUMzIiwiVU5TSUdORURfSU5UX1ZFQzQiLCJCT09MIiwiQk9PTF9WRUMyIiwiQk9PTF9WRUMzIiwiQk9PTF9WRUM0IiwiRkxPQVRfTUFUMiIsIkZMT0FUX01BVDMiLCJGTE9BVF9NQVQ0IiwiU0FNUExFUl8yRCIsIklOVF9TQU1QTEVSXzJEIiwiVU5TSUdORURfSU5UX1NBTVBMRVJfMkQiLCJTQU1QTEVSX0NVQkUiLCJJTlRfU0FNUExFUl9DVUJFIiwiVU5TSUdORURfSU5UX1NBTVBMRVJfQ1VCRSIsIlNBTVBMRVJfMkRfQVJSQVkiLCJJTlRfU0FNUExFUl8yRF9BUlJBWSIsIlVOU0lHTkVEX0lOVF9TQU1QTEVSXzJEX0FSUkFZIiwibWFwVHlwZSIsInR5cGVOYW1lcyIsInRuIiwidW5zYWZlRXZhbCIsInVuaWZvcm1QYXJzZXJzIiwiY29kZSIsInVuaWZvcm0iLCJjb2RlVWJvIiwiR0xTTF9UT19TSU5HTEVfU0VUVEVSU19DQUNIRUQiLCJzYW1wbGVyQ3ViZSIsInNhbXBsZXIyREFycmF5IiwiR0xTTF9UT19BUlJBWV9TRVRURVJTIiwiZnJhZ1RlbXBsYXRlIiwiZ2VuZXJhdGVJZlRlc3RTcmMiLCJtYXhJZnMiLCJjaGVja01heElmU3RhdGVtZW50c0luU2hhZGVyIiwiRlJBR01FTlRfU0hBREVSIiwiZnJhZ21lbnRTcmMiLCJnZXRTaGFkZXJQYXJhbWV0ZXIiLCJDT01QSUxFX1NUQVRVUyIsIlVJRCQxIiwibmFtZUNhY2hlIiwiUHJvZ3JhbSIsInZlcnRleFNyYyIsImRlZmF1bHRWZXJ0ZXhTcmMiLCJkZWZhdWx0RnJhZ21lbnRTcmMiLCJQUkVDSVNJT05fVkVSVEVYIiwiUFJFQ0lTSU9OX0ZSQUdNRU5UIiwiZ2V0U2hhZGVyUHJlY2lzaW9uRm9ybWF0Iiwic2hhZGVyRnJhZ21lbnQiLCJISUdIX0ZMT0FUIiwiZ2V0TWF4RnJhZ21lbnRQcmVjaXNpb24iLCJQcm9ncmFtQ2FjaGUiLCJTaGFkZXIiLCJ1bmlmb3JtQmluZENvdW50IiwidW5pZm9ybUdyb3VwIiwiY2hlY2tVbmlmb3JtRXhpc3RzIiwiU3RhdGUiLCJibGVuZE1vZGUiLCJCTEVORF9NT0RFUyIsIk5PUk1BTCIsInBvbHlnb25PZmZzZXQiLCJibGVuZCIsImRlcHRoTWFzayIsIl9ibGVuZE1vZGUiLCJfcG9seWdvbk9mZnNldCIsImNsb2Nrd2lzZUZyb250RmFjZSIsImN1bGxpbmciLCJmb3IyZCIsImRlcHRoVGVzdCIsIkZpbHRlciIsIkZJTFRFUl9SRVNPTFVUSU9OIiwiZmlsdGVyTWFuYWdlciIsIl9jdXJyZW50U3RhdGUiLCJfcmVzb2x1dGlvbiIsInRlbXBNYXQiLCJUZXh0dXJlTWF0cml4IiwiY2xhbXBNYXJnaW4iLCJtYXBDb29yZCIsInVDbGFtcEZyYW1lIiwidUNsYW1wT2Zmc2V0IiwiX3RleHR1cmVJRCIsImNsYW1wT2Zmc2V0IiwiaXNTaW1wbGUiLCJtdWx0aXBseVV2cyIsIm1hdCIsInR4IiwidHkiLCJmb3JjZVVwZGF0ZSIsImFwcGVuZCIsInRleEJhc2UiLCJtYXJnaW4iLCJTcHJpdGVNYXNrRmlsdGVyIiwibWFza1Nwcml0ZSIsIm1hc2tNYXRyaXgiLCJfbWFza1Nwcml0ZSIsInJlbmRlcmFibGUiLCJucG1BbHBoYSIsIm90aGVyTWF0cml4IiwiYWxwaGEiLCJ3b3JsZEFscGhhIiwibWFza0NsYW1wIiwiTWFza1N5c3RlbSIsImVuYWJsZVNjaXNzb3IiLCJhbHBoYU1hc2tQb29sIiwibWFza0RhdGFQb29sIiwiYWxwaGFNYXNrSW5kZXgiLCJzZXRNYXNrU3RhY2siLCJzY2lzc29yIiwibWFza0RhdGFPclRhcmdldCIsIm1hc2tEYXRhIiwiZGV0ZWN0IiwiU1BSSVRFIiwiU0NJU1NPUiIsIlNURU5DSUwiLCJwdXNoU3ByaXRlTWFzayIsInBvcFNwcml0ZU1hc2siLCJtYXNrQ3VycmVudCIsImlzU3ByaXRlIiwidGVzdFNjaXNzb3IiLCJhbHBoYU1hc2tGaWx0ZXIiLCJzdGFzaEZpbHRlckFyZWEiLCJBYnN0cmFjdE1hc2tTeXN0ZW0iLCJnbENvbnN0IiwiZ2V0U3RhY2tMZW5ndGgiLCJjdXJTdGFja0xlbiIsIm5ld1N0YWNrTGVuIiwiZGlzYWJsZSIsImVuYWJsZSIsIl91c2VDdXJyZW50IiwidGVtcE1hdHJpeCQxIiwiU2Npc3NvclN5c3RlbSIsIldlYkdMUmVuZGVyaW5nQ29udGV4dCIsIlNDSVNTT1JfVEVTVCIsImNhbGNTY2lzc29yUmVjdCIsInByZXZEYXRhIiwicm91bmRGcmFtZVRvUGl4ZWxzIiwiaXNNYXRyaXhSb3RhdGVkIiwiaXNGYXN0UmVjdCIsIlN0ZW5jaWxTeXN0ZW0iLCJTVEVOQ0lMX1RFU1QiLCJwcmV2TWFza0NvdW50IiwiY2xlYXJTdGVuY2lsIiwiU1RFTkNJTF9CVUZGRVJfQklUIiwiY29sb3JNYXNrIiwic3RlbmNpbEZ1bmMiLCJFUVVBTCIsInN0ZW5jaWxPcCIsIktFRVAiLCJJTkNSIiwiYmF0Y2giLCJERUNSIiwiUHJvamVjdGlvblN5c3RlbSIsImRlZmF1bHRGcmFtZSIsInByb2plY3Rpb25NYXRyaXgiLCJyb290IiwiY2FsY3VsYXRlUHJvamVjdGlvbiIsInN5bmNVbmlmb3JtR3JvdXAiLCJnbG9iYWxzIiwiX2Rlc3RpbmF0aW9uRnJhbWUiLCJwbSIsInNpZ24iLCJzZXRUcmFuc2Zvcm0iLCJfbWF0cml4IiwidGVtcFJlY3QyIiwiUmVuZGVyVGV4dHVyZVN5c3RlbSIsIl9iYWNrZ3JvdW5kQ29sb3JSZ2JhIiwiZGVmYXVsdE1hc2tTdGFjayIsInZpZXdwb3J0RnJhbWUiLCJzY3JlZW4iLCJjbGVhck1hc2siLCJ1Ym9VcGRhdGUiLCJfdWQiLCJfdXYiLCJfc3luY0RhdGEiLCJVQk9fVE9fU0lOR0xFX1NFVFRFUlMiLCJHTFNMX1RPX1NURDQwX1NJWkUiLCJjcmVhdGVVQk9FbGVtZW50cyIsInVuaWZvcm1EYXRhIiwidWJvRWxlbWVudHMiLCJkYXRhTGVuIiwiY2h1bmtTaXplIiwidWJvRWxlbWVudCIsImxpbmVVcFZhbHVlIiwiZ2V0VUJPRGF0YSIsInVzZWRVbmlmb3JtRGF0YXMiLCJzb3J0IiwiZ2VuZXJhdGVVbmlmb3JtQnVmZmVyU3luYyIsInN5bmNGdW5jIiwiZnVuY0ZyYWdtZW50cyIsInBhcnNlZCIsInVuaWZvcm1QYXJzZXIiLCJzaXplXzEiLCJyb3dTaXplIiwiZWxlbWVudFNpemUiLCJyZW1haW5kZXIiLCJ0ZW1wbGF0ZSIsIkZ1bmN0aW9uIiwiR0xQcm9ncmFtIiwidW5pZm9ybUdyb3VwcyIsInVuaWZvcm1EaXJ0eUdyb3VwcyIsInVuaWZvcm1CdWZmZXJCaW5kaW5ncyIsImdsVmVydFNoYWRlciIsIlZFUlRFWF9TSEFERVIiLCJnbEZyYWdTaGFkZXIiLCJ3ZWJHTFByb2dyYW0iLCJjcmVhdGVQcm9ncmFtIiwiYXR0YWNoU2hhZGVyIiwibGlua1Byb2dyYW0iLCJnZXRQcm9ncmFtUGFyYW1ldGVyIiwiTElOS19TVEFUVVMiLCJ2ZXJ0ZXhTaGFkZXIiLCJmcmFnbWVudFNoYWRlciIsImdldFByb2dyYW1JbmZvTG9nIiwibG9nUHJvZ3JhbUVycm9yIiwidG90YWxBdHRyaWJ1dGVzIiwiQUNUSVZFX0FUVFJJQlVURVMiLCJhdHRyaWJEYXRhIiwiZ2V0QWN0aXZlQXR0cmliIiwiZ2V0QXR0cmliTG9jYXRpb24iLCJnZXRBdHRyaWJ1dGVEYXRhIiwidG90YWxVbmlmb3JtcyIsIkFDVElWRV9VTklGT1JNUyIsImdldEFjdGl2ZVVuaWZvcm0iLCJtYXRjaCIsImdldFVuaWZvcm1EYXRhIiwiYmluZEF0dHJpYkxvY2F0aW9uIiwiZGVsZXRlU2hhZGVyIiwiZ2V0VW5pZm9ybUxvY2F0aW9uIiwiVUlEIiwiZGVmYXVsdFN5bmNEYXRhIiwidGV4dHVyZUNvdW50IiwidWJvQ291bnQiLCJTaGFkZXJTeXN0ZW0iLCJzeXN0ZW1DaGVjayIsImNhY2hlIiwiX3Vib0NhY2hlIiwiZnVuYyIsInVuc2FmZUV2YWxTdXBwb3J0ZWQiLCJkb250U3luYyIsImdsUHJvZ3JhbSIsInNldFVuaWZvcm1zIiwic3luY0RhdGEiLCJnZXRHbFByb2dyYW0iLCJjcmVhdGVTeW5jR3JvdXBzIiwiZ2VuZXJhdGVVbmlmb3Jtc1N5bmMiLCJzeW5jVW5pZm9ybUJ1ZmZlckdyb3VwIiwiY3JlYXRlU3luY0J1ZmZlckdyb3VwIiwiYmluZEJ1ZmZlckJhc2UiLCJ1bmlmb3JtQmxvY2tJbmRleCIsImdldFVuaWZvcm1CbG9ja0luZGV4IiwidW5pZm9ybUJsb2NrQmluZGluZyIsInVib0RhdGEiLCJwcmVGaXgiLCJTdGF0ZVN5c3RlbSIsIl9ibGVuZEVxIiwic2V0QmxlbmQiLCJzZXRPZmZzZXQiLCJzZXRDdWxsRmFjZSIsInNldERlcHRoVGVzdCIsInNldEZyb250RmFjZSIsInNldERlcHRoTWFzayIsImNoZWNrcyIsImRlZmF1bHRTdGF0ZSIsImJsZW5kTW9kZXMiLCJPTkUiLCJPTkVfTUlOVVNfU1JDX0FMUEhBIiwiQUREIiwiTVVMVElQTFkiLCJEU1RfQ09MT1IiLCJTQ1JFRU4iLCJPTkVfTUlOVVNfU1JDX0NPTE9SIiwiT1ZFUkxBWSIsIkRBUktFTiIsIkxJR0hURU4iLCJDT0xPUl9ET0RHRSIsIkNPTE9SX0JVUk4iLCJIQVJEX0xJR0hUIiwiU09GVF9MSUdIVCIsIkRJRkZFUkVOQ0UiLCJFWENMVVNJT04iLCJIVUUiLCJTQVRVUkFUSU9OIiwiTFVNSU5PU0lUWSIsIk5PUk1BTF9OUE0iLCJTUkNfQUxQSEEiLCJBRERfTlBNIiwiU0NSRUVOX05QTSIsIlNSQ19JTiIsIkRTVF9BTFBIQSIsIlpFUk8iLCJTUkNfT1VUIiwiT05FX01JTlVTX0RTVF9BTFBIQSIsIlNSQ19BVE9QIiwiRFNUX09WRVIiLCJEU1RfSU4iLCJEU1RfT1VUIiwiRFNUX0FUT1AiLCJYT1IiLCJTVUJUUkFDVCIsIkZVTkNfUkVWRVJTRV9TVUJUUkFDVCIsIkZVTkNfQUREIiwibWFwV2ViR0xCbGVuZE1vZGVzVG9QaXhpIiwiZGlmZiIsImZvcmNlU3RhdGUiLCJ1cGRhdGVDaGVjayIsImNoZWNrQmxlbmRNb2RlIiwiY2hlY2tQb2x5Z29uT2Zmc2V0IiwiUE9MWUdPTl9PRkZTRVRfRklMTCIsIkRFUFRIX1RFU1QiLCJDVUxMX0ZBQ0UiLCJmcm9udEZhY2UiLCJzZXRCbGVuZE1vZGUiLCJibGVuZEZ1bmMiLCJibGVuZEZ1bmNTZXBhcmF0ZSIsImJsZW5kRXF1YXRpb25TZXBhcmF0ZSIsInNldFBvbHlnb25PZmZzZXQiLCJVTlBBQ0tfRkxJUF9ZX1dFQkdMIiwic3lzdGVtIiwiVGV4dHVyZUdDU3lzdGVtIiwiY2hlY2tDb3VudCIsIm1heElkbGUiLCJHQ19NQVhfSURMRSIsImNoZWNrQ291bnRNYXgiLCJHQ19NQVhfQ0hFQ0tfQ09VTlQiLCJHQ19NT0RFIiwiR0NfTU9ERVMiLCJNQU5VQUwiLCJydW4iLCJ0bSIsIm1hbmFnZWRUZXh0dXJlcyIsIndhc1JlbW92ZWQiLCJkZXN0cm95VGV4dHVyZSIsInVubG9hZCIsImRpc3BsYXlPYmplY3QiLCJjaGlsZHJlbiIsIkdMVGV4dHVyZSIsInNhbXBsZXJUeXBlIiwiVGV4dHVyZVN5c3RlbSIsImN1cnJlbnRMb2NhdGlvbiIsIl91bmtub3duQm91bmRUZXh0dXJlcyIsInVua25vd25UZXh0dXJlIiwiaGFzSW50ZWdlclRleHR1cmVzIiwiaW50ZXJuYWxGb3JtYXRzIiwiX2MiLCJfZCIsIl9lIiwiX2YiLCJfZyIsIl9oIiwiX2oiLCJfayIsIl9sIiwiX20iLCJfbyIsIl9wIiwiX3EiLCJfciIsIl9zIiwiX3QiLCJfdSIsIl92IiwiX3ciLCJfeCIsInRhYmxlIiwiUkdCIiwiUkdCOCIsIlJHIiwiUkc4IiwiUkVEIiwiUjgiLCJSR0JBX0lOVEVHRVIiLCJSR0JBOFVJIiwiUkdCX0lOVEVHRVIiLCJSR0I4VUkiLCJSR19JTlRFR0VSIiwiUkc4VUkiLCJSRURfSU5URUdFUiIsIlI4VUkiLCJBTFBIQSIsIkxVTUlOQU5DRSIsIkxVTUlOQU5DRV9BTFBIQSIsIkJZVEUiLCJSR0JBOF9TTk9STSIsIlJHQjhfU05PUk0iLCJSRzhfU05PUk0iLCJSOF9TTk9STSIsIlJHQkE4SSIsIlJHQjhJIiwiUkc4SSIsIlI4SSIsIlJHQkExNlVJIiwiUkdCMTZVSSIsIlJHMTZVSSIsIlIxNlVJIiwiREVQVEhfQ09NUE9ORU5UMTYiLCJTSE9SVCIsIlJHQkExNkkiLCJSR0IxNkkiLCJSRzE2SSIsIlIxNkkiLCJSR0JBMzJVSSIsIlJHQjMyVUkiLCJSRzMyVUkiLCJSMzJVSSIsIkRFUFRIX0NPTVBPTkVOVDI0IiwiUkdCQTMySSIsIlJHQjMySSIsIlJHMzJJIiwiUjMySSIsIlJHQkEzMkYiLCJSR0IzMkYiLCJSRzMyRiIsIlIzMkYiLCJERVBUSF9DT01QT05FTlQzMkYiLCJIQUxGX0ZMT0FUIiwiUkdCQTE2RiIsIlJHQjE2RiIsIlJHMTZGIiwiUjE2RiIsIlVOU0lHTkVEX1NIT1JUXzVfNl81IiwiUkdCNTY1IiwiVU5TSUdORURfU0hPUlRfNF80XzRfNCIsIlJHQkE0IiwiVU5TSUdORURfU0hPUlRfNV81XzVfMSIsIlJHQjVfQTEiLCJVTlNJR05FRF9JTlRfMl8xMF8xMF8xMF9SRVYiLCJSR0IxMF9BMiIsIlJHQjEwX0EyVUkiLCJVTlNJR05FRF9JTlRfMTBGXzExRl8xMUZfUkVWIiwiUjExRl9HMTFGX0IxMEYiLCJVTlNJR05FRF9JTlRfNV85XzlfOV9SRVYiLCJSR0I5X0U1IiwiVU5TSUdORURfSU5UXzI0XzgiLCJGTE9BVF8zMl9VTlNJR05FRF9JTlRfMjRfOF9SRVYiLCJERVBUSDMyRl9TVEVOQ0lMOCIsIm1hcFR5cGVBbmRGb3JtYXRUb0ludGVybmFsRm9ybWF0IiwiZ2V0UGFyYW1ldGVyIiwiTUFYX1RFWFRVUkVfSU1BR0VfVU5JVFMiLCJlbXB0eVRleHR1cmVzIiwiZW1wdHlUZXh0dXJlMkQiLCJiaW5kVGV4dHVyZSIsInRleFBhcmFtZXRlcmkiLCJURVhUVVJFX01BR19GSUxURVIiLCJURVhUVVJFX01JTl9GSUxURVIiLCJ0ZXh0dXJlR0MiLCJpbml0VGV4dHVyZSIsImFjdGl2ZVRleHR1cmUiLCJURVhUVVJFMCIsInVwZGF0ZVRleHR1cmUiLCJlbnN1cmVTYW1wbGVyVHlwZSIsIlNBTVBMRVJfVFlQRVMiLCJpbml0VGV4dHVyZVR5cGUiLCJ1cGRhdGVUZXh0dXJlU3R5bGUiLCJza2lwUmVtb3ZlIiwiZGVsZXRlVGV4dHVyZSIsInJlbW92ZUl0ZW1zIiwiUE9XMiIsIldSQVBfTU9ERVMiLCJDTEFNUCIsIk9OX01BTlVBTCIsImdlbmVyYXRlTWlwbWFwIiwiVEVYVFVSRV9XUkFQX1MiLCJURVhUVVJFX1dSQVBfVCIsIkxJTkVBUl9NSVBNQVBfTElORUFSIiwiTkVBUkVTVF9NSVBNQVBfTkVBUkVTVCIsImFuaXNvdHJvcGljRXh0IiwibGV2ZWwiLCJNQVhfVEVYVFVSRV9NQVhfQU5JU09UUk9QWV9FWFQiLCJ0ZXhQYXJhbWV0ZXJmIiwiVEVYVFVSRV9NQVhfQU5JU09UUk9QWV9FWFQiLCJfc3lzdGVtcyIsInRlbXBNYXRyaXgiLCJBYnN0cmFjdFJlbmRlcmVyIiwiUkVOREVSRVJfVFlQRSIsIlVOS05PV04iLCJSRU5ERVJfT1BUSU9OUyIsInVzZUNvbnRleHRBbHBoYSIsImF1dG9EZW5zaXR5IiwicHJlc2VydmVEcmF3aW5nQnVmZmVyIiwiY2xlYXJCZWZvcmVSZW5kZXIiLCJfYmFja2dyb3VuZENvbG9yIiwiX2JhY2tncm91bmRDb2xvclN0cmluZyIsImJhY2tncm91bmRDb2xvciIsImJhY2tncm91bmRBbHBoYSIsInRyYW5zcGFyZW50IiwiX2xhc3RPYmplY3RSZW5kZXJlZCIsInBsdWdpbnMiLCJpbml0UGx1Z2lucyIsInN0YXRpY01hcCIsIm8iLCJkZXNpcmVkU2NyZWVuV2lkdGgiLCJkZXNpcmVkU2NyZWVuSGVpZ2h0Iiwic2NyZWVuV2lkdGgiLCJzY3JlZW5IZWlnaHQiLCJnZW5lcmF0ZVRleHR1cmUiLCJyZWdpb24iLCJtYW51YWxSZWdpb24iLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJfX3Jlc3QiLCJnZXRMb2NhbEJvdW5kcyIsInNraXBVcGRhdGVUcmFuc2Zvcm0iLCJwYXJlbnQiLCJyZW1vdmVWaWV3IiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwidGhpc0FueSIsIl90ZW1wRGlzcGxheU9iamVjdFBhcmVudCIsImhleDJzdHJpbmciLCJoZXgycmdiIiwiR0xCdWZmZXIiLCJ1cGRhdGVJRCIsImJ5dGVMZW5ndGgiLCJCdWZmZXJTeXN0ZW0iLCJtYW5hZ2VkQnVmZmVycyIsImJvdW5kQnVmZmVyQmFzZXMiLCJjcmVhdGVHTEJ1ZmZlciIsImJpbmRCdWZmZXIiLCJiaW5kQnVmZmVyUmFuZ2UiLCJidWZmZXJTdWJEYXRhIiwiZHJhd1R5cGUiLCJTVEFUSUNfRFJBVyIsIkRZTkFNSUNfRFJBVyIsImJ1ZmZlckRhdGEiLCJkZWxldGVCdWZmZXIiLCJjcmVhdGVCdWZmZXIiLCJSZW5kZXJlciIsInByZXJlbmRlciIsImFkZFN5c3RlbSIsIl9fcGx1Z2lucyIsImFudGlhbGlhcyIsInByZW11bHRpcGxpZWRBbHBoYSIsInBvd2VyUHJlZmVyZW5jZSIsInNheUhlbGxvIiwiaXNXZWJHTFN1cHBvcnRlZCIsIkZSQU1FQlVGRkVSX0JJTkRJTkciLCJEUkFXX0ZSQU1FQlVGRkVSX0JJTkRJTkciLCJEUkFXX0ZSQU1FQlVGRkVSIiwiTE9XIiwiQ2xhc3NSZWYiLCJpc0xvc3QiLCJjYWNoZVBhcmVudCIsImVuYWJsZVRlbXBQYXJlbnQiLCJ1cGRhdGVUcmFuc2Zvcm0iLCJkaXNhYmxlVGVtcFBhcmVudCIsImV4dHJhY3QiLCJyZWdpc3RlclBsdWdpbiIsInBsdWdpbk5hbWUiLCJjdG9yIiwiU3lzdGVtIiwiQmF0Y2hEcmF3Q2FsbCIsIkJhdGNoVGV4dHVyZUFycmF5IiwiVmlld2FibGVCdWZmZXIiLCJzaXplT3JCdWZmZXIiLCJyYXdCaW5hcnlEYXRhIiwidWludDMyVmlldyIsImZsb2F0MzJWaWV3IiwiX2ludDhWaWV3IiwiSW50OEFycmF5IiwiX3VpbnQ4VmlldyIsIl9pbnQxNlZpZXciLCJJbnQxNkFycmF5IiwiX3VpbnQxNlZpZXciLCJfaW50MzJWaWV3Iiwic2l6ZU9mIiwiQWJzdHJhY3RCYXRjaFJlbmRlcmVyIiwic2hhZGVyR2VuZXJhdG9yIiwiZ2VvbWV0cnlDbGFzcyIsInZlcnRleFNpemUiLCJTUFJJVEVfQkFUQ0hfU0laRSIsIl92ZXJ0ZXhDb3VudCIsIl9pbmRleENvdW50IiwiX2J1ZmZlcmVkRWxlbWVudHMiLCJfYnVmZmVyZWRUZXh0dXJlcyIsIl9idWZmZXJTaXplIiwiX3NoYWRlciIsIl9wYWNrZWRHZW9tZXRyaWVzIiwiX3BhY2tlZEdlb21ldHJ5UG9vbFNpemUiLCJfZmx1c2hJZCIsIl9hQnVmZmVycyIsIl9pQnVmZmVycyIsIk1BWF9URVhUVVJFUyIsIm9uUHJlcmVuZGVyIiwiX2RjSW5kZXgiLCJfYUluZGV4IiwiX2lJbmRleCIsIl9hdHRyaWJ1dGVCdWZmZXIiLCJfaW5kZXhCdWZmZXIiLCJfdGVtcEJvdW5kVGV4dHVyZXMiLCJTUFJJVEVfTUFYX1RFWFRVUkVTIiwiZ2VuZXJhdGVTaGFkZXIiLCJpbml0Rmx1c2hCdWZmZXJzIiwiX2RyYXdDYWxsUG9vbCIsIl90ZXh0dXJlQXJyYXlQb29sIiwiTUFYX1NQUklURVMiLCJNQVhfVEEiLCJ2ZXJ0ZXhEYXRhIiwiaW5kaWNlcyIsImJ1aWxkVGV4dHVyZXNBbmREcmF3Q2FsbHMiLCJ0ZXh0dXJlQXJyYXlzIiwidG91Y2giLCJUSUNLIiwiY291bnRUZXhBcnJheXMiLCJidWlsZERyYXdDYWxscyIsImZpbmlzaCIsImRyYXdDYWxscyIsImRjSW5kZXgiLCJhSW5kZXgiLCJpSW5kZXgiLCJkcmF3Q2FsbCIsInNwcml0ZUJsZW5kTW9kZSIsInByZW11bHRpcGx5QmxlbmRNb2RlIiwicGFja0ludGVybGVhdmVkR2VvbWV0cnkiLCJiaW5kQW5kQ2xlYXJUZXhBcnJheSIsInRleHR1cmVTeXN0ZW0iLCJ1cGRhdGVHZW9tZXRyeSIsInBhY2tlZEdlb21ldHJpZXMiLCJhdHRyaWJ1dGVCdWZmZXIiLCJDQU5fVVBMT0FEX1NBTUVfQlVGRkVSIiwiX2J1ZmZlciIsImRyYXdCYXRjaGVzIiwiZGNDb3VudCIsImN1clRleEFycmF5IiwiZ2V0QXR0cmlidXRlQnVmZmVyIiwiZ2V0SW5kZXhCdWZmZXIiLCJyb3VuZGVkUDIiLCJyb3VuZGVkU2l6ZUluZGV4IiwibG9nMiIsInJvdW5kZWRTaXplIiwicGFja2VkVmVydGljZXMiLCJpbmRpY2llcyIsInRleHR1cmVJZCIsImFyZ2IiLCJwcmVtdWx0aXBseVRpbnQiLCJfdGludFJHQiIsIkJhdGNoU2hhZGVyR2VuZXJhdG9yIiwicHJvZ3JhbUNhY2hlIiwiZGVmYXVsdEdyb3VwQ2FjaGUiLCJzYW1wbGVWYWx1ZXMiLCJ1U2FtcGxlcnMiLCJnZW5lcmF0ZVNhbXBsZVNyYyIsInRpbnQiLCJ0cmFuc2xhdGlvbk1hdHJpeCIsImRlZmF1bHQiLCJCYXRjaEdlb21ldHJ5IiwiZGVmYXVsdFZlcnRleCIsImRlZmF1bHRGcmFnbWVudCIsIkJhdGNoUGx1Z2luRmFjdG9yeSIsInZlcnRleCIsImZyYWdtZW50IiwiQmF0Y2hQbHVnaW4iLCJCYXRjaFJlbmRlcmVyIiwiX2xvb3BfMSIsInN5c3RlbXMiLCJfbG9vcF8yIiwiSUdMVW5pZm9ybURhdGEiLCJhdXRvRGV0ZWN0UmVuZGVyZXIiLCJkZWZhdWx0RmlsdGVyVmVydGV4Il0sInNvdXJjZVJvb3QiOiIifQ==