/*! For license information please see 1416.6755b0f9fcc8334fa409.js.LICENSE.txt */
"use strict";(self.webpackChunkgear3engine_website=self.webpackChunkgear3engine_website||[]).push([[1416],{1416:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});var r=i(5868),o=i(3663),a=i(8950),n=i(2514),s=i(932),u=function(t,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},u(t,e)};function h(t,e){function i(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var p=function(t){function e(e,i,o,a){void 0===e&&(e=1500),void 0===o&&(o=16384),void 0===a&&(a=!1);var n=t.call(this)||this;return o>16384&&(o=16384),n._properties=[!1,!0,!1,!1,!1],n._maxSize=e,n._batchSize=o,n._buffers=null,n._bufferUpdateIDs=[],n._updateID=0,n.interactiveChildren=!1,n.blendMode=r.BLEND_MODES.NORMAL,n.autoResize=a,n.roundPixels=!0,n.baseTexture=null,n.setProperties(i),n._tint=0,n.tintRgb=new Float32Array(4),n.tint=16777215,n}return h(e,t),e.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,a.hex2rgb(t,this.tintRgb)},enumerable:!1,configurable:!0}),e.prototype.render=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",(function(){return e.onChildrenChange(0)}))),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){for(var e=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID},e.prototype.dispose=function(){if(this._buffers){for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},e}(o.Container),f=function(){function t(t,e,i){this.geometry=new n.Geometry,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(var o=0;o<t.length;++o){var a=t[o];a={attributeName:a.attributeName,size:a.size,uploadFunction:a.uploadFunction,type:a.type||r.TYPES.FLOAT,offset:a.offset},e[o]?this.dynamicProperties.push(a):this.staticProperties.push(a)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return t.prototype.initBuffers=function(){var t=this.geometry,e=0;this.indexBuffer=new n.Buffer(a.createIndicesForQuads(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(var i=0;i<this.dynamicProperties.length;++i)(h=this.dynamicProperties[i]).offset=e,e+=h.size,this.dynamicStride+=h.size;var o=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(o),this.dynamicDataUint32=new Uint32Array(o),this.dynamicBuffer=new n.Buffer(this.dynamicData,!1,!1);var s=0;for(this.staticStride=0,i=0;i<this.staticProperties.length;++i)(h=this.staticProperties[i]).offset=s,s+=h.size,this.staticStride+=h.size;var u=new ArrayBuffer(this.size*this.staticStride*4*4);for(this.staticData=new Float32Array(u),this.staticDataUint32=new Uint32Array(u),this.staticBuffer=new n.Buffer(this.staticData,!0,!1),i=0;i<this.dynamicProperties.length;++i){var h=this.dynamicProperties[i];t.addAttribute(h.attributeName,this.dynamicBuffer,0,h.type===r.TYPES.UNSIGNED_BYTE,h.type,4*this.dynamicStride,4*h.offset)}for(i=0;i<this.staticProperties.length;++i)h=this.staticProperties[i],t.addAttribute(h.attributeName,this.staticBuffer,0,h.type===r.TYPES.UNSIGNED_BYTE,h.type,4*this.staticStride,4*h.offset)},t.prototype.uploadDynamic=function(t,e,i){for(var o=0;o<this.dynamicProperties.length;o++){var a=this.dynamicProperties[o];a.uploadFunction(t,e,i,a.type===r.TYPES.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,a.offset)}this.dynamicBuffer._updateID++},t.prototype.uploadStatic=function(t,e,i){for(var o=0;o<this.staticProperties.length;o++){var a=this.staticProperties[o];a.uploadFunction(t,e,i,a.type===r.TYPES.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,a.offset)}this.staticBuffer._updateID++},t.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},t}(),d=function(t){function e(e){var i=t.call(this,e)||this;return i.shader=null,i.properties=null,i.tempMatrix=new s.Matrix,i.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:i.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:i.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:i.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:i.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:r.TYPES.UNSIGNED_BYTE,uploadFunction:i.uploadTint,offset:0}],i.shader=n.Shader.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),i.state=n.State.for2d(),i}return h(e,t),e.prototype.render=function(t){var e=t.children,i=t._maxSize,r=t._batchSize,o=this.renderer,n=e.length;if(0!==n){n>i&&!t.autoResize&&(n=i);var s=t._buffers;s||(s=t._buffers=this.generateBuffers(t));var u=e[0]._texture.baseTexture;this.state.blendMode=a.correctBlendMode(t.blendMode,u.alphaMode),o.state.set(this.state);var h=o.gl,p=t.worldTransform.copyTo(this.tempMatrix);p.prepend(o.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=p.toArray(!0),this.shader.uniforms.uColor=a.premultiplyRgba(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,u.alphaMode),this.shader.uniforms.uSampler=u,this.renderer.shader.bind(this.shader);for(var f=!1,d=0,l=0;d<n;d+=r,l+=1){var c=n-d;c>r&&(c=r),l>=s.length&&s.push(this._generateOneMoreBuffer(t));var y=s[l];y.uploadDynamic(e,d,c);var v=t._bufferUpdateIDs[l]||0;(f=f||y._updateID<v)&&(y._updateID=t._updateID,y.uploadStatic(e,d,c)),o.geometry.bind(y.geometry),h.drawElements(h.TRIANGLES,6*c,h.UNSIGNED_SHORT,0)}}},e.prototype.generateBuffers=function(t){for(var e=[],i=t._maxSize,r=t._batchSize,o=t._properties,a=0;a<i;a+=r)e.push(new f(this.properties,o,r));return e},e.prototype._generateOneMoreBuffer=function(t){var e=t._batchSize,i=t._properties;return new f(this.properties,i,e)},e.prototype.uploadVertices=function(t,e,i,r,o,a){for(var n=0,s=0,u=0,h=0,p=0;p<i;++p){var f=t[e+p],d=f._texture,l=f.scale.x,c=f.scale.y,y=d.trim,v=d.orig;y?(n=(s=y.x-f.anchor.x*v.width)+y.width,u=(h=y.y-f.anchor.y*v.height)+y.height):(n=v.width*(1-f.anchor.x),s=v.width*-f.anchor.x,u=v.height*(1-f.anchor.y),h=v.height*-f.anchor.y),r[a]=s*l,r[a+1]=h*c,r[a+o]=n*l,r[a+o+1]=h*c,r[a+2*o]=n*l,r[a+2*o+1]=u*c,r[a+3*o]=s*l,r[a+3*o+1]=u*c,a+=4*o}},e.prototype.uploadPosition=function(t,e,i,r,o,a){for(var n=0;n<i;n++){var s=t[e+n].position;r[a]=s.x,r[a+1]=s.y,r[a+o]=s.x,r[a+o+1]=s.y,r[a+2*o]=s.x,r[a+2*o+1]=s.y,r[a+3*o]=s.x,r[a+3*o+1]=s.y,a+=4*o}},e.prototype.uploadRotation=function(t,e,i,r,o,a){for(var n=0;n<i;n++){var s=t[e+n].rotation;r[a]=s,r[a+o]=s,r[a+2*o]=s,r[a+3*o]=s,a+=4*o}},e.prototype.uploadUvs=function(t,e,i,r,o,a){for(var n=0;n<i;++n){var s=t[e+n]._texture._uvs;s?(r[a]=s.x0,r[a+1]=s.y0,r[a+o]=s.x1,r[a+o+1]=s.y1,r[a+2*o]=s.x2,r[a+2*o+1]=s.y2,r[a+3*o]=s.x3,r[a+3*o+1]=s.y3,a+=4*o):(r[a]=0,r[a+1]=0,r[a+o]=0,r[a+o+1]=0,r[a+2*o]=0,r[a+2*o+1]=0,r[a+3*o]=0,r[a+3*o+1]=0,a+=4*o)}},e.prototype.uploadTint=function(t,e,i,r,o,n){for(var s=0;s<i;++s){var u=t[e+s],h=u._texture.baseTexture.alphaMode>0,p=u.alpha,f=p<1&&h?a.premultiplyTint(u._tintRGB,p):u._tintRGB+(255*p<<24);r[n]=f,r[n+o]=f,r[n+2*o]=f,r[n+3*o]=f,n+=4*o}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},e}(n.ObjectRenderer);e.ParticleContainer=p,e.ParticleRenderer=d}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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b0UsQ0FDZCxDQUNKLEVBRUEzQyxFQUFpQnhHLFVBQVU4RCxRQUFVLFdBQ2pDM0QsRUFBT0gsVUFBVThELFFBQVFyRCxLQUFLWCxNQUMxQkEsS0FBSzJHLFNBQ0wzRyxLQUFLMkcsT0FBTzNDLFVBQ1poRSxLQUFLMkcsT0FBUyxNQUVsQjNHLEtBQUs0RyxXQUFhLElBQ3RCLEVBQ09GLENBQ1gsQ0F4U3FDLENBd1NuQ3RILEVBQUtpTSxnQkFFUHRNLEVBQVFxQixrQkFBb0JBLEVBQzVCckIsRUFBUTJILGlCQUFtQkEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9nZWFyM2VuZ2luZS13ZWJzaXRlLy4uLy4uL0dBTUVTLVNJTVVMQVRPUlMtRlVOL2dlYXIzZW5naW5lL3BsdWdpbnMvZzNlLWNhbnZhcy0yZC9ub2RlX21vZHVsZXMvQHBpeGkvcGFydGljbGUtY29udGFpbmVyL2Rpc3QvY2pzL3BhcnRpY2xlLWNvbnRhaW5lci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIEBwaXhpL3BhcnRpY2xlLWNvbnRhaW5lciAtIHY2LjQuMlxuICogQ29tcGlsZWQgVGh1LCAwMiBKdW4gMjAyMiAxNTozOToyNiBVVENcbiAqXG4gKiBAcGl4aS9wYXJ0aWNsZS1jb250YWluZXIgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICogaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZVxuICovXG4ndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5cbnZhciBjb25zdGFudHMgPSByZXF1aXJlKCdAcGl4aS9jb25zdGFudHMnKTtcbnZhciBkaXNwbGF5ID0gcmVxdWlyZSgnQHBpeGkvZGlzcGxheScpO1xudmFyIHV0aWxzID0gcmVxdWlyZSgnQHBpeGkvdXRpbHMnKTtcbnZhciBjb3JlID0gcmVxdWlyZSgnQHBpeGkvY29yZScpO1xudmFyIG1hdGggPSByZXF1aXJlKCdAcGl4aS9tYXRoJyk7XG5cbi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlXHJcbnRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlXHJcbkxpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcblxyXG5USElTIENPREUgSVMgUFJPVklERUQgT04gQU4gKkFTIElTKiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbktJTkQsIEVJVEhFUiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBXSVRIT1VUIExJTUlUQVRJT04gQU5ZIElNUExJRURcclxuV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIFRJVExFLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSxcclxuTUVSQ0hBTlRBQkxJVFkgT1IgTk9OLUlORlJJTkdFTUVOVC5cclxuXHJcblNlZSB0aGUgQXBhY2hlIFZlcnNpb24gMi4wIExpY2Vuc2UgZm9yIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9uc1xyXG5hbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlICovXHJcblxyXG52YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSB7IGlmIChiLmhhc093blByb3BlcnR5KHApKSB7IGRbcF0gPSBiW3BdOyB9IH0gfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufVxuXG4vKipcbiAqIFRoZSBQYXJ0aWNsZUNvbnRhaW5lciBjbGFzcyBpcyBhIHJlYWxseSBmYXN0IHZlcnNpb24gb2YgdGhlIENvbnRhaW5lciBidWlsdCBzb2xlbHkgZm9yIHNwZWVkLFxuICogc28gdXNlIHdoZW4geW91IG5lZWQgYSBsb3Qgb2Ygc3ByaXRlcyBvciBwYXJ0aWNsZXMuXG4gKlxuICogVGhlIHRyYWRlb2ZmIG9mIHRoZSBQYXJ0aWNsZUNvbnRhaW5lciBpcyB0aGF0IG1vc3QgYWR2YW5jZWQgZnVuY3Rpb25hbGl0eSB3aWxsIG5vdCB3b3JrLlxuICogUGFydGljbGVDb250YWluZXIgaW1wbGVtZW50cyB0aGUgYmFzaWMgb2JqZWN0IHRyYW5zZm9ybSAocG9zaXRpb24sIHNjYWxlLCByb3RhdGlvbilcbiAqIGFuZCBzb21lIGFkdmFuY2VkIGZ1bmN0aW9uYWxpdHkgbGlrZSB0aW50IChhcyBvZiB2NC41LjYpLlxuICpcbiAqIE90aGVyIG1vcmUgYWR2YW5jZWQgZnVuY3Rpb25hbGl0eSBsaWtlIG1hc2tpbmcsIGNoaWxkcmVuLCBmaWx0ZXJzLCBldGMgd2lsbCBub3Qgd29yayBvbiBzcHJpdGVzIGluIHRoaXMgYmF0Y2guXG4gKlxuICogSXQncyBleHRyZW1lbHkgZWFzeSB0byB1c2U6XG4gKiBgYGBqc1xuICogbGV0IGNvbnRhaW5lciA9IG5ldyBQYXJ0aWNsZUNvbnRhaW5lcigpO1xuICpcbiAqIGZvciAobGV0IGkgPSAwOyBpIDwgMTAwOyArK2kpXG4gKiB7XG4gKiAgICAgbGV0IHNwcml0ZSA9IFBJWEkuU3ByaXRlLmZyb20oXCJteUltYWdlLnBuZ1wiKTtcbiAqICAgICBjb250YWluZXIuYWRkQ2hpbGQoc3ByaXRlKTtcbiAqIH1cbiAqIGBgYFxuICpcbiAqIEFuZCBoZXJlIHlvdSBoYXZlIGEgaHVuZHJlZCBzcHJpdGVzIHRoYXQgd2lsbCBiZSByZW5kZXJlZCBhdCB0aGUgc3BlZWQgb2YgbGlnaHQuXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG52YXIgUGFydGljbGVDb250YWluZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFBhcnRpY2xlQ29udGFpbmVyLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBtYXhTaXplIC0gVGhlIG1heGltdW0gbnVtYmVyIG9mIHBhcnRpY2xlcyB0aGF0IGNhbiBiZSByZW5kZXJlZCBieSB0aGUgY29udGFpbmVyLlxuICAgICAqICBBZmZlY3RzIHNpemUgb2YgYWxsb2NhdGVkIGJ1ZmZlcnMuXG4gICAgICogQHBhcmFtIHByb3BlcnRpZXMgLSBUaGUgcHJvcGVydGllcyBvZiBjaGlsZHJlbiB0aGF0IHNob3VsZCBiZSB1cGxvYWRlZCB0byB0aGUgZ3B1IGFuZCBhcHBsaWVkLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3Byb3BlcnRpZXMudmVydGljZXM9ZmFsc2VdIC0gV2hlbiB0cnVlLCB2ZXJ0aWNlcyBiZSB1cGxvYWRlZCBhbmQgYXBwbGllZC5cbiAgICAgKiAgICAgICAgICAgICAgICAgIGlmIHNwcml0ZSdzIGAgc2NhbGUvYW5jaG9yL3RyaW0vZnJhbWUvb3JpZ2AgaXMgZHluYW1pYywgcGxlYXNlIHNldCBgdHJ1ZWAuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbcHJvcGVydGllcy5wb3NpdGlvbj10cnVlXSAtIFdoZW4gdHJ1ZSwgcG9zaXRpb24gYmUgdXBsb2FkZWQgYW5kIGFwcGxpZWQuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbcHJvcGVydGllcy5yb3RhdGlvbj1mYWxzZV0gLSBXaGVuIHRydWUsIHJvdGF0aW9uIGJlIHVwbG9hZGVkIGFuZCBhcHBsaWVkLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3Byb3BlcnRpZXMudXZzPWZhbHNlXSAtIFdoZW4gdHJ1ZSwgdXZzIGJlIHVwbG9hZGVkIGFuZCBhcHBsaWVkLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3Byb3BlcnRpZXMudGludD1mYWxzZV0gLSBXaGVuIHRydWUsIGFscGhhIGFuZCB0aW50IGJlIHVwbG9hZGVkIGFuZCBhcHBsaWVkLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbYmF0Y2hTaXplPTE2Mzg0XSAtIE51bWJlciBvZiBwYXJ0aWNsZXMgcGVyIGJhdGNoLiBJZiBsZXNzIHRoYW4gbWF4U2l6ZSwgaXQgdXNlcyBtYXhTaXplIGluc3RlYWQuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbYXV0b1Jlc2l6ZT1mYWxzZV0gLSBJZiB0cnVlLCBjb250YWluZXIgYWxsb2NhdGVzIG1vcmUgYmF0Y2hlcyBpbiBjYXNlXG4gICAgICogIHRoZXJlIGFyZSBtb3JlIHRoYW4gYG1heFNpemVgIHBhcnRpY2xlcy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBQYXJ0aWNsZUNvbnRhaW5lcihtYXhTaXplLCBwcm9wZXJ0aWVzLCBiYXRjaFNpemUsIGF1dG9SZXNpemUpIHtcbiAgICAgICAgaWYgKG1heFNpemUgPT09IHZvaWQgMCkgeyBtYXhTaXplID0gMTUwMDsgfVxuICAgICAgICBpZiAoYmF0Y2hTaXplID09PSB2b2lkIDApIHsgYmF0Y2hTaXplID0gMTYzODQ7IH1cbiAgICAgICAgaWYgKGF1dG9SZXNpemUgPT09IHZvaWQgMCkgeyBhdXRvUmVzaXplID0gZmFsc2U7IH1cbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgLy8gTWFraW5nIHN1cmUgdGhlIGJhdGNoIHNpemUgaXMgdmFsaWRcbiAgICAgICAgLy8gNjU1MzUgaXMgbWF4IHZlcnRleCBpbmRleCBpbiB0aGUgaW5kZXggYnVmZmVyIChzZWUgUGFydGljbGVSZW5kZXJlcilcbiAgICAgICAgLy8gc28gbWF4IG51bWJlciBvZiBwYXJ0aWNsZXMgaXMgNjU1MzYgLyA0ID0gMTYzODRcbiAgICAgICAgdmFyIG1heEJhdGNoU2l6ZSA9IDE2Mzg0O1xuICAgICAgICBpZiAoYmF0Y2hTaXplID4gbWF4QmF0Y2hTaXplKSB7XG4gICAgICAgICAgICBiYXRjaFNpemUgPSBtYXhCYXRjaFNpemU7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMuX3Byb3BlcnRpZXMgPSBbZmFsc2UsIHRydWUsIGZhbHNlLCBmYWxzZSwgZmFsc2VdO1xuICAgICAgICBfdGhpcy5fbWF4U2l6ZSA9IG1heFNpemU7XG4gICAgICAgIF90aGlzLl9iYXRjaFNpemUgPSBiYXRjaFNpemU7XG4gICAgICAgIF90aGlzLl9idWZmZXJzID0gbnVsbDtcbiAgICAgICAgX3RoaXMuX2J1ZmZlclVwZGF0ZUlEcyA9IFtdO1xuICAgICAgICBfdGhpcy5fdXBkYXRlSUQgPSAwO1xuICAgICAgICBfdGhpcy5pbnRlcmFjdGl2ZUNoaWxkcmVuID0gZmFsc2U7XG4gICAgICAgIF90aGlzLmJsZW5kTW9kZSA9IGNvbnN0YW50cy5CTEVORF9NT0RFUy5OT1JNQUw7XG4gICAgICAgIF90aGlzLmF1dG9SZXNpemUgPSBhdXRvUmVzaXplO1xuICAgICAgICBfdGhpcy5yb3VuZFBpeGVscyA9IHRydWU7XG4gICAgICAgIF90aGlzLmJhc2VUZXh0dXJlID0gbnVsbDtcbiAgICAgICAgX3RoaXMuc2V0UHJvcGVydGllcyhwcm9wZXJ0aWVzKTtcbiAgICAgICAgX3RoaXMuX3RpbnQgPSAwO1xuICAgICAgICBfdGhpcy50aW50UmdiID0gbmV3IEZsb2F0MzJBcnJheSg0KTtcbiAgICAgICAgX3RoaXMudGludCA9IDB4RkZGRkZGO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHByaXZhdGUgcHJvcGVydGllcyBhcnJheSB0byBkeW5hbWljIC8gc3RhdGljIGJhc2VkIG9uIHRoZSBwYXNzZWQgcHJvcGVydGllcyBvYmplY3RcbiAgICAgKiBAcGFyYW0gcHJvcGVydGllcyAtIFRoZSBwcm9wZXJ0aWVzIHRvIGJlIHVwbG9hZGVkXG4gICAgICovXG4gICAgUGFydGljbGVDb250YWluZXIucHJvdG90eXBlLnNldFByb3BlcnRpZXMgPSBmdW5jdGlvbiAocHJvcGVydGllcykge1xuICAgICAgICBpZiAocHJvcGVydGllcykge1xuICAgICAgICAgICAgdGhpcy5fcHJvcGVydGllc1swXSA9ICd2ZXJ0aWNlcycgaW4gcHJvcGVydGllcyB8fCAnc2NhbGUnIGluIHByb3BlcnRpZXNcbiAgICAgICAgICAgICAgICA/ICEhcHJvcGVydGllcy52ZXJ0aWNlcyB8fCAhIXByb3BlcnRpZXMuc2NhbGUgOiB0aGlzLl9wcm9wZXJ0aWVzWzBdO1xuICAgICAgICAgICAgdGhpcy5fcHJvcGVydGllc1sxXSA9ICdwb3NpdGlvbicgaW4gcHJvcGVydGllcyA/ICEhcHJvcGVydGllcy5wb3NpdGlvbiA6IHRoaXMuX3Byb3BlcnRpZXNbMV07XG4gICAgICAgICAgICB0aGlzLl9wcm9wZXJ0aWVzWzJdID0gJ3JvdGF0aW9uJyBpbiBwcm9wZXJ0aWVzID8gISFwcm9wZXJ0aWVzLnJvdGF0aW9uIDogdGhpcy5fcHJvcGVydGllc1syXTtcbiAgICAgICAgICAgIHRoaXMuX3Byb3BlcnRpZXNbM10gPSAndXZzJyBpbiBwcm9wZXJ0aWVzID8gISFwcm9wZXJ0aWVzLnV2cyA6IHRoaXMuX3Byb3BlcnRpZXNbM107XG4gICAgICAgICAgICB0aGlzLl9wcm9wZXJ0aWVzWzRdID0gJ3RpbnQnIGluIHByb3BlcnRpZXMgfHwgJ2FscGhhJyBpbiBwcm9wZXJ0aWVzXG4gICAgICAgICAgICAgICAgPyAhIXByb3BlcnRpZXMudGludCB8fCAhIXByb3BlcnRpZXMuYWxwaGEgOiB0aGlzLl9wcm9wZXJ0aWVzWzRdO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBQYXJ0aWNsZUNvbnRhaW5lci5wcm90b3R5cGUudXBkYXRlVHJhbnNmb3JtID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBUT0RPIGRvbid0IG5lZWQgdG8hXG4gICAgICAgIHRoaXMuZGlzcGxheU9iamVjdFVwZGF0ZVRyYW5zZm9ybSgpO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFBhcnRpY2xlQ29udGFpbmVyLnByb3RvdHlwZSwgXCJ0aW50XCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB0aW50IGFwcGxpZWQgdG8gdGhlIGNvbnRhaW5lci4gVGhpcyBpcyBhIGhleCB2YWx1ZS5cbiAgICAgICAgICogQSB2YWx1ZSBvZiAweEZGRkZGRiB3aWxsIHJlbW92ZSBhbnkgdGludCBlZmZlY3QuXG4gICAgICAgICAqIElNUE9SVEFOVDogVGhpcyBpcyBhIFdlYkdMIG9ubHkgZmVhdHVyZSBhbmQgd2lsbCBiZSBpZ25vcmVkIGJ5IHRoZSBjYW52YXMgcmVuZGVyZXIuXG4gICAgICAgICAqIEBkZWZhdWx0IDB4RkZGRkZGXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl90aW50O1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5fdGludCA9IHZhbHVlO1xuICAgICAgICAgICAgdXRpbHMuaGV4MnJnYih2YWx1ZSwgdGhpcy50aW50UmdiKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIC8qKlxuICAgICAqIFJlbmRlcnMgdGhlIGNvbnRhaW5lciB1c2luZyB0aGUgV2ViR0wgcmVuZGVyZXIuXG4gICAgICogQHBhcmFtIHJlbmRlcmVyIC0gVGhlIFdlYkdMIHJlbmRlcmVyLlxuICAgICAqL1xuICAgIFBhcnRpY2xlQ29udGFpbmVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAocmVuZGVyZXIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKCF0aGlzLnZpc2libGUgfHwgdGhpcy53b3JsZEFscGhhIDw9IDAgfHwgIXRoaXMuY2hpbGRyZW4ubGVuZ3RoIHx8ICF0aGlzLnJlbmRlcmFibGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuYmFzZVRleHR1cmUpIHtcbiAgICAgICAgICAgIHRoaXMuYmFzZVRleHR1cmUgPSB0aGlzLmNoaWxkcmVuWzBdLl90ZXh0dXJlLmJhc2VUZXh0dXJlO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmJhc2VUZXh0dXJlLnZhbGlkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5iYXNlVGV4dHVyZS5vbmNlKCd1cGRhdGUnLCBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5vbkNoaWxkcmVuQ2hhbmdlKDApOyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZW5kZXJlci5iYXRjaC5zZXRPYmplY3RSZW5kZXJlcihyZW5kZXJlci5wbHVnaW5zLnBhcnRpY2xlKTtcbiAgICAgICAgcmVuZGVyZXIucGx1Z2lucy5wYXJ0aWNsZS5yZW5kZXIodGhpcyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGZsYWcgdGhhdCBzdGF0aWMgZGF0YSBzaG91bGQgYmUgdXBkYXRlZCB0byB0cnVlXG4gICAgICogQHBhcmFtIHNtYWxsZXN0Q2hpbGRJbmRleCAtIFRoZSBzbWFsbGVzdCBjaGlsZCBpbmRleC5cbiAgICAgKi9cbiAgICBQYXJ0aWNsZUNvbnRhaW5lci5wcm90b3R5cGUub25DaGlsZHJlbkNoYW5nZSA9IGZ1bmN0aW9uIChzbWFsbGVzdENoaWxkSW5kZXgpIHtcbiAgICAgICAgdmFyIGJ1ZmZlckluZGV4ID0gTWF0aC5mbG9vcihzbWFsbGVzdENoaWxkSW5kZXggLyB0aGlzLl9iYXRjaFNpemUpO1xuICAgICAgICB3aGlsZSAodGhpcy5fYnVmZmVyVXBkYXRlSURzLmxlbmd0aCA8IGJ1ZmZlckluZGV4KSB7XG4gICAgICAgICAgICB0aGlzLl9idWZmZXJVcGRhdGVJRHMucHVzaCgwKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9idWZmZXJVcGRhdGVJRHNbYnVmZmVySW5kZXhdID0gKyt0aGlzLl91cGRhdGVJRDtcbiAgICB9O1xuICAgIFBhcnRpY2xlQ29udGFpbmVyLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5fYnVmZmVycykge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9idWZmZXJzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fYnVmZmVyc1tpXS5kZXN0cm95KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9idWZmZXJzID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogRGVzdHJveXMgdGhlIGNvbnRhaW5lclxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9ucyBwYXJhbWV0ZXIuIEEgYm9vbGVhbiB3aWxsIGFjdCBhcyBpZiBhbGwgb3B0aW9uc1xuICAgICAqICBoYXZlIGJlZW4gc2V0IHRvIHRoYXQgdmFsdWVcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmNoaWxkcmVuPWZhbHNlXSAtIGlmIHNldCB0byB0cnVlLCBhbGwgdGhlIGNoaWxkcmVuIHdpbGwgaGF2ZSB0aGVpclxuICAgICAqICBkZXN0cm95IG1ldGhvZCBjYWxsZWQgYXMgd2VsbC4gJ29wdGlvbnMnIHdpbGwgYmUgcGFzc2VkIG9uIHRvIHRob3NlIGNhbGxzLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMudGV4dHVyZT1mYWxzZV0gLSBPbmx5IHVzZWQgZm9yIGNoaWxkIFNwcml0ZXMgaWYgb3B0aW9ucy5jaGlsZHJlbiBpcyBzZXQgdG8gdHJ1ZVxuICAgICAqICBTaG91bGQgaXQgZGVzdHJveSB0aGUgdGV4dHVyZSBvZiB0aGUgY2hpbGQgc3ByaXRlXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5iYXNlVGV4dHVyZT1mYWxzZV0gLSBPbmx5IHVzZWQgZm9yIGNoaWxkIFNwcml0ZXMgaWYgb3B0aW9ucy5jaGlsZHJlbiBpcyBzZXQgdG8gdHJ1ZVxuICAgICAqICBTaG91bGQgaXQgZGVzdHJveSB0aGUgYmFzZSB0ZXh0dXJlIG9mIHRoZSBjaGlsZCBzcHJpdGVcbiAgICAgKi9cbiAgICBQYXJ0aWNsZUNvbnRhaW5lci5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuZGVzdHJveS5jYWxsKHRoaXMsIG9wdGlvbnMpO1xuICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgICAgdGhpcy5fcHJvcGVydGllcyA9IG51bGw7XG4gICAgICAgIHRoaXMuX2J1ZmZlcnMgPSBudWxsO1xuICAgICAgICB0aGlzLl9idWZmZXJVcGRhdGVJRHMgPSBudWxsO1xuICAgIH07XG4gICAgcmV0dXJuIFBhcnRpY2xlQ29udGFpbmVyO1xufShkaXNwbGF5LkNvbnRhaW5lcikpO1xuXG4vKlxuICogQGF1dGhvciBNYXQgR3JvdmVzXG4gKlxuICogQmlnIHRoYW5rcyB0byB0aGUgdmVyeSBjbGV2ZXIgTWF0dCBEZXNMYXVyaWVycyA8bWF0dGRlc2w+IGh0dHBzOi8vZ2l0aHViLmNvbS9tYXR0ZGVzbC9cbiAqIGZvciBjcmVhdGluZyB0aGUgb3JpZ2luYWwgUGl4aUpTIHZlcnNpb24hXG4gKiBBbHNvIGEgdGhhbmtzIHRvIGh0dHBzOi8vZ2l0aHViLmNvbS9iY2hldmFsaWVyIGZvciB0d2Vha2luZyB0aGUgdGludCBhbmQgYWxwaGEgc28gdGhhdFxuICogdGhleSBub3cgc2hhcmUgNCBieXRlcyBvbiB0aGUgdmVydGV4IGJ1ZmZlclxuICpcbiAqIEhlYXZpbHkgaW5zcGlyZWQgYnkgTGliR0RYJ3MgUGFydGljbGVCdWZmZXI6XG4gKiBodHRwczovL2dpdGh1Yi5jb20vbGliZ2R4L2xpYmdkeC9ibG9iL21hc3Rlci9nZHgvc3JjL2NvbS9iYWRsb2dpYy9nZHgvZ3JhcGhpY3MvZzJkL1BhcnRpY2xlQnVmZmVyLmphdmFcbiAqL1xuLyoqXG4gKiBUaGUgcGFydGljbGUgYnVmZmVyIG1hbmFnZXMgdGhlIHN0YXRpYyBhbmQgZHluYW1pYyBidWZmZXJzIGZvciBhIHBhcnRpY2xlIGNvbnRhaW5lci5cbiAqIEBwcml2YXRlXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG52YXIgUGFydGljbGVCdWZmZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtvYmplY3R9IHByb3BlcnRpZXMgLSBUaGUgcHJvcGVydGllcyB0byB1cGxvYWQuXG4gICAgICogQHBhcmFtIHtib29sZWFuW119IGR5bmFtaWNQcm9wZXJ0eUZsYWdzIC0gRmxhZ3MgZm9yIHdoaWNoIHByb3BlcnRpZXMgYXJlIGR5bmFtaWMuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNpemUgLSBUaGUgc2l6ZSBvZiB0aGUgYmF0Y2guXG4gICAgICovXG4gICAgZnVuY3Rpb24gUGFydGljbGVCdWZmZXIocHJvcGVydGllcywgZHluYW1pY1Byb3BlcnR5RmxhZ3MsIHNpemUpIHtcbiAgICAgICAgdGhpcy5nZW9tZXRyeSA9IG5ldyBjb3JlLkdlb21ldHJ5KCk7XG4gICAgICAgIHRoaXMuaW5kZXhCdWZmZXIgPSBudWxsO1xuICAgICAgICB0aGlzLnNpemUgPSBzaXplO1xuICAgICAgICB0aGlzLmR5bmFtaWNQcm9wZXJ0aWVzID0gW107XG4gICAgICAgIHRoaXMuc3RhdGljUHJvcGVydGllcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BlcnRpZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBwcm9wZXJ0eSA9IHByb3BlcnRpZXNbaV07XG4gICAgICAgICAgICAvLyBNYWtlIGNvcHkgb2YgcHJvcGVydGllcyBvYmplY3Qgc28gdGhhdCB3aGVuIHdlIGVkaXQgdGhlIG9mZnNldCBpdCBkb2Vzbid0XG4gICAgICAgICAgICAvLyBjaGFuZ2UgYWxsIG90aGVyIGluc3RhbmNlcyBvZiB0aGUgb2JqZWN0IGxpdGVyYWxcbiAgICAgICAgICAgIHByb3BlcnR5ID0ge1xuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZU5hbWU6IHByb3BlcnR5LmF0dHJpYnV0ZU5hbWUsXG4gICAgICAgICAgICAgICAgc2l6ZTogcHJvcGVydHkuc2l6ZSxcbiAgICAgICAgICAgICAgICB1cGxvYWRGdW5jdGlvbjogcHJvcGVydHkudXBsb2FkRnVuY3Rpb24sXG4gICAgICAgICAgICAgICAgdHlwZTogcHJvcGVydHkudHlwZSB8fCBjb25zdGFudHMuVFlQRVMuRkxPQVQsXG4gICAgICAgICAgICAgICAgb2Zmc2V0OiBwcm9wZXJ0eS5vZmZzZXQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKGR5bmFtaWNQcm9wZXJ0eUZsYWdzW2ldKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5keW5hbWljUHJvcGVydGllcy5wdXNoKHByb3BlcnR5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGljUHJvcGVydGllcy5wdXNoKHByb3BlcnR5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0YXRpY1N0cmlkZSA9IDA7XG4gICAgICAgIHRoaXMuc3RhdGljQnVmZmVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5zdGF0aWNEYXRhID0gbnVsbDtcbiAgICAgICAgdGhpcy5zdGF0aWNEYXRhVWludDMyID0gbnVsbDtcbiAgICAgICAgdGhpcy5keW5hbWljU3RyaWRlID0gMDtcbiAgICAgICAgdGhpcy5keW5hbWljQnVmZmVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5keW5hbWljRGF0YSA9IG51bGw7XG4gICAgICAgIHRoaXMuZHluYW1pY0RhdGFVaW50MzIgPSBudWxsO1xuICAgICAgICB0aGlzLl91cGRhdGVJRCA9IDA7XG4gICAgICAgIHRoaXMuaW5pdEJ1ZmZlcnMoKTtcbiAgICB9XG4gICAgLyoqIFNldHMgdXAgdGhlIHJlbmRlcmVyIGNvbnRleHQgYW5kIG5lY2Vzc2FyeSBidWZmZXJzLiAqL1xuICAgIFBhcnRpY2xlQnVmZmVyLnByb3RvdHlwZS5pbml0QnVmZmVycyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGdlb21ldHJ5ID0gdGhpcy5nZW9tZXRyeTtcbiAgICAgICAgdmFyIGR5bmFtaWNPZmZzZXQgPSAwO1xuICAgICAgICB0aGlzLmluZGV4QnVmZmVyID0gbmV3IGNvcmUuQnVmZmVyKHV0aWxzLmNyZWF0ZUluZGljZXNGb3JRdWFkcyh0aGlzLnNpemUpLCB0cnVlLCB0cnVlKTtcbiAgICAgICAgZ2VvbWV0cnkuYWRkSW5kZXgodGhpcy5pbmRleEJ1ZmZlcik7XG4gICAgICAgIHRoaXMuZHluYW1pY1N0cmlkZSA9IDA7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5keW5hbWljUHJvcGVydGllcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdmFyIHByb3BlcnR5ID0gdGhpcy5keW5hbWljUHJvcGVydGllc1tpXTtcbiAgICAgICAgICAgIHByb3BlcnR5Lm9mZnNldCA9IGR5bmFtaWNPZmZzZXQ7XG4gICAgICAgICAgICBkeW5hbWljT2Zmc2V0ICs9IHByb3BlcnR5LnNpemU7XG4gICAgICAgICAgICB0aGlzLmR5bmFtaWNTdHJpZGUgKz0gcHJvcGVydHkuc2l6ZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZHluQnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKHRoaXMuc2l6ZSAqIHRoaXMuZHluYW1pY1N0cmlkZSAqIDQgKiA0KTtcbiAgICAgICAgdGhpcy5keW5hbWljRGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkoZHluQnVmZmVyKTtcbiAgICAgICAgdGhpcy5keW5hbWljRGF0YVVpbnQzMiA9IG5ldyBVaW50MzJBcnJheShkeW5CdWZmZXIpO1xuICAgICAgICB0aGlzLmR5bmFtaWNCdWZmZXIgPSBuZXcgY29yZS5CdWZmZXIodGhpcy5keW5hbWljRGF0YSwgZmFsc2UsIGZhbHNlKTtcbiAgICAgICAgLy8gc3RhdGljIC8vXG4gICAgICAgIHZhciBzdGF0aWNPZmZzZXQgPSAwO1xuICAgICAgICB0aGlzLnN0YXRpY1N0cmlkZSA9IDA7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zdGF0aWNQcm9wZXJ0aWVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB2YXIgcHJvcGVydHkgPSB0aGlzLnN0YXRpY1Byb3BlcnRpZXNbaV07XG4gICAgICAgICAgICBwcm9wZXJ0eS5vZmZzZXQgPSBzdGF0aWNPZmZzZXQ7XG4gICAgICAgICAgICBzdGF0aWNPZmZzZXQgKz0gcHJvcGVydHkuc2l6ZTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGljU3RyaWRlICs9IHByb3BlcnR5LnNpemU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHN0YXRCdWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIodGhpcy5zaXplICogdGhpcy5zdGF0aWNTdHJpZGUgKiA0ICogNCk7XG4gICAgICAgIHRoaXMuc3RhdGljRGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkoc3RhdEJ1ZmZlcik7XG4gICAgICAgIHRoaXMuc3RhdGljRGF0YVVpbnQzMiA9IG5ldyBVaW50MzJBcnJheShzdGF0QnVmZmVyKTtcbiAgICAgICAgdGhpcy5zdGF0aWNCdWZmZXIgPSBuZXcgY29yZS5CdWZmZXIodGhpcy5zdGF0aWNEYXRhLCB0cnVlLCBmYWxzZSk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5keW5hbWljUHJvcGVydGllcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdmFyIHByb3BlcnR5ID0gdGhpcy5keW5hbWljUHJvcGVydGllc1tpXTtcbiAgICAgICAgICAgIGdlb21ldHJ5LmFkZEF0dHJpYnV0ZShwcm9wZXJ0eS5hdHRyaWJ1dGVOYW1lLCB0aGlzLmR5bmFtaWNCdWZmZXIsIDAsIHByb3BlcnR5LnR5cGUgPT09IGNvbnN0YW50cy5UWVBFUy5VTlNJR05FRF9CWVRFLCBwcm9wZXJ0eS50eXBlLCB0aGlzLmR5bmFtaWNTdHJpZGUgKiA0LCBwcm9wZXJ0eS5vZmZzZXQgKiA0KTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc3RhdGljUHJvcGVydGllcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdmFyIHByb3BlcnR5ID0gdGhpcy5zdGF0aWNQcm9wZXJ0aWVzW2ldO1xuICAgICAgICAgICAgZ2VvbWV0cnkuYWRkQXR0cmlidXRlKHByb3BlcnR5LmF0dHJpYnV0ZU5hbWUsIHRoaXMuc3RhdGljQnVmZmVyLCAwLCBwcm9wZXJ0eS50eXBlID09PSBjb25zdGFudHMuVFlQRVMuVU5TSUdORURfQllURSwgcHJvcGVydHkudHlwZSwgdGhpcy5zdGF0aWNTdHJpZGUgKiA0LCBwcm9wZXJ0eS5vZmZzZXQgKiA0KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogVXBsb2FkcyB0aGUgZHluYW1pYyBwcm9wZXJ0aWVzLlxuICAgICAqIEBwYXJhbSBjaGlsZHJlbiAtIFRoZSBjaGlsZHJlbiB0byB1cGxvYWQuXG4gICAgICogQHBhcmFtIHN0YXJ0SW5kZXggLSBUaGUgaW5kZXggdG8gc3RhcnQgYXQuXG4gICAgICogQHBhcmFtIGFtb3VudCAtIFRoZSBudW1iZXIgdG8gdXBsb2FkLlxuICAgICAqL1xuICAgIFBhcnRpY2xlQnVmZmVyLnByb3RvdHlwZS51cGxvYWREeW5hbWljID0gZnVuY3Rpb24gKGNoaWxkcmVuLCBzdGFydEluZGV4LCBhbW91bnQpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmR5bmFtaWNQcm9wZXJ0aWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgcHJvcGVydHkgPSB0aGlzLmR5bmFtaWNQcm9wZXJ0aWVzW2ldO1xuICAgICAgICAgICAgcHJvcGVydHkudXBsb2FkRnVuY3Rpb24oY2hpbGRyZW4sIHN0YXJ0SW5kZXgsIGFtb3VudCwgcHJvcGVydHkudHlwZSA9PT0gY29uc3RhbnRzLlRZUEVTLlVOU0lHTkVEX0JZVEUgPyB0aGlzLmR5bmFtaWNEYXRhVWludDMyIDogdGhpcy5keW5hbWljRGF0YSwgdGhpcy5keW5hbWljU3RyaWRlLCBwcm9wZXJ0eS5vZmZzZXQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZHluYW1pY0J1ZmZlci5fdXBkYXRlSUQrKztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFVwbG9hZHMgdGhlIHN0YXRpYyBwcm9wZXJ0aWVzLlxuICAgICAqIEBwYXJhbSBjaGlsZHJlbiAtIFRoZSBjaGlsZHJlbiB0byB1cGxvYWQuXG4gICAgICogQHBhcmFtIHN0YXJ0SW5kZXggLSBUaGUgaW5kZXggdG8gc3RhcnQgYXQuXG4gICAgICogQHBhcmFtIGFtb3VudCAtIFRoZSBudW1iZXIgdG8gdXBsb2FkLlxuICAgICAqL1xuICAgIFBhcnRpY2xlQnVmZmVyLnByb3RvdHlwZS51cGxvYWRTdGF0aWMgPSBmdW5jdGlvbiAoY2hpbGRyZW4sIHN0YXJ0SW5kZXgsIGFtb3VudCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc3RhdGljUHJvcGVydGllcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHByb3BlcnR5ID0gdGhpcy5zdGF0aWNQcm9wZXJ0aWVzW2ldO1xuICAgICAgICAgICAgcHJvcGVydHkudXBsb2FkRnVuY3Rpb24oY2hpbGRyZW4sIHN0YXJ0SW5kZXgsIGFtb3VudCwgcHJvcGVydHkudHlwZSA9PT0gY29uc3RhbnRzLlRZUEVTLlVOU0lHTkVEX0JZVEUgPyB0aGlzLnN0YXRpY0RhdGFVaW50MzIgOiB0aGlzLnN0YXRpY0RhdGEsIHRoaXMuc3RhdGljU3RyaWRlLCBwcm9wZXJ0eS5vZmZzZXQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RhdGljQnVmZmVyLl91cGRhdGVJRCsrO1xuICAgIH07XG4gICAgLyoqIERlc3Ryb3lzIHRoZSBQYXJ0aWNsZUJ1ZmZlci4gKi9cbiAgICBQYXJ0aWNsZUJ1ZmZlci5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5pbmRleEJ1ZmZlciA9IG51bGw7XG4gICAgICAgIHRoaXMuZHluYW1pY1Byb3BlcnRpZXMgPSBudWxsO1xuICAgICAgICB0aGlzLmR5bmFtaWNCdWZmZXIgPSBudWxsO1xuICAgICAgICB0aGlzLmR5bmFtaWNEYXRhID0gbnVsbDtcbiAgICAgICAgdGhpcy5keW5hbWljRGF0YVVpbnQzMiA9IG51bGw7XG4gICAgICAgIHRoaXMuc3RhdGljUHJvcGVydGllcyA9IG51bGw7XG4gICAgICAgIHRoaXMuc3RhdGljQnVmZmVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5zdGF0aWNEYXRhID0gbnVsbDtcbiAgICAgICAgdGhpcy5zdGF0aWNEYXRhVWludDMyID0gbnVsbDtcbiAgICAgICAgLy8gYWxsIGJ1ZmZlcnMgYXJlIGRlc3Ryb3llZCBpbnNpZGUgZ2VvbWV0cnlcbiAgICAgICAgdGhpcy5nZW9tZXRyeS5kZXN0cm95KCk7XG4gICAgfTtcbiAgICByZXR1cm4gUGFydGljbGVCdWZmZXI7XG59KCkpO1xuXG52YXIgZnJhZ21lbnQgPSBcInZhcnlpbmcgdmVjMiB2VGV4dHVyZUNvb3JkO1xcbnZhcnlpbmcgdmVjNCB2Q29sb3I7XFxuXFxudW5pZm9ybSBzYW1wbGVyMkQgdVNhbXBsZXI7XFxuXFxudm9pZCBtYWluKHZvaWQpe1xcbiAgICB2ZWM0IGNvbG9yID0gdGV4dHVyZTJEKHVTYW1wbGVyLCB2VGV4dHVyZUNvb3JkKSAqIHZDb2xvcjtcXG4gICAgZ2xfRnJhZ0NvbG9yID0gY29sb3I7XFxufVwiO1xuXG52YXIgdmVydGV4ID0gXCJhdHRyaWJ1dGUgdmVjMiBhVmVydGV4UG9zaXRpb247XFxuYXR0cmlidXRlIHZlYzIgYVRleHR1cmVDb29yZDtcXG5hdHRyaWJ1dGUgdmVjNCBhQ29sb3I7XFxuXFxuYXR0cmlidXRlIHZlYzIgYVBvc2l0aW9uQ29vcmQ7XFxuYXR0cmlidXRlIGZsb2F0IGFSb3RhdGlvbjtcXG5cXG51bmlmb3JtIG1hdDMgdHJhbnNsYXRpb25NYXRyaXg7XFxudW5pZm9ybSB2ZWM0IHVDb2xvcjtcXG5cXG52YXJ5aW5nIHZlYzIgdlRleHR1cmVDb29yZDtcXG52YXJ5aW5nIHZlYzQgdkNvbG9yO1xcblxcbnZvaWQgbWFpbih2b2lkKXtcXG4gICAgZmxvYXQgeCA9IChhVmVydGV4UG9zaXRpb24ueCkgKiBjb3MoYVJvdGF0aW9uKSAtIChhVmVydGV4UG9zaXRpb24ueSkgKiBzaW4oYVJvdGF0aW9uKTtcXG4gICAgZmxvYXQgeSA9IChhVmVydGV4UG9zaXRpb24ueCkgKiBzaW4oYVJvdGF0aW9uKSArIChhVmVydGV4UG9zaXRpb24ueSkgKiBjb3MoYVJvdGF0aW9uKTtcXG5cXG4gICAgdmVjMiB2ID0gdmVjMih4LCB5KTtcXG4gICAgdiA9IHYgKyBhUG9zaXRpb25Db29yZDtcXG5cXG4gICAgZ2xfUG9zaXRpb24gPSB2ZWM0KCh0cmFuc2xhdGlvbk1hdHJpeCAqIHZlYzModiwgMS4wKSkueHksIDAuMCwgMS4wKTtcXG5cXG4gICAgdlRleHR1cmVDb29yZCA9IGFUZXh0dXJlQ29vcmQ7XFxuICAgIHZDb2xvciA9IGFDb2xvciAqIHVDb2xvcjtcXG59XFxuXCI7XG5cbi8qXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXNcbiAqXG4gKiBCaWcgdGhhbmtzIHRvIHRoZSB2ZXJ5IGNsZXZlciBNYXR0IERlc0xhdXJpZXJzIDxtYXR0ZGVzbD4gaHR0cHM6Ly9naXRodWIuY29tL21hdHRkZXNsL1xuICogZm9yIGNyZWF0aW5nIHRoZSBvcmlnaW5hbCBQaXhpSlMgdmVyc2lvbiFcbiAqIEFsc28gYSB0aGFua3MgdG8gaHR0cHM6Ly9naXRodWIuY29tL2JjaGV2YWxpZXIgZm9yIHR3ZWFraW5nIHRoZSB0aW50IGFuZCBhbHBoYSBzbyB0aGF0IHRoZXkgbm93XG4gKiBzaGFyZSA0IGJ5dGVzIG9uIHRoZSB2ZXJ0ZXggYnVmZmVyXG4gKlxuICogSGVhdmlseSBpbnNwaXJlZCBieSBMaWJHRFgncyBQYXJ0aWNsZVJlbmRlcmVyOlxuICogaHR0cHM6Ly9naXRodWIuY29tL2xpYmdkeC9saWJnZHgvYmxvYi9tYXN0ZXIvZ2R4L3NyYy9jb20vYmFkbG9naWMvZ2R4L2dyYXBoaWNzL2cyZC9QYXJ0aWNsZVJlbmRlcmVyLmphdmFcbiAqL1xuLyoqXG4gKiBSZW5kZXJlciBmb3IgUGFydGljbGVzIHRoYXQgaXMgZGVzaWduZXIgZm9yIHNwZWVkIG92ZXIgZmVhdHVyZSBzZXQuXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG52YXIgUGFydGljbGVSZW5kZXJlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUGFydGljbGVSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gcmVuZGVyZXIgLSBUaGUgcmVuZGVyZXIgdGhpcyBzcHJpdGUgYmF0Y2ggd29ya3MgZm9yLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFBhcnRpY2xlUmVuZGVyZXIocmVuZGVyZXIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcmVuZGVyZXIpIHx8IHRoaXM7XG4gICAgICAgIC8vIDY1NTM1IGlzIG1heCB2ZXJ0ZXggaW5kZXggaW4gdGhlIGluZGV4IGJ1ZmZlciAoc2VlIFBhcnRpY2xlUmVuZGVyZXIpXG4gICAgICAgIC8vIHNvIG1heCBudW1iZXIgb2YgcGFydGljbGVzIGlzIDY1NTM2IC8gNCA9IDE2Mzg0XG4gICAgICAgIC8vIGFuZCBtYXggbnVtYmVyIG9mIGVsZW1lbnQgaW4gdGhlIGluZGV4IGJ1ZmZlciBpcyAxNjM4NCAqIDYgPSA5ODMwNFxuICAgICAgICAvLyBDcmVhdGluZyBhIGZ1bGwgaW5kZXggYnVmZmVyLCBvdmVyaGVhZCBpcyA5ODMwNCAqIDIgPSAxOTZLb1xuICAgICAgICAvLyBsZXQgbnVtSW5kaWNlcyA9IDk4MzA0O1xuICAgICAgICBfdGhpcy5zaGFkZXIgPSBudWxsO1xuICAgICAgICBfdGhpcy5wcm9wZXJ0aWVzID0gbnVsbDtcbiAgICAgICAgX3RoaXMudGVtcE1hdHJpeCA9IG5ldyBtYXRoLk1hdHJpeCgpO1xuICAgICAgICBfdGhpcy5wcm9wZXJ0aWVzID0gW1xuICAgICAgICAgICAgLy8gdmVydGljZXNEYXRhXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgYXR0cmlidXRlTmFtZTogJ2FWZXJ0ZXhQb3NpdGlvbicsXG4gICAgICAgICAgICAgICAgc2l6ZTogMixcbiAgICAgICAgICAgICAgICB1cGxvYWRGdW5jdGlvbjogX3RoaXMudXBsb2FkVmVydGljZXMsXG4gICAgICAgICAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8vIHBvc2l0aW9uRGF0YVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZU5hbWU6ICdhUG9zaXRpb25Db29yZCcsXG4gICAgICAgICAgICAgICAgc2l6ZTogMixcbiAgICAgICAgICAgICAgICB1cGxvYWRGdW5jdGlvbjogX3RoaXMudXBsb2FkUG9zaXRpb24sXG4gICAgICAgICAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8vIHJvdGF0aW9uRGF0YVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZU5hbWU6ICdhUm90YXRpb24nLFxuICAgICAgICAgICAgICAgIHNpemU6IDEsXG4gICAgICAgICAgICAgICAgdXBsb2FkRnVuY3Rpb246IF90aGlzLnVwbG9hZFJvdGF0aW9uLFxuICAgICAgICAgICAgICAgIG9mZnNldDogMCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvLyB1dnNEYXRhXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgYXR0cmlidXRlTmFtZTogJ2FUZXh0dXJlQ29vcmQnLFxuICAgICAgICAgICAgICAgIHNpemU6IDIsXG4gICAgICAgICAgICAgICAgdXBsb2FkRnVuY3Rpb246IF90aGlzLnVwbG9hZFV2cyxcbiAgICAgICAgICAgICAgICBvZmZzZXQ6IDAsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLy8gdGludERhdGFcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVOYW1lOiAnYUNvbG9yJyxcbiAgICAgICAgICAgICAgICBzaXplOiAxLFxuICAgICAgICAgICAgICAgIHR5cGU6IGNvbnN0YW50cy5UWVBFUy5VTlNJR05FRF9CWVRFLFxuICAgICAgICAgICAgICAgIHVwbG9hZEZ1bmN0aW9uOiBfdGhpcy51cGxvYWRUaW50LFxuICAgICAgICAgICAgICAgIG9mZnNldDogMCxcbiAgICAgICAgICAgIH0gXTtcbiAgICAgICAgX3RoaXMuc2hhZGVyID0gY29yZS5TaGFkZXIuZnJvbSh2ZXJ0ZXgsIGZyYWdtZW50LCB7fSk7XG4gICAgICAgIF90aGlzLnN0YXRlID0gY29yZS5TdGF0ZS5mb3IyZCgpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbmRlcnMgdGhlIHBhcnRpY2xlIGNvbnRhaW5lciBvYmplY3QuXG4gICAgICogQHBhcmFtIGNvbnRhaW5lciAtIFRoZSBjb250YWluZXIgdG8gcmVuZGVyIHVzaW5nIHRoaXMgUGFydGljbGVSZW5kZXJlci5cbiAgICAgKi9cbiAgICBQYXJ0aWNsZVJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoY29udGFpbmVyKSB7XG4gICAgICAgIHZhciBjaGlsZHJlbiA9IGNvbnRhaW5lci5jaGlsZHJlbjtcbiAgICAgICAgdmFyIG1heFNpemUgPSBjb250YWluZXIuX21heFNpemU7XG4gICAgICAgIHZhciBiYXRjaFNpemUgPSBjb250YWluZXIuX2JhdGNoU2l6ZTtcbiAgICAgICAgdmFyIHJlbmRlcmVyID0gdGhpcy5yZW5kZXJlcjtcbiAgICAgICAgdmFyIHRvdGFsQ2hpbGRyZW4gPSBjaGlsZHJlbi5sZW5ndGg7XG4gICAgICAgIGlmICh0b3RhbENoaWxkcmVuID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodG90YWxDaGlsZHJlbiA+IG1heFNpemUgJiYgIWNvbnRhaW5lci5hdXRvUmVzaXplKSB7XG4gICAgICAgICAgICB0b3RhbENoaWxkcmVuID0gbWF4U2l6ZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYnVmZmVycyA9IGNvbnRhaW5lci5fYnVmZmVycztcbiAgICAgICAgaWYgKCFidWZmZXJzKSB7XG4gICAgICAgICAgICBidWZmZXJzID0gY29udGFpbmVyLl9idWZmZXJzID0gdGhpcy5nZW5lcmF0ZUJ1ZmZlcnMoY29udGFpbmVyKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYmFzZVRleHR1cmUgPSBjaGlsZHJlblswXS5fdGV4dHVyZS5iYXNlVGV4dHVyZTtcbiAgICAgICAgLy8gaWYgdGhlIHV2cyBoYXZlIG5vdCB1cGRhdGVkIHRoZW4gbm8gcG9pbnQgcmVuZGVyaW5nIGp1c3QgeWV0IVxuICAgICAgICB0aGlzLnN0YXRlLmJsZW5kTW9kZSA9IHV0aWxzLmNvcnJlY3RCbGVuZE1vZGUoY29udGFpbmVyLmJsZW5kTW9kZSwgYmFzZVRleHR1cmUuYWxwaGFNb2RlKTtcbiAgICAgICAgcmVuZGVyZXIuc3RhdGUuc2V0KHRoaXMuc3RhdGUpO1xuICAgICAgICB2YXIgZ2wgPSByZW5kZXJlci5nbDtcbiAgICAgICAgdmFyIG0gPSBjb250YWluZXIud29ybGRUcmFuc2Zvcm0uY29weVRvKHRoaXMudGVtcE1hdHJpeCk7XG4gICAgICAgIG0ucHJlcGVuZChyZW5kZXJlci5nbG9iYWxVbmlmb3Jtcy51bmlmb3Jtcy5wcm9qZWN0aW9uTWF0cml4KTtcbiAgICAgICAgdGhpcy5zaGFkZXIudW5pZm9ybXMudHJhbnNsYXRpb25NYXRyaXggPSBtLnRvQXJyYXkodHJ1ZSk7XG4gICAgICAgIHRoaXMuc2hhZGVyLnVuaWZvcm1zLnVDb2xvciA9IHV0aWxzLnByZW11bHRpcGx5UmdiYShjb250YWluZXIudGludFJnYiwgY29udGFpbmVyLndvcmxkQWxwaGEsIHRoaXMuc2hhZGVyLnVuaWZvcm1zLnVDb2xvciwgYmFzZVRleHR1cmUuYWxwaGFNb2RlKTtcbiAgICAgICAgdGhpcy5zaGFkZXIudW5pZm9ybXMudVNhbXBsZXIgPSBiYXNlVGV4dHVyZTtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zaGFkZXIuYmluZCh0aGlzLnNoYWRlcik7XG4gICAgICAgIHZhciB1cGRhdGVTdGF0aWMgPSBmYWxzZTtcbiAgICAgICAgLy8gbm93IGxldHMgdXBsb2FkIGFuZCByZW5kZXIgdGhlIGJ1ZmZlcnMuLlxuICAgICAgICBmb3IgKHZhciBpID0gMCwgaiA9IDA7IGkgPCB0b3RhbENoaWxkcmVuOyBpICs9IGJhdGNoU2l6ZSwgaiArPSAxKSB7XG4gICAgICAgICAgICB2YXIgYW1vdW50ID0gKHRvdGFsQ2hpbGRyZW4gLSBpKTtcbiAgICAgICAgICAgIGlmIChhbW91bnQgPiBiYXRjaFNpemUpIHtcbiAgICAgICAgICAgICAgICBhbW91bnQgPSBiYXRjaFNpemU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaiA+PSBidWZmZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGJ1ZmZlcnMucHVzaCh0aGlzLl9nZW5lcmF0ZU9uZU1vcmVCdWZmZXIoY29udGFpbmVyKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYnVmZmVyID0gYnVmZmVyc1tqXTtcbiAgICAgICAgICAgIC8vIHdlIGFsd2F5cyB1cGxvYWQgdGhlIGR5bmFtaWNcbiAgICAgICAgICAgIGJ1ZmZlci51cGxvYWREeW5hbWljKGNoaWxkcmVuLCBpLCBhbW91bnQpO1xuICAgICAgICAgICAgdmFyIGJpZCA9IGNvbnRhaW5lci5fYnVmZmVyVXBkYXRlSURzW2pdIHx8IDA7XG4gICAgICAgICAgICB1cGRhdGVTdGF0aWMgPSB1cGRhdGVTdGF0aWMgfHwgKGJ1ZmZlci5fdXBkYXRlSUQgPCBiaWQpO1xuICAgICAgICAgICAgLy8gd2Ugb25seSB1cGxvYWQgdGhlIHN0YXRpYyBjb250ZW50IHdoZW4gd2UgaGF2ZSB0byFcbiAgICAgICAgICAgIGlmICh1cGRhdGVTdGF0aWMpIHtcbiAgICAgICAgICAgICAgICBidWZmZXIuX3VwZGF0ZUlEID0gY29udGFpbmVyLl91cGRhdGVJRDtcbiAgICAgICAgICAgICAgICBidWZmZXIudXBsb2FkU3RhdGljKGNoaWxkcmVuLCBpLCBhbW91bnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gYmluZCB0aGUgYnVmZmVyXG4gICAgICAgICAgICByZW5kZXJlci5nZW9tZXRyeS5iaW5kKGJ1ZmZlci5nZW9tZXRyeSk7XG4gICAgICAgICAgICBnbC5kcmF3RWxlbWVudHMoZ2wuVFJJQU5HTEVTLCBhbW91bnQgKiA2LCBnbC5VTlNJR05FRF9TSE9SVCwgMCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgb25lIHBhcnRpY2xlIGJ1ZmZlciBmb3IgZWFjaCBjaGlsZCBpbiB0aGUgY29udGFpbmVyIHdlIHdhbnQgdG8gcmVuZGVyIGFuZCB1cGRhdGVzIGludGVybmFsIHByb3BlcnRpZXMuXG4gICAgICogQHBhcmFtIGNvbnRhaW5lciAtIFRoZSBjb250YWluZXIgdG8gcmVuZGVyIHVzaW5nIHRoaXMgUGFydGljbGVSZW5kZXJlclxuICAgICAqIEByZXR1cm5zIC0gVGhlIGJ1ZmZlcnNcbiAgICAgKi9cbiAgICBQYXJ0aWNsZVJlbmRlcmVyLnByb3RvdHlwZS5nZW5lcmF0ZUJ1ZmZlcnMgPSBmdW5jdGlvbiAoY29udGFpbmVyKSB7XG4gICAgICAgIHZhciBidWZmZXJzID0gW107XG4gICAgICAgIHZhciBzaXplID0gY29udGFpbmVyLl9tYXhTaXplO1xuICAgICAgICB2YXIgYmF0Y2hTaXplID0gY29udGFpbmVyLl9iYXRjaFNpemU7XG4gICAgICAgIHZhciBkeW5hbWljUHJvcGVydHlGbGFncyA9IGNvbnRhaW5lci5fcHJvcGVydGllcztcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpICs9IGJhdGNoU2l6ZSkge1xuICAgICAgICAgICAgYnVmZmVycy5wdXNoKG5ldyBQYXJ0aWNsZUJ1ZmZlcih0aGlzLnByb3BlcnRpZXMsIGR5bmFtaWNQcm9wZXJ0eUZsYWdzLCBiYXRjaFNpemUpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYnVmZmVycztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgb25lIG1vcmUgcGFydGljbGUgYnVmZmVyLCBiZWNhdXNlIGNvbnRhaW5lciBoYXMgYXV0b1Jlc2l6ZSBmZWF0dXJlLlxuICAgICAqIEBwYXJhbSBjb250YWluZXIgLSBUaGUgY29udGFpbmVyIHRvIHJlbmRlciB1c2luZyB0aGlzIFBhcnRpY2xlUmVuZGVyZXJcbiAgICAgKiBAcmV0dXJucyAtIFRoZSBnZW5lcmF0ZWQgYnVmZmVyXG4gICAgICovXG4gICAgUGFydGljbGVSZW5kZXJlci5wcm90b3R5cGUuX2dlbmVyYXRlT25lTW9yZUJ1ZmZlciA9IGZ1bmN0aW9uIChjb250YWluZXIpIHtcbiAgICAgICAgdmFyIGJhdGNoU2l6ZSA9IGNvbnRhaW5lci5fYmF0Y2hTaXplO1xuICAgICAgICB2YXIgZHluYW1pY1Byb3BlcnR5RmxhZ3MgPSBjb250YWluZXIuX3Byb3BlcnRpZXM7XG4gICAgICAgIHJldHVybiBuZXcgUGFydGljbGVCdWZmZXIodGhpcy5wcm9wZXJ0aWVzLCBkeW5hbWljUHJvcGVydHlGbGFncywgYmF0Y2hTaXplKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFVwbG9hZHMgdGhlIHZlcnRpY2VzLlxuICAgICAqIEBwYXJhbSBjaGlsZHJlbiAtIHRoZSBhcnJheSBvZiBkaXNwbGF5IG9iamVjdHMgdG8gcmVuZGVyXG4gICAgICogQHBhcmFtIHN0YXJ0SW5kZXggLSB0aGUgaW5kZXggdG8gc3RhcnQgZnJvbSBpbiB0aGUgY2hpbGRyZW4gYXJyYXlcbiAgICAgKiBAcGFyYW0gYW1vdW50IC0gdGhlIGFtb3VudCBvZiBjaGlsZHJlbiB0aGF0IHdpbGwgaGF2ZSB0aGVpciB2ZXJ0aWNlcyB1cGxvYWRlZFxuICAgICAqIEBwYXJhbSBhcnJheSAtIFRoZSB2ZXJ0aWNlcyB0byB1cGxvYWQuXG4gICAgICogQHBhcmFtIHN0cmlkZSAtIFN0cmlkZSB0byB1c2UgZm9yIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0gb2Zmc2V0IC0gT2Zmc2V0IHRvIHN0YXJ0IGF0LlxuICAgICAqL1xuICAgIFBhcnRpY2xlUmVuZGVyZXIucHJvdG90eXBlLnVwbG9hZFZlcnRpY2VzID0gZnVuY3Rpb24gKGNoaWxkcmVuLCBzdGFydEluZGV4LCBhbW91bnQsIGFycmF5LCBzdHJpZGUsIG9mZnNldCkge1xuICAgICAgICB2YXIgdzAgPSAwO1xuICAgICAgICB2YXIgdzEgPSAwO1xuICAgICAgICB2YXIgaDAgPSAwO1xuICAgICAgICB2YXIgaDEgPSAwO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFtb3VudDsgKytpKSB7XG4gICAgICAgICAgICB2YXIgc3ByaXRlID0gY2hpbGRyZW5bc3RhcnRJbmRleCArIGldO1xuICAgICAgICAgICAgdmFyIHRleHR1cmUgPSBzcHJpdGUuX3RleHR1cmU7XG4gICAgICAgICAgICB2YXIgc3ggPSBzcHJpdGUuc2NhbGUueDtcbiAgICAgICAgICAgIHZhciBzeSA9IHNwcml0ZS5zY2FsZS55O1xuICAgICAgICAgICAgdmFyIHRyaW0gPSB0ZXh0dXJlLnRyaW07XG4gICAgICAgICAgICB2YXIgb3JpZyA9IHRleHR1cmUub3JpZztcbiAgICAgICAgICAgIGlmICh0cmltKSB7XG4gICAgICAgICAgICAgICAgLy8gaWYgdGhlIHNwcml0ZSBpcyB0cmltbWVkIGFuZCBpcyBub3QgYSB0aWxpbmdzcHJpdGUgdGhlbiB3ZSBuZWVkIHRvIGFkZCB0aGVcbiAgICAgICAgICAgICAgICAvLyBleHRyYSBzcGFjZSBiZWZvcmUgdHJhbnNmb3JtaW5nIHRoZSBzcHJpdGUgY29vcmRzLi5cbiAgICAgICAgICAgICAgICB3MSA9IHRyaW0ueCAtIChzcHJpdGUuYW5jaG9yLnggKiBvcmlnLndpZHRoKTtcbiAgICAgICAgICAgICAgICB3MCA9IHcxICsgdHJpbS53aWR0aDtcbiAgICAgICAgICAgICAgICBoMSA9IHRyaW0ueSAtIChzcHJpdGUuYW5jaG9yLnkgKiBvcmlnLmhlaWdodCk7XG4gICAgICAgICAgICAgICAgaDAgPSBoMSArIHRyaW0uaGVpZ2h0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdzAgPSAob3JpZy53aWR0aCkgKiAoMSAtIHNwcml0ZS5hbmNob3IueCk7XG4gICAgICAgICAgICAgICAgdzEgPSAob3JpZy53aWR0aCkgKiAtc3ByaXRlLmFuY2hvci54O1xuICAgICAgICAgICAgICAgIGgwID0gb3JpZy5oZWlnaHQgKiAoMSAtIHNwcml0ZS5hbmNob3IueSk7XG4gICAgICAgICAgICAgICAgaDEgPSBvcmlnLmhlaWdodCAqIC1zcHJpdGUuYW5jaG9yLnk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhcnJheVtvZmZzZXRdID0gdzEgKiBzeDtcbiAgICAgICAgICAgIGFycmF5W29mZnNldCArIDFdID0gaDEgKiBzeTtcbiAgICAgICAgICAgIGFycmF5W29mZnNldCArIHN0cmlkZV0gPSB3MCAqIHN4O1xuICAgICAgICAgICAgYXJyYXlbb2Zmc2V0ICsgc3RyaWRlICsgMV0gPSBoMSAqIHN5O1xuICAgICAgICAgICAgYXJyYXlbb2Zmc2V0ICsgKHN0cmlkZSAqIDIpXSA9IHcwICogc3g7XG4gICAgICAgICAgICBhcnJheVtvZmZzZXQgKyAoc3RyaWRlICogMikgKyAxXSA9IGgwICogc3k7XG4gICAgICAgICAgICBhcnJheVtvZmZzZXQgKyAoc3RyaWRlICogMyldID0gdzEgKiBzeDtcbiAgICAgICAgICAgIGFycmF5W29mZnNldCArIChzdHJpZGUgKiAzKSArIDFdID0gaDAgKiBzeTtcbiAgICAgICAgICAgIG9mZnNldCArPSBzdHJpZGUgKiA0O1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBVcGxvYWRzIHRoZSBwb3NpdGlvbi5cbiAgICAgKiBAcGFyYW0gY2hpbGRyZW4gLSB0aGUgYXJyYXkgb2YgZGlzcGxheSBvYmplY3RzIHRvIHJlbmRlclxuICAgICAqIEBwYXJhbSBzdGFydEluZGV4IC0gdGhlIGluZGV4IHRvIHN0YXJ0IGZyb20gaW4gdGhlIGNoaWxkcmVuIGFycmF5XG4gICAgICogQHBhcmFtIGFtb3VudCAtIHRoZSBhbW91bnQgb2YgY2hpbGRyZW4gdGhhdCB3aWxsIGhhdmUgdGhlaXIgcG9zaXRpb25zIHVwbG9hZGVkXG4gICAgICogQHBhcmFtIGFycmF5IC0gVGhlIHZlcnRpY2VzIHRvIHVwbG9hZC5cbiAgICAgKiBAcGFyYW0gc3RyaWRlIC0gU3RyaWRlIHRvIHVzZSBmb3IgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSBvZmZzZXQgLSBPZmZzZXQgdG8gc3RhcnQgYXQuXG4gICAgICovXG4gICAgUGFydGljbGVSZW5kZXJlci5wcm90b3R5cGUudXBsb2FkUG9zaXRpb24gPSBmdW5jdGlvbiAoY2hpbGRyZW4sIHN0YXJ0SW5kZXgsIGFtb3VudCwgYXJyYXksIHN0cmlkZSwgb2Zmc2V0KSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYW1vdW50OyBpKyspIHtcbiAgICAgICAgICAgIHZhciBzcHJpdGVQb3NpdGlvbiA9IGNoaWxkcmVuW3N0YXJ0SW5kZXggKyBpXS5wb3NpdGlvbjtcbiAgICAgICAgICAgIGFycmF5W29mZnNldF0gPSBzcHJpdGVQb3NpdGlvbi54O1xuICAgICAgICAgICAgYXJyYXlbb2Zmc2V0ICsgMV0gPSBzcHJpdGVQb3NpdGlvbi55O1xuICAgICAgICAgICAgYXJyYXlbb2Zmc2V0ICsgc3RyaWRlXSA9IHNwcml0ZVBvc2l0aW9uLng7XG4gICAgICAgICAgICBhcnJheVtvZmZzZXQgKyBzdHJpZGUgKyAxXSA9IHNwcml0ZVBvc2l0aW9uLnk7XG4gICAgICAgICAgICBhcnJheVtvZmZzZXQgKyAoc3RyaWRlICogMildID0gc3ByaXRlUG9zaXRpb24ueDtcbiAgICAgICAgICAgIGFycmF5W29mZnNldCArIChzdHJpZGUgKiAyKSArIDFdID0gc3ByaXRlUG9zaXRpb24ueTtcbiAgICAgICAgICAgIGFycmF5W29mZnNldCArIChzdHJpZGUgKiAzKV0gPSBzcHJpdGVQb3NpdGlvbi54O1xuICAgICAgICAgICAgYXJyYXlbb2Zmc2V0ICsgKHN0cmlkZSAqIDMpICsgMV0gPSBzcHJpdGVQb3NpdGlvbi55O1xuICAgICAgICAgICAgb2Zmc2V0ICs9IHN0cmlkZSAqIDQ7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFVwbG9hZHMgdGhlIHJvdGF0aW9uLlxuICAgICAqIEBwYXJhbSBjaGlsZHJlbiAtIHRoZSBhcnJheSBvZiBkaXNwbGF5IG9iamVjdHMgdG8gcmVuZGVyXG4gICAgICogQHBhcmFtIHN0YXJ0SW5kZXggLSB0aGUgaW5kZXggdG8gc3RhcnQgZnJvbSBpbiB0aGUgY2hpbGRyZW4gYXJyYXlcbiAgICAgKiBAcGFyYW0gYW1vdW50IC0gdGhlIGFtb3VudCBvZiBjaGlsZHJlbiB0aGF0IHdpbGwgaGF2ZSB0aGVpciByb3RhdGlvbiB1cGxvYWRlZFxuICAgICAqIEBwYXJhbSBhcnJheSAtIFRoZSB2ZXJ0aWNlcyB0byB1cGxvYWQuXG4gICAgICogQHBhcmFtIHN0cmlkZSAtIFN0cmlkZSB0byB1c2UgZm9yIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0gb2Zmc2V0IC0gT2Zmc2V0IHRvIHN0YXJ0IGF0LlxuICAgICAqL1xuICAgIFBhcnRpY2xlUmVuZGVyZXIucHJvdG90eXBlLnVwbG9hZFJvdGF0aW9uID0gZnVuY3Rpb24gKGNoaWxkcmVuLCBzdGFydEluZGV4LCBhbW91bnQsIGFycmF5LCBzdHJpZGUsIG9mZnNldCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFtb3VudDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgc3ByaXRlUm90YXRpb24gPSBjaGlsZHJlbltzdGFydEluZGV4ICsgaV0ucm90YXRpb247XG4gICAgICAgICAgICBhcnJheVtvZmZzZXRdID0gc3ByaXRlUm90YXRpb247XG4gICAgICAgICAgICBhcnJheVtvZmZzZXQgKyBzdHJpZGVdID0gc3ByaXRlUm90YXRpb247XG4gICAgICAgICAgICBhcnJheVtvZmZzZXQgKyAoc3RyaWRlICogMildID0gc3ByaXRlUm90YXRpb247XG4gICAgICAgICAgICBhcnJheVtvZmZzZXQgKyAoc3RyaWRlICogMyldID0gc3ByaXRlUm90YXRpb247XG4gICAgICAgICAgICBvZmZzZXQgKz0gc3RyaWRlICogNDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogVXBsb2FkcyB0aGUgVVZzLlxuICAgICAqIEBwYXJhbSBjaGlsZHJlbiAtIHRoZSBhcnJheSBvZiBkaXNwbGF5IG9iamVjdHMgdG8gcmVuZGVyXG4gICAgICogQHBhcmFtIHN0YXJ0SW5kZXggLSB0aGUgaW5kZXggdG8gc3RhcnQgZnJvbSBpbiB0aGUgY2hpbGRyZW4gYXJyYXlcbiAgICAgKiBAcGFyYW0gYW1vdW50IC0gdGhlIGFtb3VudCBvZiBjaGlsZHJlbiB0aGF0IHdpbGwgaGF2ZSB0aGVpciByb3RhdGlvbiB1cGxvYWRlZFxuICAgICAqIEBwYXJhbSBhcnJheSAtIFRoZSB2ZXJ0aWNlcyB0byB1cGxvYWQuXG4gICAgICogQHBhcmFtIHN0cmlkZSAtIFN0cmlkZSB0byB1c2UgZm9yIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0gb2Zmc2V0IC0gT2Zmc2V0IHRvIHN0YXJ0IGF0LlxuICAgICAqL1xuICAgIFBhcnRpY2xlUmVuZGVyZXIucHJvdG90eXBlLnVwbG9hZFV2cyA9IGZ1bmN0aW9uIChjaGlsZHJlbiwgc3RhcnRJbmRleCwgYW1vdW50LCBhcnJheSwgc3RyaWRlLCBvZmZzZXQpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhbW91bnQ7ICsraSkge1xuICAgICAgICAgICAgdmFyIHRleHR1cmVVdnMgPSBjaGlsZHJlbltzdGFydEluZGV4ICsgaV0uX3RleHR1cmUuX3V2cztcbiAgICAgICAgICAgIGlmICh0ZXh0dXJlVXZzKSB7XG4gICAgICAgICAgICAgICAgYXJyYXlbb2Zmc2V0XSA9IHRleHR1cmVVdnMueDA7XG4gICAgICAgICAgICAgICAgYXJyYXlbb2Zmc2V0ICsgMV0gPSB0ZXh0dXJlVXZzLnkwO1xuICAgICAgICAgICAgICAgIGFycmF5W29mZnNldCArIHN0cmlkZV0gPSB0ZXh0dXJlVXZzLngxO1xuICAgICAgICAgICAgICAgIGFycmF5W29mZnNldCArIHN0cmlkZSArIDFdID0gdGV4dHVyZVV2cy55MTtcbiAgICAgICAgICAgICAgICBhcnJheVtvZmZzZXQgKyAoc3RyaWRlICogMildID0gdGV4dHVyZVV2cy54MjtcbiAgICAgICAgICAgICAgICBhcnJheVtvZmZzZXQgKyAoc3RyaWRlICogMikgKyAxXSA9IHRleHR1cmVVdnMueTI7XG4gICAgICAgICAgICAgICAgYXJyYXlbb2Zmc2V0ICsgKHN0cmlkZSAqIDMpXSA9IHRleHR1cmVVdnMueDM7XG4gICAgICAgICAgICAgICAgYXJyYXlbb2Zmc2V0ICsgKHN0cmlkZSAqIDMpICsgMV0gPSB0ZXh0dXJlVXZzLnkzO1xuICAgICAgICAgICAgICAgIG9mZnNldCArPSBzdHJpZGUgKiA0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gVE9ETyB5b3Uga25vdyB0aGlzIGNhbiBiZSBlYXNpZXIhXG4gICAgICAgICAgICAgICAgYXJyYXlbb2Zmc2V0XSA9IDA7XG4gICAgICAgICAgICAgICAgYXJyYXlbb2Zmc2V0ICsgMV0gPSAwO1xuICAgICAgICAgICAgICAgIGFycmF5W29mZnNldCArIHN0cmlkZV0gPSAwO1xuICAgICAgICAgICAgICAgIGFycmF5W29mZnNldCArIHN0cmlkZSArIDFdID0gMDtcbiAgICAgICAgICAgICAgICBhcnJheVtvZmZzZXQgKyAoc3RyaWRlICogMildID0gMDtcbiAgICAgICAgICAgICAgICBhcnJheVtvZmZzZXQgKyAoc3RyaWRlICogMikgKyAxXSA9IDA7XG4gICAgICAgICAgICAgICAgYXJyYXlbb2Zmc2V0ICsgKHN0cmlkZSAqIDMpXSA9IDA7XG4gICAgICAgICAgICAgICAgYXJyYXlbb2Zmc2V0ICsgKHN0cmlkZSAqIDMpICsgMV0gPSAwO1xuICAgICAgICAgICAgICAgIG9mZnNldCArPSBzdHJpZGUgKiA0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBVcGxvYWRzIHRoZSB0aW50LlxuICAgICAqIEBwYXJhbSBjaGlsZHJlbiAtIHRoZSBhcnJheSBvZiBkaXNwbGF5IG9iamVjdHMgdG8gcmVuZGVyXG4gICAgICogQHBhcmFtIHN0YXJ0SW5kZXggLSB0aGUgaW5kZXggdG8gc3RhcnQgZnJvbSBpbiB0aGUgY2hpbGRyZW4gYXJyYXlcbiAgICAgKiBAcGFyYW0gYW1vdW50IC0gdGhlIGFtb3VudCBvZiBjaGlsZHJlbiB0aGF0IHdpbGwgaGF2ZSB0aGVpciByb3RhdGlvbiB1cGxvYWRlZFxuICAgICAqIEBwYXJhbSBhcnJheSAtIFRoZSB2ZXJ0aWNlcyB0byB1cGxvYWQuXG4gICAgICogQHBhcmFtIHN0cmlkZSAtIFN0cmlkZSB0byB1c2UgZm9yIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0gb2Zmc2V0IC0gT2Zmc2V0IHRvIHN0YXJ0IGF0LlxuICAgICAqL1xuICAgIFBhcnRpY2xlUmVuZGVyZXIucHJvdG90eXBlLnVwbG9hZFRpbnQgPSBmdW5jdGlvbiAoY2hpbGRyZW4sIHN0YXJ0SW5kZXgsIGFtb3VudCwgYXJyYXksIHN0cmlkZSwgb2Zmc2V0KSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYW1vdW50OyArK2kpIHtcbiAgICAgICAgICAgIHZhciBzcHJpdGUgPSBjaGlsZHJlbltzdGFydEluZGV4ICsgaV07XG4gICAgICAgICAgICB2YXIgcHJlbXVsdGlwbGllZCA9IHNwcml0ZS5fdGV4dHVyZS5iYXNlVGV4dHVyZS5hbHBoYU1vZGUgPiAwO1xuICAgICAgICAgICAgdmFyIGFscGhhID0gc3ByaXRlLmFscGhhO1xuICAgICAgICAgICAgLy8gd2UgZG9udCBjYWxsIGV4dHJhIGZ1bmN0aW9uIGlmIGFscGhhIGlzIDEuMCwgdGhhdCdzIGZhc3RlclxuICAgICAgICAgICAgdmFyIGFyZ2IgPSBhbHBoYSA8IDEuMCAmJiBwcmVtdWx0aXBsaWVkXG4gICAgICAgICAgICAgICAgPyB1dGlscy5wcmVtdWx0aXBseVRpbnQoc3ByaXRlLl90aW50UkdCLCBhbHBoYSkgOiBzcHJpdGUuX3RpbnRSR0IgKyAoYWxwaGEgKiAyNTUgPDwgMjQpO1xuICAgICAgICAgICAgYXJyYXlbb2Zmc2V0XSA9IGFyZ2I7XG4gICAgICAgICAgICBhcnJheVtvZmZzZXQgKyBzdHJpZGVdID0gYXJnYjtcbiAgICAgICAgICAgIGFycmF5W29mZnNldCArIChzdHJpZGUgKiAyKV0gPSBhcmdiO1xuICAgICAgICAgICAgYXJyYXlbb2Zmc2V0ICsgKHN0cmlkZSAqIDMpXSA9IGFyZ2I7XG4gICAgICAgICAgICBvZmZzZXQgKz0gc3RyaWRlICogNDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqIERlc3Ryb3lzIHRoZSBQYXJ0aWNsZVJlbmRlcmVyLiAqL1xuICAgIFBhcnRpY2xlUmVuZGVyZXIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuZGVzdHJveS5jYWxsKHRoaXMpO1xuICAgICAgICBpZiAodGhpcy5zaGFkZXIpIHtcbiAgICAgICAgICAgIHRoaXMuc2hhZGVyLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHRoaXMuc2hhZGVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRlbXBNYXRyaXggPSBudWxsO1xuICAgIH07XG4gICAgcmV0dXJuIFBhcnRpY2xlUmVuZGVyZXI7XG59KGNvcmUuT2JqZWN0UmVuZGVyZXIpKTtcblxuZXhwb3J0cy5QYXJ0aWNsZUNvbnRhaW5lciA9IFBhcnRpY2xlQ29udGFpbmVyO1xuZXhwb3J0cy5QYXJ0aWNsZVJlbmRlcmVyID0gUGFydGljbGVSZW5kZXJlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhcnRpY2xlLWNvbnRhaW5lci5qcy5tYXBcbiJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImNvbnN0YW50cyIsImRpc3BsYXkiLCJ1dGlscyIsImNvcmUiLCJtYXRoIiwiZXh0ZW5kU3RhdGljcyIsImQiLCJiIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJBcnJheSIsInAiLCJoYXNPd25Qcm9wZXJ0eSIsIl9fZXh0ZW5kcyIsIl9fIiwidGhpcyIsImNvbnN0cnVjdG9yIiwicHJvdG90eXBlIiwiY3JlYXRlIiwiUGFydGljbGVDb250YWluZXIiLCJfc3VwZXIiLCJtYXhTaXplIiwicHJvcGVydGllcyIsImJhdGNoU2l6ZSIsImF1dG9SZXNpemUiLCJfdGhpcyIsImNhbGwiLCJfcHJvcGVydGllcyIsIl9tYXhTaXplIiwiX2JhdGNoU2l6ZSIsIl9idWZmZXJzIiwiX2J1ZmZlclVwZGF0ZUlEcyIsIl91cGRhdGVJRCIsImludGVyYWN0aXZlQ2hpbGRyZW4iLCJibGVuZE1vZGUiLCJCTEVORF9NT0RFUyIsIk5PUk1BTCIsInJvdW5kUGl4ZWxzIiwiYmFzZVRleHR1cmUiLCJzZXRQcm9wZXJ0aWVzIiwiX3RpbnQiLCJ0aW50UmdiIiwiRmxvYXQzMkFycmF5IiwidGludCIsInZlcnRpY2VzIiwic2NhbGUiLCJwb3NpdGlvbiIsInJvdGF0aW9uIiwidXZzIiwiYWxwaGEiLCJ1cGRhdGVUcmFuc2Zvcm0iLCJkaXNwbGF5T2JqZWN0VXBkYXRlVHJhbnNmb3JtIiwiZ2V0Iiwic2V0IiwiaGV4MnJnYiIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJyZW5kZXIiLCJyZW5kZXJlciIsInZpc2libGUiLCJ3b3JsZEFscGhhIiwiY2hpbGRyZW4iLCJsZW5ndGgiLCJyZW5kZXJhYmxlIiwiX3RleHR1cmUiLCJ2YWxpZCIsIm9uY2UiLCJvbkNoaWxkcmVuQ2hhbmdlIiwiYmF0Y2giLCJzZXRPYmplY3RSZW5kZXJlciIsInBsdWdpbnMiLCJwYXJ0aWNsZSIsInNtYWxsZXN0Q2hpbGRJbmRleCIsImJ1ZmZlckluZGV4IiwiTWF0aCIsImZsb29yIiwicHVzaCIsImRpc3Bvc2UiLCJpIiwiZGVzdHJveSIsIm9wdGlvbnMiLCJDb250YWluZXIiLCJQYXJ0aWNsZUJ1ZmZlciIsImR5bmFtaWNQcm9wZXJ0eUZsYWdzIiwic2l6ZSIsImdlb21ldHJ5IiwiR2VvbWV0cnkiLCJpbmRleEJ1ZmZlciIsImR5bmFtaWNQcm9wZXJ0aWVzIiwic3RhdGljUHJvcGVydGllcyIsInByb3BlcnR5IiwiYXR0cmlidXRlTmFtZSIsInVwbG9hZEZ1bmN0aW9uIiwidHlwZSIsIlRZUEVTIiwiRkxPQVQiLCJvZmZzZXQiLCJzdGF0aWNTdHJpZGUiLCJzdGF0aWNCdWZmZXIiLCJzdGF0aWNEYXRhIiwic3RhdGljRGF0YVVpbnQzMiIsImR5bmFtaWNTdHJpZGUiLCJkeW5hbWljQnVmZmVyIiwiZHluYW1pY0RhdGEiLCJkeW5hbWljRGF0YVVpbnQzMiIsImluaXRCdWZmZXJzIiwiZHluYW1pY09mZnNldCIsIkJ1ZmZlciIsImNyZWF0ZUluZGljZXNGb3JRdWFkcyIsImFkZEluZGV4IiwiZHluQnVmZmVyIiwiQXJyYXlCdWZmZXIiLCJVaW50MzJBcnJheSIsInN0YXRpY09mZnNldCIsInN0YXRCdWZmZXIiLCJhZGRBdHRyaWJ1dGUiLCJVTlNJR05FRF9CWVRFIiwidXBsb2FkRHluYW1pYyIsInN0YXJ0SW5kZXgiLCJhbW91bnQiLCJ1cGxvYWRTdGF0aWMiLCJQYXJ0aWNsZVJlbmRlcmVyIiwic2hhZGVyIiwidGVtcE1hdHJpeCIsIk1hdHJpeCIsInVwbG9hZFZlcnRpY2VzIiwidXBsb2FkUG9zaXRpb24iLCJ1cGxvYWRSb3RhdGlvbiIsInVwbG9hZFV2cyIsInVwbG9hZFRpbnQiLCJTaGFkZXIiLCJmcm9tIiwic3RhdGUiLCJTdGF0ZSIsImZvcjJkIiwiY29udGFpbmVyIiwidG90YWxDaGlsZHJlbiIsImJ1ZmZlcnMiLCJnZW5lcmF0ZUJ1ZmZlcnMiLCJjb3JyZWN0QmxlbmRNb2RlIiwiYWxwaGFNb2RlIiwiZ2wiLCJtIiwid29ybGRUcmFuc2Zvcm0iLCJjb3B5VG8iLCJwcmVwZW5kIiwiZ2xvYmFsVW5pZm9ybXMiLCJ1bmlmb3JtcyIsInByb2plY3Rpb25NYXRyaXgiLCJ0cmFuc2xhdGlvbk1hdHJpeCIsInRvQXJyYXkiLCJ1Q29sb3IiLCJwcmVtdWx0aXBseVJnYmEiLCJ1U2FtcGxlciIsImJpbmQiLCJ1cGRhdGVTdGF0aWMiLCJqIiwiX2dlbmVyYXRlT25lTW9yZUJ1ZmZlciIsImJ1ZmZlciIsImJpZCIsImRyYXdFbGVtZW50cyIsIlRSSUFOR0xFUyIsIlVOU0lHTkVEX1NIT1JUIiwiYXJyYXkiLCJzdHJpZGUiLCJ3MCIsIncxIiwiaDAiLCJoMSIsInNwcml0ZSIsInRleHR1cmUiLCJzeCIsIngiLCJzeSIsInkiLCJ0cmltIiwib3JpZyIsImFuY2hvciIsIndpZHRoIiwiaGVpZ2h0Iiwic3ByaXRlUG9zaXRpb24iLCJzcHJpdGVSb3RhdGlvbiIsInRleHR1cmVVdnMiLCJfdXZzIiwieDAiLCJ5MCIsIngxIiwieTEiLCJ4MiIsInkyIiwieDMiLCJ5MyIsInByZW11bHRpcGxpZWQiLCJhcmdiIiwicHJlbXVsdGlwbHlUaW50IiwiX3RpbnRSR0IiLCJPYmplY3RSZW5kZXJlciJdLCJzb3VyY2VSb290IjoiIn0=