"use strict";(self.webpackChunkgear3engine_website=self.webpackChunkgear3engine_website||[]).push([[6747],{6747:(t,e,i)=>{i.d(e,{P:()=>l});var r=i(7054),o=i(29),a=i(5323),n=i(5307),s=i(4295),u=function(t,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},u(t,e)};function h(t,e){function i(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}!function(t){function e(e,i,o,a){void 0===e&&(e=1500),void 0===o&&(o=16384),void 0===a&&(a=!1);var n=t.call(this)||this;return o>16384&&(o=16384),n._properties=[!1,!0,!1,!1,!1],n._maxSize=e,n._batchSize=o,n._buffers=null,n._bufferUpdateIDs=[],n._updateID=0,n.interactiveChildren=!1,n.blendMode=r.T$.NORMAL,n.autoResize=a,n.roundPixels=!0,n.baseTexture=null,n.setProperties(i),n._tint=0,n.tintRgb=new Float32Array(4),n.tint=16777215,n}h(e,t),e.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,(0,a.hex2rgb)(t,this.tintRgb)},enumerable:!1,configurable:!0}),e.prototype.render=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",(function(){return e.onChildrenChange(0)}))),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){for(var e=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID},e.prototype.dispose=function(){if(this._buffers){for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}(o.W2);var p=function(){function t(t,e,i){this.geometry=new n.ZX,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(var o=0;o<t.length;++o){var a=t[o];a={attributeName:a.attributeName,size:a.size,uploadFunction:a.uploadFunction,type:a.type||r.vK.FLOAT,offset:a.offset},e[o]?this.dynamicProperties.push(a):this.staticProperties.push(a)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return t.prototype.initBuffers=function(){var t=this.geometry,e=0;this.indexBuffer=new n.lW((0,a.createIndicesForQuads)(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(var i=0;i<this.dynamicProperties.length;++i)(h=this.dynamicProperties[i]).offset=e,e+=h.size,this.dynamicStride+=h.size;var o=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(o),this.dynamicDataUint32=new Uint32Array(o),this.dynamicBuffer=new n.lW(this.dynamicData,!1,!1);var s=0;for(this.staticStride=0,i=0;i<this.staticProperties.length;++i)(h=this.staticProperties[i]).offset=s,s+=h.size,this.staticStride+=h.size;var u=new ArrayBuffer(this.size*this.staticStride*4*4);for(this.staticData=new Float32Array(u),this.staticDataUint32=new Uint32Array(u),this.staticBuffer=new n.lW(this.staticData,!0,!1),i=0;i<this.dynamicProperties.length;++i){var h=this.dynamicProperties[i];t.addAttribute(h.attributeName,this.dynamicBuffer,0,h.type===r.vK.UNSIGNED_BYTE,h.type,4*this.dynamicStride,4*h.offset)}for(i=0;i<this.staticProperties.length;++i)h=this.staticProperties[i],t.addAttribute(h.attributeName,this.staticBuffer,0,h.type===r.vK.UNSIGNED_BYTE,h.type,4*this.staticStride,4*h.offset)},t.prototype.uploadDynamic=function(t,e,i){for(var o=0;o<this.dynamicProperties.length;o++){var a=this.dynamicProperties[o];a.uploadFunction(t,e,i,a.type===r.vK.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,a.offset)}this.dynamicBuffer._updateID++},t.prototype.uploadStatic=function(t,e,i){for(var o=0;o<this.staticProperties.length;o++){var a=this.staticProperties[o];a.uploadFunction(t,e,i,a.type===r.vK.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,a.offset)}this.staticBuffer._updateID++},t.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},t}(),l=function(t){function e(e){var i=t.call(this,e)||this;return i.shader=null,i.properties=null,i.tempMatrix=new s.y3,i.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:i.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:i.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:i.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:i.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:r.vK.UNSIGNED_BYTE,uploadFunction:i.uploadTint,offset:0}],i.shader=n.ex.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),i.state=n.ZM.for2d(),i}return h(e,t),e.prototype.render=function(t){var e=t.children,i=t._maxSize,r=t._batchSize,o=this.renderer,n=e.length;if(0!==n){n>i&&!t.autoResize&&(n=i);var s=t._buffers;s||(s=t._buffers=this.generateBuffers(t));var u=e[0]._texture.baseTexture;this.state.blendMode=(0,a.correctBlendMode)(t.blendMode,u.alphaMode),o.state.set(this.state);var h=o.gl,p=t.worldTransform.copyTo(this.tempMatrix);p.prepend(o.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=p.toArray(!0),this.shader.uniforms.uColor=(0,a.premultiplyRgba)(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,u.alphaMode),this.shader.uniforms.uSampler=u,this.renderer.shader.bind(this.shader);for(var l=!1,f=0,d=0;f<n;f+=r,d+=1){var c=n-f;c>r&&(c=r),d>=s.length&&s.push(this._generateOneMoreBuffer(t));var y=s[d];y.uploadDynamic(e,f,c);var v=t._bufferUpdateIDs[d]||0;(l=l||y._updateID<v)&&(y._updateID=t._updateID,y.uploadStatic(e,f,c)),o.geometry.bind(y.geometry),h.drawElements(h.TRIANGLES,6*c,h.UNSIGNED_SHORT,0)}}},e.prototype.generateBuffers=function(t){for(var e=[],i=t._maxSize,r=t._batchSize,o=t._properties,a=0;a<i;a+=r)e.push(new p(this.properties,o,r));return e},e.prototype._generateOneMoreBuffer=function(t){var e=t._batchSize,i=t._properties;return new p(this.properties,i,e)},e.prototype.uploadVertices=function(t,e,i,r,o,a){for(var n=0,s=0,u=0,h=0,p=0;p<i;++p){var l=t[e+p],f=l._texture,d=l.scale.x,c=l.scale.y,y=f.trim,v=f.orig;y?(n=(s=y.x-l.anchor.x*v.width)+y.width,u=(h=y.y-l.anchor.y*v.height)+y.height):(n=v.width*(1-l.anchor.x),s=v.width*-l.anchor.x,u=v.height*(1-l.anchor.y),h=v.height*-l.anchor.y),r[a]=s*d,r[a+1]=h*c,r[a+o]=n*d,r[a+o+1]=h*c,r[a+2*o]=n*d,r[a+2*o+1]=u*c,r[a+3*o]=s*d,r[a+3*o+1]=u*c,a+=4*o}},e.prototype.uploadPosition=function(t,e,i,r,o,a){for(var n=0;n<i;n++){var s=t[e+n].position;r[a]=s.x,r[a+1]=s.y,r[a+o]=s.x,r[a+o+1]=s.y,r[a+2*o]=s.x,r[a+2*o+1]=s.y,r[a+3*o]=s.x,r[a+3*o+1]=s.y,a+=4*o}},e.prototype.uploadRotation=function(t,e,i,r,o,a){for(var n=0;n<i;n++){var s=t[e+n].rotation;r[a]=s,r[a+o]=s,r[a+2*o]=s,r[a+3*o]=s,a+=4*o}},e.prototype.uploadUvs=function(t,e,i,r,o,a){for(var n=0;n<i;++n){var s=t[e+n]._texture._uvs;s?(r[a]=s.x0,r[a+1]=s.y0,r[a+o]=s.x1,r[a+o+1]=s.y1,r[a+2*o]=s.x2,r[a+2*o+1]=s.y2,r[a+3*o]=s.x3,r[a+3*o+1]=s.y3,a+=4*o):(r[a]=0,r[a+1]=0,r[a+o]=0,r[a+o+1]=0,r[a+2*o]=0,r[a+2*o+1]=0,r[a+3*o]=0,r[a+3*o+1]=0,a+=4*o)}},e.prototype.uploadTint=function(t,e,i,r,o,n){for(var s=0;s<i;++s){var u=t[e+s],h=u._texture.baseTexture.alphaMode>0,p=u.alpha,l=p<1&&h?(0,a.premultiplyTint)(u._tintRGB,p):u._tintRGB+(255*p<<24);r[n]=l,r[n+o]=l,r[n+2*o]=l,r[n+3*o]=l,n+=4*o}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},e}(n.bO)}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFtQixFQUFUNkQsR0FBZSxFQUMvQkQsRUFBTTVELEVBQW1CLEVBQVQ2RCxFQUFjLEdBQUssRUFDbkM3RCxHQUFtQixFQUFUNkQsRUFFbEIsQ0FDSixFQVdBdEMsRUFBaUJsRyxVQUFVeUcsV0FBYSxTQUFVN0QsRUFBVW1ELEVBQVlDLEVBQVF1QyxFQUFPQyxFQUFRN0QsR0FDM0YsSUFBSyxJQUFJZCxFQUFJLEVBQUdBLEVBQUltQyxJQUFVbkMsRUFBRyxDQUM3QixJQUFJZ0YsRUFBU2pHLEVBQVNtRCxFQUFhbEMsR0FDL0J1RyxFQUFnQnZCLEVBQU85RixTQUFTNUIsWUFBWTZGLFVBQVksRUFDeERsRixFQUFRK0csRUFBTy9HLE1BRWZ1SSxFQUFPdkksRUFBUSxHQUFPc0ksR0FDcEIsSUFBQUUsaUJBQWdCekIsRUFBTzBCLFNBQVV6SSxHQUFTK0csRUFBTzBCLFVBQW9CLElBQVJ6SSxHQUFlLElBQ2xGeUcsRUFBTTVELEdBQVUwRixFQUNoQjlCLEVBQU01RCxFQUFTNkQsR0FBVTZCLEVBQ3pCOUIsRUFBTTVELEVBQW1CLEVBQVQ2RCxHQUFlNkIsRUFDL0I5QixFQUFNNUQsRUFBbUIsRUFBVDZELEdBQWU2QixFQUMvQjFGLEdBQW1CLEVBQVQ2RCxDQUNkLENBQ0osRUFJQXRDLEVBQWlCbEcsVUFBVThELFFBQVUsV0FDakM1RCxFQUFPRixVQUFVOEQsUUFBUXJELEtBQUtYLE1BQzFCQSxLQUFLcUcsU0FDTHJHLEtBQUtxRyxPQUFPckMsVUFDWmhFLEtBQUtxRyxPQUFTLE1BRWxCckcsS0FBS3NHLFdBQWEsSUFDdEIsRUFDT0YsQ0FDWCxDQS9UcUMsQ0ErVG5DLEsiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9nZWFyM2VuZ2luZS13ZWJzaXRlLy4vbm9kZV9tb2R1bGVzL0BwaXhpL3BhcnRpY2xlcy9saWIvcGFydGljbGVzLmVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQHBpeGkvcGFydGljbGVzIC0gdjUuMy4xMlxuICogQ29tcGlsZWQgV2VkLCAyMyBNYXIgMjAyMiAxODozNDoyOCBVVENcbiAqXG4gKiBAcGl4aS9wYXJ0aWNsZXMgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICogaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZVxuICovXG5pbXBvcnQgeyBCTEVORF9NT0RFUywgVFlQRVMgfSBmcm9tICdAcGl4aS9jb25zdGFudHMnO1xuaW1wb3J0IHsgQ29udGFpbmVyIH0gZnJvbSAnQHBpeGkvZGlzcGxheSc7XG5pbXBvcnQgeyBoZXgycmdiLCBjcmVhdGVJbmRpY2VzRm9yUXVhZHMsIGNvcnJlY3RCbGVuZE1vZGUsIHByZW11bHRpcGx5UmdiYSwgcHJlbXVsdGlwbHlUaW50IH0gZnJvbSAnQHBpeGkvdXRpbHMnO1xuaW1wb3J0IHsgR2VvbWV0cnksIEJ1ZmZlciwgU2hhZGVyLCBTdGF0ZSwgT2JqZWN0UmVuZGVyZXIgfSBmcm9tICdAcGl4aS9jb3JlJztcbmltcG9ydCB7IE1hdHJpeCB9IGZyb20gJ0BwaXhpL21hdGgnO1xuXG4vKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZVxyXG50aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZVxyXG5MaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG5cclxuVEhJUyBDT0RFIElTIFBST1ZJREVEIE9OIEFOICpBUyBJUyogQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG5LSU5ELCBFSVRIRVIgRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgV0lUSE9VVCBMSU1JVEFUSU9OIEFOWSBJTVBMSUVEXHJcbldBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBUSVRMRSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UsXHJcbk1FUkNIQU5UQUJMSVRZIE9SIE5PTi1JTkZSSU5HRU1FTlQuXHJcblxyXG5TZWUgdGhlIEFwYWNoZSBWZXJzaW9uIDIuMCBMaWNlbnNlIGZvciBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnNcclxuYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG4vKiBnbG9iYWwgUmVmbGVjdCwgUHJvbWlzZSAqL1xyXG5cclxudmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbihkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgeyBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgeyBkW3BdID0gYltwXTsgfSB9IH07XHJcbiAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn1cblxuLyoqXG4gKiBUaGUgUGFydGljbGVDb250YWluZXIgY2xhc3MgaXMgYSByZWFsbHkgZmFzdCB2ZXJzaW9uIG9mIHRoZSBDb250YWluZXIgYnVpbHQgc29sZWx5IGZvciBzcGVlZCxcbiAqIHNvIHVzZSB3aGVuIHlvdSBuZWVkIGEgbG90IG9mIHNwcml0ZXMgb3IgcGFydGljbGVzLlxuICpcbiAqIFRoZSB0cmFkZW9mZiBvZiB0aGUgUGFydGljbGVDb250YWluZXIgaXMgdGhhdCBtb3N0IGFkdmFuY2VkIGZ1bmN0aW9uYWxpdHkgd2lsbCBub3Qgd29yay5cbiAqIFBhcnRpY2xlQ29udGFpbmVyIGltcGxlbWVudHMgdGhlIGJhc2ljIG9iamVjdCB0cmFuc2Zvcm0gKHBvc2l0aW9uLCBzY2FsZSwgcm90YXRpb24pXG4gKiBhbmQgc29tZSBhZHZhbmNlZCBmdW5jdGlvbmFsaXR5IGxpa2UgdGludCAoYXMgb2YgdjQuNS42KS5cbiAqXG4gKiBPdGhlciBtb3JlIGFkdmFuY2VkIGZ1bmN0aW9uYWxpdHkgbGlrZSBtYXNraW5nLCBjaGlsZHJlbiwgZmlsdGVycywgZXRjIHdpbGwgbm90IHdvcmsgb24gc3ByaXRlcyBpbiB0aGlzIGJhdGNoLlxuICpcbiAqIEl0J3MgZXh0cmVtZWx5IGVhc3kgdG8gdXNlOlxuICogYGBganNcbiAqIGxldCBjb250YWluZXIgPSBuZXcgUGFydGljbGVDb250YWluZXIoKTtcbiAqXG4gKiBmb3IgKGxldCBpID0gMDsgaSA8IDEwMDsgKytpKVxuICoge1xuICogICAgIGxldCBzcHJpdGUgPSBQSVhJLlNwcml0ZS5mcm9tKFwibXlJbWFnZS5wbmdcIik7XG4gKiAgICAgY29udGFpbmVyLmFkZENoaWxkKHNwcml0ZSk7XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBBbmQgaGVyZSB5b3UgaGF2ZSBhIGh1bmRyZWQgc3ByaXRlcyB0aGF0IHdpbGwgYmUgcmVuZGVyZWQgYXQgdGhlIHNwZWVkIG9mIGxpZ2h0LlxuICpcbiAqIEBjbGFzc1xuICogQGV4dGVuZHMgUElYSS5Db250YWluZXJcbiAqIEBtZW1iZXJvZiBQSVhJXG4gKi9cbnZhciBQYXJ0aWNsZUNvbnRhaW5lciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUGFydGljbGVDb250YWluZXIsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFttYXhTaXplPTE1MDBdIC0gVGhlIG1heGltdW0gbnVtYmVyIG9mIHBhcnRpY2xlcyB0aGF0IGNhbiBiZSByZW5kZXJlZCBieSB0aGUgY29udGFpbmVyLlxuICAgICAqICBBZmZlY3RzIHNpemUgb2YgYWxsb2NhdGVkIGJ1ZmZlcnMuXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtwcm9wZXJ0aWVzXSAtIFRoZSBwcm9wZXJ0aWVzIG9mIGNoaWxkcmVuIHRoYXQgc2hvdWxkIGJlIHVwbG9hZGVkIHRvIHRoZSBncHUgYW5kIGFwcGxpZWQuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbcHJvcGVydGllcy52ZXJ0aWNlcz1mYWxzZV0gLSBXaGVuIHRydWUsIHZlcnRpY2VzIGJlIHVwbG9hZGVkIGFuZCBhcHBsaWVkLlxuICAgICAqICAgICAgICAgICAgICAgICAgaWYgc3ByaXRlJ3MgYCBzY2FsZS9hbmNob3IvdHJpbS9mcmFtZS9vcmlnYCBpcyBkeW5hbWljLCBwbGVhc2Ugc2V0IGB0cnVlYC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtwcm9wZXJ0aWVzLnBvc2l0aW9uPXRydWVdIC0gV2hlbiB0cnVlLCBwb3NpdGlvbiBiZSB1cGxvYWRlZCBhbmQgYXBwbGllZC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtwcm9wZXJ0aWVzLnJvdGF0aW9uPWZhbHNlXSAtIFdoZW4gdHJ1ZSwgcm90YXRpb24gYmUgdXBsb2FkZWQgYW5kIGFwcGxpZWQuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbcHJvcGVydGllcy51dnM9ZmFsc2VdIC0gV2hlbiB0cnVlLCB1dnMgYmUgdXBsb2FkZWQgYW5kIGFwcGxpZWQuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbcHJvcGVydGllcy50aW50PWZhbHNlXSAtIFdoZW4gdHJ1ZSwgYWxwaGEgYW5kIHRpbnQgYmUgdXBsb2FkZWQgYW5kIGFwcGxpZWQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtiYXRjaFNpemU9MTYzODRdIC0gTnVtYmVyIG9mIHBhcnRpY2xlcyBwZXIgYmF0Y2guIElmIGxlc3MgdGhhbiBtYXhTaXplLCBpdCB1c2VzIG1heFNpemUgaW5zdGVhZC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFthdXRvUmVzaXplPWZhbHNlXSAtIElmIHRydWUsIGNvbnRhaW5lciBhbGxvY2F0ZXMgbW9yZSBiYXRjaGVzIGluIGNhc2VcbiAgICAgKiAgdGhlcmUgYXJlIG1vcmUgdGhhbiBgbWF4U2l6ZWAgcGFydGljbGVzLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFBhcnRpY2xlQ29udGFpbmVyKG1heFNpemUsIHByb3BlcnRpZXMsIGJhdGNoU2l6ZSwgYXV0b1Jlc2l6ZSkge1xuICAgICAgICBpZiAobWF4U2l6ZSA9PT0gdm9pZCAwKSB7IG1heFNpemUgPSAxNTAwOyB9XG4gICAgICAgIGlmIChiYXRjaFNpemUgPT09IHZvaWQgMCkgeyBiYXRjaFNpemUgPSAxNjM4NDsgfVxuICAgICAgICBpZiAoYXV0b1Jlc2l6ZSA9PT0gdm9pZCAwKSB7IGF1dG9SZXNpemUgPSBmYWxzZTsgfVxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvLyBNYWtpbmcgc3VyZSB0aGUgYmF0Y2ggc2l6ZSBpcyB2YWxpZFxuICAgICAgICAvLyA2NTUzNSBpcyBtYXggdmVydGV4IGluZGV4IGluIHRoZSBpbmRleCBidWZmZXIgKHNlZSBQYXJ0aWNsZVJlbmRlcmVyKVxuICAgICAgICAvLyBzbyBtYXggbnVtYmVyIG9mIHBhcnRpY2xlcyBpcyA2NTUzNiAvIDQgPSAxNjM4NFxuICAgICAgICB2YXIgbWF4QmF0Y2hTaXplID0gMTYzODQ7XG4gICAgICAgIGlmIChiYXRjaFNpemUgPiBtYXhCYXRjaFNpemUpIHtcbiAgICAgICAgICAgIGJhdGNoU2l6ZSA9IG1heEJhdGNoU2l6ZTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0IHByb3BlcnRpZXMgdG8gYmUgZHluYW1pYyAodHJ1ZSkgLyBzdGF0aWMgKGZhbHNlKVxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtib29sZWFuW119XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5fcHJvcGVydGllcyA9IFtmYWxzZSwgdHJ1ZSwgZmFsc2UsIGZhbHNlLCBmYWxzZV07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5fbWF4U2l6ZSA9IG1heFNpemU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5fYmF0Y2hTaXplID0gYmF0Y2hTaXplO1xuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7QXJyYXk8UElYSS5CdWZmZXI+fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuX2J1ZmZlcnMgPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogZm9yIGV2ZXJ5IGJhdGNoIHN0b3JlcyBfdXBkYXRlSUQgY29ycmVzcG9uZGluZyB0byB0aGUgbGFzdCBjaGFuZ2UgaW4gdGhhdCBiYXRjaFxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJbXX1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLl9idWZmZXJVcGRhdGVJRHMgPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIHdoZW4gY2hpbGQgaW5zZXJ0ZWQsIHJlbW92ZWQgb3IgY2hhbmdlcyBwb3NpdGlvbiB0aGlzIG51bWJlciBnb2VzIHVwXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcltdfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuX3VwZGF0ZUlEID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge2Jvb2xlYW59XG4gICAgICAgICAqXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5pbnRlcmFjdGl2ZUNoaWxkcmVuID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgYmxlbmQgbW9kZSB0byBiZSBhcHBsaWVkIHRvIHRoZSBzcHJpdGUuIEFwcGx5IGEgdmFsdWUgb2YgYFBJWEkuQkxFTkRfTU9ERVMuTk9STUFMYFxuICAgICAgICAgKiB0byByZXNldCB0aGUgYmxlbmQgbW9kZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKiBAZGVmYXVsdCBQSVhJLkJMRU5EX01PREVTLk5PUk1BTFxuICAgICAgICAgKiBAc2VlIFBJWEkuQkxFTkRfTU9ERVNcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmJsZW5kTW9kZSA9IEJMRU5EX01PREVTLk5PUk1BTDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIHRydWUsIGNvbnRhaW5lciBhbGxvY2F0ZXMgbW9yZSBiYXRjaGVzIGluIGNhc2UgdGhlcmUgYXJlIG1vcmUgdGhhbiBgbWF4U2l6ZWAgcGFydGljbGVzLlxuICAgICAgICAgKiBAbWVtYmVyIHtib29sZWFufVxuICAgICAgICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuYXV0b1Jlc2l6ZSA9IGF1dG9SZXNpemU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiB0cnVlIFBpeGlKUyB3aWxsIE1hdGguZmxvb3IoKSB4L3kgdmFsdWVzIHdoZW4gcmVuZGVyaW5nLCBzdG9wcGluZyBwaXhlbCBpbnRlcnBvbGF0aW9uLlxuICAgICAgICAgKiBBZHZhbnRhZ2VzIGNhbiBpbmNsdWRlIHNoYXJwZXIgaW1hZ2UgcXVhbGl0eSAobGlrZSB0ZXh0KSBhbmQgZmFzdGVyIHJlbmRlcmluZyBvbiBjYW52YXMuXG4gICAgICAgICAqIFRoZSBtYWluIGRpc2FkdmFudGFnZSBpcyBtb3ZlbWVudCBvZiBvYmplY3RzIG1heSBhcHBlYXIgbGVzcyBzbW9vdGguXG4gICAgICAgICAqIERlZmF1bHQgdG8gdHJ1ZSBoZXJlIGFzIHBlcmZvcm1hbmNlIGlzIHVzdWFsbHkgdGhlIHByaW9yaXR5IGZvciBwYXJ0aWNsZXMuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge2Jvb2xlYW59XG4gICAgICAgICAqIEBkZWZhdWx0IHRydWVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJvdW5kUGl4ZWxzID0gdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB0ZXh0dXJlIHVzZWQgdG8gcmVuZGVyIHRoZSBjaGlsZHJlbi5cbiAgICAgICAgICpcbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuQmFzZVRleHR1cmV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5iYXNlVGV4dHVyZSA9IG51bGw7XG4gICAgICAgIF90aGlzLnNldFByb3BlcnRpZXMocHJvcGVydGllcyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdGludCBhcHBsaWVkIHRvIHRoZSBjb250YWluZXIuXG4gICAgICAgICAqIFRoaXMgaXMgYSBoZXggdmFsdWUuIEEgdmFsdWUgb2YgMHhGRkZGRkYgd2lsbCByZW1vdmUgYW55IHRpbnQgZWZmZWN0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICAgICAqIEBkZWZhdWx0IDB4RkZGRkZGXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5fdGludCA9IDA7XG4gICAgICAgIF90aGlzLnRpbnRSZ2IgPSBuZXcgRmxvYXQzMkFycmF5KDQpO1xuICAgICAgICBfdGhpcy50aW50ID0gMHhGRkZGRkY7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgcHJpdmF0ZSBwcm9wZXJ0aWVzIGFycmF5IHRvIGR5bmFtaWMgLyBzdGF0aWMgYmFzZWQgb24gdGhlIHBhc3NlZCBwcm9wZXJ0aWVzIG9iamVjdFxuICAgICAqXG4gICAgICogQHBhcmFtIHtvYmplY3R9IHByb3BlcnRpZXMgLSBUaGUgcHJvcGVydGllcyB0byBiZSB1cGxvYWRlZFxuICAgICAqL1xuICAgIFBhcnRpY2xlQ29udGFpbmVyLnByb3RvdHlwZS5zZXRQcm9wZXJ0aWVzID0gZnVuY3Rpb24gKHByb3BlcnRpZXMpIHtcbiAgICAgICAgaWYgKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIHRoaXMuX3Byb3BlcnRpZXNbMF0gPSAndmVydGljZXMnIGluIHByb3BlcnRpZXMgfHwgJ3NjYWxlJyBpbiBwcm9wZXJ0aWVzXG4gICAgICAgICAgICAgICAgPyAhIXByb3BlcnRpZXMudmVydGljZXMgfHwgISFwcm9wZXJ0aWVzLnNjYWxlIDogdGhpcy5fcHJvcGVydGllc1swXTtcbiAgICAgICAgICAgIHRoaXMuX3Byb3BlcnRpZXNbMV0gPSAncG9zaXRpb24nIGluIHByb3BlcnRpZXMgPyAhIXByb3BlcnRpZXMucG9zaXRpb24gOiB0aGlzLl9wcm9wZXJ0aWVzWzFdO1xuICAgICAgICAgICAgdGhpcy5fcHJvcGVydGllc1syXSA9ICdyb3RhdGlvbicgaW4gcHJvcGVydGllcyA/ICEhcHJvcGVydGllcy5yb3RhdGlvbiA6IHRoaXMuX3Byb3BlcnRpZXNbMl07XG4gICAgICAgICAgICB0aGlzLl9wcm9wZXJ0aWVzWzNdID0gJ3V2cycgaW4gcHJvcGVydGllcyA/ICEhcHJvcGVydGllcy51dnMgOiB0aGlzLl9wcm9wZXJ0aWVzWzNdO1xuICAgICAgICAgICAgdGhpcy5fcHJvcGVydGllc1s0XSA9ICd0aW50JyBpbiBwcm9wZXJ0aWVzIHx8ICdhbHBoYScgaW4gcHJvcGVydGllc1xuICAgICAgICAgICAgICAgID8gISFwcm9wZXJ0aWVzLnRpbnQgfHwgISFwcm9wZXJ0aWVzLmFscGhhIDogdGhpcy5fcHJvcGVydGllc1s0XTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgb2JqZWN0IHRyYW5zZm9ybSBmb3IgcmVuZGVyaW5nXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFBhcnRpY2xlQ29udGFpbmVyLnByb3RvdHlwZS51cGRhdGVUcmFuc2Zvcm0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIFRPRE8gZG9uJ3QgbmVlZCB0byFcbiAgICAgICAgdGhpcy5kaXNwbGF5T2JqZWN0VXBkYXRlVHJhbnNmb3JtKCk7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUGFydGljbGVDb250YWluZXIucHJvdG90eXBlLCBcInRpbnRcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHRpbnQgYXBwbGllZCB0byB0aGUgY29udGFpbmVyLiBUaGlzIGlzIGEgaGV4IHZhbHVlLlxuICAgICAgICAgKiBBIHZhbHVlIG9mIDB4RkZGRkZGIHdpbGwgcmVtb3ZlIGFueSB0aW50IGVmZmVjdC5cbiAgICAgICAgICoqIElNUE9SVEFOVDogVGhpcyBpcyBhIFdlYkdMIG9ubHkgZmVhdHVyZSBhbmQgd2lsbCBiZSBpZ25vcmVkIGJ5IHRoZSBjYW52YXMgcmVuZGVyZXIuXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn1cbiAgICAgICAgICogQGRlZmF1bHQgMHhGRkZGRkZcbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RpbnQ7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLl90aW50ID0gdmFsdWU7XG4gICAgICAgICAgICBoZXgycmdiKHZhbHVlLCB0aGlzLnRpbnRSZ2IpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgLyoqXG4gICAgICogUmVuZGVycyB0aGUgY29udGFpbmVyIHVzaW5nIHRoZSBXZWJHTCByZW5kZXJlclxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge1BJWEkuUmVuZGVyZXJ9IHJlbmRlcmVyIC0gVGhlIHdlYmdsIHJlbmRlcmVyXG4gICAgICovXG4gICAgUGFydGljbGVDb250YWluZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChyZW5kZXJlcikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoIXRoaXMudmlzaWJsZSB8fCB0aGlzLndvcmxkQWxwaGEgPD0gMCB8fCAhdGhpcy5jaGlsZHJlbi5sZW5ndGggfHwgIXRoaXMucmVuZGVyYWJsZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5iYXNlVGV4dHVyZSkge1xuICAgICAgICAgICAgdGhpcy5iYXNlVGV4dHVyZSA9IHRoaXMuY2hpbGRyZW5bMF0uX3RleHR1cmUuYmFzZVRleHR1cmU7XG4gICAgICAgICAgICBpZiAoIXRoaXMuYmFzZVRleHR1cmUudmFsaWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJhc2VUZXh0dXJlLm9uY2UoJ3VwZGF0ZScsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLm9uQ2hpbGRyZW5DaGFuZ2UoMCk7IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJlbmRlcmVyLmJhdGNoLnNldE9iamVjdFJlbmRlcmVyKHJlbmRlcmVyLnBsdWdpbnMucGFydGljbGUpO1xuICAgICAgICByZW5kZXJlci5wbHVnaW5zLnBhcnRpY2xlLnJlbmRlcih0aGlzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgZmxhZyB0aGF0IHN0YXRpYyBkYXRhIHNob3VsZCBiZSB1cGRhdGVkIHRvIHRydWVcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNtYWxsZXN0Q2hpbGRJbmRleCAtIFRoZSBzbWFsbGVzdCBjaGlsZCBpbmRleFxuICAgICAqL1xuICAgIFBhcnRpY2xlQ29udGFpbmVyLnByb3RvdHlwZS5vbkNoaWxkcmVuQ2hhbmdlID0gZnVuY3Rpb24gKHNtYWxsZXN0Q2hpbGRJbmRleCkge1xuICAgICAgICB2YXIgYnVmZmVySW5kZXggPSBNYXRoLmZsb29yKHNtYWxsZXN0Q2hpbGRJbmRleCAvIHRoaXMuX2JhdGNoU2l6ZSk7XG4gICAgICAgIHdoaWxlICh0aGlzLl9idWZmZXJVcGRhdGVJRHMubGVuZ3RoIDwgYnVmZmVySW5kZXgpIHtcbiAgICAgICAgICAgIHRoaXMuX2J1ZmZlclVwZGF0ZUlEcy5wdXNoKDApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2J1ZmZlclVwZGF0ZUlEc1tidWZmZXJJbmRleF0gPSArK3RoaXMuX3VwZGF0ZUlEO1xuICAgIH07XG4gICAgUGFydGljbGVDb250YWluZXIucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLl9idWZmZXJzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX2J1ZmZlcnMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9idWZmZXJzW2ldLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX2J1ZmZlcnMgPSBudWxsO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEZXN0cm95cyB0aGUgY29udGFpbmVyXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge29iamVjdHxib29sZWFufSBbb3B0aW9uc10gLSBPcHRpb25zIHBhcmFtZXRlci4gQSBib29sZWFuIHdpbGwgYWN0IGFzIGlmIGFsbCBvcHRpb25zXG4gICAgICogIGhhdmUgYmVlbiBzZXQgdG8gdGhhdCB2YWx1ZVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuY2hpbGRyZW49ZmFsc2VdIC0gaWYgc2V0IHRvIHRydWUsIGFsbCB0aGUgY2hpbGRyZW4gd2lsbCBoYXZlIHRoZWlyXG4gICAgICogIGRlc3Ryb3kgbWV0aG9kIGNhbGxlZCBhcyB3ZWxsLiAnb3B0aW9ucycgd2lsbCBiZSBwYXNzZWQgb24gdG8gdGhvc2UgY2FsbHMuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy50ZXh0dXJlPWZhbHNlXSAtIE9ubHkgdXNlZCBmb3IgY2hpbGQgU3ByaXRlcyBpZiBvcHRpb25zLmNoaWxkcmVuIGlzIHNldCB0byB0cnVlXG4gICAgICogIFNob3VsZCBpdCBkZXN0cm95IHRoZSB0ZXh0dXJlIG9mIHRoZSBjaGlsZCBzcHJpdGVcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmJhc2VUZXh0dXJlPWZhbHNlXSAtIE9ubHkgdXNlZCBmb3IgY2hpbGQgU3ByaXRlcyBpZiBvcHRpb25zLmNoaWxkcmVuIGlzIHNldCB0byB0cnVlXG4gICAgICogIFNob3VsZCBpdCBkZXN0cm95IHRoZSBiYXNlIHRleHR1cmUgb2YgdGhlIGNoaWxkIHNwcml0ZVxuICAgICAqL1xuICAgIFBhcnRpY2xlQ29udGFpbmVyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5kZXN0cm95LmNhbGwodGhpcywgb3B0aW9ucyk7XG4gICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgICAgICB0aGlzLl9wcm9wZXJ0aWVzID0gbnVsbDtcbiAgICAgICAgdGhpcy5fYnVmZmVycyA9IG51bGw7XG4gICAgICAgIHRoaXMuX2J1ZmZlclVwZGF0ZUlEcyA9IG51bGw7XG4gICAgfTtcbiAgICByZXR1cm4gUGFydGljbGVDb250YWluZXI7XG59KENvbnRhaW5lcikpO1xuXG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3Zlc1xuICpcbiAqIEJpZyB0aGFua3MgdG8gdGhlIHZlcnkgY2xldmVyIE1hdHQgRGVzTGF1cmllcnMgPG1hdHRkZXNsPiBodHRwczovL2dpdGh1Yi5jb20vbWF0dGRlc2wvXG4gKiBmb3IgY3JlYXRpbmcgdGhlIG9yaWdpbmFsIFBpeGlKUyB2ZXJzaW9uIVxuICogQWxzbyBhIHRoYW5rcyB0byBodHRwczovL2dpdGh1Yi5jb20vYmNoZXZhbGllciBmb3IgdHdlYWtpbmcgdGhlIHRpbnQgYW5kIGFscGhhIHNvIHRoYXRcbiAqIHRoZXkgbm93IHNoYXJlIDQgYnl0ZXMgb24gdGhlIHZlcnRleCBidWZmZXJcbiAqXG4gKiBIZWF2aWx5IGluc3BpcmVkIGJ5IExpYkdEWCdzIFBhcnRpY2xlQnVmZmVyOlxuICogaHR0cHM6Ly9naXRodWIuY29tL2xpYmdkeC9saWJnZHgvYmxvYi9tYXN0ZXIvZ2R4L3NyYy9jb20vYmFkbG9naWMvZ2R4L2dyYXBoaWNzL2cyZC9QYXJ0aWNsZUJ1ZmZlci5qYXZhXG4gKi9cbi8qKlxuICogVGhlIHBhcnRpY2xlIGJ1ZmZlciBtYW5hZ2VzIHRoZSBzdGF0aWMgYW5kIGR5bmFtaWMgYnVmZmVycyBmb3IgYSBwYXJ0aWNsZSBjb250YWluZXIuXG4gKlxuICogQGNsYXNzXG4gKiBAcHJpdmF0ZVxuICogQG1lbWJlcm9mIFBJWElcbiAqL1xudmFyIFBhcnRpY2xlQnVmZmVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtvYmplY3R9IHByb3BlcnRpZXMgLSBUaGUgcHJvcGVydGllcyB0byB1cGxvYWQuXG4gICAgICogQHBhcmFtIHtib29sZWFuW119IGR5bmFtaWNQcm9wZXJ0eUZsYWdzIC0gRmxhZ3MgZm9yIHdoaWNoIHByb3BlcnRpZXMgYXJlIGR5bmFtaWMuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNpemUgLSBUaGUgc2l6ZSBvZiB0aGUgYmF0Y2guXG4gICAgICovXG4gICAgZnVuY3Rpb24gUGFydGljbGVCdWZmZXIocHJvcGVydGllcywgZHluYW1pY1Byb3BlcnR5RmxhZ3MsIHNpemUpIHtcbiAgICAgICAgdGhpcy5nZW9tZXRyeSA9IG5ldyBHZW9tZXRyeSgpO1xuICAgICAgICB0aGlzLmluZGV4QnVmZmVyID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBudW1iZXIgb2YgcGFydGljbGVzIHRoZSBidWZmZXIgY2FuIGhvbGRcbiAgICAgICAgICpcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zaXplID0gc2l6ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgbGlzdCBvZiB0aGUgcHJvcGVydGllcyB0aGF0IGFyZSBkeW5hbWljLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAbWVtYmVyIHtvYmplY3RbXX1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZHluYW1pY1Byb3BlcnRpZXMgPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgbGlzdCBvZiB0aGUgcHJvcGVydGllcyB0aGF0IGFyZSBzdGF0aWMuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEBtZW1iZXIge29iamVjdFtdfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zdGF0aWNQcm9wZXJ0aWVzID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcGVydGllcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdmFyIHByb3BlcnR5ID0gcHJvcGVydGllc1tpXTtcbiAgICAgICAgICAgIC8vIE1ha2UgY29weSBvZiBwcm9wZXJ0aWVzIG9iamVjdCBzbyB0aGF0IHdoZW4gd2UgZWRpdCB0aGUgb2Zmc2V0IGl0IGRvZXNuJ3RcbiAgICAgICAgICAgIC8vIGNoYW5nZSBhbGwgb3RoZXIgaW5zdGFuY2VzIG9mIHRoZSBvYmplY3QgbGl0ZXJhbFxuICAgICAgICAgICAgcHJvcGVydHkgPSB7XG4gICAgICAgICAgICAgICAgYXR0cmlidXRlTmFtZTogcHJvcGVydHkuYXR0cmlidXRlTmFtZSxcbiAgICAgICAgICAgICAgICBzaXplOiBwcm9wZXJ0eS5zaXplLFxuICAgICAgICAgICAgICAgIHVwbG9hZEZ1bmN0aW9uOiBwcm9wZXJ0eS51cGxvYWRGdW5jdGlvbixcbiAgICAgICAgICAgICAgICB0eXBlOiBwcm9wZXJ0eS50eXBlIHx8IFRZUEVTLkZMT0FULFxuICAgICAgICAgICAgICAgIG9mZnNldDogcHJvcGVydHkub2Zmc2V0LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChkeW5hbWljUHJvcGVydHlGbGFnc1tpXSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZHluYW1pY1Byb3BlcnRpZXMucHVzaChwcm9wZXJ0eSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRpY1Byb3BlcnRpZXMucHVzaChwcm9wZXJ0eSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdGF0aWNTdHJpZGUgPSAwO1xuICAgICAgICB0aGlzLnN0YXRpY0J1ZmZlciA9IG51bGw7XG4gICAgICAgIHRoaXMuc3RhdGljRGF0YSA9IG51bGw7XG4gICAgICAgIHRoaXMuc3RhdGljRGF0YVVpbnQzMiA9IG51bGw7XG4gICAgICAgIHRoaXMuZHluYW1pY1N0cmlkZSA9IDA7XG4gICAgICAgIHRoaXMuZHluYW1pY0J1ZmZlciA9IG51bGw7XG4gICAgICAgIHRoaXMuZHluYW1pY0RhdGEgPSBudWxsO1xuICAgICAgICB0aGlzLmR5bmFtaWNEYXRhVWludDMyID0gbnVsbDtcbiAgICAgICAgdGhpcy5fdXBkYXRlSUQgPSAwO1xuICAgICAgICB0aGlzLmluaXRCdWZmZXJzKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdXAgdGhlIHJlbmRlcmVyIGNvbnRleHQgYW5kIG5lY2Vzc2FyeSBidWZmZXJzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBQYXJ0aWNsZUJ1ZmZlci5wcm90b3R5cGUuaW5pdEJ1ZmZlcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBnZW9tZXRyeSA9IHRoaXMuZ2VvbWV0cnk7XG4gICAgICAgIHZhciBkeW5hbWljT2Zmc2V0ID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEhvbGRzIHRoZSBpbmRpY2VzIG9mIHRoZSBnZW9tZXRyeSAocXVhZHMpIHRvIGRyYXdcbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7VWludDE2QXJyYXl9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmluZGV4QnVmZmVyID0gbmV3IEJ1ZmZlcihjcmVhdGVJbmRpY2VzRm9yUXVhZHModGhpcy5zaXplKSwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICAgIGdlb21ldHJ5LmFkZEluZGV4KHRoaXMuaW5kZXhCdWZmZXIpO1xuICAgICAgICB0aGlzLmR5bmFtaWNTdHJpZGUgPSAwO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuZHluYW1pY1Byb3BlcnRpZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBwcm9wZXJ0eSA9IHRoaXMuZHluYW1pY1Byb3BlcnRpZXNbaV07XG4gICAgICAgICAgICBwcm9wZXJ0eS5vZmZzZXQgPSBkeW5hbWljT2Zmc2V0O1xuICAgICAgICAgICAgZHluYW1pY09mZnNldCArPSBwcm9wZXJ0eS5zaXplO1xuICAgICAgICAgICAgdGhpcy5keW5hbWljU3RyaWRlICs9IHByb3BlcnR5LnNpemU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGR5bkJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcih0aGlzLnNpemUgKiB0aGlzLmR5bmFtaWNTdHJpZGUgKiA0ICogNCk7XG4gICAgICAgIHRoaXMuZHluYW1pY0RhdGEgPSBuZXcgRmxvYXQzMkFycmF5KGR5bkJ1ZmZlcik7XG4gICAgICAgIHRoaXMuZHluYW1pY0RhdGFVaW50MzIgPSBuZXcgVWludDMyQXJyYXkoZHluQnVmZmVyKTtcbiAgICAgICAgdGhpcy5keW5hbWljQnVmZmVyID0gbmV3IEJ1ZmZlcih0aGlzLmR5bmFtaWNEYXRhLCBmYWxzZSwgZmFsc2UpO1xuICAgICAgICAvLyBzdGF0aWMgLy9cbiAgICAgICAgdmFyIHN0YXRpY09mZnNldCA9IDA7XG4gICAgICAgIHRoaXMuc3RhdGljU3RyaWRlID0gMDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnN0YXRpY1Byb3BlcnRpZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBwcm9wZXJ0eSA9IHRoaXMuc3RhdGljUHJvcGVydGllc1tpXTtcbiAgICAgICAgICAgIHByb3BlcnR5Lm9mZnNldCA9IHN0YXRpY09mZnNldDtcbiAgICAgICAgICAgIHN0YXRpY09mZnNldCArPSBwcm9wZXJ0eS5zaXplO1xuICAgICAgICAgICAgdGhpcy5zdGF0aWNTdHJpZGUgKz0gcHJvcGVydHkuc2l6ZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc3RhdEJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcih0aGlzLnNpemUgKiB0aGlzLnN0YXRpY1N0cmlkZSAqIDQgKiA0KTtcbiAgICAgICAgdGhpcy5zdGF0aWNEYXRhID0gbmV3IEZsb2F0MzJBcnJheShzdGF0QnVmZmVyKTtcbiAgICAgICAgdGhpcy5zdGF0aWNEYXRhVWludDMyID0gbmV3IFVpbnQzMkFycmF5KHN0YXRCdWZmZXIpO1xuICAgICAgICB0aGlzLnN0YXRpY0J1ZmZlciA9IG5ldyBCdWZmZXIodGhpcy5zdGF0aWNEYXRhLCB0cnVlLCBmYWxzZSk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5keW5hbWljUHJvcGVydGllcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdmFyIHByb3BlcnR5ID0gdGhpcy5keW5hbWljUHJvcGVydGllc1tpXTtcbiAgICAgICAgICAgIGdlb21ldHJ5LmFkZEF0dHJpYnV0ZShwcm9wZXJ0eS5hdHRyaWJ1dGVOYW1lLCB0aGlzLmR5bmFtaWNCdWZmZXIsIDAsIHByb3BlcnR5LnR5cGUgPT09IFRZUEVTLlVOU0lHTkVEX0JZVEUsIHByb3BlcnR5LnR5cGUsIHRoaXMuZHluYW1pY1N0cmlkZSAqIDQsIHByb3BlcnR5Lm9mZnNldCAqIDQpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zdGF0aWNQcm9wZXJ0aWVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB2YXIgcHJvcGVydHkgPSB0aGlzLnN0YXRpY1Byb3BlcnRpZXNbaV07XG4gICAgICAgICAgICBnZW9tZXRyeS5hZGRBdHRyaWJ1dGUocHJvcGVydHkuYXR0cmlidXRlTmFtZSwgdGhpcy5zdGF0aWNCdWZmZXIsIDAsIHByb3BlcnR5LnR5cGUgPT09IFRZUEVTLlVOU0lHTkVEX0JZVEUsIHByb3BlcnR5LnR5cGUsIHRoaXMuc3RhdGljU3RyaWRlICogNCwgcHJvcGVydHkub2Zmc2V0ICogNCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFVwbG9hZHMgdGhlIGR5bmFtaWMgcHJvcGVydGllcy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtQSVhJLkRpc3BsYXlPYmplY3RbXX0gY2hpbGRyZW4gLSBUaGUgY2hpbGRyZW4gdG8gdXBsb2FkLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydEluZGV4IC0gVGhlIGluZGV4IHRvIHN0YXJ0IGF0LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBhbW91bnQgLSBUaGUgbnVtYmVyIHRvIHVwbG9hZC5cbiAgICAgKi9cbiAgICBQYXJ0aWNsZUJ1ZmZlci5wcm90b3R5cGUudXBsb2FkRHluYW1pYyA9IGZ1bmN0aW9uIChjaGlsZHJlbiwgc3RhcnRJbmRleCwgYW1vdW50KSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5keW5hbWljUHJvcGVydGllcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHByb3BlcnR5ID0gdGhpcy5keW5hbWljUHJvcGVydGllc1tpXTtcbiAgICAgICAgICAgIHByb3BlcnR5LnVwbG9hZEZ1bmN0aW9uKGNoaWxkcmVuLCBzdGFydEluZGV4LCBhbW91bnQsIHByb3BlcnR5LnR5cGUgPT09IFRZUEVTLlVOU0lHTkVEX0JZVEUgPyB0aGlzLmR5bmFtaWNEYXRhVWludDMyIDogdGhpcy5keW5hbWljRGF0YSwgdGhpcy5keW5hbWljU3RyaWRlLCBwcm9wZXJ0eS5vZmZzZXQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZHluYW1pY0J1ZmZlci5fdXBkYXRlSUQrKztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFVwbG9hZHMgdGhlIHN0YXRpYyBwcm9wZXJ0aWVzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge1BJWEkuRGlzcGxheU9iamVjdFtdfSBjaGlsZHJlbiAtIFRoZSBjaGlsZHJlbiB0byB1cGxvYWQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0SW5kZXggLSBUaGUgaW5kZXggdG8gc3RhcnQgYXQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGFtb3VudCAtIFRoZSBudW1iZXIgdG8gdXBsb2FkLlxuICAgICAqL1xuICAgIFBhcnRpY2xlQnVmZmVyLnByb3RvdHlwZS51cGxvYWRTdGF0aWMgPSBmdW5jdGlvbiAoY2hpbGRyZW4sIHN0YXJ0SW5kZXgsIGFtb3VudCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc3RhdGljUHJvcGVydGllcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHByb3BlcnR5ID0gdGhpcy5zdGF0aWNQcm9wZXJ0aWVzW2ldO1xuICAgICAgICAgICAgcHJvcGVydHkudXBsb2FkRnVuY3Rpb24oY2hpbGRyZW4sIHN0YXJ0SW5kZXgsIGFtb3VudCwgcHJvcGVydHkudHlwZSA9PT0gVFlQRVMuVU5TSUdORURfQllURSA/IHRoaXMuc3RhdGljRGF0YVVpbnQzMiA6IHRoaXMuc3RhdGljRGF0YSwgdGhpcy5zdGF0aWNTdHJpZGUsIHByb3BlcnR5Lm9mZnNldCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdGF0aWNCdWZmZXIuX3VwZGF0ZUlEKys7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEZXN0cm95cyB0aGUgUGFydGljbGVCdWZmZXIuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFBhcnRpY2xlQnVmZmVyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmluZGV4QnVmZmVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5keW5hbWljUHJvcGVydGllcyA9IG51bGw7XG4gICAgICAgIHRoaXMuZHluYW1pY0J1ZmZlciA9IG51bGw7XG4gICAgICAgIHRoaXMuZHluYW1pY0RhdGEgPSBudWxsO1xuICAgICAgICB0aGlzLmR5bmFtaWNEYXRhVWludDMyID0gbnVsbDtcbiAgICAgICAgdGhpcy5zdGF0aWNQcm9wZXJ0aWVzID0gbnVsbDtcbiAgICAgICAgdGhpcy5zdGF0aWNCdWZmZXIgPSBudWxsO1xuICAgICAgICB0aGlzLnN0YXRpY0RhdGEgPSBudWxsO1xuICAgICAgICB0aGlzLnN0YXRpY0RhdGFVaW50MzIgPSBudWxsO1xuICAgICAgICAvLyBhbGwgYnVmZmVycyBhcmUgZGVzdHJveWVkIGluc2lkZSBnZW9tZXRyeVxuICAgICAgICB0aGlzLmdlb21ldHJ5LmRlc3Ryb3koKTtcbiAgICB9O1xuICAgIHJldHVybiBQYXJ0aWNsZUJ1ZmZlcjtcbn0oKSk7XG5cbnZhciBmcmFnbWVudCA9IFwidmFyeWluZyB2ZWMyIHZUZXh0dXJlQ29vcmQ7XFxudmFyeWluZyB2ZWM0IHZDb2xvcjtcXG5cXG51bmlmb3JtIHNhbXBsZXIyRCB1U2FtcGxlcjtcXG5cXG52b2lkIG1haW4odm9pZCl7XFxuICAgIHZlYzQgY29sb3IgPSB0ZXh0dXJlMkQodVNhbXBsZXIsIHZUZXh0dXJlQ29vcmQpICogdkNvbG9yO1xcbiAgICBnbF9GcmFnQ29sb3IgPSBjb2xvcjtcXG59XCI7XG5cbnZhciB2ZXJ0ZXggPSBcImF0dHJpYnV0ZSB2ZWMyIGFWZXJ0ZXhQb3NpdGlvbjtcXG5hdHRyaWJ1dGUgdmVjMiBhVGV4dHVyZUNvb3JkO1xcbmF0dHJpYnV0ZSB2ZWM0IGFDb2xvcjtcXG5cXG5hdHRyaWJ1dGUgdmVjMiBhUG9zaXRpb25Db29yZDtcXG5hdHRyaWJ1dGUgZmxvYXQgYVJvdGF0aW9uO1xcblxcbnVuaWZvcm0gbWF0MyB0cmFuc2xhdGlvbk1hdHJpeDtcXG51bmlmb3JtIHZlYzQgdUNvbG9yO1xcblxcbnZhcnlpbmcgdmVjMiB2VGV4dHVyZUNvb3JkO1xcbnZhcnlpbmcgdmVjNCB2Q29sb3I7XFxuXFxudm9pZCBtYWluKHZvaWQpe1xcbiAgICBmbG9hdCB4ID0gKGFWZXJ0ZXhQb3NpdGlvbi54KSAqIGNvcyhhUm90YXRpb24pIC0gKGFWZXJ0ZXhQb3NpdGlvbi55KSAqIHNpbihhUm90YXRpb24pO1xcbiAgICBmbG9hdCB5ID0gKGFWZXJ0ZXhQb3NpdGlvbi54KSAqIHNpbihhUm90YXRpb24pICsgKGFWZXJ0ZXhQb3NpdGlvbi55KSAqIGNvcyhhUm90YXRpb24pO1xcblxcbiAgICB2ZWMyIHYgPSB2ZWMyKHgsIHkpO1xcbiAgICB2ID0gdiArIGFQb3NpdGlvbkNvb3JkO1xcblxcbiAgICBnbF9Qb3NpdGlvbiA9IHZlYzQoKHRyYW5zbGF0aW9uTWF0cml4ICogdmVjMyh2LCAxLjApKS54eSwgMC4wLCAxLjApO1xcblxcbiAgICB2VGV4dHVyZUNvb3JkID0gYVRleHR1cmVDb29yZDtcXG4gICAgdkNvbG9yID0gYUNvbG9yICogdUNvbG9yO1xcbn1cXG5cIjtcblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXNcbiAqXG4gKiBCaWcgdGhhbmtzIHRvIHRoZSB2ZXJ5IGNsZXZlciBNYXR0IERlc0xhdXJpZXJzIDxtYXR0ZGVzbD4gaHR0cHM6Ly9naXRodWIuY29tL21hdHRkZXNsL1xuICogZm9yIGNyZWF0aW5nIHRoZSBvcmlnaW5hbCBQaXhpSlMgdmVyc2lvbiFcbiAqIEFsc28gYSB0aGFua3MgdG8gaHR0cHM6Ly9naXRodWIuY29tL2JjaGV2YWxpZXIgZm9yIHR3ZWFraW5nIHRoZSB0aW50IGFuZCBhbHBoYSBzbyB0aGF0IHRoZXkgbm93XG4gKiBzaGFyZSA0IGJ5dGVzIG9uIHRoZSB2ZXJ0ZXggYnVmZmVyXG4gKlxuICogSGVhdmlseSBpbnNwaXJlZCBieSBMaWJHRFgncyBQYXJ0aWNsZVJlbmRlcmVyOlxuICogaHR0cHM6Ly9naXRodWIuY29tL2xpYmdkeC9saWJnZHgvYmxvYi9tYXN0ZXIvZ2R4L3NyYy9jb20vYmFkbG9naWMvZ2R4L2dyYXBoaWNzL2cyZC9QYXJ0aWNsZVJlbmRlcmVyLmphdmFcbiAqL1xuLyoqXG4gKiBSZW5kZXJlciBmb3IgUGFydGljbGVzIHRoYXQgaXMgZGVzaWduZXIgZm9yIHNwZWVkIG92ZXIgZmVhdHVyZSBzZXQuXG4gKlxuICogQGNsYXNzXG4gKiBAbWVtYmVyb2YgUElYSVxuICovXG52YXIgUGFydGljbGVSZW5kZXJlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUGFydGljbGVSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1BJWEkuUmVuZGVyZXJ9IHJlbmRlcmVyIC0gVGhlIHJlbmRlcmVyIHRoaXMgc3ByaXRlIGJhdGNoIHdvcmtzIGZvci5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBQYXJ0aWNsZVJlbmRlcmVyKHJlbmRlcmVyKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHJlbmRlcmVyKSB8fCB0aGlzO1xuICAgICAgICAvLyA2NTUzNSBpcyBtYXggdmVydGV4IGluZGV4IGluIHRoZSBpbmRleCBidWZmZXIgKHNlZSBQYXJ0aWNsZVJlbmRlcmVyKVxuICAgICAgICAvLyBzbyBtYXggbnVtYmVyIG9mIHBhcnRpY2xlcyBpcyA2NTUzNiAvIDQgPSAxNjM4NFxuICAgICAgICAvLyBhbmQgbWF4IG51bWJlciBvZiBlbGVtZW50IGluIHRoZSBpbmRleCBidWZmZXIgaXMgMTYzODQgKiA2ID0gOTgzMDRcbiAgICAgICAgLy8gQ3JlYXRpbmcgYSBmdWxsIGluZGV4IGJ1ZmZlciwgb3ZlcmhlYWQgaXMgOTgzMDQgKiAyID0gMTk2S29cbiAgICAgICAgLy8gbGV0IG51bUluZGljZXMgPSA5ODMwNDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBkZWZhdWx0IHNoYWRlciB0aGF0IGlzIHVzZWQgaWYgYSBzcHJpdGUgZG9lc24ndCBoYXZlIGEgbW9yZSBzcGVjaWZpYyBvbmUuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge1BJWEkuU2hhZGVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc2hhZGVyID0gbnVsbDtcbiAgICAgICAgX3RoaXMucHJvcGVydGllcyA9IG51bGw7XG4gICAgICAgIF90aGlzLnRlbXBNYXRyaXggPSBuZXcgTWF0cml4KCk7XG4gICAgICAgIF90aGlzLnByb3BlcnRpZXMgPSBbXG4gICAgICAgICAgICAvLyB2ZXJ0aWNlc0RhdGFcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVOYW1lOiAnYVZlcnRleFBvc2l0aW9uJyxcbiAgICAgICAgICAgICAgICBzaXplOiAyLFxuICAgICAgICAgICAgICAgIHVwbG9hZEZ1bmN0aW9uOiBfdGhpcy51cGxvYWRWZXJ0aWNlcyxcbiAgICAgICAgICAgICAgICBvZmZzZXQ6IDAsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLy8gcG9zaXRpb25EYXRhXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgYXR0cmlidXRlTmFtZTogJ2FQb3NpdGlvbkNvb3JkJyxcbiAgICAgICAgICAgICAgICBzaXplOiAyLFxuICAgICAgICAgICAgICAgIHVwbG9hZEZ1bmN0aW9uOiBfdGhpcy51cGxvYWRQb3NpdGlvbixcbiAgICAgICAgICAgICAgICBvZmZzZXQ6IDAsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLy8gcm90YXRpb25EYXRhXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgYXR0cmlidXRlTmFtZTogJ2FSb3RhdGlvbicsXG4gICAgICAgICAgICAgICAgc2l6ZTogMSxcbiAgICAgICAgICAgICAgICB1cGxvYWRGdW5jdGlvbjogX3RoaXMudXBsb2FkUm90YXRpb24sXG4gICAgICAgICAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8vIHV2c0RhdGFcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVOYW1lOiAnYVRleHR1cmVDb29yZCcsXG4gICAgICAgICAgICAgICAgc2l6ZTogMixcbiAgICAgICAgICAgICAgICB1cGxvYWRGdW5jdGlvbjogX3RoaXMudXBsb2FkVXZzLFxuICAgICAgICAgICAgICAgIG9mZnNldDogMCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvLyB0aW50RGF0YVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZU5hbWU6ICdhQ29sb3InLFxuICAgICAgICAgICAgICAgIHNpemU6IDEsXG4gICAgICAgICAgICAgICAgdHlwZTogVFlQRVMuVU5TSUdORURfQllURSxcbiAgICAgICAgICAgICAgICB1cGxvYWRGdW5jdGlvbjogX3RoaXMudXBsb2FkVGludCxcbiAgICAgICAgICAgICAgICBvZmZzZXQ6IDAsXG4gICAgICAgICAgICB9IF07XG4gICAgICAgIF90aGlzLnNoYWRlciA9IFNoYWRlci5mcm9tKHZlcnRleCwgZnJhZ21lbnQsIHt9KTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBXZWJHTCBzdGF0ZSBpbiB3aGljaCB0aGlzIHJlbmRlcmVyIHdpbGwgd29yay5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7UElYSS5TdGF0ZX1cbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zdGF0ZSA9IFN0YXRlLmZvcjJkKCk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVuZGVycyB0aGUgcGFydGljbGUgY29udGFpbmVyIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UElYSS5QYXJ0aWNsZUNvbnRhaW5lcn0gY29udGFpbmVyIC0gVGhlIGNvbnRhaW5lciB0byByZW5kZXIgdXNpbmcgdGhpcyBQYXJ0aWNsZVJlbmRlcmVyXG4gICAgICovXG4gICAgUGFydGljbGVSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKGNvbnRhaW5lcikge1xuICAgICAgICB2YXIgY2hpbGRyZW4gPSBjb250YWluZXIuY2hpbGRyZW47XG4gICAgICAgIHZhciBtYXhTaXplID0gY29udGFpbmVyLl9tYXhTaXplO1xuICAgICAgICB2YXIgYmF0Y2hTaXplID0gY29udGFpbmVyLl9iYXRjaFNpemU7XG4gICAgICAgIHZhciByZW5kZXJlciA9IHRoaXMucmVuZGVyZXI7XG4gICAgICAgIHZhciB0b3RhbENoaWxkcmVuID0gY2hpbGRyZW4ubGVuZ3RoO1xuICAgICAgICBpZiAodG90YWxDaGlsZHJlbiA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRvdGFsQ2hpbGRyZW4gPiBtYXhTaXplICYmICFjb250YWluZXIuYXV0b1Jlc2l6ZSkge1xuICAgICAgICAgICAgdG90YWxDaGlsZHJlbiA9IG1heFNpemU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGJ1ZmZlcnMgPSBjb250YWluZXIuX2J1ZmZlcnM7XG4gICAgICAgIGlmICghYnVmZmVycykge1xuICAgICAgICAgICAgYnVmZmVycyA9IGNvbnRhaW5lci5fYnVmZmVycyA9IHRoaXMuZ2VuZXJhdGVCdWZmZXJzKGNvbnRhaW5lcik7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGJhc2VUZXh0dXJlID0gY2hpbGRyZW5bMF0uX3RleHR1cmUuYmFzZVRleHR1cmU7XG4gICAgICAgIC8vIGlmIHRoZSB1dnMgaGF2ZSBub3QgdXBkYXRlZCB0aGVuIG5vIHBvaW50IHJlbmRlcmluZyBqdXN0IHlldCFcbiAgICAgICAgdGhpcy5zdGF0ZS5ibGVuZE1vZGUgPSBjb3JyZWN0QmxlbmRNb2RlKGNvbnRhaW5lci5ibGVuZE1vZGUsIGJhc2VUZXh0dXJlLmFscGhhTW9kZSk7XG4gICAgICAgIHJlbmRlcmVyLnN0YXRlLnNldCh0aGlzLnN0YXRlKTtcbiAgICAgICAgdmFyIGdsID0gcmVuZGVyZXIuZ2w7XG4gICAgICAgIHZhciBtID0gY29udGFpbmVyLndvcmxkVHJhbnNmb3JtLmNvcHlUbyh0aGlzLnRlbXBNYXRyaXgpO1xuICAgICAgICBtLnByZXBlbmQocmVuZGVyZXIuZ2xvYmFsVW5pZm9ybXMudW5pZm9ybXMucHJvamVjdGlvbk1hdHJpeCk7XG4gICAgICAgIHRoaXMuc2hhZGVyLnVuaWZvcm1zLnRyYW5zbGF0aW9uTWF0cml4ID0gbS50b0FycmF5KHRydWUpO1xuICAgICAgICB0aGlzLnNoYWRlci51bmlmb3Jtcy51Q29sb3IgPSBwcmVtdWx0aXBseVJnYmEoY29udGFpbmVyLnRpbnRSZ2IsIGNvbnRhaW5lci53b3JsZEFscGhhLCB0aGlzLnNoYWRlci51bmlmb3Jtcy51Q29sb3IsIGJhc2VUZXh0dXJlLmFscGhhTW9kZSk7XG4gICAgICAgIHRoaXMuc2hhZGVyLnVuaWZvcm1zLnVTYW1wbGVyID0gYmFzZVRleHR1cmU7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2hhZGVyLmJpbmQodGhpcy5zaGFkZXIpO1xuICAgICAgICB2YXIgdXBkYXRlU3RhdGljID0gZmFsc2U7XG4gICAgICAgIC8vIG5vdyBsZXRzIHVwbG9hZCBhbmQgcmVuZGVyIHRoZSBidWZmZXJzLi5cbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGogPSAwOyBpIDwgdG90YWxDaGlsZHJlbjsgaSArPSBiYXRjaFNpemUsIGogKz0gMSkge1xuICAgICAgICAgICAgdmFyIGFtb3VudCA9ICh0b3RhbENoaWxkcmVuIC0gaSk7XG4gICAgICAgICAgICBpZiAoYW1vdW50ID4gYmF0Y2hTaXplKSB7XG4gICAgICAgICAgICAgICAgYW1vdW50ID0gYmF0Y2hTaXplO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGogPj0gYnVmZmVycy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBidWZmZXJzLnB1c2godGhpcy5fZ2VuZXJhdGVPbmVNb3JlQnVmZmVyKGNvbnRhaW5lcikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGJ1ZmZlciA9IGJ1ZmZlcnNbal07XG4gICAgICAgICAgICAvLyB3ZSBhbHdheXMgdXBsb2FkIHRoZSBkeW5hbWljXG4gICAgICAgICAgICBidWZmZXIudXBsb2FkRHluYW1pYyhjaGlsZHJlbiwgaSwgYW1vdW50KTtcbiAgICAgICAgICAgIHZhciBiaWQgPSBjb250YWluZXIuX2J1ZmZlclVwZGF0ZUlEc1tqXSB8fCAwO1xuICAgICAgICAgICAgdXBkYXRlU3RhdGljID0gdXBkYXRlU3RhdGljIHx8IChidWZmZXIuX3VwZGF0ZUlEIDwgYmlkKTtcbiAgICAgICAgICAgIC8vIHdlIG9ubHkgdXBsb2FkIHRoZSBzdGF0aWMgY29udGVudCB3aGVuIHdlIGhhdmUgdG8hXG4gICAgICAgICAgICBpZiAodXBkYXRlU3RhdGljKSB7XG4gICAgICAgICAgICAgICAgYnVmZmVyLl91cGRhdGVJRCA9IGNvbnRhaW5lci5fdXBkYXRlSUQ7XG4gICAgICAgICAgICAgICAgYnVmZmVyLnVwbG9hZFN0YXRpYyhjaGlsZHJlbiwgaSwgYW1vdW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGJpbmQgdGhlIGJ1ZmZlclxuICAgICAgICAgICAgcmVuZGVyZXIuZ2VvbWV0cnkuYmluZChidWZmZXIuZ2VvbWV0cnkpO1xuICAgICAgICAgICAgZ2wuZHJhd0VsZW1lbnRzKGdsLlRSSUFOR0xFUywgYW1vdW50ICogNiwgZ2wuVU5TSUdORURfU0hPUlQsIDApO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIG9uZSBwYXJ0aWNsZSBidWZmZXIgZm9yIGVhY2ggY2hpbGQgaW4gdGhlIGNvbnRhaW5lciB3ZSB3YW50IHRvIHJlbmRlciBhbmQgdXBkYXRlcyBpbnRlcm5hbCBwcm9wZXJ0aWVzXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuUGFydGljbGVDb250YWluZXJ9IGNvbnRhaW5lciAtIFRoZSBjb250YWluZXIgdG8gcmVuZGVyIHVzaW5nIHRoaXMgUGFydGljbGVSZW5kZXJlclxuICAgICAqIEByZXR1cm4ge1BJWEkuUGFydGljbGVCdWZmZXJbXX0gVGhlIGJ1ZmZlcnNcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFBhcnRpY2xlUmVuZGVyZXIucHJvdG90eXBlLmdlbmVyYXRlQnVmZmVycyA9IGZ1bmN0aW9uIChjb250YWluZXIpIHtcbiAgICAgICAgdmFyIGJ1ZmZlcnMgPSBbXTtcbiAgICAgICAgdmFyIHNpemUgPSBjb250YWluZXIuX21heFNpemU7XG4gICAgICAgIHZhciBiYXRjaFNpemUgPSBjb250YWluZXIuX2JhdGNoU2l6ZTtcbiAgICAgICAgdmFyIGR5bmFtaWNQcm9wZXJ0eUZsYWdzID0gY29udGFpbmVyLl9wcm9wZXJ0aWVzO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7IGkgKz0gYmF0Y2hTaXplKSB7XG4gICAgICAgICAgICBidWZmZXJzLnB1c2gobmV3IFBhcnRpY2xlQnVmZmVyKHRoaXMucHJvcGVydGllcywgZHluYW1pY1Byb3BlcnR5RmxhZ3MsIGJhdGNoU2l6ZSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBidWZmZXJzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBvbmUgbW9yZSBwYXJ0aWNsZSBidWZmZXIsIGJlY2F1c2UgY29udGFpbmVyIGhhcyBhdXRvUmVzaXplIGZlYXR1cmVcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UElYSS5QYXJ0aWNsZUNvbnRhaW5lcn0gY29udGFpbmVyIC0gVGhlIGNvbnRhaW5lciB0byByZW5kZXIgdXNpbmcgdGhpcyBQYXJ0aWNsZVJlbmRlcmVyXG4gICAgICogQHJldHVybiB7UElYSS5QYXJ0aWNsZUJ1ZmZlcn0gZ2VuZXJhdGVkIGJ1ZmZlclxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUGFydGljbGVSZW5kZXJlci5wcm90b3R5cGUuX2dlbmVyYXRlT25lTW9yZUJ1ZmZlciA9IGZ1bmN0aW9uIChjb250YWluZXIpIHtcbiAgICAgICAgdmFyIGJhdGNoU2l6ZSA9IGNvbnRhaW5lci5fYmF0Y2hTaXplO1xuICAgICAgICB2YXIgZHluYW1pY1Byb3BlcnR5RmxhZ3MgPSBjb250YWluZXIuX3Byb3BlcnRpZXM7XG4gICAgICAgIHJldHVybiBuZXcgUGFydGljbGVCdWZmZXIodGhpcy5wcm9wZXJ0aWVzLCBkeW5hbWljUHJvcGVydHlGbGFncywgYmF0Y2hTaXplKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFVwbG9hZHMgdGhlIHZlcnRpY2VzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQSVhJLkRpc3BsYXlPYmplY3RbXX0gY2hpbGRyZW4gLSB0aGUgYXJyYXkgb2YgZGlzcGxheSBvYmplY3RzIHRvIHJlbmRlclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydEluZGV4IC0gdGhlIGluZGV4IHRvIHN0YXJ0IGZyb20gaW4gdGhlIGNoaWxkcmVuIGFycmF5XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGFtb3VudCAtIHRoZSBhbW91bnQgb2YgY2hpbGRyZW4gdGhhdCB3aWxsIGhhdmUgdGhlaXIgdmVydGljZXMgdXBsb2FkZWRcbiAgICAgKiBAcGFyYW0ge251bWJlcltdfSBhcnJheSAtIFRoZSB2ZXJ0aWNlcyB0byB1cGxvYWQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSAtIFN0cmlkZSB0byB1c2UgZm9yIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IC0gT2Zmc2V0IHRvIHN0YXJ0IGF0LlxuICAgICAqL1xuICAgIFBhcnRpY2xlUmVuZGVyZXIucHJvdG90eXBlLnVwbG9hZFZlcnRpY2VzID0gZnVuY3Rpb24gKGNoaWxkcmVuLCBzdGFydEluZGV4LCBhbW91bnQsIGFycmF5LCBzdHJpZGUsIG9mZnNldCkge1xuICAgICAgICB2YXIgdzAgPSAwO1xuICAgICAgICB2YXIgdzEgPSAwO1xuICAgICAgICB2YXIgaDAgPSAwO1xuICAgICAgICB2YXIgaDEgPSAwO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFtb3VudDsgKytpKSB7XG4gICAgICAgICAgICB2YXIgc3ByaXRlID0gY2hpbGRyZW5bc3RhcnRJbmRleCArIGldO1xuICAgICAgICAgICAgdmFyIHRleHR1cmUgPSBzcHJpdGUuX3RleHR1cmU7XG4gICAgICAgICAgICB2YXIgc3ggPSBzcHJpdGUuc2NhbGUueDtcbiAgICAgICAgICAgIHZhciBzeSA9IHNwcml0ZS5zY2FsZS55O1xuICAgICAgICAgICAgdmFyIHRyaW0gPSB0ZXh0dXJlLnRyaW07XG4gICAgICAgICAgICB2YXIgb3JpZyA9IHRleHR1cmUub3JpZztcbiAgICAgICAgICAgIGlmICh0cmltKSB7XG4gICAgICAgICAgICAgICAgLy8gaWYgdGhlIHNwcml0ZSBpcyB0cmltbWVkIGFuZCBpcyBub3QgYSB0aWxpbmdzcHJpdGUgdGhlbiB3ZSBuZWVkIHRvIGFkZCB0aGVcbiAgICAgICAgICAgICAgICAvLyBleHRyYSBzcGFjZSBiZWZvcmUgdHJhbnNmb3JtaW5nIHRoZSBzcHJpdGUgY29vcmRzLi5cbiAgICAgICAgICAgICAgICB3MSA9IHRyaW0ueCAtIChzcHJpdGUuYW5jaG9yLnggKiBvcmlnLndpZHRoKTtcbiAgICAgICAgICAgICAgICB3MCA9IHcxICsgdHJpbS53aWR0aDtcbiAgICAgICAgICAgICAgICBoMSA9IHRyaW0ueSAtIChzcHJpdGUuYW5jaG9yLnkgKiBvcmlnLmhlaWdodCk7XG4gICAgICAgICAgICAgICAgaDAgPSBoMSArIHRyaW0uaGVpZ2h0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdzAgPSAob3JpZy53aWR0aCkgKiAoMSAtIHNwcml0ZS5hbmNob3IueCk7XG4gICAgICAgICAgICAgICAgdzEgPSAob3JpZy53aWR0aCkgKiAtc3ByaXRlLmFuY2hvci54O1xuICAgICAgICAgICAgICAgIGgwID0gb3JpZy5oZWlnaHQgKiAoMSAtIHNwcml0ZS5hbmNob3IueSk7XG4gICAgICAgICAgICAgICAgaDEgPSBvcmlnLmhlaWdodCAqIC1zcHJpdGUuYW5jaG9yLnk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhcnJheVtvZmZzZXRdID0gdzEgKiBzeDtcbiAgICAgICAgICAgIGFycmF5W29mZnNldCArIDFdID0gaDEgKiBzeTtcbiAgICAgICAgICAgIGFycmF5W29mZnNldCArIHN0cmlkZV0gPSB3MCAqIHN4O1xuICAgICAgICAgICAgYXJyYXlbb2Zmc2V0ICsgc3RyaWRlICsgMV0gPSBoMSAqIHN5O1xuICAgICAgICAgICAgYXJyYXlbb2Zmc2V0ICsgKHN0cmlkZSAqIDIpXSA9IHcwICogc3g7XG4gICAgICAgICAgICBhcnJheVtvZmZzZXQgKyAoc3RyaWRlICogMikgKyAxXSA9IGgwICogc3k7XG4gICAgICAgICAgICBhcnJheVtvZmZzZXQgKyAoc3RyaWRlICogMyldID0gdzEgKiBzeDtcbiAgICAgICAgICAgIGFycmF5W29mZnNldCArIChzdHJpZGUgKiAzKSArIDFdID0gaDAgKiBzeTtcbiAgICAgICAgICAgIG9mZnNldCArPSBzdHJpZGUgKiA0O1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBVcGxvYWRzIHRoZSBwb3NpdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UElYSS5EaXNwbGF5T2JqZWN0W119IGNoaWxkcmVuIC0gdGhlIGFycmF5IG9mIGRpc3BsYXkgb2JqZWN0cyB0byByZW5kZXJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3RhcnRJbmRleCAtIHRoZSBpbmRleCB0byBzdGFydCBmcm9tIGluIHRoZSBjaGlsZHJlbiBhcnJheVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBhbW91bnQgLSB0aGUgYW1vdW50IG9mIGNoaWxkcmVuIHRoYXQgd2lsbCBoYXZlIHRoZWlyIHBvc2l0aW9ucyB1cGxvYWRlZFxuICAgICAqIEBwYXJhbSB7bnVtYmVyW119IGFycmF5IC0gVGhlIHZlcnRpY2VzIHRvIHVwbG9hZC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIC0gU3RyaWRlIHRvIHVzZSBmb3IgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgLSBPZmZzZXQgdG8gc3RhcnQgYXQuXG4gICAgICovXG4gICAgUGFydGljbGVSZW5kZXJlci5wcm90b3R5cGUudXBsb2FkUG9zaXRpb24gPSBmdW5jdGlvbiAoY2hpbGRyZW4sIHN0YXJ0SW5kZXgsIGFtb3VudCwgYXJyYXksIHN0cmlkZSwgb2Zmc2V0KSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYW1vdW50OyBpKyspIHtcbiAgICAgICAgICAgIHZhciBzcHJpdGVQb3NpdGlvbiA9IGNoaWxkcmVuW3N0YXJ0SW5kZXggKyBpXS5wb3NpdGlvbjtcbiAgICAgICAgICAgIGFycmF5W29mZnNldF0gPSBzcHJpdGVQb3NpdGlvbi54O1xuICAgICAgICAgICAgYXJyYXlbb2Zmc2V0ICsgMV0gPSBzcHJpdGVQb3NpdGlvbi55O1xuICAgICAgICAgICAgYXJyYXlbb2Zmc2V0ICsgc3RyaWRlXSA9IHNwcml0ZVBvc2l0aW9uLng7XG4gICAgICAgICAgICBhcnJheVtvZmZzZXQgKyBzdHJpZGUgKyAxXSA9IHNwcml0ZVBvc2l0aW9uLnk7XG4gICAgICAgICAgICBhcnJheVtvZmZzZXQgKyAoc3RyaWRlICogMildID0gc3ByaXRlUG9zaXRpb24ueDtcbiAgICAgICAgICAgIGFycmF5W29mZnNldCArIChzdHJpZGUgKiAyKSArIDFdID0gc3ByaXRlUG9zaXRpb24ueTtcbiAgICAgICAgICAgIGFycmF5W29mZnNldCArIChzdHJpZGUgKiAzKV0gPSBzcHJpdGVQb3NpdGlvbi54O1xuICAgICAgICAgICAgYXJyYXlbb2Zmc2V0ICsgKHN0cmlkZSAqIDMpICsgMV0gPSBzcHJpdGVQb3NpdGlvbi55O1xuICAgICAgICAgICAgb2Zmc2V0ICs9IHN0cmlkZSAqIDQ7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFVwbG9hZHMgdGhlIHJvdGF0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQSVhJLkRpc3BsYXlPYmplY3RbXX0gY2hpbGRyZW4gLSB0aGUgYXJyYXkgb2YgZGlzcGxheSBvYmplY3RzIHRvIHJlbmRlclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydEluZGV4IC0gdGhlIGluZGV4IHRvIHN0YXJ0IGZyb20gaW4gdGhlIGNoaWxkcmVuIGFycmF5XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGFtb3VudCAtIHRoZSBhbW91bnQgb2YgY2hpbGRyZW4gdGhhdCB3aWxsIGhhdmUgdGhlaXIgcm90YXRpb24gdXBsb2FkZWRcbiAgICAgKiBAcGFyYW0ge251bWJlcltdfSBhcnJheSAtIFRoZSB2ZXJ0aWNlcyB0byB1cGxvYWQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSAtIFN0cmlkZSB0byB1c2UgZm9yIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IC0gT2Zmc2V0IHRvIHN0YXJ0IGF0LlxuICAgICAqL1xuICAgIFBhcnRpY2xlUmVuZGVyZXIucHJvdG90eXBlLnVwbG9hZFJvdGF0aW9uID0gZnVuY3Rpb24gKGNoaWxkcmVuLCBzdGFydEluZGV4LCBhbW91bnQsIGFycmF5LCBzdHJpZGUsIG9mZnNldCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFtb3VudDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgc3ByaXRlUm90YXRpb24gPSBjaGlsZHJlbltzdGFydEluZGV4ICsgaV0ucm90YXRpb247XG4gICAgICAgICAgICBhcnJheVtvZmZzZXRdID0gc3ByaXRlUm90YXRpb247XG4gICAgICAgICAgICBhcnJheVtvZmZzZXQgKyBzdHJpZGVdID0gc3ByaXRlUm90YXRpb247XG4gICAgICAgICAgICBhcnJheVtvZmZzZXQgKyAoc3RyaWRlICogMildID0gc3ByaXRlUm90YXRpb247XG4gICAgICAgICAgICBhcnJheVtvZmZzZXQgKyAoc3RyaWRlICogMyldID0gc3ByaXRlUm90YXRpb247XG4gICAgICAgICAgICBvZmZzZXQgKz0gc3RyaWRlICogNDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogVXBsb2FkcyB0aGUgVXZzXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuRGlzcGxheU9iamVjdFtdfSBjaGlsZHJlbiAtIHRoZSBhcnJheSBvZiBkaXNwbGF5IG9iamVjdHMgdG8gcmVuZGVyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0SW5kZXggLSB0aGUgaW5kZXggdG8gc3RhcnQgZnJvbSBpbiB0aGUgY2hpbGRyZW4gYXJyYXlcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYW1vdW50IC0gdGhlIGFtb3VudCBvZiBjaGlsZHJlbiB0aGF0IHdpbGwgaGF2ZSB0aGVpciByb3RhdGlvbiB1cGxvYWRlZFxuICAgICAqIEBwYXJhbSB7bnVtYmVyW119IGFycmF5IC0gVGhlIHZlcnRpY2VzIHRvIHVwbG9hZC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIC0gU3RyaWRlIHRvIHVzZSBmb3IgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgLSBPZmZzZXQgdG8gc3RhcnQgYXQuXG4gICAgICovXG4gICAgUGFydGljbGVSZW5kZXJlci5wcm90b3R5cGUudXBsb2FkVXZzID0gZnVuY3Rpb24gKGNoaWxkcmVuLCBzdGFydEluZGV4LCBhbW91bnQsIGFycmF5LCBzdHJpZGUsIG9mZnNldCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFtb3VudDsgKytpKSB7XG4gICAgICAgICAgICB2YXIgdGV4dHVyZVV2cyA9IGNoaWxkcmVuW3N0YXJ0SW5kZXggKyBpXS5fdGV4dHVyZS5fdXZzO1xuICAgICAgICAgICAgaWYgKHRleHR1cmVVdnMpIHtcbiAgICAgICAgICAgICAgICBhcnJheVtvZmZzZXRdID0gdGV4dHVyZVV2cy54MDtcbiAgICAgICAgICAgICAgICBhcnJheVtvZmZzZXQgKyAxXSA9IHRleHR1cmVVdnMueTA7XG4gICAgICAgICAgICAgICAgYXJyYXlbb2Zmc2V0ICsgc3RyaWRlXSA9IHRleHR1cmVVdnMueDE7XG4gICAgICAgICAgICAgICAgYXJyYXlbb2Zmc2V0ICsgc3RyaWRlICsgMV0gPSB0ZXh0dXJlVXZzLnkxO1xuICAgICAgICAgICAgICAgIGFycmF5W29mZnNldCArIChzdHJpZGUgKiAyKV0gPSB0ZXh0dXJlVXZzLngyO1xuICAgICAgICAgICAgICAgIGFycmF5W29mZnNldCArIChzdHJpZGUgKiAyKSArIDFdID0gdGV4dHVyZVV2cy55MjtcbiAgICAgICAgICAgICAgICBhcnJheVtvZmZzZXQgKyAoc3RyaWRlICogMyldID0gdGV4dHVyZVV2cy54MztcbiAgICAgICAgICAgICAgICBhcnJheVtvZmZzZXQgKyAoc3RyaWRlICogMykgKyAxXSA9IHRleHR1cmVVdnMueTM7XG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IHN0cmlkZSAqIDQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPIHlvdSBrbm93IHRoaXMgY2FuIGJlIGVhc2llciFcbiAgICAgICAgICAgICAgICBhcnJheVtvZmZzZXRdID0gMDtcbiAgICAgICAgICAgICAgICBhcnJheVtvZmZzZXQgKyAxXSA9IDA7XG4gICAgICAgICAgICAgICAgYXJyYXlbb2Zmc2V0ICsgc3RyaWRlXSA9IDA7XG4gICAgICAgICAgICAgICAgYXJyYXlbb2Zmc2V0ICsgc3RyaWRlICsgMV0gPSAwO1xuICAgICAgICAgICAgICAgIGFycmF5W29mZnNldCArIChzdHJpZGUgKiAyKV0gPSAwO1xuICAgICAgICAgICAgICAgIGFycmF5W29mZnNldCArIChzdHJpZGUgKiAyKSArIDFdID0gMDtcbiAgICAgICAgICAgICAgICBhcnJheVtvZmZzZXQgKyAoc3RyaWRlICogMyldID0gMDtcbiAgICAgICAgICAgICAgICBhcnJheVtvZmZzZXQgKyAoc3RyaWRlICogMykgKyAxXSA9IDA7XG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IHN0cmlkZSAqIDQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFVwbG9hZHMgdGhlIHRpbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BJWEkuRGlzcGxheU9iamVjdFtdfSBjaGlsZHJlbiAtIHRoZSBhcnJheSBvZiBkaXNwbGF5IG9iamVjdHMgdG8gcmVuZGVyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0SW5kZXggLSB0aGUgaW5kZXggdG8gc3RhcnQgZnJvbSBpbiB0aGUgY2hpbGRyZW4gYXJyYXlcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYW1vdW50IC0gdGhlIGFtb3VudCBvZiBjaGlsZHJlbiB0aGF0IHdpbGwgaGF2ZSB0aGVpciByb3RhdGlvbiB1cGxvYWRlZFxuICAgICAqIEBwYXJhbSB7bnVtYmVyW119IGFycmF5IC0gVGhlIHZlcnRpY2VzIHRvIHVwbG9hZC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIC0gU3RyaWRlIHRvIHVzZSBmb3IgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgLSBPZmZzZXQgdG8gc3RhcnQgYXQuXG4gICAgICovXG4gICAgUGFydGljbGVSZW5kZXJlci5wcm90b3R5cGUudXBsb2FkVGludCA9IGZ1bmN0aW9uIChjaGlsZHJlbiwgc3RhcnRJbmRleCwgYW1vdW50LCBhcnJheSwgc3RyaWRlLCBvZmZzZXQpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhbW91bnQ7ICsraSkge1xuICAgICAgICAgICAgdmFyIHNwcml0ZSA9IGNoaWxkcmVuW3N0YXJ0SW5kZXggKyBpXTtcbiAgICAgICAgICAgIHZhciBwcmVtdWx0aXBsaWVkID0gc3ByaXRlLl90ZXh0dXJlLmJhc2VUZXh0dXJlLmFscGhhTW9kZSA+IDA7XG4gICAgICAgICAgICB2YXIgYWxwaGEgPSBzcHJpdGUuYWxwaGE7XG4gICAgICAgICAgICAvLyB3ZSBkb250IGNhbGwgZXh0cmEgZnVuY3Rpb24gaWYgYWxwaGEgaXMgMS4wLCB0aGF0J3MgZmFzdGVyXG4gICAgICAgICAgICB2YXIgYXJnYiA9IGFscGhhIDwgMS4wICYmIHByZW11bHRpcGxpZWRcbiAgICAgICAgICAgICAgICA/IHByZW11bHRpcGx5VGludChzcHJpdGUuX3RpbnRSR0IsIGFscGhhKSA6IHNwcml0ZS5fdGludFJHQiArIChhbHBoYSAqIDI1NSA8PCAyNCk7XG4gICAgICAgICAgICBhcnJheVtvZmZzZXRdID0gYXJnYjtcbiAgICAgICAgICAgIGFycmF5W29mZnNldCArIHN0cmlkZV0gPSBhcmdiO1xuICAgICAgICAgICAgYXJyYXlbb2Zmc2V0ICsgKHN0cmlkZSAqIDIpXSA9IGFyZ2I7XG4gICAgICAgICAgICBhcnJheVtvZmZzZXQgKyAoc3RyaWRlICogMyldID0gYXJnYjtcbiAgICAgICAgICAgIG9mZnNldCArPSBzdHJpZGUgKiA0O1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEZXN0cm95cyB0aGUgUGFydGljbGVSZW5kZXJlci5cbiAgICAgKi9cbiAgICBQYXJ0aWNsZVJlbmRlcmVyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRlc3Ryb3kuY2FsbCh0aGlzKTtcbiAgICAgICAgaWYgKHRoaXMuc2hhZGVyKSB7XG4gICAgICAgICAgICB0aGlzLnNoYWRlci5kZXN0cm95KCk7XG4gICAgICAgICAgICB0aGlzLnNoYWRlciA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50ZW1wTWF0cml4ID0gbnVsbDtcbiAgICB9O1xuICAgIHJldHVybiBQYXJ0aWNsZVJlbmRlcmVyO1xufShPYmplY3RSZW5kZXJlcikpO1xuXG5leHBvcnQgeyBQYXJ0aWNsZUNvbnRhaW5lciwgUGFydGljbGVSZW5kZXJlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFydGljbGVzLmVzLmpzLm1hcFxuIl0sIm5hbWVzIjpbImV4dGVuZFN0YXRpY3MiLCJkIiwiYiIsIk9iamVjdCIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiQXJyYXkiLCJwIiwiaGFzT3duUHJvcGVydHkiLCJfX2V4dGVuZHMiLCJfXyIsInRoaXMiLCJjb25zdHJ1Y3RvciIsInByb3RvdHlwZSIsImNyZWF0ZSIsIl9zdXBlciIsIlBhcnRpY2xlQ29udGFpbmVyIiwibWF4U2l6ZSIsInByb3BlcnRpZXMiLCJiYXRjaFNpemUiLCJhdXRvUmVzaXplIiwiX3RoaXMiLCJjYWxsIiwiX3Byb3BlcnRpZXMiLCJfbWF4U2l6ZSIsIl9iYXRjaFNpemUiLCJfYnVmZmVycyIsIl9idWZmZXJVcGRhdGVJRHMiLCJfdXBkYXRlSUQiLCJpbnRlcmFjdGl2ZUNoaWxkcmVuIiwiYmxlbmRNb2RlIiwicm91bmRQaXhlbHMiLCJiYXNlVGV4dHVyZSIsInNldFByb3BlcnRpZXMiLCJfdGludCIsInRpbnRSZ2IiLCJGbG9hdDMyQXJyYXkiLCJ0aW50IiwidmVydGljZXMiLCJzY2FsZSIsInBvc2l0aW9uIiwicm90YXRpb24iLCJ1dnMiLCJhbHBoYSIsInVwZGF0ZVRyYW5zZm9ybSIsImRpc3BsYXlPYmplY3RVcGRhdGVUcmFuc2Zvcm0iLCJkZWZpbmVQcm9wZXJ0eSIsImdldCIsInNldCIsInZhbHVlIiwiaGV4MnJnYiIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJyZW5kZXIiLCJyZW5kZXJlciIsInZpc2libGUiLCJ3b3JsZEFscGhhIiwiY2hpbGRyZW4iLCJsZW5ndGgiLCJyZW5kZXJhYmxlIiwiX3RleHR1cmUiLCJ2YWxpZCIsIm9uY2UiLCJvbkNoaWxkcmVuQ2hhbmdlIiwiYmF0Y2giLCJzZXRPYmplY3RSZW5kZXJlciIsInBsdWdpbnMiLCJwYXJ0aWNsZSIsInNtYWxsZXN0Q2hpbGRJbmRleCIsImJ1ZmZlckluZGV4IiwiTWF0aCIsImZsb29yIiwicHVzaCIsImRpc3Bvc2UiLCJpIiwiZGVzdHJveSIsIm9wdGlvbnMiLCJQYXJ0aWNsZUJ1ZmZlciIsImR5bmFtaWNQcm9wZXJ0eUZsYWdzIiwic2l6ZSIsImdlb21ldHJ5IiwiaW5kZXhCdWZmZXIiLCJkeW5hbWljUHJvcGVydGllcyIsInN0YXRpY1Byb3BlcnRpZXMiLCJwcm9wZXJ0eSIsImF0dHJpYnV0ZU5hbWUiLCJ1cGxvYWRGdW5jdGlvbiIsInR5cGUiLCJvZmZzZXQiLCJzdGF0aWNTdHJpZGUiLCJzdGF0aWNCdWZmZXIiLCJzdGF0aWNEYXRhIiwic3RhdGljRGF0YVVpbnQzMiIsImR5bmFtaWNTdHJpZGUiLCJkeW5hbWljQnVmZmVyIiwiZHluYW1pY0RhdGEiLCJkeW5hbWljRGF0YVVpbnQzMiIsImluaXRCdWZmZXJzIiwiZHluYW1pY09mZnNldCIsImNyZWF0ZUluZGljZXNGb3JRdWFkcyIsImFkZEluZGV4IiwiZHluQnVmZmVyIiwiQXJyYXlCdWZmZXIiLCJVaW50MzJBcnJheSIsInN0YXRpY09mZnNldCIsInN0YXRCdWZmZXIiLCJhZGRBdHRyaWJ1dGUiLCJ1cGxvYWREeW5hbWljIiwic3RhcnRJbmRleCIsImFtb3VudCIsInVwbG9hZFN0YXRpYyIsIlBhcnRpY2xlUmVuZGVyZXIiLCJzaGFkZXIiLCJ0ZW1wTWF0cml4IiwidXBsb2FkVmVydGljZXMiLCJ1cGxvYWRQb3NpdGlvbiIsInVwbG9hZFJvdGF0aW9uIiwidXBsb2FkVXZzIiwidXBsb2FkVGludCIsInN0YXRlIiwiY29udGFpbmVyIiwidG90YWxDaGlsZHJlbiIsImJ1ZmZlcnMiLCJnZW5lcmF0ZUJ1ZmZlcnMiLCJjb3JyZWN0QmxlbmRNb2RlIiwiYWxwaGFNb2RlIiwiZ2wiLCJtIiwid29ybGRUcmFuc2Zvcm0iLCJjb3B5VG8iLCJwcmVwZW5kIiwiZ2xvYmFsVW5pZm9ybXMiLCJ1bmlmb3JtcyIsInByb2plY3Rpb25NYXRyaXgiLCJ0cmFuc2xhdGlvbk1hdHJpeCIsInRvQXJyYXkiLCJ1Q29sb3IiLCJwcmVtdWx0aXBseVJnYmEiLCJ1U2FtcGxlciIsImJpbmQiLCJ1cGRhdGVTdGF0aWMiLCJqIiwiX2dlbmVyYXRlT25lTW9yZUJ1ZmZlciIsImJ1ZmZlciIsImJpZCIsImRyYXdFbGVtZW50cyIsIlRSSUFOR0xFUyIsIlVOU0lHTkVEX1NIT1JUIiwiYXJyYXkiLCJzdHJpZGUiLCJ3MCIsIncxIiwiaDAiLCJoMSIsInNwcml0ZSIsInRleHR1cmUiLCJzeCIsIngiLCJzeSIsInkiLCJ0cmltIiwib3JpZyIsImFuY2hvciIsIndpZHRoIiwiaGVpZ2h0Iiwic3ByaXRlUG9zaXRpb24iLCJzcHJpdGVSb3RhdGlvbiIsInRleHR1cmVVdnMiLCJfdXZzIiwieDAiLCJ5MCIsIngxIiwieTEiLCJ4MiIsInkyIiwieDMiLCJ5MyIsInByZW11bHRpcGxpZWQiLCJhcmdiIiwicHJlbXVsdGlwbHlUaW50IiwiX3RpbnRSR0IiXSwic291cmNlUm9vdCI6IiJ9