"use strict";(self.webpackChunkgear3engine_website=self.webpackChunkgear3engine_website||[]).push([[8305],{3409:function(e,t,i){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.drawable3d=void 0;const s=r(i(657));t.drawable3d=function(e){return class extends e{constructor(...e){super(...e),this.canvas3dPlugin=this.gi.getPlugin(s.default),this._displayObjects3d=this._displayObjects3d||[],this.addDiscriminator("drawable-3d"),this.threeWorld=this.threeWorld??this.canvas3dPlugin.threeWorld,this.threeWorld.addChild(this)}initialize(){super.initialize();let e=this.isAny(["physical-2d","physical-3d"]);this.physicsTargetExtension=!!(this.physicsTargetExtension??(this.is("extension")&&!e&&this.target.isAny(["physical-2d","physical-3d"]))),this.disablePhysicsSync=this.disablePhysicsSync??(!e&&!this.physicsTargetExtension),this.disablePhysicsSync||this.syncWithPhysics()}addDisplayObject(e){this._displayObjects3d||(this._displayObjects3d=[]),this._displayObjects3d.push(e)}syncWithPhysics(){if(1==this._displayObjects3d.length){let e,t;this.physicsTargetExtension?(e=this.target.position,t=this.target.velocity):(e=this.position,t=this.velocity),this._displayObjects3d[0].position.set(e.x,e.y,e.z)}}drawUpdate(e,t,i){this.disablePhysicsSync||this.syncWithPhysics(),super.drawUpdate&&super.drawUpdate(e,t,i)}destroy(e){for(super.destroy&&super.destroy(e),this.threeWorld.removeChild(this);this._displayObjects3d.length>0;){let e=this._displayObjects3d.pop();this.threeWorld.disposeOfDisplayObject(e)}super.destroy&&super.destroy(e)}}}},9777:function(e,t,i){var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,s)}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return s(t,e),t},h=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ThreeWorld=t.drawable3d=t.Canvas3dPlugin=t.Camera3d=t.AmbientLight=t.DirectionalLight=t.PointLight=t.Three=void 0;const a=n(i(2752));t.Three=a;var o=i(4443);Object.defineProperty(t,"PointLight",{enumerable:!0,get:function(){return h(o).default}});var l=i(809);Object.defineProperty(t,"DirectionalLight",{enumerable:!0,get:function(){return h(l).default}});var d=i(5424);Object.defineProperty(t,"AmbientLight",{enumerable:!0,get:function(){return h(d).default}});var c=i(6066);Object.defineProperty(t,"Camera3d",{enumerable:!0,get:function(){return h(c).default}});var u=i(657);Object.defineProperty(t,"Canvas3dPlugin",{enumerable:!0,get:function(){return h(u).default}});var f=i(3409);Object.defineProperty(t,"drawable3d",{enumerable:!0,get:function(){return f.drawable3d}});var p=i(8595);Object.defineProperty(t,"ThreeWorld",{enumerable:!0,get:function(){return h(p).default}})},5424:function(e,t,i){var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,s)}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return s(t,e),t},h=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(5412),o=n(i(2752)),l=h(i(657));class d extends a.GameObject{constructor(){super(),this.canvas3dPlugin=this.gi.getPlugin(l.default),this.threeLight=this.threeLight??new o.AmbientLight(this.color,this.intensity),this.canvas3dPlugin.threeWorld.threeScene.add(this.threeLight)}updateLightProps(){(this.color||0===this.color)&&this.threeLight.color.set(this.color),this.threeLight.intensity=this.intensity??this.threeLight.intensity}destroy(e){this.canvas3dPlugin.threeWorld.threeScene.remove(this.threeLight)}}t.default=d},809:function(e,t,i){var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,s)}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return s(t,e),t},h=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(5412),o=n(i(2752)),l=h(i(657));class d extends a.GameObject{constructor(){super(),this.canvas3dPlugin=this.gi.getPlugin(l.default),this.threeLight=this.threeLight??new o.DirectionalLight(this.color,this.intensity),this.canvas3dPlugin.threeWorld.threeScene.add(this.threeLight)}updateLightProps(){(this.color||0===this.color)&&this.threeLight.color.set(this.color),this.threeLight.intensity=this.intensity??this.threeLight.intensity}destroy(e){this.canvas3dPlugin.threeWorld.threeScene.remove(this.threeLight)}}t.default=d},4443:function(e,t,i){var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,s)}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return s(t,e),t},h=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(5412),o=n(i(2752)),l=h(i(657));class d extends a.GameObject{constructor(){super(),this.canvas3dPlugin=this.gi.getPlugin(l.default),this.threeLight=this.threeLight??new o.PointLight(this.color,this.intensity,this.distance,this.decay),this.canvas3dPlugin.threeWorld.threeScene.add(this.threeLight)}updateLightProps(){(this.color||0===this.color)&&this.threeLight.color.set(this.color),this.threeLight.intensity=this.intensity??this.threeLight.intensity,this.threeLight.distance=this.distance??this.threeLight.distance,this.threeLight.decay=this.decay??this.threeLight.decay}destroy(e){this.canvas3dPlugin.threeWorld.threeScene.remove(this.threeLight)}}t.default=d},8595:function(e,t,i){var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,s)}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const h=i(5412),a=n(i(2752));class o extends h.GameObject{constructor(){super(),this.visibleObjects={},this.aspectRatio=9/16,this.backgroundColor=this.backgroundColor??1380368,this.target=this.target??document.body,this.disableScroll=this.disableScroll??!0,this.disableScroll&&(this.target.style.overflow="hidden"),this.target?.offsetHeight||window.innerHeight,this.threeScene=new a.Scene,this.renderer=new a.WebGLRenderer({antialias:!0,alpha:!!this.alphaBg,logarithmicDepthBuffer:!0}),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=a.PCFSoftShadowMap,this.renderer.setClearColor(this.clearColor??0,0),this.canvas=this.renderer.domElement,this.target.appendChild(this.canvas)}drawUpdate(e,t,i){for(let r in this.visibleObjects){let s=this.visibleObjects[r];!s.disableDrawUpdate&&s.drawUpdate&&s.drawUpdate(e,t,i)}this.renderer.render(this.threeScene,this.activeCamera?.threeCam)}destroy(e){super.destroy(e);for(var t=this.threeScene.children.length-1;t>=0;t--){let e=this.threeScene.children[t];this.threeScene.remove(e),this.disposeOfDisplayObject(e)}this.threeScene=null,this.canvas.parentNode.removeChild(this.canvas),this.canvas=null}disposeOfDisplayObject(e){if(e instanceof a.Group)for(let t=0;t<e.children.length;t++)this.disposeOfDisplayObject(e.children[t]);else e instanceof a.Mesh?e.geometry&&this.disposeOfDisplayObject(e.geometry):e instanceof a.BufferGeometry&&e.dispose()}addChild(e){this.visibleObjects[e.id]=e;for(let t=0;t<e._displayObjects3d.length;t++){let i=e._displayObjects3d[t];i.parent||this.threeScene.add(i)}}removeChild(e){for(let t=0;t<e._displayObjects3d.length;t++)e._displayObjects3d[t].parent.remove(e._displayObjects3d[t]);delete this.visibleObjects[e.id]}resize(){this.renderer.setSize(this.target?.offsetWidth??window.innerWidth,this.target?.offsetHeight??window.innerHeight)}}t.default=o}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UTBGLElBQ3hDekgsS0FBS2lELHVCQUF1QnBCLEVBQU9rRyxTQUFTTixTQUczQzVGLGFBQWtCK0MsRUFBTXVELEtBQ3pCdEcsRUFBT3VHLFVBQ1BwSSxLQUFLaUQsdUJBQXVCcEIsRUFBT3VHLFVBR2xDdkcsYUFBa0IrQyxFQUFNeUQsZ0JBQzdCeEcsRUFBT3lHLFNBRWYsQ0FDQWxILFNBQVNtSCxHQUNMdkksS0FBSzhGLGVBQWV5QyxFQUFNQyxJQUFNRCxFQUNoQyxJQUFLLElBQUlkLEVBQUksRUFBR0EsRUFBSWMsRUFBTXRILGtCQUFrQmMsT0FBUTBGLElBQUssQ0FDckQsSUFBSTFFLEVBQWdCd0YsRUFBTXRILGtCQUFrQndHLEdBQ3ZDMUUsRUFBYzBGLFFBQ2Z6SSxLQUFLd0YsV0FBV0MsSUFBSTFDLEVBRTVCLENBQ0osQ0FDQUQsWUFBWXlGLEdBQ1IsSUFBSyxJQUFJZCxFQUFJLEVBQUdBLEVBQUljLEVBQU10SCxrQkFBa0JjLE9BQVEwRixJQUNoRGMsRUFBTXRILGtCQUFrQndHLEdBQUdnQixPQUFPOUMsT0FBTzRDLEVBQU10SCxrQkFBa0J3RyxXQUU5RHpILEtBQUs4RixlQUFleUMsRUFBTUMsR0FDckMsQ0FDQUUsU0FDSTFJLEtBQUswRyxTQUFTaUMsUUFBUTNJLEtBQUtTLFFBQVFtSSxhQUFlckMsT0FBT3NDLFdBQVk3SSxLQUFLUyxRQUFRNkYsY0FBZ0JDLE9BQU9DLFlBQzdHLEVBRUpuRyxFQUFBLFFBQWtCZ0UsQyIsInNvdXJjZXMiOlsid2VicGFjazovL2dlYXIzZW5naW5lLXdlYnNpdGUvLi4vLi4vR0FNRVMtU0lNVUxBVE9SUy1GVU4vZ2VhcjNlbmdpbmUvcGx1Z2lucy9nM2UtY2FudmFzLTNkL2J1aWxkL2RyYXdhYmxlLTNkLmpzIiwid2VicGFjazovL2dlYXIzZW5naW5lLXdlYnNpdGUvLi4vLi4vR0FNRVMtU0lNVUxBVE9SUy1GVU4vZ2VhcjNlbmdpbmUvcGx1Z2lucy9nM2UtY2FudmFzLTNkL2J1aWxkL2luZGV4LmpzIiwid2VicGFjazovL2dlYXIzZW5naW5lLXdlYnNpdGUvLi4vLi4vR0FNRVMtU0lNVUxBVE9SUy1GVU4vZ2VhcjNlbmdpbmUvcGx1Z2lucy9nM2UtY2FudmFzLTNkL2J1aWxkL2xpZ2h0aW5nL2FtYmllbnQtbGlnaHQuanMiLCJ3ZWJwYWNrOi8vZ2VhcjNlbmdpbmUtd2Vic2l0ZS8uLi8uLi9HQU1FUy1TSU1VTEFUT1JTLUZVTi9nZWFyM2VuZ2luZS9wbHVnaW5zL2czZS1jYW52YXMtM2QvYnVpbGQvbGlnaHRpbmcvZGlyZWN0aW9uYWwtbGlnaHQuanMiLCJ3ZWJwYWNrOi8vZ2VhcjNlbmdpbmUtd2Vic2l0ZS8uLi8uLi9HQU1FUy1TSU1VTEFUT1JTLUZVTi9nZWFyM2VuZ2luZS9wbHVnaW5zL2czZS1jYW52YXMtM2QvYnVpbGQvbGlnaHRpbmcvcG9pbnQtbGlnaHQuanMiLCJ3ZWJwYWNrOi8vZ2VhcjNlbmdpbmUtd2Vic2l0ZS8uLi8uLi9HQU1FUy1TSU1VTEFUT1JTLUZVTi9nZWFyM2VuZ2luZS9wbHVnaW5zL2czZS1jYW52YXMtM2QvYnVpbGQvdGhyZWUtd29ybGQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5kcmF3YWJsZTNkID0gdm9pZCAwO1xyXG5jb25zdCBjYW52YXNfM2RfcGx1Z2luXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vY2FudmFzLTNkLXBsdWdpblwiKSk7XHJcbmZ1bmN0aW9uIGRyYXdhYmxlM2QodGFyZ2V0KSB7XHJcbiAgICByZXR1cm4gY2xhc3MgRHJhd2FibGUzZCBleHRlbmRzIHRhcmdldCB7XHJcbiAgICAgICAgY29uc3RydWN0b3IoLi4uYXJncykge1xyXG4gICAgICAgICAgICBzdXBlciguLi5hcmdzKTtcclxuICAgICAgICAgICAgdGhpcy5jYW52YXMzZFBsdWdpbiA9IHRoaXMuZ2kuZ2V0UGx1Z2luKGNhbnZhc18zZF9wbHVnaW5fMS5kZWZhdWx0KTtcclxuICAgICAgICAgICAgdGhpcy5fZGlzcGxheU9iamVjdHMzZCA9IHRoaXMuX2Rpc3BsYXlPYmplY3RzM2QgfHwgW107XHJcbiAgICAgICAgICAgIHRoaXMuYWRkRGlzY3JpbWluYXRvcihcImRyYXdhYmxlLTNkXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnRocmVlV29ybGQgPSB0aGlzLnRocmVlV29ybGQgPz8gdGhpcy5jYW52YXMzZFBsdWdpbi50aHJlZVdvcmxkO1xyXG4gICAgICAgICAgICB0aGlzLnRocmVlV29ybGQuYWRkQ2hpbGQodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGluaXRpYWxpemUoKSB7XHJcbiAgICAgICAgICAgIHN1cGVyLmluaXRpYWxpemUoKTtcclxuICAgICAgICAgICAgbGV0IHRoaXNJc1BoeXNpY2FsID0gdGhpcy5pc0FueShbXCJwaHlzaWNhbC0yZFwiLCBcInBoeXNpY2FsLTNkXCJdKTtcclxuICAgICAgICAgICAgdGhpcy5waHlzaWNzVGFyZ2V0RXh0ZW5zaW9uID0gKHRoaXMucGh5c2ljc1RhcmdldEV4dGVuc2lvbiA/PyAodGhpcy5pcyhcImV4dGVuc2lvblwiKSAmJiAhdGhpc0lzUGh5c2ljYWwgJiYgdGhpcy50YXJnZXQuaXNBbnkoW1wicGh5c2ljYWwtMmRcIiwgXCJwaHlzaWNhbC0zZFwiXSkpKSA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5kaXNhYmxlUGh5c2ljc1N5bmMgPSB0aGlzLmRpc2FibGVQaHlzaWNzU3luYyA/PyAoIXRoaXNJc1BoeXNpY2FsICYmICF0aGlzLnBoeXNpY3NUYXJnZXRFeHRlbnNpb24pO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuZGlzYWJsZVBoeXNpY3NTeW5jKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN5bmNXaXRoUGh5c2ljcygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFkZERpc3BsYXlPYmplY3Qob2JqZWN0KSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5fZGlzcGxheU9iamVjdHMzZClcclxuICAgICAgICAgICAgICAgIHRoaXMuX2Rpc3BsYXlPYmplY3RzM2QgPSBbXTtcclxuICAgICAgICAgICAgdGhpcy5fZGlzcGxheU9iamVjdHMzZC5wdXNoKG9iamVjdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIDtcclxuICAgICAgICBzeW5jV2l0aFBoeXNpY3MoKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9kaXNwbGF5T2JqZWN0czNkLmxlbmd0aCA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcDtcclxuICAgICAgICAgICAgICAgIGxldCB2O1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGh5c2ljc1RhcmdldEV4dGVuc2lvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHAgPSB0aGlzLnRhcmdldC5wb3NpdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICB2ID0gdGhpcy50YXJnZXQudmVsb2NpdHk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBwID0gdGhpcy5wb3NpdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICB2ID0gdGhpcy52ZWxvY2l0eTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuX2Rpc3BsYXlPYmplY3RzM2RbMF0ucG9zaXRpb24uc2V0KHAueCwgcC55LCBwLnopO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRyYXdVcGRhdGUoZHQsIHRpbWUsIGZyYW1lcykge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuZGlzYWJsZVBoeXNpY3NTeW5jKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zeW5jV2l0aFBoeXNpY3MoKTtcclxuICAgICAgICAgICAgc3VwZXIuZHJhd1VwZGF0ZSAmJiBzdXBlci5kcmF3VXBkYXRlKGR0LCB0aW1lLCBmcmFtZXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkZXN0cm95KGRlYXRoVHlwZSkge1xyXG4gICAgICAgICAgICBzdXBlci5kZXN0cm95ICYmIHN1cGVyLmRlc3Ryb3koZGVhdGhUeXBlKTtcclxuICAgICAgICAgICAgdGhpcy50aHJlZVdvcmxkLnJlbW92ZUNoaWxkKHRoaXMpO1xyXG4gICAgICAgICAgICB3aGlsZSAodGhpcy5fZGlzcGxheU9iamVjdHMzZC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZGlzcGxheU9iamVjdCA9IHRoaXMuX2Rpc3BsYXlPYmplY3RzM2QucG9wKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRocmVlV29ybGQuZGlzcG9zZU9mRGlzcGxheU9iamVjdChkaXNwbGF5T2JqZWN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzdXBlci5kZXN0cm95ICYmIHN1cGVyLmRlc3Ryb3koZGVhdGhUeXBlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcbmV4cG9ydHMuZHJhd2FibGUzZCA9IGRyYXdhYmxlM2Q7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRyYXdhYmxlLTNkLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19jcmVhdGVCaW5kaW5nID0gKHRoaXMgJiYgdGhpcy5fX2NyZWF0ZUJpbmRpbmcpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XHJcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xyXG4gICAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG0sIGspO1xyXG4gICAgaWYgKCFkZXNjIHx8IChcImdldFwiIGluIGRlc2MgPyAhbS5fX2VzTW9kdWxlIDogZGVzYy53cml0YWJsZSB8fCBkZXNjLmNvbmZpZ3VyYWJsZSkpIHtcclxuICAgICAgZGVzYyA9IHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfTtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgZGVzYyk7XHJcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XHJcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xyXG4gICAgb1trMl0gPSBtW2tdO1xyXG59KSk7XHJcbnZhciBfX3NldE1vZHVsZURlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9fc2V0TW9kdWxlRGVmYXVsdCkgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgdikge1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiZGVmYXVsdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2IH0pO1xyXG59KSA6IGZ1bmN0aW9uKG8sIHYpIHtcclxuICAgIG9bXCJkZWZhdWx0XCJdID0gdjtcclxufSk7XHJcbnZhciBfX2ltcG9ydFN0YXIgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0U3RhcikgfHwgZnVuY3Rpb24gKG1vZCkge1xyXG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcclxuICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChrICE9PSBcImRlZmF1bHRcIiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgX19jcmVhdGVCaW5kaW5nKHJlc3VsdCwgbW9kLCBrKTtcclxuICAgIF9fc2V0TW9kdWxlRGVmYXVsdChyZXN1bHQsIG1vZCk7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59O1xyXG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xyXG59O1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuVGhyZWVXb3JsZCA9IGV4cG9ydHMuZHJhd2FibGUzZCA9IGV4cG9ydHMuQ2FudmFzM2RQbHVnaW4gPSBleHBvcnRzLkNhbWVyYTNkID0gZXhwb3J0cy5BbWJpZW50TGlnaHQgPSBleHBvcnRzLkRpcmVjdGlvbmFsTGlnaHQgPSBleHBvcnRzLlBvaW50TGlnaHQgPSBleHBvcnRzLlRocmVlID0gdm9pZCAwO1xyXG5jb25zdCBUSFJFRSA9IF9faW1wb3J0U3RhcihyZXF1aXJlKFwidGhyZWVcIikpO1xyXG5leHBvcnRzLlRocmVlID0gVEhSRUU7XHJcbnZhciBwb2ludF9saWdodF8xID0gcmVxdWlyZShcIi4vbGlnaHRpbmcvcG9pbnQtbGlnaHRcIik7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlBvaW50TGlnaHRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF9faW1wb3J0RGVmYXVsdChwb2ludF9saWdodF8xKS5kZWZhdWx0OyB9IH0pO1xyXG52YXIgZGlyZWN0aW9uYWxfbGlnaHRfMSA9IHJlcXVpcmUoXCIuL2xpZ2h0aW5nL2RpcmVjdGlvbmFsLWxpZ2h0XCIpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJEaXJlY3Rpb25hbExpZ2h0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBfX2ltcG9ydERlZmF1bHQoZGlyZWN0aW9uYWxfbGlnaHRfMSkuZGVmYXVsdDsgfSB9KTtcclxudmFyIGFtYmllbnRfbGlnaHRfMSA9IHJlcXVpcmUoXCIuL2xpZ2h0aW5nL2FtYmllbnQtbGlnaHRcIik7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkFtYmllbnRMaWdodFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gX19pbXBvcnREZWZhdWx0KGFtYmllbnRfbGlnaHRfMSkuZGVmYXVsdDsgfSB9KTtcclxudmFyIGNhbWVyYV8zZF8xID0gcmVxdWlyZShcIi4vY2FtZXJhLTNkXCIpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJDYW1lcmEzZFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gX19pbXBvcnREZWZhdWx0KGNhbWVyYV8zZF8xKS5kZWZhdWx0OyB9IH0pO1xyXG52YXIgY2FudmFzXzNkX3BsdWdpbl8xID0gcmVxdWlyZShcIi4vY2FudmFzLTNkLXBsdWdpblwiKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiQ2FudmFzM2RQbHVnaW5cIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF9faW1wb3J0RGVmYXVsdChjYW52YXNfM2RfcGx1Z2luXzEpLmRlZmF1bHQ7IH0gfSk7XHJcbnZhciBkcmF3YWJsZV8zZF8xID0gcmVxdWlyZShcIi4vZHJhd2FibGUtM2RcIik7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcImRyYXdhYmxlM2RcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGRyYXdhYmxlXzNkXzEuZHJhd2FibGUzZDsgfSB9KTtcclxudmFyIHRocmVlX3dvcmxkXzEgPSByZXF1aXJlKFwiLi90aHJlZS13b3JsZFwiKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiVGhyZWVXb3JsZFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gX19pbXBvcnREZWZhdWx0KHRocmVlX3dvcmxkXzEpLmRlZmF1bHQ7IH0gfSk7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19jcmVhdGVCaW5kaW5nID0gKHRoaXMgJiYgdGhpcy5fX2NyZWF0ZUJpbmRpbmcpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XHJcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xyXG4gICAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG0sIGspO1xyXG4gICAgaWYgKCFkZXNjIHx8IChcImdldFwiIGluIGRlc2MgPyAhbS5fX2VzTW9kdWxlIDogZGVzYy53cml0YWJsZSB8fCBkZXNjLmNvbmZpZ3VyYWJsZSkpIHtcclxuICAgICAgZGVzYyA9IHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfTtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgZGVzYyk7XHJcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XHJcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xyXG4gICAgb1trMl0gPSBtW2tdO1xyXG59KSk7XHJcbnZhciBfX3NldE1vZHVsZURlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9fc2V0TW9kdWxlRGVmYXVsdCkgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgdikge1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiZGVmYXVsdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2IH0pO1xyXG59KSA6IGZ1bmN0aW9uKG8sIHYpIHtcclxuICAgIG9bXCJkZWZhdWx0XCJdID0gdjtcclxufSk7XHJcbnZhciBfX2ltcG9ydFN0YXIgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0U3RhcikgfHwgZnVuY3Rpb24gKG1vZCkge1xyXG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcclxuICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChrICE9PSBcImRlZmF1bHRcIiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgX19jcmVhdGVCaW5kaW5nKHJlc3VsdCwgbW9kLCBrKTtcclxuICAgIF9fc2V0TW9kdWxlRGVmYXVsdChyZXN1bHQsIG1vZCk7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59O1xyXG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xyXG59O1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmNvbnN0IGdlYXIzZW5naW5lXzEgPSByZXF1aXJlKFwiZ2VhcjNlbmdpbmVcIik7XHJcbmNvbnN0IFRIUkVFID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoXCJ0aHJlZVwiKSk7XHJcbmNvbnN0IGNhbnZhc18zZF9wbHVnaW5fMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vY2FudmFzLTNkLXBsdWdpblwiKSk7XHJcbmNsYXNzIEFtYmllbnRMaWdodCBleHRlbmRzIGdlYXIzZW5naW5lXzEuR2FtZU9iamVjdCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuY2FudmFzM2RQbHVnaW4gPSB0aGlzLmdpLmdldFBsdWdpbihjYW52YXNfM2RfcGx1Z2luXzEuZGVmYXVsdCk7XHJcbiAgICAgICAgdGhpcy50aHJlZUxpZ2h0ID0gdGhpcy50aHJlZUxpZ2h0ID8/IG5ldyBUSFJFRS5BbWJpZW50TGlnaHQodGhpcy5jb2xvciwgdGhpcy5pbnRlbnNpdHkpO1xyXG4gICAgICAgIHRoaXMuY2FudmFzM2RQbHVnaW4udGhyZWVXb3JsZC50aHJlZVNjZW5lLmFkZCh0aGlzLnRocmVlTGlnaHQpO1xyXG4gICAgfVxyXG4gICAgdXBkYXRlTGlnaHRQcm9wcygpIHtcclxuICAgICAgICBpZiAodGhpcy5jb2xvciB8fCB0aGlzLmNvbG9yID09PSAwKVxyXG4gICAgICAgICAgICB0aGlzLnRocmVlTGlnaHQuY29sb3Iuc2V0KHRoaXMuY29sb3IpO1xyXG4gICAgICAgIHRoaXMudGhyZWVMaWdodC5pbnRlbnNpdHkgPSB0aGlzLmludGVuc2l0eSA/PyB0aGlzLnRocmVlTGlnaHQuaW50ZW5zaXR5O1xyXG4gICAgfVxyXG4gICAgZGVzdHJveShkZWF0aFR5cGUpIHtcclxuICAgICAgICB0aGlzLmNhbnZhczNkUGx1Z2luLnRocmVlV29ybGQudGhyZWVTY2VuZS5yZW1vdmUodGhpcy50aHJlZUxpZ2h0KTtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLmRlZmF1bHQgPSBBbWJpZW50TGlnaHQ7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFtYmllbnQtbGlnaHQuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2NyZWF0ZUJpbmRpbmcgPSAodGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZykgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobSwgayk7XHJcbiAgICBpZiAoIWRlc2MgfHwgKFwiZ2V0XCIgaW4gZGVzYyA/ICFtLl9fZXNNb2R1bGUgOiBkZXNjLndyaXRhYmxlIHx8IGRlc2MuY29uZmlndXJhYmxlKSkge1xyXG4gICAgICBkZXNjID0geyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9O1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCBkZXNjKTtcclxufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICBvW2syXSA9IG1ba107XHJcbn0pKTtcclxudmFyIF9fc2V0TW9kdWxlRGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19zZXRNb2R1bGVEZWZhdWx0KSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCB2KSB7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJkZWZhdWx0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XHJcbn0pIDogZnVuY3Rpb24obywgdikge1xyXG4gICAgb1tcImRlZmF1bHRcIl0gPSB2O1xyXG59KTtcclxudmFyIF9faW1wb3J0U3RhciA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnRTdGFyKSB8fCBmdW5jdGlvbiAobW9kKSB7XHJcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xyXG4gICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKGsgIT09IFwiZGVmYXVsdFwiICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGspO1xyXG4gICAgX19zZXRNb2R1bGVEZWZhdWx0KHJlc3VsdCwgbW9kKTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn07XHJcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuY29uc3QgZ2VhcjNlbmdpbmVfMSA9IHJlcXVpcmUoXCJnZWFyM2VuZ2luZVwiKTtcclxuY29uc3QgVEhSRUUgPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcInRocmVlXCIpKTtcclxuY29uc3QgY2FudmFzXzNkX3BsdWdpbl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9jYW52YXMtM2QtcGx1Z2luXCIpKTtcclxuY2xhc3MgRGlyZWN0aW9uYWxMaWdodCBleHRlbmRzIGdlYXIzZW5naW5lXzEuR2FtZU9iamVjdCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuY2FudmFzM2RQbHVnaW4gPSB0aGlzLmdpLmdldFBsdWdpbihjYW52YXNfM2RfcGx1Z2luXzEuZGVmYXVsdCk7XHJcbiAgICAgICAgdGhpcy50aHJlZUxpZ2h0ID0gdGhpcy50aHJlZUxpZ2h0ID8/IG5ldyBUSFJFRS5EaXJlY3Rpb25hbExpZ2h0KHRoaXMuY29sb3IsIHRoaXMuaW50ZW5zaXR5KTtcclxuICAgICAgICB0aGlzLmNhbnZhczNkUGx1Z2luLnRocmVlV29ybGQudGhyZWVTY2VuZS5hZGQodGhpcy50aHJlZUxpZ2h0KTtcclxuICAgIH1cclxuICAgIHVwZGF0ZUxpZ2h0UHJvcHMoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY29sb3IgfHwgdGhpcy5jb2xvciA9PT0gMClcclxuICAgICAgICAgICAgdGhpcy50aHJlZUxpZ2h0LmNvbG9yLnNldCh0aGlzLmNvbG9yKTtcclxuICAgICAgICB0aGlzLnRocmVlTGlnaHQuaW50ZW5zaXR5ID0gdGhpcy5pbnRlbnNpdHkgPz8gdGhpcy50aHJlZUxpZ2h0LmludGVuc2l0eTtcclxuICAgIH1cclxuICAgIGRlc3Ryb3koZGVhdGhUeXBlKSB7XHJcbiAgICAgICAgdGhpcy5jYW52YXMzZFBsdWdpbi50aHJlZVdvcmxkLnRocmVlU2NlbmUucmVtb3ZlKHRoaXMudGhyZWVMaWdodCk7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5kZWZhdWx0ID0gRGlyZWN0aW9uYWxMaWdodDtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGlyZWN0aW9uYWwtbGlnaHQuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2NyZWF0ZUJpbmRpbmcgPSAodGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZykgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobSwgayk7XHJcbiAgICBpZiAoIWRlc2MgfHwgKFwiZ2V0XCIgaW4gZGVzYyA/ICFtLl9fZXNNb2R1bGUgOiBkZXNjLndyaXRhYmxlIHx8IGRlc2MuY29uZmlndXJhYmxlKSkge1xyXG4gICAgICBkZXNjID0geyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9O1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCBkZXNjKTtcclxufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICBvW2syXSA9IG1ba107XHJcbn0pKTtcclxudmFyIF9fc2V0TW9kdWxlRGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19zZXRNb2R1bGVEZWZhdWx0KSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCB2KSB7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJkZWZhdWx0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XHJcbn0pIDogZnVuY3Rpb24obywgdikge1xyXG4gICAgb1tcImRlZmF1bHRcIl0gPSB2O1xyXG59KTtcclxudmFyIF9faW1wb3J0U3RhciA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnRTdGFyKSB8fCBmdW5jdGlvbiAobW9kKSB7XHJcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xyXG4gICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKGsgIT09IFwiZGVmYXVsdFwiICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGspO1xyXG4gICAgX19zZXRNb2R1bGVEZWZhdWx0KHJlc3VsdCwgbW9kKTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn07XHJcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuY29uc3QgZ2VhcjNlbmdpbmVfMSA9IHJlcXVpcmUoXCJnZWFyM2VuZ2luZVwiKTtcclxuY29uc3QgVEhSRUUgPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcInRocmVlXCIpKTtcclxuY29uc3QgY2FudmFzXzNkX3BsdWdpbl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9jYW52YXMtM2QtcGx1Z2luXCIpKTtcclxuY2xhc3MgUG9pbnRMaWdodCBleHRlbmRzIGdlYXIzZW5naW5lXzEuR2FtZU9iamVjdCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuY2FudmFzM2RQbHVnaW4gPSB0aGlzLmdpLmdldFBsdWdpbihjYW52YXNfM2RfcGx1Z2luXzEuZGVmYXVsdCk7XHJcbiAgICAgICAgdGhpcy50aHJlZUxpZ2h0ID0gdGhpcy50aHJlZUxpZ2h0ID8/IG5ldyBUSFJFRS5Qb2ludExpZ2h0KHRoaXMuY29sb3IsIHRoaXMuaW50ZW5zaXR5LCB0aGlzLmRpc3RhbmNlLCB0aGlzLmRlY2F5KTtcclxuICAgICAgICB0aGlzLmNhbnZhczNkUGx1Z2luLnRocmVlV29ybGQudGhyZWVTY2VuZS5hZGQodGhpcy50aHJlZUxpZ2h0KTtcclxuICAgIH1cclxuICAgIHVwZGF0ZUxpZ2h0UHJvcHMoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY29sb3IgfHwgdGhpcy5jb2xvciA9PT0gMClcclxuICAgICAgICAgICAgdGhpcy50aHJlZUxpZ2h0LmNvbG9yLnNldCh0aGlzLmNvbG9yKTtcclxuICAgICAgICB0aGlzLnRocmVlTGlnaHQuaW50ZW5zaXR5ID0gdGhpcy5pbnRlbnNpdHkgPz8gdGhpcy50aHJlZUxpZ2h0LmludGVuc2l0eTtcclxuICAgICAgICB0aGlzLnRocmVlTGlnaHQuZGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlID8/IHRoaXMudGhyZWVMaWdodC5kaXN0YW5jZTtcclxuICAgICAgICB0aGlzLnRocmVlTGlnaHQuZGVjYXkgPSB0aGlzLmRlY2F5ID8/IHRoaXMudGhyZWVMaWdodC5kZWNheTtcclxuICAgIH1cclxuICAgIGRlc3Ryb3koZGVhdGhUeXBlKSB7XHJcbiAgICAgICAgdGhpcy5jYW52YXMzZFBsdWdpbi50aHJlZVdvcmxkLnRocmVlU2NlbmUucmVtb3ZlKHRoaXMudGhyZWVMaWdodCk7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5kZWZhdWx0ID0gUG9pbnRMaWdodDtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cG9pbnQtbGlnaHQuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2NyZWF0ZUJpbmRpbmcgPSAodGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZykgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobSwgayk7XHJcbiAgICBpZiAoIWRlc2MgfHwgKFwiZ2V0XCIgaW4gZGVzYyA/ICFtLl9fZXNNb2R1bGUgOiBkZXNjLndyaXRhYmxlIHx8IGRlc2MuY29uZmlndXJhYmxlKSkge1xyXG4gICAgICBkZXNjID0geyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9O1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCBkZXNjKTtcclxufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICBvW2syXSA9IG1ba107XHJcbn0pKTtcclxudmFyIF9fc2V0TW9kdWxlRGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19zZXRNb2R1bGVEZWZhdWx0KSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCB2KSB7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJkZWZhdWx0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XHJcbn0pIDogZnVuY3Rpb24obywgdikge1xyXG4gICAgb1tcImRlZmF1bHRcIl0gPSB2O1xyXG59KTtcclxudmFyIF9faW1wb3J0U3RhciA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnRTdGFyKSB8fCBmdW5jdGlvbiAobW9kKSB7XHJcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xyXG4gICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKGsgIT09IFwiZGVmYXVsdFwiICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGspO1xyXG4gICAgX19zZXRNb2R1bGVEZWZhdWx0KHJlc3VsdCwgbW9kKTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuY29uc3QgZ2VhcjNlbmdpbmVfMSA9IHJlcXVpcmUoXCJnZWFyM2VuZ2luZVwiKTtcclxuY29uc3QgVEhSRUUgPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcInRocmVlXCIpKTtcclxuY2xhc3MgVGhyZWVXb3JsZCBleHRlbmRzIGdlYXIzZW5naW5lXzEuR2FtZU9iamVjdCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMudmlzaWJsZU9iamVjdHMgPSB7fTtcclxuICAgICAgICB0aGlzLmFzcGVjdFJhdGlvID0gOSAvIDE2O1xyXG4gICAgICAgIHRoaXMuYmFja2dyb3VuZENvbG9yID0gdGhpcy5iYWNrZ3JvdW5kQ29sb3IgPz8gMHgxNTEwMTA7XHJcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0aGlzLnRhcmdldCA/PyBkb2N1bWVudC5ib2R5O1xyXG4gICAgICAgIHRoaXMuZGlzYWJsZVNjcm9sbCA9IHRoaXMuZGlzYWJsZVNjcm9sbCA/PyB0cnVlO1xyXG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVTY3JvbGwpXHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0LnN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcclxuICAgICAgICBsZXQgaGVpZ2h0ID0gdGhpcy50YXJnZXQ/Lm9mZnNldEhlaWdodCB8fCB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcbiAgICAgICAgdGhpcy50aHJlZVNjZW5lID0gbmV3IFRIUkVFLlNjZW5lKCk7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IG5ldyBUSFJFRS5XZWJHTFJlbmRlcmVyKHtcclxuICAgICAgICAgICAgYW50aWFsaWFzOiB0cnVlLFxyXG4gICAgICAgICAgICBhbHBoYTogISF0aGlzLmFscGhhQmcsXHJcbiAgICAgICAgICAgIGxvZ2FyaXRobWljRGVwdGhCdWZmZXI6IHRydWUsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zaGFkb3dNYXAuZW5hYmxlZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zaGFkb3dNYXAudHlwZSA9IFRIUkVFLlBDRlNvZnRTaGFkb3dNYXA7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRDbGVhckNvbG9yKHRoaXMuY2xlYXJDb2xvciA/PyAwLCAwKTtcclxuICAgICAgICB0aGlzLmNhbnZhcyA9IHRoaXMucmVuZGVyZXIuZG9tRWxlbWVudDtcclxuICAgICAgICB0aGlzLnRhcmdldC5hcHBlbmRDaGlsZCh0aGlzLmNhbnZhcyk7XHJcbiAgICB9XHJcbiAgICBkcmF3VXBkYXRlKGR0LCB0aW1lLCBmcmFtZXMpIHtcclxuICAgICAgICBmb3IgKGxldCBpIGluIHRoaXMudmlzaWJsZU9iamVjdHMpIHtcclxuICAgICAgICAgICAgbGV0IG9iaiA9IHRoaXMudmlzaWJsZU9iamVjdHNbaV07XHJcbiAgICAgICAgICAgICghb2JqLmRpc2FibGVEcmF3VXBkYXRlKSAmJiBvYmouZHJhd1VwZGF0ZSAmJiBvYmouZHJhd1VwZGF0ZShkdCwgdGltZSwgZnJhbWVzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5yZW5kZXIodGhpcy50aHJlZVNjZW5lLCB0aGlzLmFjdGl2ZUNhbWVyYT8udGhyZWVDYW0pO1xyXG4gICAgfVxyXG4gICAgZGVzdHJveShkZWF0aFR5cGUpIHtcclxuICAgICAgICBzdXBlci5kZXN0cm95KGRlYXRoVHlwZSk7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IHRoaXMudGhyZWVTY2VuZS5jaGlsZHJlbi5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgICAgICBsZXQgYyA9IHRoaXMudGhyZWVTY2VuZS5jaGlsZHJlbltpXTtcclxuICAgICAgICAgICAgdGhpcy50aHJlZVNjZW5lLnJlbW92ZShjKTtcclxuICAgICAgICAgICAgdGhpcy5kaXNwb3NlT2ZEaXNwbGF5T2JqZWN0KGMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICA7XHJcbiAgICAgICAgdGhpcy50aHJlZVNjZW5lID0gbnVsbDtcclxuICAgICAgICB0aGlzLmNhbnZhcy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuY2FudmFzKTtcclxuICAgICAgICB0aGlzLmNhbnZhcyA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBkaXNwb3NlT2ZEaXNwbGF5T2JqZWN0KG9iamVjdCkge1xyXG4gICAgICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiBUSFJFRS5Hcm91cCkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9iamVjdC5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlT2ZEaXNwbGF5T2JqZWN0KG9iamVjdC5jaGlsZHJlbltpXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAob2JqZWN0IGluc3RhbmNlb2YgVEhSRUUuTWVzaCkge1xyXG4gICAgICAgICAgICBpZiAob2JqZWN0Lmdlb21ldHJ5KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3Bvc2VPZkRpc3BsYXlPYmplY3Qob2JqZWN0Lmdlb21ldHJ5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChvYmplY3QgaW5zdGFuY2VvZiBUSFJFRS5CdWZmZXJHZW9tZXRyeSkge1xyXG4gICAgICAgICAgICBvYmplY3QuZGlzcG9zZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGFkZENoaWxkKGNoaWxkKSB7XHJcbiAgICAgICAgdGhpcy52aXNpYmxlT2JqZWN0c1tjaGlsZC5pZF0gPSBjaGlsZDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkLl9kaXNwbGF5T2JqZWN0czNkLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBkaXNwbGF5T2JqZWN0ID0gY2hpbGQuX2Rpc3BsYXlPYmplY3RzM2RbaV07XHJcbiAgICAgICAgICAgIGlmICghZGlzcGxheU9iamVjdC5wYXJlbnQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudGhyZWVTY2VuZS5hZGQoZGlzcGxheU9iamVjdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZW1vdmVDaGlsZChjaGlsZCkge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGQuX2Rpc3BsYXlPYmplY3RzM2QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY2hpbGQuX2Rpc3BsYXlPYmplY3RzM2RbaV0ucGFyZW50LnJlbW92ZShjaGlsZC5fZGlzcGxheU9iamVjdHMzZFtpXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRlbGV0ZSB0aGlzLnZpc2libGVPYmplY3RzW2NoaWxkLmlkXTtcclxuICAgIH1cclxuICAgIHJlc2l6ZSgpIHtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFNpemUodGhpcy50YXJnZXQ/Lm9mZnNldFdpZHRoID8/IHdpbmRvdy5pbm5lcldpZHRoLCB0aGlzLnRhcmdldD8ub2Zmc2V0SGVpZ2h0ID8/IHdpbmRvdy5pbm5lckhlaWdodCk7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5kZWZhdWx0ID0gVGhyZWVXb3JsZDtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGhyZWUtd29ybGQuanMubWFwIl0sIm5hbWVzIjpbIl9faW1wb3J0RGVmYXVsdCIsInRoaXMiLCJtb2QiLCJfX2VzTW9kdWxlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJkcmF3YWJsZTNkIiwiY2FudmFzXzNkX3BsdWdpbl8xIiwidGFyZ2V0IiwiY29uc3RydWN0b3IiLCJhcmdzIiwic3VwZXIiLCJjYW52YXMzZFBsdWdpbiIsImdpIiwiZ2V0UGx1Z2luIiwiZGVmYXVsdCIsIl9kaXNwbGF5T2JqZWN0czNkIiwiYWRkRGlzY3JpbWluYXRvciIsInRocmVlV29ybGQiLCJhZGRDaGlsZCIsImluaXRpYWxpemUiLCJ0aGlzSXNQaHlzaWNhbCIsImlzQW55IiwicGh5c2ljc1RhcmdldEV4dGVuc2lvbiIsImlzIiwiZGlzYWJsZVBoeXNpY3NTeW5jIiwic3luY1dpdGhQaHlzaWNzIiwiYWRkRGlzcGxheU9iamVjdCIsIm9iamVjdCIsInB1c2giLCJsZW5ndGgiLCJwIiwidiIsInBvc2l0aW9uIiwidmVsb2NpdHkiLCJzZXQiLCJ4IiwieSIsInoiLCJkcmF3VXBkYXRlIiwiZHQiLCJ0aW1lIiwiZnJhbWVzIiwiZGVzdHJveSIsImRlYXRoVHlwZSIsInJlbW92ZUNoaWxkIiwiZGlzcGxheU9iamVjdCIsInBvcCIsImRpc3Bvc2VPZkRpc3BsYXlPYmplY3QiLCJfX2NyZWF0ZUJpbmRpbmciLCJjcmVhdGUiLCJvIiwibSIsImsiLCJrMiIsInVuZGVmaW5lZCIsImRlc2MiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJ3cml0YWJsZSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJnZXQiLCJfX3NldE1vZHVsZURlZmF1bHQiLCJfX2ltcG9ydFN0YXIiLCJyZXN1bHQiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJUaHJlZVdvcmxkIiwiQ2FudmFzM2RQbHVnaW4iLCJDYW1lcmEzZCIsIkFtYmllbnRMaWdodCIsIkRpcmVjdGlvbmFsTGlnaHQiLCJQb2ludExpZ2h0IiwiVGhyZWUiLCJUSFJFRSIsInBvaW50X2xpZ2h0XzEiLCJkaXJlY3Rpb25hbF9saWdodF8xIiwiYW1iaWVudF9saWdodF8xIiwiY2FtZXJhXzNkXzEiLCJkcmF3YWJsZV8zZF8xIiwidGhyZWVfd29ybGRfMSIsImdlYXIzZW5naW5lXzEiLCJHYW1lT2JqZWN0IiwidGhyZWVMaWdodCIsImNvbG9yIiwiaW50ZW5zaXR5IiwidGhyZWVTY2VuZSIsImFkZCIsInVwZGF0ZUxpZ2h0UHJvcHMiLCJyZW1vdmUiLCJkaXN0YW5jZSIsImRlY2F5IiwidmlzaWJsZU9iamVjdHMiLCJhc3BlY3RSYXRpbyIsImJhY2tncm91bmRDb2xvciIsImRvY3VtZW50IiwiYm9keSIsImRpc2FibGVTY3JvbGwiLCJzdHlsZSIsIm92ZXJmbG93Iiwib2Zmc2V0SGVpZ2h0Iiwid2luZG93IiwiaW5uZXJIZWlnaHQiLCJTY2VuZSIsInJlbmRlcmVyIiwiV2ViR0xSZW5kZXJlciIsImFudGlhbGlhcyIsImFscGhhIiwiYWxwaGFCZyIsImxvZ2FyaXRobWljRGVwdGhCdWZmZXIiLCJzaGFkb3dNYXAiLCJlbmFibGVkIiwidHlwZSIsIlBDRlNvZnRTaGFkb3dNYXAiLCJzZXRDbGVhckNvbG9yIiwiY2xlYXJDb2xvciIsImNhbnZhcyIsImRvbUVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsImkiLCJvYmoiLCJkaXNhYmxlRHJhd1VwZGF0ZSIsInJlbmRlciIsImFjdGl2ZUNhbWVyYSIsInRocmVlQ2FtIiwiY2hpbGRyZW4iLCJjIiwicGFyZW50Tm9kZSIsIkdyb3VwIiwiTWVzaCIsImdlb21ldHJ5IiwiQnVmZmVyR2VvbWV0cnkiLCJkaXNwb3NlIiwiY2hpbGQiLCJpZCIsInBhcmVudCIsInJlc2l6ZSIsInNldFNpemUiLCJvZmZzZXRXaWR0aCIsImlubmVyV2lkdGgiXSwic291cmNlUm9vdCI6IiJ9