"use strict";(self.webpackChunkgear3engine_website=self.webpackChunkgear3engine_website||[]).push([[5069],{6782:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.chunkData={},this.disableCleanup=!1}watchChunk(e,t,s,i){let a=this.getChunk(t,s,i);if(!a.watchers[e.id]){a.watchers[e.id]=e;for(let t in a.references)e.loadObject(a.references[t])}}unwatchChunk(e,t,s,i){let a=this.getChunk(t,s,i);if(a.watchers[e.id]){delete a.watchers[e.id];for(let t in a.references)e.unloadObject(a.references[t]);this.cleanup||this.cleanup(t,s,i)}}addToChunk(e,t,s,i){let a=this.getChunk(t,s,i);if(!a.references[e.id]){a.references[e.id]=e;for(let t in a.watchers)a.watchers[t].loadObject(e)}}removeFromChunk(e,t,s,i){let a=this.getChunk(t,s,i);if(a.references[e.id]){delete a.references[e.id];for(let t in a.watchers)a.watchers[t].unloadObject(e);this.cleanup||this.cleanup(t,s,i)}}getChunk(e,t,s){let i=this.chunkData[e];i||(i=this.chunkData[e]={});let a=i[t];a||(a=i[t]={});let r=a[s??0];return r||(r=a[s??0]={references:{},watchers:{}}),r}cleanup(e,t,s){0==Object.keys(this.chunkData[e][t][s]).length&&(delete this.chunkData[e][t][s],0==Object.keys(this.chunkData[e][t]).length&&(delete this.chunkData[e][t],0==Object.keys(this.chunkData[e]).length&&delete this.chunkData[e]))}}},7302:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.extension=void 0,t.extension=function(e,t){return function(s){let i=1;const a=class extends s{constructor(...e){super(...e),this.addDiscriminator("extension"),console.log("CONSTRUCTOR CALLED!")}};if(t||(t=`${s.name}${i++}`),e.g3eExtensions||(e.g3eExtensions={}),e.g3eExtensions[t])throw new Error(`The game object was already extended with an extension with the given name '${t}'.`);return e.g3eExtensions[t]=a,a}}},943:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(s(2136));class r extends a.default{constructor(){super(),this.lastUpdate=.001*(performance.now()-16.7),this.frameTicker=0,this.updatePhysics=!0,this.aveAbsFpsDiff=0,this.allSamples=[],this.allDiffSamples=[],this.rollingAverageDt=.01666,this.lastTimeout=-1,this.targetFramePeriod=1/60,this.triggerGameInstanceEvents=this.triggerGameInstanceEvents||!1;for(let e=0;e<60;e++)this.rollingAverageDt=this.targetFramePeriod,this.allSamples.push(this.rollingAverageDt),this.allDiffSamples.push(0)}start(){this.lastTimeout=setTimeout((()=>this.update()),0)}pause(){this.lastTimeout>-1&&clearTimeout(this.lastTimeout),this.lastTimeout=-1}update(){this.frameTicker=(this.frameTicker+1)%60;let e=.001*performance.now(),t=e-this.lastUpdate||.0166;this.lastUpdate=e,this.aveAbsFpsDiff+=.01*(Math.abs(t-this.targetFramePeriod)-this.aveAbsFpsDiff);let s=t-this.targetFramePeriod;if(this.updatePhysics&&(this.lastTimeout=setTimeout((()=>this.update()),1e3*(this.targetFramePeriod-s))),this.triggerGameInstanceEvents&&!this.callback)this.gi.trigger("beforeFixedUpdate",t,e),this.gi.trigger("fixedUpdate",t,e),this.gi.trigger("physicsUpdate",t,e),this.gi.trigger("afterFixedUpdate",t,e),this.gi.trigger("transmitUpdates");else{if(!this.callback||this.triggerGameInstanceEvents)throw new Error("Fixed timers must be configured to either trigger game instance events, or have a callback. Neither or both are invalid.");this.callback(t,e)}}destroy(e){this.pause()}}t.default=r}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q3ZELENBQ0FDLFFBQ1E3RCxLQUFLcUQsYUFBZSxHQUNwQlMsYUFBYTlELEtBQUtxRCxhQUN0QnJELEtBQUtxRCxhQUFlLENBQ3hCLENBQ0FPLFNBQ0k1RCxLQUFLK0MsYUFBZS9DLEtBQUsrQyxZQUFjLEdBQUssR0FDNUMsSUFBSUQsRUFBMEIsS0FBcEJELFlBQVlDLE1BQ2xCaUIsRUFBTWpCLEVBQU05QyxLQUFLNEMsWUFBZSxNQUNwQzVDLEtBQUs0QyxXQUFhRSxFQUNsQjlDLEtBQUtpRCxlQUFnRixLQUE5RGUsS0FBS0MsSUFBSUYsRUFBSy9ELEtBQUtzRCxtQkFBcUJ0RCxLQUFLaUQsZUFDcEUsSUFBSWlCLEVBQWNILEVBQUsvRCxLQUFLc0Qsa0JBRzVCLEdBRkl0RCxLQUFLZ0QsZ0JBQ0xoRCxLQUFLcUQsWUFBY00sWUFBVyxJQUFNM0QsS0FBSzRELFVBQVUsS0FBUTVELEtBQUtzRCxrQkFBb0JZLEtBQ3BGbEUsS0FBS3VELDRCQUE4QnZELEtBQUttRSxTQUN4Q25FLEtBQUtvRSxHQUFHQyxRQUFRLG9CQUFxQk4sRUFBSWpCLEdBQ3pDOUMsS0FBS29FLEdBQUdDLFFBQVEsY0FBZU4sRUFBSWpCLEdBQ25DOUMsS0FBS29FLEdBQUdDLFFBQVEsZ0JBQWlCTixFQUFJakIsR0FDckM5QyxLQUFLb0UsR0FBR0MsUUFBUSxtQkFBb0JOLEVBQUlqQixHQUN4QzlDLEtBQUtvRSxHQUFHQyxRQUFRLHVCQUVmLEtBQUlyRSxLQUFLbUUsVUFBYW5FLEtBQUt1RCwwQkFJNUIsTUFBTSxJQUFJbEIsTUFBTSw0SEFIaEJyQyxLQUFLbUUsU0FBU0osRUFBSWpCLEVBSXRCLENBQ0osQ0FDQXdCLFFBQVFDLEdBQ0p2RSxLQUFLNkQsT0FDVCxFQUVKaEUsRUFBQSxRQUFrQjZDLEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9nZWFyM2VuZ2luZS13ZWJzaXRlLy4uLy4uL0dBTUVTLVNJTVVMQVRPUlMtRlVOL2dlYXIzZW5naW5lL3BsdWdpbnMvZ2VhcjNlbmdpbmUvYnVpbGQvY29yZS9jaHVuay1tYW5hZ2VyLmpzIiwid2VicGFjazovL2dlYXIzZW5naW5lLXdlYnNpdGUvLi4vLi4vR0FNRVMtU0lNVUxBVE9SUy1GVU4vZ2VhcjNlbmdpbmUvcGx1Z2lucy9nZWFyM2VuZ2luZS9idWlsZC9jb3JlL2V4dGVuc2lvbi5qcyIsIndlYnBhY2s6Ly9nZWFyM2VuZ2luZS13ZWJzaXRlLy4uLy4uL0dBTUVTLVNJTVVMQVRPUlMtRlVOL2dlYXIzZW5naW5lL3BsdWdpbnMvZ2VhcjNlbmdpbmUvYnVpbGQvY29yZS9maXhlZC10aW1lci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5jbGFzcyBDaHVua01hbmFnZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5jaHVua0RhdGEgPSB7fTtcclxuICAgICAgICB0aGlzLmRpc2FibGVDbGVhbnVwID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICB3YXRjaENodW5rKGNvbnRyb2xsZXIsIGNYLCBjWSwgY1opIHtcclxuICAgICAgICBsZXQgY2h1bmsgPSB0aGlzLmdldENodW5rKGNYLCBjWSwgY1opO1xyXG4gICAgICAgIGlmICghY2h1bmsud2F0Y2hlcnNbY29udHJvbGxlci5pZF0pIHtcclxuICAgICAgICAgICAgY2h1bmsud2F0Y2hlcnNbY29udHJvbGxlci5pZF0gPSBjb250cm9sbGVyO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBvIGluIGNodW5rLnJlZmVyZW5jZXMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIubG9hZE9iamVjdChjaHVuay5yZWZlcmVuY2VzW29dKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHVud2F0Y2hDaHVuayhjb250cm9sbGVyLCBjWCwgY1ksIGNaKSB7XHJcbiAgICAgICAgbGV0IGNodW5rID0gdGhpcy5nZXRDaHVuayhjWCwgY1ksIGNaKTtcclxuICAgICAgICBpZiAoY2h1bmsud2F0Y2hlcnNbY29udHJvbGxlci5pZF0pIHtcclxuICAgICAgICAgICAgZGVsZXRlIGNodW5rLndhdGNoZXJzW2NvbnRyb2xsZXIuaWRdO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBvIGluIGNodW5rLnJlZmVyZW5jZXMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIudW5sb2FkT2JqZWN0KGNodW5rLnJlZmVyZW5jZXNbb10pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5jbGVhbnVwKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhbnVwKGNYLCBjWSwgY1opO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGFkZFRvQ2h1bmsob2JqZWN0LCBjWCwgY1ksIGNaKSB7XHJcbiAgICAgICAgbGV0IGNodW5rID0gdGhpcy5nZXRDaHVuayhjWCwgY1ksIGNaKTtcclxuICAgICAgICBpZiAoIWNodW5rLnJlZmVyZW5jZXNbb2JqZWN0LmlkXSkge1xyXG4gICAgICAgICAgICBjaHVuay5yZWZlcmVuY2VzW29iamVjdC5pZF0gPSBvYmplY3Q7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGMgaW4gY2h1bmsud2F0Y2hlcnMpIHtcclxuICAgICAgICAgICAgICAgIGNodW5rLndhdGNoZXJzW2NdLmxvYWRPYmplY3Qob2JqZWN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJlbW92ZUZyb21DaHVuayhvYmplY3QsIGNYLCBjWSwgY1opIHtcclxuICAgICAgICBsZXQgY2h1bmsgPSB0aGlzLmdldENodW5rKGNYLCBjWSwgY1opO1xyXG4gICAgICAgIGlmIChjaHVuay5yZWZlcmVuY2VzW29iamVjdC5pZF0pIHtcclxuICAgICAgICAgICAgZGVsZXRlIGNodW5rLnJlZmVyZW5jZXNbb2JqZWN0LmlkXTtcclxuICAgICAgICAgICAgZm9yIChsZXQgYyBpbiBjaHVuay53YXRjaGVycykge1xyXG4gICAgICAgICAgICAgICAgY2h1bmsud2F0Y2hlcnNbY10udW5sb2FkT2JqZWN0KG9iamVjdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCF0aGlzLmNsZWFudXApXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFudXAoY1gsIGNZLCBjWik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0Q2h1bmsoY1gsIGNZLCBjWikge1xyXG4gICAgICAgIGxldCBsYXllciA9IHRoaXMuY2h1bmtEYXRhW2NYXTtcclxuICAgICAgICBpZiAoIWxheWVyKVxyXG4gICAgICAgICAgICBsYXllciA9IHRoaXMuY2h1bmtEYXRhW2NYXSA9IHt9O1xyXG4gICAgICAgIGxldCByb3cgPSBsYXllcltjWV07XHJcbiAgICAgICAgaWYgKCFyb3cpXHJcbiAgICAgICAgICAgIHJvdyA9IGxheWVyW2NZXSA9IHt9O1xyXG4gICAgICAgIGxldCBjaHVuayA9IHJvd1tjWiA/PyAwXTtcclxuICAgICAgICBpZiAoIWNodW5rKVxyXG4gICAgICAgICAgICBjaHVuayA9IHJvd1tjWiA/PyAwXSA9IHtcclxuICAgICAgICAgICAgICAgIHJlZmVyZW5jZXM6IHt9LFxyXG4gICAgICAgICAgICAgICAgd2F0Y2hlcnM6IHt9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIGNodW5rO1xyXG4gICAgfVxyXG4gICAgY2xlYW51cChjWCwgY1ksIGNaKSB7XHJcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMuY2h1bmtEYXRhW2NYXVtjWV1bY1pdKS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5jaHVua0RhdGFbY1hdW2NZXVtjWl07XHJcbiAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLmNodW5rRGF0YVtjWF1bY1ldKS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuY2h1bmtEYXRhW2NYXVtjWV07XHJcbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5jaHVua0RhdGFbY1hdKS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmNodW5rRGF0YVtjWF07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5kZWZhdWx0ID0gQ2h1bmtNYW5hZ2VyO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1jaHVuay1tYW5hZ2VyLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuZXh0ZW5zaW9uID0gdm9pZCAwO1xyXG5mdW5jdGlvbiBleHRlbnNpb24ob3RoZXIsIGV4dGVuc2lvbk5hbWUpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoY29uc3RydWN0b3IpIHtcclxuICAgICAgICBsZXQgY29uc3RydWN0b3JJZHMgPSAxO1xyXG4gICAgICAgIGNvbnN0IGNscyA9IGNsYXNzIGV4dGVuZHMgY29uc3RydWN0b3Ige1xyXG4gICAgICAgICAgICBjb25zdHJ1Y3RvciguLi5hcmdzKSB7XHJcbiAgICAgICAgICAgICAgICBzdXBlciguLi5hcmdzKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWRkRGlzY3JpbWluYXRvcihcImV4dGVuc2lvblwiKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ09OU1RSVUNUT1IgQ0FMTEVEIVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKCFleHRlbnNpb25OYW1lKVxyXG4gICAgICAgICAgICBleHRlbnNpb25OYW1lID0gYCR7Y29uc3RydWN0b3IubmFtZX0ke2NvbnN0cnVjdG9ySWRzKyt9YDtcclxuICAgICAgICBpZiAoIW90aGVyW1wiZzNlRXh0ZW5zaW9uc1wiXSlcclxuICAgICAgICAgICAgb3RoZXJbXCJnM2VFeHRlbnNpb25zXCJdID0ge307XHJcbiAgICAgICAgaWYgKG90aGVyW1wiZzNlRXh0ZW5zaW9uc1wiXVtleHRlbnNpb25OYW1lXSlcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUaGUgZ2FtZSBvYmplY3Qgd2FzIGFscmVhZHkgZXh0ZW5kZWQgd2l0aCBhbiBleHRlbnNpb24gd2l0aCB0aGUgZ2l2ZW4gbmFtZSAnJHtleHRlbnNpb25OYW1lfScuYCk7XHJcbiAgICAgICAgb3RoZXJbXCJnM2VFeHRlbnNpb25zXCJdW2V4dGVuc2lvbk5hbWVdID0gY2xzO1xyXG4gICAgICAgIHJldHVybiBjbHM7XHJcbiAgICB9O1xyXG59XHJcbmV4cG9ydHMuZXh0ZW5zaW9uID0gZXh0ZW5zaW9uO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1leHRlbnNpb24uanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuY29uc3QgZ2FtZV9vYmplY3RfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9nYW1lLW9iamVjdFwiKSk7XHJcbmNsYXNzIEZpeGVkVGltZXIgZXh0ZW5kcyBnYW1lX29iamVjdF8xLmRlZmF1bHQge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLmxhc3RVcGRhdGUgPSAocGVyZm9ybWFuY2Uubm93KCkgLSAxNi43KSAqIDAuMDAxO1xyXG4gICAgICAgIHRoaXMuZnJhbWVUaWNrZXIgPSAwO1xyXG4gICAgICAgIHRoaXMudXBkYXRlUGh5c2ljcyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5hdmVBYnNGcHNEaWZmID0gMDtcclxuICAgICAgICB0aGlzLmFsbFNhbXBsZXMgPSBbXTtcclxuICAgICAgICB0aGlzLmFsbERpZmZTYW1wbGVzID0gW107XHJcbiAgICAgICAgdGhpcy5yb2xsaW5nQXZlcmFnZUR0ID0gMC4wMTY2NjtcclxuICAgICAgICB0aGlzLmxhc3RUaW1lb3V0ID0gLTE7XHJcbiAgICAgICAgdGhpcy50YXJnZXRGcmFtZVBlcmlvZCA9IDEgLyA2MDtcclxuICAgICAgICB0aGlzLnRyaWdnZXJHYW1lSW5zdGFuY2VFdmVudHMgPSB0aGlzLnRyaWdnZXJHYW1lSW5zdGFuY2VFdmVudHMgfHwgZmFsc2U7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA2MDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMucm9sbGluZ0F2ZXJhZ2VEdCA9IHRoaXMudGFyZ2V0RnJhbWVQZXJpb2Q7XHJcbiAgICAgICAgICAgIHRoaXMuYWxsU2FtcGxlcy5wdXNoKHRoaXMucm9sbGluZ0F2ZXJhZ2VEdCk7XHJcbiAgICAgICAgICAgIHRoaXMuYWxsRGlmZlNhbXBsZXMucHVzaCgwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzdGFydCgpIHtcclxuICAgICAgICB0aGlzLmxhc3RUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLnVwZGF0ZSgpLCAwKTtcclxuICAgIH1cclxuICAgIHBhdXNlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmxhc3RUaW1lb3V0ID4gLTEpXHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmxhc3RUaW1lb3V0KTtcclxuICAgICAgICB0aGlzLmxhc3RUaW1lb3V0ID0gLTE7XHJcbiAgICB9XHJcbiAgICB1cGRhdGUoKSB7XHJcbiAgICAgICAgdGhpcy5mcmFtZVRpY2tlciA9ICh0aGlzLmZyYW1lVGlja2VyICsgMSkgJSA2MDtcclxuICAgICAgICBsZXQgbm93ID0gcGVyZm9ybWFuY2Uubm93KCkgKiAwLjAwMTtcclxuICAgICAgICBsZXQgZHQgPSAobm93IC0gdGhpcy5sYXN0VXBkYXRlKSB8fCAwLjAxNjY7XHJcbiAgICAgICAgdGhpcy5sYXN0VXBkYXRlID0gbm93O1xyXG4gICAgICAgIHRoaXMuYXZlQWJzRnBzRGlmZiArPSAoTWF0aC5hYnMoZHQgLSB0aGlzLnRhcmdldEZyYW1lUGVyaW9kKSAtIHRoaXMuYXZlQWJzRnBzRGlmZikgKiAwLjAxO1xyXG4gICAgICAgIGxldCBkaXNjcmVwYW5jeSA9IGR0IC0gdGhpcy50YXJnZXRGcmFtZVBlcmlvZDtcclxuICAgICAgICBpZiAodGhpcy51cGRhdGVQaHlzaWNzKVxyXG4gICAgICAgICAgICB0aGlzLmxhc3RUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLnVwZGF0ZSgpLCAxMDAwICogKHRoaXMudGFyZ2V0RnJhbWVQZXJpb2QgLSBkaXNjcmVwYW5jeSkpO1xyXG4gICAgICAgIGlmICh0aGlzLnRyaWdnZXJHYW1lSW5zdGFuY2VFdmVudHMgJiYgIXRoaXMuY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgdGhpcy5naS50cmlnZ2VyKFwiYmVmb3JlRml4ZWRVcGRhdGVcIiwgZHQsIG5vdyk7XHJcbiAgICAgICAgICAgIHRoaXMuZ2kudHJpZ2dlcihcImZpeGVkVXBkYXRlXCIsIGR0LCBub3cpO1xyXG4gICAgICAgICAgICB0aGlzLmdpLnRyaWdnZXIoXCJwaHlzaWNzVXBkYXRlXCIsIGR0LCBub3cpO1xyXG4gICAgICAgICAgICB0aGlzLmdpLnRyaWdnZXIoXCJhZnRlckZpeGVkVXBkYXRlXCIsIGR0LCBub3cpO1xyXG4gICAgICAgICAgICB0aGlzLmdpLnRyaWdnZXIoXCJ0cmFuc21pdFVwZGF0ZXNcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuY2FsbGJhY2sgJiYgIXRoaXMudHJpZ2dlckdhbWVJbnN0YW5jZUV2ZW50cykge1xyXG4gICAgICAgICAgICB0aGlzLmNhbGxiYWNrKGR0LCBub3cpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRml4ZWQgdGltZXJzIG11c3QgYmUgY29uZmlndXJlZCB0byBlaXRoZXIgdHJpZ2dlciBnYW1lIGluc3RhbmNlIGV2ZW50cywgb3IgaGF2ZSBhIGNhbGxiYWNrLiBOZWl0aGVyIG9yIGJvdGggYXJlIGludmFsaWQuXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGRlc3Ryb3koZGVhdGhUeXBlKSB7XHJcbiAgICAgICAgdGhpcy5wYXVzZSgpO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuZGVmYXVsdCA9IEZpeGVkVGltZXI7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZpeGVkLXRpbWVyLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImNvbnN0cnVjdG9yIiwidGhpcyIsImNodW5rRGF0YSIsImRpc2FibGVDbGVhbnVwIiwid2F0Y2hDaHVuayIsImNvbnRyb2xsZXIiLCJjWCIsImNZIiwiY1oiLCJjaHVuayIsImdldENodW5rIiwid2F0Y2hlcnMiLCJpZCIsIm8iLCJyZWZlcmVuY2VzIiwibG9hZE9iamVjdCIsInVud2F0Y2hDaHVuayIsInVubG9hZE9iamVjdCIsImNsZWFudXAiLCJhZGRUb0NodW5rIiwib2JqZWN0IiwiYyIsInJlbW92ZUZyb21DaHVuayIsImxheWVyIiwicm93Iiwia2V5cyIsImxlbmd0aCIsImV4dGVuc2lvbiIsIm90aGVyIiwiZXh0ZW5zaW9uTmFtZSIsImNvbnN0cnVjdG9ySWRzIiwiY2xzIiwiYXJncyIsInN1cGVyIiwiYWRkRGlzY3JpbWluYXRvciIsImNvbnNvbGUiLCJsb2ciLCJuYW1lIiwiRXJyb3IiLCJfX2ltcG9ydERlZmF1bHQiLCJtb2QiLCJfX2VzTW9kdWxlIiwiZ2FtZV9vYmplY3RfMSIsIkZpeGVkVGltZXIiLCJkZWZhdWx0IiwibGFzdFVwZGF0ZSIsInBlcmZvcm1hbmNlIiwibm93IiwiZnJhbWVUaWNrZXIiLCJ1cGRhdGVQaHlzaWNzIiwiYXZlQWJzRnBzRGlmZiIsImFsbFNhbXBsZXMiLCJhbGxEaWZmU2FtcGxlcyIsInJvbGxpbmdBdmVyYWdlRHQiLCJsYXN0VGltZW91dCIsInRhcmdldEZyYW1lUGVyaW9kIiwidHJpZ2dlckdhbWVJbnN0YW5jZUV2ZW50cyIsImkiLCJwdXNoIiwic3RhcnQiLCJzZXRUaW1lb3V0IiwidXBkYXRlIiwicGF1c2UiLCJjbGVhclRpbWVvdXQiLCJkdCIsIk1hdGgiLCJhYnMiLCJkaXNjcmVwYW5jeSIsImNhbGxiYWNrIiwiZ2kiLCJ0cmlnZ2VyIiwiZGVzdHJveSIsImRlYXRoVHlwZSJdLCJzb3VyY2VSb290IjoiIn0=