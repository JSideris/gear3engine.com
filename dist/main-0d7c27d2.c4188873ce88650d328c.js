"use strict";(self.webpackChunkgear3engine_website=self.webpackChunkgear3engine_website||[]).push([[6290],{7566:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.dependencies=[]}setup(e){if(this.gameInstance)throw new Error("The setup function was already called for this plugin.");this.gameInstance=e;for(let e in this.dependencies){let t=this.dependencies[e];if(!this.gameInstance.getPlugin(t))throw new Error(`A plugin was initialized without the required dependencies. '${t.name}' is marked as a dependency that has not be fulfilled. Ensure that plugins are registered in the correct order.`)}this.initialize()}}},1985:function(e,t,i){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(i(6782)),a=r(i(7187)),n=r(i(943)),d=r(i(6690)),h=r(i(8989));t.default=class{get fixedUpdateInProgress(){return this._fixedUpdateInProgress}get isMaster(){return this.instanceParameters?.isMaster??!0}constructor(e){this.enableEventTracing=!1,this._fixedUpdateInProgress=!1,this.gameMode=null,this.gameEnded=!1,this._gameObjectFactory=new d.default(this),this.allGameObjectsById={},this.remoteGameObjectsById={},this.beforeFixedUpdateGameObjects={},this.fixedUpdateGameObjects={},this.afterFixedUpdateGameObjects={},this.teams={},this.controllers={},this.totalAiPlayers=0,this.totalAiEntities=0,this.totalUsers=0,this.lastUpdateTime=performance.now()/1e3,this.chunkManager=new s.default,this._events={},this.plugins=[],this.nextRemoteTriggerId=1,this._remoteTriggersById={},this._remoteTriggersByName={},this.instanceParameters=e||{},this.on("registerObject",(e=>{this._gameObjectFactory.register(e)})),this.on("addObject",(e=>{e.beforeFixedUpdate&&(this.beforeFixedUpdateGameObjects[e.id]=e),e.fixedUpdate&&(this.fixedUpdateGameObjects[e.id]=e),e.afterFixedUpdate&&(this.afterFixedUpdateGameObjects[e.id]=e),e instanceof a.default&&(this.controllers[e.id]=e)})),this.on("removeObject",(e=>{e.beforeFixedUpdate&&delete this.beforeFixedUpdateGameObjects[e.id],e.fixedUpdate&&delete this.fixedUpdateGameObjects[e.id],e.afterFixedUpdate&&delete this.afterFixedUpdateGameObjects[e.id],e instanceof a.default&&delete this.controllers[e.id]})),this.on("beforeFixedUpdate",((e,t)=>{this._fixedUpdateInProgress=!0,this.lastUpdateTime=performance.now()/1e3;for(let i in this.beforeFixedUpdateGameObjects){let r=this.beforeFixedUpdateGameObjects[i];try{r.beforeFixedUpdate(e,t)}catch(e){console.error(e,r)}}})),this.on("fixedUpdate",((e,t)=>{for(let i in this.fixedUpdateGameObjects){let r=this.fixedUpdateGameObjects[i];try{r.fixedUpdate(e,t)}catch(e){console.error(e,r)}}})),this.on("afterFixedUpdate",((e,t)=>{for(let i in this.afterFixedUpdateGameObjects){let r=this.afterFixedUpdateGameObjects[i];try{r.afterFixedUpdate(e,t)}catch(e){console.error(e,r)}}this._fixedUpdateInProgress=!1,this._gameObjectFactory.flushDestructionQueue()})),this.on("remoteTrigger",(e=>{e.comProfile.addAction(null,e.trigger.id,e.args)})),this.registerRemoteTrigger("setRobot"),this.registerRemoteTrigger("trackObject"),this._fixedTimer=this.make(n.default,(t=>{t.triggerGameInstanceEvents=!0,t.targetFramePeriod=1/(e?.targetFps||60)}))}on(e,t){this._events[e]||(this._events[e]=[]),this._events[e].push(t)}off(e,t){this._events[e]=this._events[e].filter((e=>e!=t)),this.trigger("renderUpdate",2,2,2)}trigger(e,...t){if(this.enableEventTracing&&console.log(`ðŸ”ƒ ${e}(${t}) => ${this._events[e]?.length??0}`),this._events[e])for(let i of this._events[e])i.call(this,...t)}play(){this._gameObjectFactory._playing=!0,this.gameMode?.initialize(),this._fixedTimer.start(),this.trigger("gameStart")}gameOver(e){this.trigger("gameOver");for(let e in this.allGameObjectsById)this._gameObjectFactory.destroy(this.allGameObjectsById[e],h.default.GameOver);this.gameEnded=!0,this._fixedTimer.pause(),this._fixedTimer=null,this._gameObjectFactory._playing=!1}idIsTaken(e){return!!this.allGameObjectsById[e]}make(e,t){return this._gameObjectFactory.make(e,t)}makeOnMaster(e,t){return this.isMaster?this._gameObjectFactory.make(e,t):null}destroyObjectOnMaster(e,t){this.isMaster&&this._gameObjectFactory.destroy(e,t)}destroyObject(e,t){this._gameObjectFactory.destroy(e,t)}usePlugin(e){return this.plugins.push(e),e.setup(this),e}getPlugin(e){for(let t in this.plugins){let i=this.plugins[t];if(i instanceof e)return i}throw new Error(`Attempted to read from the '${e.name}' plugin, which hasn't been setup. You may have forgot to install a dependency.`)}registerRemoteTrigger(e,...t){if(this._remoteTriggersByName[e])throw new Error(`A remote trigger with the name ${e} has already been defined.`);this._remoteTriggersById[this.nextRemoteTriggerId]=this._remoteTriggersByName[e]={handlers:null,argTypes:t,id:this.nextRemoteTriggerId++}}registerRemoteTriggerHandler(e,t){if(!this._remoteTriggersByName[e])throw new Error(`A remote trigger with the name ${e} has not been defined.`);this._remoteTriggersByName[e].handlers||(this._remoteTriggersByName[e].handlers=[]),this._remoteTriggersByName[e].handlers.push(t)}_invokeRemoteTrigger(e,t,...i){if(!this._remoteTriggersByName[e])throw new Error(`A remote trigger with the name ${e} has not been defined.`);let r={trigger:this._remoteTriggersByName[e],args:i,comProfile:t};this.trigger("remoteTrigger",r)}}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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R0FBTThGLFNBQVM1QixLQUFLOEIsRUFDbkQsQ0FDQUMscUJBQXFCakcsRUFBTXFELEtBQWVHLEdBSXRDLElBQUtoRSxLQUFLOEMsc0JBQXNCdEMsR0FDNUIsTUFBTSxJQUFJSixNQUFNLGtDQUFrQ0ksMkJBQ3RELElBQUlrRyxFQUFpQixDQUNqQjNDLFFBQVMvRCxLQUFLOEMsc0JBQXNCdEMsR0FDcEN3RCxLQUFNQSxFQUNOSCxXQUFZQSxHQUVoQjdELEtBQUsrRCxRQUFRLGdCQUFpQjJDLEVBQ2xDLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9nZWFyM2VuZ2luZS13ZWJzaXRlLy4uLy4uL0dBTUVTLVNJTVVMQVRPUlMtRlVOL2dlYXIzZW5naW5lL3BsdWdpbnMvZ2VhcjNlbmdpbmUvYnVpbGQvY29yZS9nYW1lLWluc3RhbmNlLXBsdWdpbi5qcyIsIndlYnBhY2s6Ly9nZWFyM2VuZ2luZS13ZWJzaXRlLy4uLy4uL0dBTUVTLVNJTVVMQVRPUlMtRlVOL2dlYXIzZW5naW5lL3BsdWdpbnMvZ2VhcjNlbmdpbmUvYnVpbGQvY29yZS9nYW1lLWluc3RhbmNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmNsYXNzIEdhbWVJbnN0YW5jZVBsdWdpbiB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmRlcGVuZGVuY2llcyA9IFtdO1xyXG4gICAgfVxyXG4gICAgc2V0dXAoZ2FtZUluc3RhbmNlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZ2FtZUluc3RhbmNlKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgc2V0dXAgZnVuY3Rpb24gd2FzIGFscmVhZHkgY2FsbGVkIGZvciB0aGlzIHBsdWdpbi5cIik7XHJcbiAgICAgICAgdGhpcy5nYW1lSW5zdGFuY2UgPSBnYW1lSW5zdGFuY2U7XHJcbiAgICAgICAgZm9yIChsZXQgaSBpbiB0aGlzLmRlcGVuZGVuY2llcykge1xyXG4gICAgICAgICAgICBsZXQgZCA9IHRoaXMuZGVwZW5kZW5jaWVzW2ldO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuZ2FtZUluc3RhbmNlLmdldFBsdWdpbihkKSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBIHBsdWdpbiB3YXMgaW5pdGlhbGl6ZWQgd2l0aG91dCB0aGUgcmVxdWlyZWQgZGVwZW5kZW5jaWVzLiAnJHtkLm5hbWV9JyBpcyBtYXJrZWQgYXMgYSBkZXBlbmRlbmN5IHRoYXQgaGFzIG5vdCBiZSBmdWxmaWxsZWQuIEVuc3VyZSB0aGF0IHBsdWdpbnMgYXJlIHJlZ2lzdGVyZWQgaW4gdGhlIGNvcnJlY3Qgb3JkZXIuYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pbml0aWFsaXplKCk7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5kZWZhdWx0ID0gR2FtZUluc3RhbmNlUGx1Z2luO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1nYW1lLWluc3RhbmNlLXBsdWdpbi5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5jb25zdCBjaHVua19tYW5hZ2VyXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vY2h1bmstbWFuYWdlclwiKSk7XHJcbmNvbnN0IGNvbnRyb2xsZXJfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vY29udHJvbGxhYmlsaXR5L2NvbnRyb2xsZXJcIikpO1xyXG5jb25zdCBmaXhlZF90aW1lcl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL2ZpeGVkLXRpbWVyXCIpKTtcclxuY29uc3QgZ2FtZV9vYmplY3RfZmFjdG9yeV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL2dhbWUtb2JqZWN0LWZhY3RvcnlcIikpO1xyXG5jb25zdCBkZWF0aF90eXBlXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL2VudGl0aWVzL2xpZmUvZGVhdGgtdHlwZVwiKSk7XHJcbmNsYXNzIEdhbWVJbnN0YW5jZSB7XHJcbiAgICBnZXQgZml4ZWRVcGRhdGVJblByb2dyZXNzKCkgeyByZXR1cm4gdGhpcy5fZml4ZWRVcGRhdGVJblByb2dyZXNzOyB9XHJcbiAgICBnZXQgaXNNYXN0ZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VQYXJhbWV0ZXJzPy5pc01hc3RlciA/PyB0cnVlO1xyXG4gICAgfVxyXG4gICAgY29uc3RydWN0b3IocGFyYW1zKSB7XHJcbiAgICAgICAgdGhpcy5lbmFibGVFdmVudFRyYWNpbmcgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9maXhlZFVwZGF0ZUluUHJvZ3Jlc3MgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmdhbWVNb2RlID0gbnVsbDtcclxuICAgICAgICB0aGlzLmdhbWVFbmRlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX2dhbWVPYmplY3RGYWN0b3J5ID0gbmV3IGdhbWVfb2JqZWN0X2ZhY3RvcnlfMS5kZWZhdWx0KHRoaXMpO1xyXG4gICAgICAgIHRoaXMuYWxsR2FtZU9iamVjdHNCeUlkID0ge307XHJcbiAgICAgICAgdGhpcy5yZW1vdGVHYW1lT2JqZWN0c0J5SWQgPSB7fTtcclxuICAgICAgICB0aGlzLmJlZm9yZUZpeGVkVXBkYXRlR2FtZU9iamVjdHMgPSB7fTtcclxuICAgICAgICB0aGlzLmZpeGVkVXBkYXRlR2FtZU9iamVjdHMgPSB7fTtcclxuICAgICAgICB0aGlzLmFmdGVyRml4ZWRVcGRhdGVHYW1lT2JqZWN0cyA9IHt9O1xyXG4gICAgICAgIHRoaXMudGVhbXMgPSB7fTtcclxuICAgICAgICB0aGlzLmNvbnRyb2xsZXJzID0ge307XHJcbiAgICAgICAgdGhpcy50b3RhbEFpUGxheWVycyA9IDA7XHJcbiAgICAgICAgdGhpcy50b3RhbEFpRW50aXRpZXMgPSAwO1xyXG4gICAgICAgIHRoaXMudG90YWxVc2VycyA9IDA7XHJcbiAgICAgICAgdGhpcy5sYXN0VXBkYXRlVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpIC8gMTAwMDtcclxuICAgICAgICB0aGlzLmNodW5rTWFuYWdlciA9IG5ldyBjaHVua19tYW5hZ2VyXzEuZGVmYXVsdCgpO1xyXG4gICAgICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xyXG4gICAgICAgIHRoaXMucGx1Z2lucyA9IFtdO1xyXG4gICAgICAgIHRoaXMubmV4dFJlbW90ZVRyaWdnZXJJZCA9IDE7XHJcbiAgICAgICAgdGhpcy5fcmVtb3RlVHJpZ2dlcnNCeUlkID0ge307XHJcbiAgICAgICAgdGhpcy5fcmVtb3RlVHJpZ2dlcnNCeU5hbWUgPSB7fTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlUGFyYW1ldGVycyA9IHBhcmFtcyB8fCB7fTtcclxuICAgICAgICB0aGlzLm9uKFwicmVnaXN0ZXJPYmplY3RcIiwgb2JqID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fZ2FtZU9iamVjdEZhY3RvcnkucmVnaXN0ZXIob2JqKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLm9uKFwiYWRkT2JqZWN0XCIsIG9iaiA9PiB7XHJcbiAgICAgICAgICAgIGlmIChvYmouYmVmb3JlRml4ZWRVcGRhdGUpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmJlZm9yZUZpeGVkVXBkYXRlR2FtZU9iamVjdHNbb2JqLmlkXSA9IG9iajtcclxuICAgICAgICAgICAgaWYgKG9iai5maXhlZFVwZGF0ZSlcclxuICAgICAgICAgICAgICAgIHRoaXMuZml4ZWRVcGRhdGVHYW1lT2JqZWN0c1tvYmouaWRdID0gb2JqO1xyXG4gICAgICAgICAgICBpZiAob2JqLmFmdGVyRml4ZWRVcGRhdGUpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmFmdGVyRml4ZWRVcGRhdGVHYW1lT2JqZWN0c1tvYmouaWRdID0gb2JqO1xyXG4gICAgICAgICAgICBpZiAob2JqIGluc3RhbmNlb2YgY29udHJvbGxlcl8xLmRlZmF1bHQpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRyb2xsZXJzW29iai5pZF0gPSBvYmo7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5vbihcInJlbW92ZU9iamVjdFwiLCBvYmogPT4ge1xyXG4gICAgICAgICAgICBpZiAob2JqLmJlZm9yZUZpeGVkVXBkYXRlKVxyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuYmVmb3JlRml4ZWRVcGRhdGVHYW1lT2JqZWN0c1tvYmouaWRdO1xyXG4gICAgICAgICAgICBpZiAob2JqLmZpeGVkVXBkYXRlKVxyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuZml4ZWRVcGRhdGVHYW1lT2JqZWN0c1tvYmouaWRdO1xyXG4gICAgICAgICAgICBpZiAob2JqLmFmdGVyRml4ZWRVcGRhdGUpXHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5hZnRlckZpeGVkVXBkYXRlR2FtZU9iamVjdHNbb2JqLmlkXTtcclxuICAgICAgICAgICAgaWYgKG9iaiBpbnN0YW5jZW9mIGNvbnRyb2xsZXJfMS5kZWZhdWx0KVxyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuY29udHJvbGxlcnNbb2JqLmlkXTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLm9uKFwiYmVmb3JlRml4ZWRVcGRhdGVcIiwgKGR0LCB0aW1lKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2ZpeGVkVXBkYXRlSW5Qcm9ncmVzcyA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMubGFzdFVwZGF0ZVRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAvIDEwMDA7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgaW4gdGhpcy5iZWZvcmVGaXhlZFVwZGF0ZUdhbWVPYmplY3RzKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgb2JqID0gdGhpcy5iZWZvcmVGaXhlZFVwZGF0ZUdhbWVPYmplY3RzW2ldO1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBvYmouYmVmb3JlRml4ZWRVcGRhdGUoZHQsIHRpbWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUsIG9iaik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLm9uKFwiZml4ZWRVcGRhdGVcIiwgKGR0LCB0aW1lKSA9PiB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgaW4gdGhpcy5maXhlZFVwZGF0ZUdhbWVPYmplY3RzKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgb2JqID0gdGhpcy5maXhlZFVwZGF0ZUdhbWVPYmplY3RzW2ldO1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBvYmouZml4ZWRVcGRhdGUoZHQsIHRpbWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUsIG9iaik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLm9uKFwiYWZ0ZXJGaXhlZFVwZGF0ZVwiLCAoZHQsIHRpbWUpID0+IHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSBpbiB0aGlzLmFmdGVyRml4ZWRVcGRhdGVHYW1lT2JqZWN0cykge1xyXG4gICAgICAgICAgICAgICAgbGV0IG9iaiA9IHRoaXMuYWZ0ZXJGaXhlZFVwZGF0ZUdhbWVPYmplY3RzW2ldO1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBvYmouYWZ0ZXJGaXhlZFVwZGF0ZShkdCwgdGltZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSwgb2JqKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9maXhlZFVwZGF0ZUluUHJvZ3Jlc3MgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5fZ2FtZU9iamVjdEZhY3RvcnkuZmx1c2hEZXN0cnVjdGlvblF1ZXVlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5vbihcInJlbW90ZVRyaWdnZXJcIiwgcmVxID0+IHtcclxuICAgICAgICAgICAgcmVxLmNvbVByb2ZpbGUuYWRkQWN0aW9uKG51bGwsIHJlcS50cmlnZ2VyLmlkLCByZXEuYXJncyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlclJlbW90ZVRyaWdnZXIoXCJzZXRSb2JvdFwiKTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyUmVtb3RlVHJpZ2dlcihcInRyYWNrT2JqZWN0XCIpO1xyXG4gICAgICAgIHRoaXMuX2ZpeGVkVGltZXIgPSB0aGlzLm1ha2UoZml4ZWRfdGltZXJfMS5kZWZhdWx0LCAoZnQpID0+IHtcclxuICAgICAgICAgICAgZnQudHJpZ2dlckdhbWVJbnN0YW5jZUV2ZW50cyA9IHRydWU7XHJcbiAgICAgICAgICAgIGZ0LnRhcmdldEZyYW1lUGVyaW9kID0gMSAvIChwYXJhbXM/LnRhcmdldEZwcyB8fCA2MCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBvbihldmVudCwgY2FsbGJhY2spIHtcclxuICAgICAgICBpZiAoIXRoaXMuX2V2ZW50c1tldmVudF0pXHJcbiAgICAgICAgICAgIHRoaXMuX2V2ZW50c1tldmVudF0gPSBbXTtcclxuICAgICAgICB0aGlzLl9ldmVudHNbZXZlbnRdLnB1c2goY2FsbGJhY2spO1xyXG4gICAgfVxyXG4gICAgb2ZmKGV2ZW50LCBjYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMuX2V2ZW50c1tldmVudF0gPSB0aGlzLl9ldmVudHNbZXZlbnRdLmZpbHRlcihmID0+IGYgIT0gY2FsbGJhY2spO1xyXG4gICAgICAgIHRoaXMudHJpZ2dlcihcInJlbmRlclVwZGF0ZVwiLCAyLCAyLCAyKTtcclxuICAgIH1cclxuICAgIHRyaWdnZXIoZXZlbnQsIC4uLmFyZ3MpIHtcclxuICAgICAgICBpZiAodGhpcy5lbmFibGVFdmVudFRyYWNpbmcpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYPCflIMgJHtldmVudH0oJHthcmdzfSkgPT4gJHt0aGlzLl9ldmVudHNbZXZlbnRdPy5sZW5ndGggPz8gMH1gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuX2V2ZW50c1tldmVudF0pXHJcbiAgICAgICAgICAgIGZvciAobGV0IGYgb2YgdGhpcy5fZXZlbnRzW2V2ZW50XSlcclxuICAgICAgICAgICAgICAgIGYuY2FsbCh0aGlzLCAuLi5hcmdzKTtcclxuICAgIH1cclxuICAgIHBsYXkoKSB7XHJcbiAgICAgICAgdGhpcy5fZ2FtZU9iamVjdEZhY3RvcnkuX3BsYXlpbmcgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuZ2FtZU1vZGU/LmluaXRpYWxpemUoKTtcclxuICAgICAgICB0aGlzLl9maXhlZFRpbWVyLnN0YXJ0KCk7XHJcbiAgICAgICAgdGhpcy50cmlnZ2VyKFwiZ2FtZVN0YXJ0XCIpO1xyXG4gICAgfVxyXG4gICAgZ2FtZU92ZXIoZXJyKSB7XHJcbiAgICAgICAgdGhpcy50cmlnZ2VyKFwiZ2FtZU92ZXJcIik7XHJcbiAgICAgICAgZm9yIChsZXQgb2JqIGluIHRoaXMuYWxsR2FtZU9iamVjdHNCeUlkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2dhbWVPYmplY3RGYWN0b3J5LmRlc3Ryb3kodGhpcy5hbGxHYW1lT2JqZWN0c0J5SWRbb2JqXSwgZGVhdGhfdHlwZV8xLmRlZmF1bHQuR2FtZU92ZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmdhbWVFbmRlZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5fZml4ZWRUaW1lci5wYXVzZSgpO1xyXG4gICAgICAgIHRoaXMuX2ZpeGVkVGltZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX2dhbWVPYmplY3RGYWN0b3J5Ll9wbGF5aW5nID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBpZElzVGFrZW4oaWQpIHtcclxuICAgICAgICByZXR1cm4gISF0aGlzLmFsbEdhbWVPYmplY3RzQnlJZFtpZF07XHJcbiAgICB9XHJcbiAgICBtYWtlKHQsIHNldHRlcnMpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZ2FtZU9iamVjdEZhY3RvcnkubWFrZSh0LCBzZXR0ZXJzKTtcclxuICAgIH1cclxuICAgIG1ha2VPbk1hc3Rlcih0LCBzZXR0ZXJzKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNNYXN0ZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dhbWVPYmplY3RGYWN0b3J5Lm1ha2UodCwgc2V0dGVycyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBkZXN0cm95T2JqZWN0T25NYXN0ZXIob2JqZWN0LCBkZWF0aFR5cGUpIHtcclxuICAgICAgICBpZiAodGhpcy5pc01hc3Rlcikge1xyXG4gICAgICAgICAgICB0aGlzLl9nYW1lT2JqZWN0RmFjdG9yeS5kZXN0cm95KG9iamVjdCwgZGVhdGhUeXBlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBkZXN0cm95T2JqZWN0KG9iamVjdCwgZGVhdGhUeXBlKSB7XHJcbiAgICAgICAgdGhpcy5fZ2FtZU9iamVjdEZhY3RvcnkuZGVzdHJveShvYmplY3QsIGRlYXRoVHlwZSk7XHJcbiAgICB9XHJcbiAgICB1c2VQbHVnaW4ocGx1Z2luKSB7XHJcbiAgICAgICAgdGhpcy5wbHVnaW5zLnB1c2gocGx1Z2luKTtcclxuICAgICAgICBwbHVnaW4uc2V0dXAodGhpcyk7XHJcbiAgICAgICAgcmV0dXJuIHBsdWdpbjtcclxuICAgIH1cclxuICAgIGdldFBsdWdpbihwbHVnaW5UeXBlKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSBpbiB0aGlzLnBsdWdpbnMpIHtcclxuICAgICAgICAgICAgbGV0IHAgPSB0aGlzLnBsdWdpbnNbaV07XHJcbiAgICAgICAgICAgIGlmIChwIGluc3RhbmNlb2YgcGx1Z2luVHlwZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgO1xyXG4gICAgICAgIDtcclxuICAgICAgICA7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBdHRlbXB0ZWQgdG8gcmVhZCBmcm9tIHRoZSAnJHtwbHVnaW5UeXBlLm5hbWV9JyBwbHVnaW4sIHdoaWNoIGhhc24ndCBiZWVuIHNldHVwLiBZb3UgbWF5IGhhdmUgZm9yZ290IHRvIGluc3RhbGwgYSBkZXBlbmRlbmN5LmApO1xyXG4gICAgICAgIHRocm93IFwiXCI7XHJcbiAgICB9XHJcbiAgICByZWdpc3RlclJlbW90ZVRyaWdnZXIobmFtZSwgLi4uYXJnVHlwZXMpIHtcclxuICAgICAgICA7XHJcbiAgICAgICAgO1xyXG4gICAgICAgIDtcclxuICAgICAgICBpZiAodGhpcy5fcmVtb3RlVHJpZ2dlcnNCeU5hbWVbbmFtZV0pXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQSByZW1vdGUgdHJpZ2dlciB3aXRoIHRoZSBuYW1lICR7bmFtZX0gaGFzIGFscmVhZHkgYmVlbiBkZWZpbmVkLmApO1xyXG4gICAgICAgIHRoaXMuX3JlbW90ZVRyaWdnZXJzQnlJZFt0aGlzLm5leHRSZW1vdGVUcmlnZ2VySWRdID0gdGhpcy5fcmVtb3RlVHJpZ2dlcnNCeU5hbWVbbmFtZV0gPSB7XHJcbiAgICAgICAgICAgIGhhbmRsZXJzOiBudWxsLFxyXG4gICAgICAgICAgICBhcmdUeXBlczogYXJnVHlwZXMsXHJcbiAgICAgICAgICAgIGlkOiB0aGlzLm5leHRSZW1vdGVUcmlnZ2VySWQrK1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICByZWdpc3RlclJlbW90ZVRyaWdnZXJIYW5kbGVyKG5hbWUsIGhhbmRsZXIpIHtcclxuICAgICAgICA7XHJcbiAgICAgICAgO1xyXG4gICAgICAgIDtcclxuICAgICAgICBpZiAoIXRoaXMuX3JlbW90ZVRyaWdnZXJzQnlOYW1lW25hbWVdKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEEgcmVtb3RlIHRyaWdnZXIgd2l0aCB0aGUgbmFtZSAke25hbWV9IGhhcyBub3QgYmVlbiBkZWZpbmVkLmApO1xyXG4gICAgICAgIGlmICghdGhpcy5fcmVtb3RlVHJpZ2dlcnNCeU5hbWVbbmFtZV0uaGFuZGxlcnMpXHJcbiAgICAgICAgICAgIHRoaXMuX3JlbW90ZVRyaWdnZXJzQnlOYW1lW25hbWVdLmhhbmRsZXJzID0gW107XHJcbiAgICAgICAgdGhpcy5fcmVtb3RlVHJpZ2dlcnNCeU5hbWVbbmFtZV0uaGFuZGxlcnMucHVzaChoYW5kbGVyKTtcclxuICAgIH1cclxuICAgIF9pbnZva2VSZW1vdGVUcmlnZ2VyKG5hbWUsIGNvbVByb2ZpbGUsIC4uLmFyZ3MpIHtcclxuICAgICAgICA7XHJcbiAgICAgICAgO1xyXG4gICAgICAgIDtcclxuICAgICAgICBpZiAoIXRoaXMuX3JlbW90ZVRyaWdnZXJzQnlOYW1lW25hbWVdKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEEgcmVtb3RlIHRyaWdnZXIgd2l0aCB0aGUgbmFtZSAke25hbWV9IGhhcyBub3QgYmVlbiBkZWZpbmVkLmApO1xyXG4gICAgICAgIGxldCB0cmlnZ2VyUmVxdWVzdCA9IHtcclxuICAgICAgICAgICAgdHJpZ2dlcjogdGhpcy5fcmVtb3RlVHJpZ2dlcnNCeU5hbWVbbmFtZV0sXHJcbiAgICAgICAgICAgIGFyZ3M6IGFyZ3MsXHJcbiAgICAgICAgICAgIGNvbVByb2ZpbGU6IGNvbVByb2ZpbGVcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMudHJpZ2dlcihcInJlbW90ZVRyaWdnZXJcIiwgdHJpZ2dlclJlcXVlc3QpO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuZGVmYXVsdCA9IEdhbWVJbnN0YW5jZTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z2FtZS1pbnN0YW5jZS5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJjb25zdHJ1Y3RvciIsInRoaXMiLCJkZXBlbmRlbmNpZXMiLCJzZXR1cCIsImdhbWVJbnN0YW5jZSIsIkVycm9yIiwiaSIsImQiLCJnZXRQbHVnaW4iLCJuYW1lIiwiaW5pdGlhbGl6ZSIsIl9faW1wb3J0RGVmYXVsdCIsIm1vZCIsIl9fZXNNb2R1bGUiLCJjaHVua19tYW5hZ2VyXzEiLCJjb250cm9sbGVyXzEiLCJmaXhlZF90aW1lcl8xIiwiZ2FtZV9vYmplY3RfZmFjdG9yeV8xIiwiZGVhdGhfdHlwZV8xIiwiZml4ZWRVcGRhdGVJblByb2dyZXNzIiwiX2ZpeGVkVXBkYXRlSW5Qcm9ncmVzcyIsImlzTWFzdGVyIiwiaW5zdGFuY2VQYXJhbWV0ZXJzIiwicGFyYW1zIiwiZW5hYmxlRXZlbnRUcmFjaW5nIiwiZ2FtZU1vZGUiLCJnYW1lRW5kZWQiLCJfZ2FtZU9iamVjdEZhY3RvcnkiLCJkZWZhdWx0IiwiYWxsR2FtZU9iamVjdHNCeUlkIiwicmVtb3RlR2FtZU9iamVjdHNCeUlkIiwiYmVmb3JlRml4ZWRVcGRhdGVHYW1lT2JqZWN0cyIsImZpeGVkVXBkYXRlR2FtZU9iamVjdHMiLCJhZnRlckZpeGVkVXBkYXRlR2FtZU9iamVjdHMiLCJ0ZWFtcyIsImNvbnRyb2xsZXJzIiwidG90YWxBaVBsYXllcnMiLCJ0b3RhbEFpRW50aXRpZXMiLCJ0b3RhbFVzZXJzIiwibGFzdFVwZGF0ZVRpbWUiLCJwZXJmb3JtYW5jZSIsIm5vdyIsImNodW5rTWFuYWdlciIsIl9ldmVudHMiLCJwbHVnaW5zIiwibmV4dFJlbW90ZVRyaWdnZXJJZCIsIl9yZW1vdGVUcmlnZ2Vyc0J5SWQiLCJfcmVtb3RlVHJpZ2dlcnNCeU5hbWUiLCJvbiIsIm9iaiIsInJlZ2lzdGVyIiwiYmVmb3JlRml4ZWRVcGRhdGUiLCJpZCIsImZpeGVkVXBkYXRlIiwiYWZ0ZXJGaXhlZFVwZGF0ZSIsImR0IiwidGltZSIsImUiLCJjb25zb2xlIiwiZXJyb3IiLCJmbHVzaERlc3RydWN0aW9uUXVldWUiLCJyZXEiLCJjb21Qcm9maWxlIiwiYWRkQWN0aW9uIiwidHJpZ2dlciIsImFyZ3MiLCJyZWdpc3RlclJlbW90ZVRyaWdnZXIiLCJfZml4ZWRUaW1lciIsIm1ha2UiLCJmdCIsInRyaWdnZXJHYW1lSW5zdGFuY2VFdmVudHMiLCJ0YXJnZXRGcmFtZVBlcmlvZCIsInRhcmdldEZwcyIsImV2ZW50IiwiY2FsbGJhY2siLCJwdXNoIiwib2ZmIiwiZmlsdGVyIiwiZiIsImxvZyIsImxlbmd0aCIsImNhbGwiLCJwbGF5IiwiX3BsYXlpbmciLCJzdGFydCIsImdhbWVPdmVyIiwiZXJyIiwiZGVzdHJveSIsIkdhbWVPdmVyIiwicGF1c2UiLCJpZElzVGFrZW4iLCJ0Iiwic2V0dGVycyIsIm1ha2VPbk1hc3RlciIsImRlc3Ryb3lPYmplY3RPbk1hc3RlciIsIm9iamVjdCIsImRlYXRoVHlwZSIsImRlc3Ryb3lPYmplY3QiLCJ1c2VQbHVnaW4iLCJwbHVnaW4iLCJwbHVnaW5UeXBlIiwicCIsImFyZ1R5cGVzIiwiaGFuZGxlcnMiLCJyZWdpc3RlclJlbW90ZVRyaWdnZXJIYW5kbGVyIiwiaGFuZGxlciIsIl9pbnZva2VSZW1vdGVUcmlnZ2VyIiwidHJpZ2dlclJlcXVlc3QiXSwic291cmNlUm9vdCI6IiJ9