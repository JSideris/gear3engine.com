"use strict";(self.webpackChunkgear3engine_website=self.webpackChunkgear3engine_website||[]).push([[9115],{3208:function(t,e,i){var s=this&&this.__decorate||function(t,e,i,s){var r,a=arguments.length,o=a<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(o=(a<3?r(o):a>3?r(e,i,o):r(e,i))||o);return a>3&&o&&Object.defineProperty(e,i,o),o},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=i(5412),h=i(7203),n=i(8521),l=a(i(9493));let d=class extends o.GameObject{constructor(){super(),this.chunks={},this.canvasPlugin=this.gi.getPlugin(h.Canvas2dPlugin),this.isInitialized=!1,this.leftSoftCursor=0,this.rightSoftCursor=0,this.topSoftCursor=0,this.bottomSoftCursor=0,this.farLeftCursor=0,this.farRightCursor=0,this.farTopCursor=0,this.farBottomCursor=0,this.optimization=this.optimization??"culling",this.chunkSize=this.chunkSize??1024,this.parallaxScale=this.parallaxScale??1,this.canvasPlugin.backdrops[this.id]=this,this.hybridRange=this.hybridRange||8,this.displayObject=new l.default.Container}loadChunk(t,e){if(this.chunks[t]||(this.chunks[t]={}),this.chunks[t][e])this.chunks[t][e].displayObject.visible=!0;else{this.chunks[t][e]={displayObject:null,props:[]};let i=this.renderChunk(t,e);i?(this.chunks[t][e].displayObject=i,i.position.set(t*this.chunkSize,e*this.chunkSize),this.displayObject.addChild(i)):delete this.chunks[t][e]}}hideChunk(t,e){let i=this.chunks[t];if(!i)return;let s=i[e];if(s)if(s.displayObject){s.displayObject.visible=!1;for(let t of s.props);}else console.log("Loaded chunk with no DP?",s)}deleteChunk(t,e){let i=this.chunks[t];if(!i)return;let s=i[e];if(s){this.displayObject.removeChild(s.displayObject);for(let t of s.props)this.gi.destroyObject(t,o.DeathType.Unloaded);delete this.chunks[t][e]}}destroy(t){super.destroy(t),delete this.canvasPlugin.backdrops[this.id]}updateCursors(t,e,i,s){if(this.isInitialized||(this.leftSoftCursor=i,this.rightSoftCursor=s,this.topSoftCursor=t,this.bottomSoftCursor=t-1,this.isInitialized=!0),"none"!=this.optimization){for(let t=this.leftSoftCursor;t<i;t++)for(let e=this.topSoftCursor;e<=this.bottomSoftCursor;e++)this.onOutOfRange(t,e);for(let t=this.rightSoftCursor;t>s;t--)for(let e=this.topSoftCursor;e<=this.bottomSoftCursor;e++)this.onOutOfRange(t,e);for(let e=this.topSoftCursor;e<t;e++)for(let t=this.leftSoftCursor;t<=this.rightSoftCursor;t++)this.onOutOfRange(t,e);for(let t=this.bottomSoftCursor;t>e;t--)for(let e=this.leftSoftCursor;e<=this.rightSoftCursor;e++)this.onOutOfRange(e,t)}if("hybrid"==this.optimization){for(let t=this.farLeftCursor;t<i-this.hybridRange;t++)for(let e=this.farTopCursor;e<=this.farBottomCursor;e++)this.deleteChunk(t,e);for(let t=this.farRightCursor;t>s+this.hybridRange;t--)for(let e=this.farTopCursor;e<=this.farBottomCursor;e++)this.deleteChunk(t,e);for(let e=this.farTopCursor;e<t-this.hybridRange;e++)for(let t=this.farLeftCursor;t<=this.farRightCursor;t++)this.deleteChunk(t,e);for(let t=this.farBottomCursor;t>e+this.hybridRange;t--)for(let e=this.farLeftCursor;e<=this.farRightCursor;e++)this.deleteChunk(e,t)}for(let s=this.leftSoftCursor;s>i;s--)for(let i=t;i<=e;i++)this.loadChunk(s-1,i);for(let i=this.rightSoftCursor;i<s;i++)for(let s=t;s<=e;s++)this.loadChunk(i+1,s);for(let e=this.topSoftCursor;e>t;e--)for(let t=i;t<=s;t++)this.loadChunk(t,e-1);for(let t=this.bottomSoftCursor;t<e;t++)for(let e=i;e<=s;e++)this.loadChunk(e,t+1);this.topSoftCursor=t,this.bottomSoftCursor=e,this.leftSoftCursor=i,this.rightSoftCursor=s,this.farLeftCursor=i-this.hybridRange,this.farRightCursor=s+this.hybridRange,this.farTopCursor=t-this.hybridRange,this.farBottomCursor=e+this.hybridRange}hideAll(){if(this.isInitialized){this.isInitialized=!1;for(let t=this.leftSoftCursor;t<=this.rightSoftCursor;t++)for(let e=this.topSoftCursor;e<=this.bottomSoftCursor;e++)this.onOutOfRange(t,e)}}onOutOfRange(t,e){switch(this.optimization){case"culling":case"hybrid":this.hideChunk(t,e);break;case"unloading":this.deleteChunk(t,e)}}addProp(t,e,i){this.chunks[t][e].props.push(i)}};d=s([n.drawable2d,r("design:paramtypes",[])],d),e.default=d},8616:function(t,e,i){var s=this&&this.__decorate||function(t,e,i,s){var r,a=arguments.length,o=a<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(o=(a<3?r(o):a>3?r(e,i,o):r(e,i))||o);return a>3&&o&&Object.defineProperty(e,i,o),o},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});const a=i(5412),o=i(8521);let h=class extends a.GameObject{constructor(){super(),this.#t=0,this.#e=0,this.shakeVectorM=new a.Vector3,this.debugScale=1,this.lastScale=1,this.lastPointerScreenPosition=new a.Vector3,this.viewWidthM=this.viewWidthM??80,this.viewHeightM=this.viewHeightM??45,this.disableDrawUpdate=!0,this.resize()}#t;#e;shake(t){this.#e+=t}resize(){this.widthPx=window.innerWidth,this.heightPx=window.innerHeight}drawUpdate(t,e,i){(this.#e>0||this.#t>0||this.shakeVectorM.x||this.shakeVectorM.y)&&(this.#t+=.2*(this.#e-this.#t),this.#e*=.9,this.#t<.1&&(this.#t=0),this.#e<.1&&(this.#e=0),this.shakeVectorM.x+=(Math.random()-.5)*this.#t,this.shakeVectorM.y+=(Math.random()-.5)*this.#t,this.shakeVectorM.x*=.9,this.shakeVectorM.y*=.9,this.#t||this.#e||(Math.abs(this.shakeVectorM.x)<.1&&(this.shakeVectorM.x=0),Math.abs(this.shakeVectorM.y)<.1&&(this.shakeVectorM.y=0))),this.targetObject?(this.targetObject.drawPosition.subtract(this.drawPosition),this.drawPosition.setToVector(this.targetObject.drawPosition.add(this.shakeVectorM)),this.drawVelocity.setToVector(this.targetObject.drawVelocity)):this.drawPosition.setToVector(this.drawPosition.add(this.shakeVectorM));let s=a.Util.mToP(this.viewHeightM),r=a.Util.mToP(this.viewWidthM),o=1;o=this.viewHeightM/this.viewWidthM>this.heightPx/this.widthPx?this.heightPx/s:this.widthPx/r,this.lastScale=o*this.debugScale,this.pixiWorld.pixiView.scale.set(this.lastScale,this.lastScale),this.pixiWorld.pixiView.x=-this.drawPosition.x*this.lastScale+this.widthPx/2,this.pixiWorld.pixiView.y=-this.drawPosition.y*this.lastScale+this.heightPx/2;for(let t in this.canvas2dPlugin.backdrops){let e=this.canvas2dPlugin.backdrops[t],i=Math.floor((this.drawPosition.x*e.parallaxScale-r/2)/e.chunkSize)-1,o=Math.floor((this.drawPosition.x*e.parallaxScale+r/2)/e.chunkSize)+1,h=Math.floor((this.drawPosition.y*e.parallaxScale-s/2)/e.chunkSize)-1,n=Math.floor((this.drawPosition.y*e.parallaxScale+s/2)/e.chunkSize)+1;(i>e.rightSoftCursor||o<e.leftSoftCursor||h>e.bottomSoftCursor||n<e.topSoftCursor)&&e.hideAll(),e.updateCursors(h,n,i,o),e.setDrawPosition(new a.Vector3(this.drawPosition.x*(1-e.parallaxScale),this.drawPosition.y*(1-e.parallaxScale)))}}};h=s([o.drawable2d,r("design:paramtypes",[])],h),e.default=h},2716:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(565),a=i(5412),o=s(i(8616)),h=s(i(8334));class n extends a.GameInstancePlugin{constructor(t){super(),this.dependencies=[r.GameClientPlugin],this.lastKnownPhysicsUpdate=0,this.backdrops={},this.maxDt=.1,this.config=t}initialize(){this.gameClientPlugin=this.gameInstance.getPlugin(r.GameClientPlugin),this.gameInstance.on("gameStart",(()=>{this.pixiWorld=this.gameInstance.make(h.default,(t=>{t.target=this.config?.target,t.disableScroll=this.config?.disableScroll,t.backgroundColor=this.config?.backgroundColor??t.backgroundColor,t.useBlinders=this.config?.enableBlinders??!0})),this.camera=this.gameInstance.make(o.default),this.gameClientPlugin.params.useRealCursor,this.resize()})),this.gameInstance.on("gameOver",(()=>{this.gameInstance.destroyObject(this.camera,a.DeathType.GameOver),this.camera=null,this.gameInstance.destroyObject(this.pixiWorld,a.DeathType.GameOver),this.pixiWorld=null})),this.gameInstance.on("renderUpdate",((t,e,i)=>{t>this.maxDt&&(t=this.maxDt),this.pixiWorld.drawUpdate(t,e,i),this.camera&&this.camera.drawUpdate(t,e,i)})),this.gameInstance.on("resize",(()=>{this.resize()})),this.gameInstance.on("physicsUpdate",((t,e)=>{this.lastKnownPhysicsUpdate=performance.now()/1e3})),this.gameInstance.registerRemoteTriggerHandler("trackObject",(t=>{if(!this.camera)throw new Error("The server attempted to track an object, but the camera does not exist.");{let e=this.gameInstance.remoteGameObjectsById[t.data[0]?.value];if(!e)throw new Error(`The server attempted to track an object, but the objct could not be found client-side. Remote ID: ${t.data.id}.`);if(e.is("drawable-2d"))this.camera.targetObject=e;else{let t=a.GameObject.getExtensionByLabel(e,"drawable-2d");if(!t)throw new Error(`Unable to track object ${e.id} because it is not drawable and doesn't have a drawable extension.`);this.camera.targetObject=t}}}))}resize(){this.pixiWorld&&this.pixiWorld.resize(),this.camera&&this.camera.resize()}destroy(){}}e.default=n},6408:function(t,e,i){var s=this&&this.__decorate||function(t,e,i,s){var r,a=arguments.length,o=a<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(o=(a<3?r(o):a>3?r(e,i,o):r(e,i))||o);return a>3&&o&&Object.defineProperty(e,i,o),o},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Cursor2dPainter=void 0;const o=i(5412),h=i(8521),n=a(i(9493));class l extends o.GameObject{}e.default=l;let d=class extends o.GameObject{constructor(){super(),this.target.painter=this}draw(){let t=new n.default.Graphics;t.beginFill(0),t.drawRect(-11,-2,22,4),t.drawRect(-2,-11,4,22),t.beginFill(16777215),t.drawRect(-10,-1,20,2),t.drawRect(-1,-10,2,20),this.displayObject=t}drawUpdate(t,e,i){}};d=s([h.drawable2d,(0,o.extension)(l),r("design:paramtypes",[])],d),e.Cursor2dPainter=d}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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USxNQUN4QkUsRUFBZ0IsRUFBUSxNQUN4QkMsRUFBZ0JSLEVBQWdCLEVBQVEsT0FDOUMsTUFBTTBKLFVBQWlCckosRUFBY0ssWUFFckNQLEVBQUEsUUFBa0J1SixFQUNsQixJQUFJRCxFQUFrQixjQUE4QnBKLEVBQWNLLFdBQzlEQyxjQUNJQyxRQUNBaEMsS0FBS0UsT0FBTzZLLFFBQVUvSyxJQUMxQixDQUNBZ0wsT0FDSSxJQUdJQyxFQUFPLElBQUlySixFQUFjMEIsUUFBUTRILFNBQ3JDRCxFQUFLRSxVQUFVLEdBQ2ZGLEVBQUtHLFVBQVMsSUFBWSxFQUFZQyxHQUFXQyxHQUNqREwsRUFBS0csVUFBUyxHQUFZLEdBQVlFLEVBQVdELElBQ2pESixFQUFLRSxVQUFVLFVBQ2ZGLEVBQUtHLFVBQVMsSUFBUSxFQVJkLEdBQ0EsR0FRUkgsRUFBS0csVUFBUyxHQUFRLEdBUmQsRUFEQSxJQVVScEwsS0FBS3FELGNBQWdCNEgsQ0FDekIsQ0FDQW5FLFdBQVdDLEVBQUlDLEVBQU1DLEdBQ3JCLEdBRUo0RCxFQUFrQjlLLEVBQVcsQ0FDekI0QixFQUFjaUUsWUFDZCxFQUFJbkUsRUFBYzhKLFdBQVdULEdBQzdCOUosRUFBVyxvQkFBcUIsS0FDakM2SixHQUNIdEosRUFBUXNKLGdCQUFrQkEsQyIsInNvdXJjZXMiOlsid2VicGFjazovL2dlYXIzZW5naW5lLXdlYnNpdGUvLi4vLi4vR0FNRVMtU0lNVUxBVE9SUy1GVU4vZ2VhcjNlbmdpbmUvcGx1Z2lucy9nM2UtY2FudmFzLTJkL2J1aWxkL2JhY2tkcm9wLTJkLmpzIiwid2VicGFjazovL2dlYXIzZW5naW5lLXdlYnNpdGUvLi4vLi4vR0FNRVMtU0lNVUxBVE9SUy1GVU4vZ2VhcjNlbmdpbmUvcGx1Z2lucy9nM2UtY2FudmFzLTJkL2J1aWxkL2NhbWVyYS0yZC5qcyIsIndlYnBhY2s6Ly9nZWFyM2VuZ2luZS13ZWJzaXRlLy4uLy4uL0dBTUVTLVNJTVVMQVRPUlMtRlVOL2dlYXIzZW5naW5lL3BsdWdpbnMvZzNlLWNhbnZhcy0yZC9idWlsZC9jYW52YXMtMmQtcGx1Z2luLmpzIiwid2VicGFjazovL2dlYXIzZW5naW5lLXdlYnNpdGUvLi4vLi4vR0FNRVMtU0lNVUxBVE9SUy1GVU4vZ2VhcjNlbmdpbmUvcGx1Z2lucy9nM2UtY2FudmFzLTJkL2J1aWxkL2N1cnNvci0yZC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufTtcclxudmFyIF9fbWV0YWRhdGEgPSAodGhpcyAmJiB0aGlzLl9fbWV0YWRhdGEpIHx8IGZ1bmN0aW9uIChrLCB2KSB7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEoaywgdik7XHJcbn07XHJcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuY29uc3QgZ2VhcjNlbmdpbmVfMSA9IHJlcXVpcmUoXCJnZWFyM2VuZ2luZVwiKTtcclxuY29uc3QgXzEgPSByZXF1aXJlKFwiLlwiKTtcclxuY29uc3QgZHJhd2FibGVfMmRfMSA9IHJlcXVpcmUoXCIuL2RyYXdhYmxlLTJkXCIpO1xyXG5jb25zdCBsaWJzX2dmeF8yZF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL2xpYnMuZ2Z4LjJkXCIpKTtcclxubGV0IEJhY2tkcm9wMmQgPSBjbGFzcyBCYWNrZHJvcDJkIGV4dGVuZHMgZ2VhcjNlbmdpbmVfMS5HYW1lT2JqZWN0IHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5jaHVua3MgPSB7fTtcclxuICAgICAgICB0aGlzLmNhbnZhc1BsdWdpbiA9IHRoaXMuZ2kuZ2V0UGx1Z2luKF8xLkNhbnZhczJkUGx1Z2luKTtcclxuICAgICAgICB0aGlzLmlzSW5pdGlhbGl6ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmxlZnRTb2Z0Q3Vyc29yID0gMDtcclxuICAgICAgICB0aGlzLnJpZ2h0U29mdEN1cnNvciA9IDA7XHJcbiAgICAgICAgdGhpcy50b3BTb2Z0Q3Vyc29yID0gMDtcclxuICAgICAgICB0aGlzLmJvdHRvbVNvZnRDdXJzb3IgPSAwO1xyXG4gICAgICAgIHRoaXMuZmFyTGVmdEN1cnNvciA9IDA7XHJcbiAgICAgICAgdGhpcy5mYXJSaWdodEN1cnNvciA9IDA7XHJcbiAgICAgICAgdGhpcy5mYXJUb3BDdXJzb3IgPSAwO1xyXG4gICAgICAgIHRoaXMuZmFyQm90dG9tQ3Vyc29yID0gMDtcclxuICAgICAgICB0aGlzLm9wdGltaXphdGlvbiA9IHRoaXMub3B0aW1pemF0aW9uID8/IFwiY3VsbGluZ1wiO1xyXG4gICAgICAgIHRoaXMuY2h1bmtTaXplID0gdGhpcy5jaHVua1NpemUgPz8gMTAyNDtcclxuICAgICAgICB0aGlzLnBhcmFsbGF4U2NhbGUgPSB0aGlzLnBhcmFsbGF4U2NhbGUgPz8gMTtcclxuICAgICAgICB0aGlzLmNhbnZhc1BsdWdpbi5iYWNrZHJvcHNbdGhpcy5pZF0gPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuaHlicmlkUmFuZ2UgPSB0aGlzLmh5YnJpZFJhbmdlIHx8IDg7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5T2JqZWN0ID0gbmV3IGxpYnNfZ2Z4XzJkXzEuZGVmYXVsdC5Db250YWluZXIoKTtcclxuICAgIH1cclxuICAgIGxvYWRDaHVuayh4LCB5KSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmNodW5rc1t4XSkge1xyXG4gICAgICAgICAgICB0aGlzLmNodW5rc1t4XSA9IHt9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRoaXMuY2h1bmtzW3hdW3ldKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2h1bmtzW3hdW3ldID0ge1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheU9iamVjdDogbnVsbCxcclxuICAgICAgICAgICAgICAgIHByb3BzOiBbXVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBsZXQgbmV3Q2h1bmsgPSB0aGlzLnJlbmRlckNodW5rKHgsIHkpO1xyXG4gICAgICAgICAgICBpZiAobmV3Q2h1bmspIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2h1bmtzW3hdW3ldLmRpc3BsYXlPYmplY3QgPSBuZXdDaHVuaztcclxuICAgICAgICAgICAgICAgIG5ld0NodW5rLnBvc2l0aW9uLnNldCh4ICogdGhpcy5jaHVua1NpemUsIHkgKiB0aGlzLmNodW5rU2l6ZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlPYmplY3QuYWRkQ2hpbGQobmV3Q2h1bmspO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmNodW5rc1t4XVt5XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2h1bmtzW3hdW3ldLmRpc3BsYXlPYmplY3QudmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaGlkZUNodW5rKHgsIHkpIHtcclxuICAgICAgICBsZXQgWCA9IHRoaXMuY2h1bmtzW3hdO1xyXG4gICAgICAgIGlmICghWClcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGxldCBZID0gWFt5XTtcclxuICAgICAgICBpZiAoWSkge1xyXG4gICAgICAgICAgICBpZiAoWS5kaXNwbGF5T2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBZLmRpc3BsYXlPYmplY3QudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgcCBvZiBZLnByb3BzKSB7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkxvYWRlZCBjaHVuayB3aXRoIG5vIERQP1wiLCBZKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGRlbGV0ZUNodW5rKHgsIHkpIHtcclxuICAgICAgICBsZXQgcm93ID0gdGhpcy5jaHVua3NbeF07XHJcbiAgICAgICAgaWYgKCFyb3cpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBsZXQgY2h1bmsgPSByb3dbeV07XHJcbiAgICAgICAgaWYgKCFjaHVuaylcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuZGlzcGxheU9iamVjdC5yZW1vdmVDaGlsZChjaHVuay5kaXNwbGF5T2JqZWN0KTtcclxuICAgICAgICBmb3IgKGxldCBwIG9mIGNodW5rLnByb3BzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2kuZGVzdHJveU9iamVjdChwLCBnZWFyM2VuZ2luZV8xLkRlYXRoVHlwZS5VbmxvYWRlZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRlbGV0ZSB0aGlzLmNodW5rc1t4XVt5XTtcclxuICAgIH1cclxuICAgIGRlc3Ryb3koZGVhdGhUeXBlKSB7XHJcbiAgICAgICAgc3VwZXIuZGVzdHJveShkZWF0aFR5cGUpO1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLmNhbnZhc1BsdWdpbi5iYWNrZHJvcHNbdGhpcy5pZF07XHJcbiAgICB9XHJcbiAgICB1cGRhdGVDdXJzb3JzKG5ld1RvcCwgbmV3Qm90dG9tLCBuZXdMZWZ0LCBuZXdSaWdodCkge1xyXG4gICAgICAgIGlmICghdGhpcy5pc0luaXRpYWxpemVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGVmdFNvZnRDdXJzb3IgPSBuZXdMZWZ0O1xyXG4gICAgICAgICAgICB0aGlzLnJpZ2h0U29mdEN1cnNvciA9IG5ld1JpZ2h0O1xyXG4gICAgICAgICAgICB0aGlzLnRvcFNvZnRDdXJzb3IgPSBuZXdUb3A7XHJcbiAgICAgICAgICAgIHRoaXMuYm90dG9tU29mdEN1cnNvciA9IG5ld1RvcCAtIDE7XHJcbiAgICAgICAgICAgIHRoaXMuaXNJbml0aWFsaXplZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLm9wdGltaXphdGlvbiAhPSBcIm5vbmVcIikge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5sZWZ0U29mdEN1cnNvcjsgaSA8IG5ld0xlZnQ7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IHRoaXMudG9wU29mdEN1cnNvcjsgaiA8PSB0aGlzLmJvdHRvbVNvZnRDdXJzb3I7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25PdXRPZlJhbmdlKGksIGopO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSB0aGlzLnJpZ2h0U29mdEN1cnNvcjsgaSA+IG5ld1JpZ2h0OyBpLS0pIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSB0aGlzLnRvcFNvZnRDdXJzb3I7IGogPD0gdGhpcy5ib3R0b21Tb2Z0Q3Vyc29yOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uT3V0T2ZSYW5nZShpLCBqKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gdGhpcy50b3BTb2Z0Q3Vyc29yOyBpIDwgbmV3VG9wOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSB0aGlzLmxlZnRTb2Z0Q3Vyc29yOyBqIDw9IHRoaXMucmlnaHRTb2Z0Q3Vyc29yOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uT3V0T2ZSYW5nZShqLCBpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5ib3R0b21Tb2Z0Q3Vyc29yOyBpID4gbmV3Qm90dG9tOyBpLS0pIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSB0aGlzLmxlZnRTb2Z0Q3Vyc29yOyBqIDw9IHRoaXMucmlnaHRTb2Z0Q3Vyc29yOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uT3V0T2ZSYW5nZShqLCBpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5vcHRpbWl6YXRpb24gPT0gXCJoeWJyaWRcIikge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5mYXJMZWZ0Q3Vyc29yOyBpIDwgbmV3TGVmdCAtIHRoaXMuaHlicmlkUmFuZ2U7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IHRoaXMuZmFyVG9wQ3Vyc29yOyBqIDw9IHRoaXMuZmFyQm90dG9tQ3Vyc29yOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZUNodW5rKGksIGopO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSB0aGlzLmZhclJpZ2h0Q3Vyc29yOyBpID4gbmV3UmlnaHQgKyB0aGlzLmh5YnJpZFJhbmdlOyBpLS0pIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSB0aGlzLmZhclRvcEN1cnNvcjsgaiA8PSB0aGlzLmZhckJvdHRvbUN1cnNvcjsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVDaHVuayhpLCBqKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5mYXJUb3BDdXJzb3I7IGkgPCBuZXdUb3AgLSB0aGlzLmh5YnJpZFJhbmdlOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSB0aGlzLmZhckxlZnRDdXJzb3I7IGogPD0gdGhpcy5mYXJSaWdodEN1cnNvcjsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVDaHVuayhqLCBpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5mYXJCb3R0b21DdXJzb3I7IGkgPiBuZXdCb3R0b20gKyB0aGlzLmh5YnJpZFJhbmdlOyBpLS0pIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSB0aGlzLmZhckxlZnRDdXJzb3I7IGogPD0gdGhpcy5mYXJSaWdodEN1cnNvcjsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVDaHVuayhqLCBpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5sZWZ0U29mdEN1cnNvcjsgaSA+IG5ld0xlZnQ7IGktLSkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gbmV3VG9wOyBqIDw9IG5ld0JvdHRvbTsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvYWRDaHVuayhpIC0gMSwgaik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMucmlnaHRTb2Z0Q3Vyc29yOyBpIDwgbmV3UmlnaHQ7IGkrKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gbmV3VG9wOyBqIDw9IG5ld0JvdHRvbTsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvYWRDaHVuayhpICsgMSwgaik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMudG9wU29mdEN1cnNvcjsgaSA+IG5ld1RvcDsgaS0tKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSBuZXdMZWZ0OyBqIDw9IG5ld1JpZ2h0OyBqKyspIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9hZENodW5rKGosIGkgLSAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5ib3R0b21Tb2Z0Q3Vyc29yOyBpIDwgbmV3Qm90dG9tOyBpKyspIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IG5ld0xlZnQ7IGogPD0gbmV3UmlnaHQ7IGorKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkQ2h1bmsoaiwgaSArIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudG9wU29mdEN1cnNvciA9IG5ld1RvcDtcclxuICAgICAgICB0aGlzLmJvdHRvbVNvZnRDdXJzb3IgPSBuZXdCb3R0b207XHJcbiAgICAgICAgdGhpcy5sZWZ0U29mdEN1cnNvciA9IG5ld0xlZnQ7XHJcbiAgICAgICAgdGhpcy5yaWdodFNvZnRDdXJzb3IgPSBuZXdSaWdodDtcclxuICAgICAgICB0aGlzLmZhckxlZnRDdXJzb3IgPSBuZXdMZWZ0IC0gdGhpcy5oeWJyaWRSYW5nZTtcclxuICAgICAgICB0aGlzLmZhclJpZ2h0Q3Vyc29yID0gbmV3UmlnaHQgKyB0aGlzLmh5YnJpZFJhbmdlO1xyXG4gICAgICAgIHRoaXMuZmFyVG9wQ3Vyc29yID0gbmV3VG9wIC0gdGhpcy5oeWJyaWRSYW5nZTtcclxuICAgICAgICB0aGlzLmZhckJvdHRvbUN1cnNvciA9IG5ld0JvdHRvbSArIHRoaXMuaHlicmlkUmFuZ2U7XHJcbiAgICB9XHJcbiAgICBoaWRlQWxsKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5pc0luaXRpYWxpemVkKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgdGhpcy5pc0luaXRpYWxpemVkID0gZmFsc2U7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMubGVmdFNvZnRDdXJzb3I7IGkgPD0gdGhpcy5yaWdodFNvZnRDdXJzb3I7IGkrKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gdGhpcy50b3BTb2Z0Q3Vyc29yOyBqIDw9IHRoaXMuYm90dG9tU29mdEN1cnNvcjsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uT3V0T2ZSYW5nZShpLCBqKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG9uT3V0T2ZSYW5nZShpLCBqKSB7XHJcbiAgICAgICAgc3dpdGNoICh0aGlzLm9wdGltaXphdGlvbikge1xyXG4gICAgICAgICAgICBjYXNlIFwiY3VsbGluZ1wiOlxyXG4gICAgICAgICAgICBjYXNlIFwiaHlicmlkXCI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGVDaHVuayhpLCBqKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwidW5sb2FkaW5nXCI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZUNodW5rKGksIGopO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgYWRkUHJvcCh4LCB5LCBwcm9wKSB7XHJcbiAgICAgICAgdGhpcy5jaHVua3NbeF1beV0ucHJvcHMucHVzaChwcm9wKTtcclxuICAgIH1cclxufTtcclxuQmFja2Ryb3AyZCA9IF9fZGVjb3JhdGUoW1xyXG4gICAgZHJhd2FibGVfMmRfMS5kcmF3YWJsZTJkLFxyXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxyXG5dLCBCYWNrZHJvcDJkKTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gQmFja2Ryb3AyZDtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YmFja2Ryb3AtMmQuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn07XHJcbnZhciBfX21ldGFkYXRhID0gKHRoaXMgJiYgdGhpcy5fX21ldGFkYXRhKSB8fCBmdW5jdGlvbiAoaywgdikge1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKGssIHYpO1xyXG59O1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmNvbnN0IGdlYXIzZW5naW5lXzEgPSByZXF1aXJlKFwiZ2VhcjNlbmdpbmVcIik7XHJcbmNvbnN0IGRyYXdhYmxlXzJkXzEgPSByZXF1aXJlKFwiLi9kcmF3YWJsZS0yZFwiKTtcclxubGV0IENhbWVyYTJkID0gY2xhc3MgQ2FtZXJhMmQgZXh0ZW5kcyBnZWFyM2VuZ2luZV8xLkdhbWVPYmplY3Qge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLiNzaGFrZU1hZ25pdHVkZSA9IDA7XHJcbiAgICAgICAgdGhpcy4jdGFyZ2V0U2hha2VNYWduaXR1ZGUgPSAwO1xyXG4gICAgICAgIHRoaXMuc2hha2VWZWN0b3JNID0gbmV3IGdlYXIzZW5naW5lXzEuVmVjdG9yMygpO1xyXG4gICAgICAgIHRoaXMuZGVidWdTY2FsZSA9IDE7XHJcbiAgICAgICAgdGhpcy5sYXN0U2NhbGUgPSAxO1xyXG4gICAgICAgIHRoaXMubGFzdFBvaW50ZXJTY3JlZW5Qb3NpdGlvbiA9IG5ldyBnZWFyM2VuZ2luZV8xLlZlY3RvcjMoKTtcclxuICAgICAgICB0aGlzLnZpZXdXaWR0aE0gPSB0aGlzLnZpZXdXaWR0aE0gPz8gODA7XHJcbiAgICAgICAgdGhpcy52aWV3SGVpZ2h0TSA9IHRoaXMudmlld0hlaWdodE0gPz8gNDU7XHJcbiAgICAgICAgdGhpcy5kaXNhYmxlRHJhd1VwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5yZXNpemUoKTtcclxuICAgIH1cclxuICAgICNzaGFrZU1hZ25pdHVkZTtcclxuICAgICN0YXJnZXRTaGFrZU1hZ25pdHVkZTtcclxuICAgIHNoYWtlKG1hZ25pdHVkZSkge1xyXG4gICAgICAgIHRoaXMuI3RhcmdldFNoYWtlTWFnbml0dWRlICs9IG1hZ25pdHVkZTtcclxuICAgIH1cclxuICAgIHJlc2l6ZSgpIHtcclxuICAgICAgICB0aGlzLndpZHRoUHggPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICAgICAgICB0aGlzLmhlaWdodFB4ID0gd2luZG93LmlubmVySGVpZ2h0O1xyXG4gICAgfVxyXG4gICAgZHJhd1VwZGF0ZShkdCwgdGltZSwgZnJhbWVzKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuI3RhcmdldFNoYWtlTWFnbml0dWRlID4gMCB8fCB0aGlzLiNzaGFrZU1hZ25pdHVkZSA+IDAgfHwgdGhpcy5zaGFrZVZlY3Rvck0ueCB8fCB0aGlzLnNoYWtlVmVjdG9yTS55KSB7XHJcbiAgICAgICAgICAgIHRoaXMuI3NoYWtlTWFnbml0dWRlICs9ICh0aGlzLiN0YXJnZXRTaGFrZU1hZ25pdHVkZSAtIHRoaXMuI3NoYWtlTWFnbml0dWRlKSAqIDAuMjtcclxuICAgICAgICAgICAgdGhpcy4jdGFyZ2V0U2hha2VNYWduaXR1ZGUgKj0gMC45O1xyXG4gICAgICAgICAgICBpZiAodGhpcy4jc2hha2VNYWduaXR1ZGUgPCAwLjEpXHJcbiAgICAgICAgICAgICAgICB0aGlzLiNzaGFrZU1hZ25pdHVkZSA9IDA7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLiN0YXJnZXRTaGFrZU1hZ25pdHVkZSA8IDAuMSlcclxuICAgICAgICAgICAgICAgIHRoaXMuI3RhcmdldFNoYWtlTWFnbml0dWRlID0gMDtcclxuICAgICAgICAgICAgdGhpcy5zaGFrZVZlY3Rvck0ueCArPSAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiB0aGlzLiNzaGFrZU1hZ25pdHVkZTtcclxuICAgICAgICAgICAgdGhpcy5zaGFrZVZlY3Rvck0ueSArPSAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiB0aGlzLiNzaGFrZU1hZ25pdHVkZTtcclxuICAgICAgICAgICAgdGhpcy5zaGFrZVZlY3Rvck0ueCAqPSAwLjk7XHJcbiAgICAgICAgICAgIHRoaXMuc2hha2VWZWN0b3JNLnkgKj0gMC45O1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuI3NoYWtlTWFnbml0dWRlICYmICF0aGlzLiN0YXJnZXRTaGFrZU1hZ25pdHVkZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKHRoaXMuc2hha2VWZWN0b3JNLngpIDwgMC4xKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hha2VWZWN0b3JNLnggPSAwO1xyXG4gICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKHRoaXMuc2hha2VWZWN0b3JNLnkpIDwgMC4xKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hha2VWZWN0b3JNLnkgPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnRhcmdldE9iamVjdCkge1xyXG4gICAgICAgICAgICBsZXQgZHYgPSB0aGlzLnRhcmdldE9iamVjdC5kcmF3UG9zaXRpb24uc3VidHJhY3QodGhpcy5kcmF3UG9zaXRpb24pO1xyXG4gICAgICAgICAgICB0aGlzLmRyYXdQb3NpdGlvbi5zZXRUb1ZlY3Rvcih0aGlzLnRhcmdldE9iamVjdC5kcmF3UG9zaXRpb24uYWRkKHRoaXMuc2hha2VWZWN0b3JNKSk7XHJcbiAgICAgICAgICAgIHRoaXMuZHJhd1ZlbG9jaXR5LnNldFRvVmVjdG9yKHRoaXMudGFyZ2V0T2JqZWN0LmRyYXdWZWxvY2l0eSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmRyYXdQb3NpdGlvbi5zZXRUb1ZlY3Rvcih0aGlzLmRyYXdQb3NpdGlvbi5hZGQodGhpcy5zaGFrZVZlY3Rvck0pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHZpZXdIUCA9IGdlYXIzZW5naW5lXzEuVXRpbC5tVG9QKHRoaXMudmlld0hlaWdodE0pO1xyXG4gICAgICAgIGxldCB2aWV3V1AgPSBnZWFyM2VuZ2luZV8xLlV0aWwubVRvUCh0aGlzLnZpZXdXaWR0aE0pO1xyXG4gICAgICAgIGxldCBkZXNpcmVkUmF0aW8gPSB0aGlzLnZpZXdIZWlnaHRNIC8gdGhpcy52aWV3V2lkdGhNO1xyXG4gICAgICAgIGxldCBhdmFpbGFibGVSYXRpbyA9IHRoaXMuaGVpZ2h0UHggLyB0aGlzLndpZHRoUHg7XHJcbiAgICAgICAgbGV0IHNjYWxlID0gMTtcclxuICAgICAgICBpZiAoZGVzaXJlZFJhdGlvID4gYXZhaWxhYmxlUmF0aW8pIHtcclxuICAgICAgICAgICAgc2NhbGUgPSB0aGlzLmhlaWdodFB4IC8gdmlld0hQO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgc2NhbGUgPSB0aGlzLndpZHRoUHggLyB2aWV3V1A7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubGFzdFNjYWxlID0gc2NhbGUgKiB0aGlzLmRlYnVnU2NhbGU7XHJcbiAgICAgICAgdGhpcy5waXhpV29ybGQucGl4aVZpZXcuc2NhbGUuc2V0KHRoaXMubGFzdFNjYWxlLCB0aGlzLmxhc3RTY2FsZSk7XHJcbiAgICAgICAgdGhpcy5waXhpV29ybGQucGl4aVZpZXcueCA9ICgtdGhpcy5kcmF3UG9zaXRpb24ueCkgKiB0aGlzLmxhc3RTY2FsZSArICh0aGlzLndpZHRoUHggLyAyKTtcclxuICAgICAgICB0aGlzLnBpeGlXb3JsZC5waXhpVmlldy55ID0gKC10aGlzLmRyYXdQb3NpdGlvbi55KSAqIHRoaXMubGFzdFNjYWxlICsgKHRoaXMuaGVpZ2h0UHggLyAyKTtcclxuICAgICAgICBmb3IgKGxldCBiIGluIHRoaXMuY2FudmFzMmRQbHVnaW4uYmFja2Ryb3BzKSB7XHJcbiAgICAgICAgICAgIGxldCBiYWNrZHJvcCA9IHRoaXMuY2FudmFzMmRQbHVnaW4uYmFja2Ryb3BzW2JdO1xyXG4gICAgICAgICAgICBsZXQgbWluWENodW5rID0gTWF0aC5mbG9vcigodGhpcy5kcmF3UG9zaXRpb24ueCAqIGJhY2tkcm9wLnBhcmFsbGF4U2NhbGUgLSB2aWV3V1AgLyAyKSAvIGJhY2tkcm9wLmNodW5rU2l6ZSkgLSAxO1xyXG4gICAgICAgICAgICBsZXQgbWF4WENodW5rID0gTWF0aC5mbG9vcigodGhpcy5kcmF3UG9zaXRpb24ueCAqIGJhY2tkcm9wLnBhcmFsbGF4U2NhbGUgKyB2aWV3V1AgLyAyKSAvIGJhY2tkcm9wLmNodW5rU2l6ZSkgKyAxO1xyXG4gICAgICAgICAgICBsZXQgbWluWUNodW5rID0gTWF0aC5mbG9vcigodGhpcy5kcmF3UG9zaXRpb24ueSAqIGJhY2tkcm9wLnBhcmFsbGF4U2NhbGUgLSB2aWV3SFAgLyAyKSAvIGJhY2tkcm9wLmNodW5rU2l6ZSkgLSAxO1xyXG4gICAgICAgICAgICBsZXQgbWF4WUNodW5rID0gTWF0aC5mbG9vcigodGhpcy5kcmF3UG9zaXRpb24ueSAqIGJhY2tkcm9wLnBhcmFsbGF4U2NhbGUgKyB2aWV3SFAgLyAyKSAvIGJhY2tkcm9wLmNodW5rU2l6ZSkgKyAxO1xyXG4gICAgICAgICAgICBpZiAobWluWENodW5rID4gYmFja2Ryb3AucmlnaHRTb2Z0Q3Vyc29yIHx8IG1heFhDaHVuayA8IGJhY2tkcm9wLmxlZnRTb2Z0Q3Vyc29yIHx8IG1pbllDaHVuayA+IGJhY2tkcm9wLmJvdHRvbVNvZnRDdXJzb3IgfHwgbWF4WUNodW5rIDwgYmFja2Ryb3AudG9wU29mdEN1cnNvcikge1xyXG4gICAgICAgICAgICAgICAgYmFja2Ryb3AuaGlkZUFsbCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJhY2tkcm9wLnVwZGF0ZUN1cnNvcnMobWluWUNodW5rLCBtYXhZQ2h1bmssIG1pblhDaHVuaywgbWF4WENodW5rKTtcclxuICAgICAgICAgICAgYmFja2Ryb3Auc2V0RHJhd1Bvc2l0aW9uKG5ldyBnZWFyM2VuZ2luZV8xLlZlY3RvcjModGhpcy5kcmF3UG9zaXRpb24ueCAqICgxIC0gYmFja2Ryb3AucGFyYWxsYXhTY2FsZSksIHRoaXMuZHJhd1Bvc2l0aW9uLnkgKiAoMSAtIGJhY2tkcm9wLnBhcmFsbGF4U2NhbGUpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG5DYW1lcmEyZCA9IF9fZGVjb3JhdGUoW1xyXG4gICAgZHJhd2FibGVfMmRfMS5kcmF3YWJsZTJkLFxyXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxyXG5dLCBDYW1lcmEyZCk7XHJcbmV4cG9ydHMuZGVmYXVsdCA9IENhbWVyYTJkO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1jYW1lcmEtMmQuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuY29uc3QgZzNlX2NsaWVudF8xID0gcmVxdWlyZShcImczZS1jbGllbnRcIik7XHJcbmNvbnN0IGdlYXIzZW5naW5lXzEgPSByZXF1aXJlKFwiZ2VhcjNlbmdpbmVcIik7XHJcbmNvbnN0IGNhbWVyYV8yZF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL2NhbWVyYS0yZFwiKSk7XHJcbmNvbnN0IHBpeGlfd29ybGRfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9waXhpLXdvcmxkXCIpKTtcclxuY2xhc3MgQ2FudmFzMmRQbHVnaW4gZXh0ZW5kcyBnZWFyM2VuZ2luZV8xLkdhbWVJbnN0YW5jZVBsdWdpbiB7XHJcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuZGVwZW5kZW5jaWVzID0gW2czZV9jbGllbnRfMS5HYW1lQ2xpZW50UGx1Z2luXTtcclxuICAgICAgICB0aGlzLmxhc3RLbm93blBoeXNpY3NVcGRhdGUgPSAwO1xyXG4gICAgICAgIHRoaXMuYmFja2Ryb3BzID0ge307XHJcbiAgICAgICAgdGhpcy5tYXhEdCA9IDAuMTtcclxuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcclxuICAgIH1cclxuICAgIGluaXRpYWxpemUoKSB7XHJcbiAgICAgICAgdGhpcy5nYW1lQ2xpZW50UGx1Z2luID0gdGhpcy5nYW1lSW5zdGFuY2UuZ2V0UGx1Z2luKGczZV9jbGllbnRfMS5HYW1lQ2xpZW50UGx1Z2luKTtcclxuICAgICAgICB0aGlzLmdhbWVJbnN0YW5jZS5vbihcImdhbWVTdGFydFwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucGl4aVdvcmxkID0gdGhpcy5nYW1lSW5zdGFuY2UubWFrZShwaXhpX3dvcmxkXzEuZGVmYXVsdCwgcHcgPT4ge1xyXG4gICAgICAgICAgICAgICAgcHcudGFyZ2V0ID0gdGhpcy5jb25maWc/LnRhcmdldDtcclxuICAgICAgICAgICAgICAgIHB3LmRpc2FibGVTY3JvbGwgPSB0aGlzLmNvbmZpZz8uZGlzYWJsZVNjcm9sbDtcclxuICAgICAgICAgICAgICAgIHB3LmJhY2tncm91bmRDb2xvciA9IHRoaXMuY29uZmlnPy5iYWNrZ3JvdW5kQ29sb3IgPz8gcHcuYmFja2dyb3VuZENvbG9yO1xyXG4gICAgICAgICAgICAgICAgcHcudXNlQmxpbmRlcnMgPSB0aGlzLmNvbmZpZz8uZW5hYmxlQmxpbmRlcnMgPz8gdHJ1ZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhID0gdGhpcy5nYW1lSW5zdGFuY2UubWFrZShjYW1lcmFfMmRfMS5kZWZhdWx0KTtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmdhbWVDbGllbnRQbHVnaW4ucGFyYW1zLnVzZVJlYWxDdXJzb3IpIHtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnJlc2l6ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZ2FtZUluc3RhbmNlLm9uKFwiZ2FtZU92ZXJcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmdhbWVJbnN0YW5jZS5kZXN0cm95T2JqZWN0KHRoaXMuY2FtZXJhLCBnZWFyM2VuZ2luZV8xLkRlYXRoVHlwZS5HYW1lT3Zlcik7XHJcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5nYW1lSW5zdGFuY2UuZGVzdHJveU9iamVjdCh0aGlzLnBpeGlXb3JsZCwgZ2VhcjNlbmdpbmVfMS5EZWF0aFR5cGUuR2FtZU92ZXIpO1xyXG4gICAgICAgICAgICB0aGlzLnBpeGlXb3JsZCA9IG51bGw7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5nYW1lSW5zdGFuY2Uub24oXCJyZW5kZXJVcGRhdGVcIiwgKGR0LCBub3csIGZyYW1lcykgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZHQgPiB0aGlzLm1heER0KVxyXG4gICAgICAgICAgICAgICAgZHQgPSB0aGlzLm1heER0O1xyXG4gICAgICAgICAgICB0aGlzLnBpeGlXb3JsZC5kcmF3VXBkYXRlKGR0LCBub3csIGZyYW1lcyk7XHJcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhICYmIHRoaXMuY2FtZXJhLmRyYXdVcGRhdGUoZHQsIG5vdywgZnJhbWVzKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmdhbWVJbnN0YW5jZS5vbihcInJlc2l6ZVwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzaXplKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5nYW1lSW5zdGFuY2Uub24oXCJwaHlzaWNzVXBkYXRlXCIsIChkdCwgdGltZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmxhc3RLbm93blBoeXNpY3NVcGRhdGUgPSBwZXJmb3JtYW5jZS5ub3coKSAvIDEwMDA7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5nYW1lSW5zdGFuY2UucmVnaXN0ZXJSZW1vdGVUcmlnZ2VySGFuZGxlcihcInRyYWNrT2JqZWN0XCIsIChhcmdzKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNhbWVyYSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IG9iamVjdCA9IHRoaXMuZ2FtZUluc3RhbmNlLnJlbW90ZUdhbWVPYmplY3RzQnlJZFthcmdzLmRhdGFbMF0/LnZhbHVlXTtcclxuICAgICAgICAgICAgICAgIGlmIChvYmplY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob2JqZWN0LmlzKFwiZHJhd2FibGUtMmRcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW1lcmEudGFyZ2V0T2JqZWN0ID0gb2JqZWN0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGV4dCA9IGdlYXIzZW5naW5lXzEuR2FtZU9iamVjdC5nZXRFeHRlbnNpb25CeUxhYmVsKG9iamVjdCwgXCJkcmF3YWJsZS0yZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV4dClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhLnRhcmdldE9iamVjdCA9IGV4dDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmFibGUgdG8gdHJhY2sgb2JqZWN0ICR7b2JqZWN0LmlkfSBiZWNhdXNlIGl0IGlzIG5vdCBkcmF3YWJsZSBhbmQgZG9lc24ndCBoYXZlIGEgZHJhd2FibGUgZXh0ZW5zaW9uLmApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVGhlIHNlcnZlciBhdHRlbXB0ZWQgdG8gdHJhY2sgYW4gb2JqZWN0LCBidXQgdGhlIG9iamN0IGNvdWxkIG5vdCBiZSBmb3VuZCBjbGllbnQtc2lkZS4gUmVtb3RlIElEOiAke2FyZ3MuZGF0YS5pZH0uYCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgc2VydmVyIGF0dGVtcHRlZCB0byB0cmFjayBhbiBvYmplY3QsIGJ1dCB0aGUgY2FtZXJhIGRvZXMgbm90IGV4aXN0LlwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmVzaXplKCkge1xyXG4gICAgICAgIHRoaXMucGl4aVdvcmxkICYmIHRoaXMucGl4aVdvcmxkLnJlc2l6ZSgpO1xyXG4gICAgICAgIHRoaXMuY2FtZXJhICYmIHRoaXMuY2FtZXJhLnJlc2l6ZSgpO1xyXG4gICAgfVxyXG4gICAgZGVzdHJveSgpIHsgfVxyXG59XHJcbmV4cG9ydHMuZGVmYXVsdCA9IENhbnZhczJkUGx1Z2luO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1jYW52YXMtMmQtcGx1Z2luLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59O1xyXG52YXIgX19tZXRhZGF0YSA9ICh0aGlzICYmIHRoaXMuX19tZXRhZGF0YSkgfHwgZnVuY3Rpb24gKGssIHYpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShrLCB2KTtcclxufTtcclxudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLkN1cnNvcjJkUGFpbnRlciA9IHZvaWQgMDtcclxuY29uc3QgZ2VhcjNlbmdpbmVfMSA9IHJlcXVpcmUoXCJnZWFyM2VuZ2luZVwiKTtcclxuY29uc3QgZHJhd2FibGVfMmRfMSA9IHJlcXVpcmUoXCIuL2RyYXdhYmxlLTJkXCIpO1xyXG5jb25zdCBsaWJzX2dmeF8yZF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL2xpYnMuZ2Z4LjJkXCIpKTtcclxuY2xhc3MgQ3Vyc29yMmQgZXh0ZW5kcyBnZWFyM2VuZ2luZV8xLkdhbWVPYmplY3Qge1xyXG59XHJcbmV4cG9ydHMuZGVmYXVsdCA9IEN1cnNvcjJkO1xyXG5sZXQgQ3Vyc29yMmRQYWludGVyID0gY2xhc3MgQ3Vyc29yMmRQYWludGVyIGV4dGVuZHMgZ2VhcjNlbmdpbmVfMS5HYW1lT2JqZWN0IHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy50YXJnZXQucGFpbnRlciA9IHRoaXM7XHJcbiAgICB9XHJcbiAgICBkcmF3KCkge1xyXG4gICAgICAgIGxldCB3ID0gMjA7XHJcbiAgICAgICAgbGV0IHQgPSAyO1xyXG4gICAgICAgIGxldCBiID0gMTtcclxuICAgICAgICBsZXQgZGlvYiA9IG5ldyBsaWJzX2dmeF8yZF8xLmRlZmF1bHQuR3JhcGhpY3MoKTtcclxuICAgICAgICBkaW9iLmJlZ2luRmlsbCgwKTtcclxuICAgICAgICBkaW9iLmRyYXdSZWN0KC13IC8gMiAtIGIsIC10IC8gMiAtIGIsIHcgKyAyICogYiwgdCArIDIgKiBiKTtcclxuICAgICAgICBkaW9iLmRyYXdSZWN0KC10IC8gMiAtIGIsIC13IC8gMiAtIGIsIHQgKyAyICogYiwgdyArIDIgKiBiKTtcclxuICAgICAgICBkaW9iLmJlZ2luRmlsbCgweGZmZmZmZik7XHJcbiAgICAgICAgZGlvYi5kcmF3UmVjdCgtdyAvIDIsIC10IC8gMiwgdywgdCk7XHJcbiAgICAgICAgZGlvYi5kcmF3UmVjdCgtdCAvIDIsIC13IC8gMiwgdCwgdyk7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5T2JqZWN0ID0gZGlvYjtcclxuICAgIH1cclxuICAgIGRyYXdVcGRhdGUoZHQsIHRpbWUsIGZyYW1lcykge1xyXG4gICAgfVxyXG59O1xyXG5DdXJzb3IyZFBhaW50ZXIgPSBfX2RlY29yYXRlKFtcclxuICAgIGRyYXdhYmxlXzJkXzEuZHJhd2FibGUyZCxcclxuICAgICgwLCBnZWFyM2VuZ2luZV8xLmV4dGVuc2lvbikoQ3Vyc29yMmQpLFxyXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxyXG5dLCBDdXJzb3IyZFBhaW50ZXIpO1xyXG5leHBvcnRzLkN1cnNvcjJkUGFpbnRlciA9IEN1cnNvcjJkUGFpbnRlcjtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y3Vyc29yLTJkLmpzLm1hcCJdLCJuYW1lcyI6WyJfX2RlY29yYXRlIiwidGhpcyIsImRlY29yYXRvcnMiLCJ0YXJnZXQiLCJrZXkiLCJkZXNjIiwiZCIsImMiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJyIiwiT2JqZWN0IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiUmVmbGVjdCIsImRlY29yYXRlIiwiaSIsImRlZmluZVByb3BlcnR5IiwiX19tZXRhZGF0YSIsImsiLCJ2IiwibWV0YWRhdGEiLCJfX2ltcG9ydERlZmF1bHQiLCJtb2QiLCJfX2VzTW9kdWxlIiwiZXhwb3J0cyIsInZhbHVlIiwiZ2VhcjNlbmdpbmVfMSIsIl8xIiwiZHJhd2FibGVfMmRfMSIsImxpYnNfZ2Z4XzJkXzEiLCJCYWNrZHJvcDJkIiwiR2FtZU9iamVjdCIsImNvbnN0cnVjdG9yIiwic3VwZXIiLCJjaHVua3MiLCJjYW52YXNQbHVnaW4iLCJnaSIsImdldFBsdWdpbiIsIkNhbnZhczJkUGx1Z2luIiwiaXNJbml0aWFsaXplZCIsImxlZnRTb2Z0Q3Vyc29yIiwicmlnaHRTb2Z0Q3Vyc29yIiwidG9wU29mdEN1cnNvciIsImJvdHRvbVNvZnRDdXJzb3IiLCJmYXJMZWZ0Q3Vyc29yIiwiZmFyUmlnaHRDdXJzb3IiLCJmYXJUb3BDdXJzb3IiLCJmYXJCb3R0b21DdXJzb3IiLCJvcHRpbWl6YXRpb24iLCJjaHVua1NpemUiLCJwYXJhbGxheFNjYWxlIiwiYmFja2Ryb3BzIiwiaWQiLCJoeWJyaWRSYW5nZSIsImRpc3BsYXlPYmplY3QiLCJkZWZhdWx0IiwiQ29udGFpbmVyIiwibG9hZENodW5rIiwieCIsInkiLCJ2aXNpYmxlIiwicHJvcHMiLCJuZXdDaHVuayIsInJlbmRlckNodW5rIiwicG9zaXRpb24iLCJzZXQiLCJhZGRDaGlsZCIsImhpZGVDaHVuayIsIlgiLCJZIiwicCIsImNvbnNvbGUiLCJsb2ciLCJkZWxldGVDaHVuayIsInJvdyIsImNodW5rIiwicmVtb3ZlQ2hpbGQiLCJkZXN0cm95T2JqZWN0IiwiRGVhdGhUeXBlIiwiVW5sb2FkZWQiLCJkZXN0cm95IiwiZGVhdGhUeXBlIiwidXBkYXRlQ3Vyc29ycyIsIm5ld1RvcCIsIm5ld0JvdHRvbSIsIm5ld0xlZnQiLCJuZXdSaWdodCIsImoiLCJvbk91dE9mUmFuZ2UiLCJoaWRlQWxsIiwiYWRkUHJvcCIsInByb3AiLCJwdXNoIiwiZHJhd2FibGUyZCIsIkNhbWVyYTJkIiwic2hha2VWZWN0b3JNIiwiVmVjdG9yMyIsImRlYnVnU2NhbGUiLCJsYXN0U2NhbGUiLCJsYXN0UG9pbnRlclNjcmVlblBvc2l0aW9uIiwidmlld1dpZHRoTSIsInZpZXdIZWlnaHRNIiwiZGlzYWJsZURyYXdVcGRhdGUiLCJyZXNpemUiLCJzaGFrZSIsIm1hZ25pdHVkZSIsIndpZHRoUHgiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiaGVpZ2h0UHgiLCJpbm5lckhlaWdodCIsImRyYXdVcGRhdGUiLCJkdCIsInRpbWUiLCJmcmFtZXMiLCJNYXRoIiwicmFuZG9tIiwiYWJzIiwidGFyZ2V0T2JqZWN0IiwiZHJhd1Bvc2l0aW9uIiwic3VidHJhY3QiLCJzZXRUb1ZlY3RvciIsImFkZCIsImRyYXdWZWxvY2l0eSIsInZpZXdIUCIsIlV0aWwiLCJtVG9QIiwidmlld1dQIiwic2NhbGUiLCJwaXhpV29ybGQiLCJwaXhpVmlldyIsImIiLCJjYW52YXMyZFBsdWdpbiIsImJhY2tkcm9wIiwibWluWENodW5rIiwiZmxvb3IiLCJtYXhYQ2h1bmsiLCJtaW5ZQ2h1bmsiLCJtYXhZQ2h1bmsiLCJzZXREcmF3UG9zaXRpb24iLCJnM2VfY2xpZW50XzEiLCJjYW1lcmFfMmRfMSIsInBpeGlfd29ybGRfMSIsIkdhbWVJbnN0YW5jZVBsdWdpbiIsImNvbmZpZyIsImRlcGVuZGVuY2llcyIsIkdhbWVDbGllbnRQbHVnaW4iLCJsYXN0S25vd25QaHlzaWNzVXBkYXRlIiwibWF4RHQiLCJpbml0aWFsaXplIiwiZ2FtZUNsaWVudFBsdWdpbiIsImdhbWVJbnN0YW5jZSIsIm9uIiwibWFrZSIsInB3IiwiZGlzYWJsZVNjcm9sbCIsImJhY2tncm91bmRDb2xvciIsInVzZUJsaW5kZXJzIiwiZW5hYmxlQmxpbmRlcnMiLCJjYW1lcmEiLCJwYXJhbXMiLCJ1c2VSZWFsQ3Vyc29yIiwiR2FtZU92ZXIiLCJub3ciLCJwZXJmb3JtYW5jZSIsInJlZ2lzdGVyUmVtb3RlVHJpZ2dlckhhbmRsZXIiLCJhcmdzIiwiRXJyb3IiLCJvYmplY3QiLCJyZW1vdGVHYW1lT2JqZWN0c0J5SWQiLCJkYXRhIiwiaXMiLCJleHQiLCJnZXRFeHRlbnNpb25CeUxhYmVsIiwiQ3Vyc29yMmRQYWludGVyIiwiQ3Vyc29yMmQiLCJwYWludGVyIiwiZHJhdyIsImRpb2IiLCJHcmFwaGljcyIsImJlZ2luRmlsbCIsImRyYXdSZWN0IiwidyIsInQiLCJleHRlbnNpb24iXSwic291cmNlUm9vdCI6IiJ9